/*!
 * jQuery JavaScript Library v1.11.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-17T15:27Z
 */
!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=oe.type(t);return"function"===n||oe.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(oe.isFunction(e))return oe.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return oe.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(de.test(e))return oe.filter(e,t,n);e=oe.filter(e,t)}return oe.grep(t,function(t){return oe.inArray(t,e)>=0!==n})}function o(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function r(t){var e=be[t]={};return oe.each(t.match(ye)||[],function(t,n){e[n]=!0}),e}function s(){fe.addEventListener?(fe.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(fe.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(fe.addEventListener||"load"===event.type||"complete"===fe.readyState)&&(s(),oe.ready())}function l(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace(Ee,"-$1").toLowerCase();if(n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:we.test(n)?oe.parseJSON(n):n}catch(o){}oe.data(t,e,n)}else n=void 0}return n}function h(t){var e;for(e in t)if(("data"!==e||!oe.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function u(t,e,n,i){if(oe.acceptData(t)){var o,r,s=oe.expando,a=t.nodeType,l=a?oe.cache:t,h=a?t[s]:t[s]&&s;if(h&&l[h]&&(i||l[h].data)||void 0!==n||"string"!=typeof e)return h||(h=a?t[s]=J.pop()||oe.guid++:s),l[h]||(l[h]=a?{}:{toJSON:oe.noop}),("object"==typeof e||"function"==typeof e)&&(i?l[h]=oe.extend(l[h],e):l[h].data=oe.extend(l[h].data,e)),r=l[h],i||(r.data||(r.data={}),r=r.data),void 0!==n&&(r[oe.camelCase(e)]=n),"string"==typeof e?(o=r[e],null==o&&(o=r[oe.camelCase(e)])):o=r,o}}function c(t,e,n){if(oe.acceptData(t)){var i,o,r=t.nodeType,s=r?oe.cache:t,a=r?t[oe.expando]:oe.expando;if(s[a]){if(e&&(i=n?s[a]:s[a].data)){oe.isArray(e)?e=e.concat(oe.map(e,oe.camelCase)):e in i?e=[e]:(e=oe.camelCase(e),e=e in i?[e]:e.split(" ")),o=e.length;for(;o--;)delete i[e[o]];if(n?!h(i):!oe.isEmptyObject(i))return}(n||(delete s[a].data,h(s[a])))&&(r?oe.cleanData([t],!0):ne.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}function d(){return!0}function p(){return!1}function f(){try{return fe.activeElement}catch(t){}}function m(t){var e=Ue.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function _(t,e){var n,i,o=0,r=typeof t.getElementsByTagName!==Ie?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Ie?t.querySelectorAll(e||"*"):void 0;if(!r)for(r=[],n=t.childNodes||t;null!=(i=n[o]);o++)!e||oe.nodeName(i,e)?r.push(i):oe.merge(r,_(i,e));return void 0===e||e&&oe.nodeName(t,e)?oe.merge([t],r):r}function g(t){Ne.test(t.type)&&(t.defaultChecked=t.checked)}function v(t,e){return oe.nodeName(t,"table")&&oe.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function y(t){return t.type=(null!==oe.find.attr(t,"type"))+"/"+t.type,t}function b(t){var e=Ye.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function k(t,e){for(var n,i=0;null!=(n=t[i]);i++)oe._data(n,"globalEval",!e||oe._data(e[i],"globalEval"))}function C(t,e){if(1===e.nodeType&&oe.hasData(t)){var n,i,o,r=oe._data(t),s=oe._data(e,r),a=r.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,o=a[n].length;o>i;i++)oe.event.add(e,n,a[n][i])}s.data&&(s.data=oe.extend({},s.data))}}function I(t,e){var n,i,o;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ne.noCloneEvent&&e[oe.expando]){o=oe._data(e);for(i in o.events)oe.removeEvent(e,i,o.handle);e.removeAttribute(oe.expando)}"script"===n&&e.text!==t.text?(y(e).text=t.text,b(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ne.html5Clone&&t.innerHTML&&!oe.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Ne.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function w(e,n){var i,o=oe(n.createElement(e)).appendTo(n.body),r=t.getDefaultComputedStyle&&(i=t.getDefaultComputedStyle(o[0]))?i.display:oe.css(o[0],"display");return o.detach(),r}function E(t){var e=fe,n=Ze[t];return n||(n=w(t,e),"none"!==n&&n||(Qe=(Qe||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Qe[0].contentWindow||Qe[0].contentDocument).document,e.write(),e.close(),n=w(t,e),Qe.detach()),Ze[t]=n),n}function S(t,e){return{get:function(){var n=t();if(null!=n)return n?void delete this.get:(this.get=e).apply(this,arguments)}}}function x(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,o=pn.length;o--;)if(e=pn[o]+n,e in t)return e;return i}function D(t,e){for(var n,i,o,r=[],s=0,a=t.length;a>s;s++)i=t[s],i.style&&(r[s]=oe._data(i,"olddisplay"),n=i.style.display,e?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&De(i)&&(r[s]=oe._data(i,"olddisplay",E(i.nodeName)))):(o=De(i),(n&&"none"!==n||!o)&&oe._data(i,"olddisplay",o?n:oe.css(i,"display"))));for(s=0;a>s;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[s]||"":"none"));return t}function T(t,e,n){var i=hn.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function N(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,s=0;4>r;r+=2)"margin"===n&&(s+=oe.css(t,n+xe[r],!0,o)),i?("content"===n&&(s-=oe.css(t,"padding"+xe[r],!0,o)),"margin"!==n&&(s-=oe.css(t,"border"+xe[r]+"Width",!0,o))):(s+=oe.css(t,"padding"+xe[r],!0,o),"padding"!==n&&(s+=oe.css(t,"border"+xe[r]+"Width",!0,o)));return s}function O(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=tn(t),s=ne.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,r);if(0>=o||null==o){if(o=en(t,e,r),(0>o||null==o)&&(o=t.style[e]),on.test(o))return o;i=s&&(ne.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+N(t,e,n||(s?"border":"content"),i,r)+"px"}function M(t,e,n,i,o){return new M.prototype.init(t,e,n,i,o)}function A(){return setTimeout(function(){fn=void 0}),fn=oe.now()}function P(t,e){var n,i={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)n=xe[o],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function L(t,e,n){for(var i,o=(bn[e]||[]).concat(bn["*"]),r=0,s=o.length;s>r;r++)if(i=o[r].call(n,e,t))return i}function U(t,e,n){var i,o,r,s,a,l,h,u,c=this,d={},p=t.style,f=t.nodeType&&De(t),m=oe._data(t,"fxshow");n.queue||(a=oe._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,oe.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],h=oe.css(t,"display"),u="none"===h?oe._data(t,"olddisplay")||E(t.nodeName):h,"inline"===u&&"none"===oe.css(t,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==E(t.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",ne.shrinkWrapBlocks()||c.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],_n.exec(o)){if(delete e[i],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!m||void 0===m[i])continue;f=!0}d[i]=m&&m[i]||oe.style(t,i)}else h=void 0;if(oe.isEmptyObject(d))"inline"===("none"===h?E(t.nodeName):h)&&(p.display=h);else{m?"hidden"in m&&(f=m.hidden):m=oe._data(t,"fxshow",{}),r&&(m.hidden=!f),f?oe(t).show():c.done(function(){oe(t).hide()}),c.done(function(){var e;oe._removeData(t,"fxshow");for(e in d)oe.style(t,e,d[e])});for(i in d)s=L(f?m[i]:0,i,c),i in m||(m[i]=s.start,f&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function F(t,e){var n,i,o,r,s;for(n in t)if(i=oe.camelCase(n),o=e[i],r=t[n],oe.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),s=oe.cssHooks[i],s&&"expand"in s){r=s.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=o)}else e[i]=o}function B(t,e,n){var i,o,r=0,s=yn.length,a=oe.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=fn||A(),n=Math.max(0,h.startTime+h.duration-e),i=n/h.duration||0,r=1-i,s=0,l=h.tweens.length;l>s;s++)h.tweens[s].run(r);return a.notifyWith(t,[h,r,n]),1>r&&l?n:(a.resolveWith(t,[h]),!1)},h=a.promise({elem:t,props:oe.extend({},e),opts:oe.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:fn||A(),duration:n.duration,tweens:[],createTween:function(e,n){var i=oe.Tween(t,h.opts,e,n,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(i),i},stop:function(e){var n=0,i=e?h.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)h.tweens[n].run(1);return e?a.resolveWith(t,[h,e]):a.rejectWith(t,[h,e]),this}}),u=h.props;for(F(u,h.opts.specialEasing);s>r;r++)if(i=yn[r].call(h,t,u,h.opts))return i;return oe.map(u,L,h),oe.isFunction(h.opts.start)&&h.opts.start.call(t,h),oe.fx.timer(oe.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function R(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(ye)||[];if(oe.isFunction(n))for(;i=r[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function H(t,e,n,i){function o(a){var l;return r[a]=!0,oe.each(t[a]||[],function(t,a){var h=a(e,n,i);return"string"!=typeof h||s||r[h]?s?!(l=h):void 0:(e.dataTypes.unshift(h),o(h),!1)}),l}var r={},s=t===Vn;return o(e.dataTypes[0])||!r["*"]&&o("*")}function j(t,e){var n,i,o=oe.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&oe.extend(!0,t,n),t}function z(t,e,n){for(var i,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(s in a)if(a[s]&&a[s].test(o)){l.unshift(s);break}if(l[0]in n)r=l[0];else{for(s in n){if(!l[0]||t.converters[s+" "+l[0]]){r=s;break}i||(i=s)}r=r||i}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}function q(t,e,n,i){var o,r,s,a,l,h={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)h[s.toLowerCase()]=t.converters[s];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=h[l+" "+r]||h["* "+r],!s)for(o in h)if(a=o.split(" "),a[1]===r&&(s=h[l+" "+a[0]]||h["* "+a[0]])){s===!0?s=h[o]:h[o]!==!0&&(r=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(c){return{state:"parsererror",error:s?c:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function V(t,e,n,i){var o;if(oe.isArray(e))oe.each(e,function(e,o){n||Jn.test(t)?i(t,o):V(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==oe.type(e))i(t,e);else for(o in e)V(t+"["+o+"]",e[o],n,i)}function W(){try{return new t.XMLHttpRequest}catch(e){}}function $(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function Y(t){return oe.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var J=[],X=J.slice,G=J.concat,K=J.push,Q=J.indexOf,Z={},te=Z.toString,ee=Z.hasOwnProperty,ne={},ie="1.11.2",oe=function(t,e){return new oe.fn.init(t,e)},re=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,ae=/-([\da-z])/gi,le=function(t,e){return e.toUpperCase()};oe.fn=oe.prototype={jquery:ie,constructor:oe,selector:"",length:0,toArray:function(){return X.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:X.call(this)},pushStack:function(t){var e=oe.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return oe.each(this,t,e)},map:function(t){return this.pushStack(oe.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:J.sort,splice:J.splice},oe.extend=oe.fn.extend=function(){var t,e,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,h=!1;for("boolean"==typeof s&&(h=s,s=arguments[a]||{},a++),"object"==typeof s||oe.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(o=arguments[a]))for(i in o)t=s[i],n=o[i],s!==n&&(h&&n&&(oe.isPlainObject(n)||(e=oe.isArray(n)))?(e?(e=!1,r=t&&oe.isArray(t)?t:[]):r=t&&oe.isPlainObject(t)?t:{},s[i]=oe.extend(h,r,n)):void 0!==n&&(s[i]=n));return s},oe.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===oe.type(t)},isArray:Array.isArray||function(t){return"array"===oe.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!oe.isArray(t)&&t-parseFloat(t)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==oe.type(t)||t.nodeType||oe.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[te.call(t)]||"object":typeof t},globalEval:function(e){e&&oe.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(se,"ms-").replace(ae,le)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var o,r=0,s=t.length,a=n(t);if(i){if(a)for(;s>r&&(o=e.apply(t[r],i),o!==!1);r++);else for(r in t)if(o=e.apply(t[r],i),o===!1)break}else if(a)for(;s>r&&(o=e.call(t[r],r,t[r]),o!==!1);r++);else for(r in t)if(o=e.call(t[r],r,t[r]),o===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(re,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?oe.merge(i,"string"==typeof t?[t]:t):K.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(Q)return Q.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;n>i;)t[o++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[o++]=e[i++];return t.length=o,t},grep:function(t,e,n){for(var i,o=[],r=0,s=t.length,a=!n;s>r;r++)i=!e(t[r],r),i!==a&&o.push(t[r]);return o},map:function(t,e,i){var o,r=0,s=t.length,a=n(t),l=[];if(a)for(;s>r;r++)o=e(t[r],r,i),null!=o&&l.push(o);else for(r in t)o=e(t[r],r,i),null!=o&&l.push(o);return G.apply([],l)},guid:1,proxy:function(t,e){var n,i,o;return"string"==typeof e&&(o=t[e],e=t,t=o),oe.isFunction(t)?(n=X.call(arguments,2),i=function(){return t.apply(e||this,n.concat(X.call(arguments)))},i.guid=t.guid=t.guid||oe.guid++,i):void 0},now:function(){return+new Date},support:ne}),oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var he=/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
function(t){function e(t,e,n,i){var o,r,s,a,l,h,c,p,f,m;if((e?e.ownerDocument||e:H)!==M&&O(e),e=e||M,n=n||[],a=e.nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return n;if(!i&&P){if(11!==a&&(o=ve.exec(t)))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&B(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((s=o[3])&&k.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(s)),n}if(k.qsa&&(!L||!L.test(t))){if(p=c=R,f=e,m=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(h=E(t),(c=e.getAttribute("id"))?p=c.replace(be,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=h.length;l--;)h[l]=p+d(h[l]);f=ye.test(t)&&u(e.parentNode)||e,m=h.join(",")}if(m)try{return Q.apply(n,f.querySelectorAll(m)),n}catch(_){}finally{c||e.removeAttribute("id")}}}return x(t.replace(le,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>C.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[R]=!0,t}function o(t){var e=M.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=t.length;i--;)C.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function h(t){return i(function(e){return e=+e,i(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function u(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function c(){}function d(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function p(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=z++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,s){var a,l,h=[j,r];if(s){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if(l=e[R]||(e[R]={}),(a=l[i])&&a[0]===j&&a[1]===r)return h[2]=a[2];if(l[i]=h,h[2]=t(e,n,s))return!0}}}function f(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function m(t,n,i){for(var o=0,r=n.length;r>o;o++)e(t,n[o],i);return i}function _(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,h=null!=e;l>a;a++)(r=t[a])&&(!n||n(r,i,o))&&(s.push(r),h&&e.push(a));return s}function g(t,e,n,o,r,s){return o&&!o[R]&&(o=g(o)),r&&!r[R]&&(r=g(r,s)),i(function(i,s,a,l){var h,u,c,d=[],p=[],f=s.length,g=i||m(e||"*",a.nodeType?[a]:a,[]),v=!t||!i&&e?g:_(g,d,t,a,l),y=n?r||(i?t:f||o)?[]:s:v;if(n&&n(v,y,a,l),o)for(h=_(y,p),o(h,[],a,l),u=h.length;u--;)(c=h[u])&&(y[p[u]]=!(v[p[u]]=c));if(i){if(r||t){if(r){for(h=[],u=y.length;u--;)(c=y[u])&&h.push(v[u]=c);r(null,y=[],h,l)}for(u=y.length;u--;)(c=y[u])&&(h=r?te(i,c):d[u])>-1&&(i[h]=!(s[h]=c))}}else y=_(y===s?y.splice(f,y.length):y),r?r(null,s,y,l):Q.apply(s,y)})}function v(t){for(var e,n,i,o=t.length,r=C.relative[t[0].type],s=r||C.relative[" "],a=r?1:0,l=p(function(t){return t===e},s,!0),h=p(function(t){return te(e,t)>-1},s,!0),u=[function(t,n,i){var o=!r&&(i||n!==D)||((e=n).nodeType?l(t,n,i):h(t,n,i));return e=null,o}];o>a;a++)if(n=C.relative[t[a].type])u=[p(f(u),n)];else{if(n=C.filter[t[a].type].apply(null,t[a].matches),n[R]){for(i=++a;o>i&&!C.relative[t[i].type];i++);return g(a>1&&f(u),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(le,"$1"),n,i>a&&v(t.slice(a,i)),o>i&&v(t=t.slice(i)),o>i&&d(t))}u.push(n)}return f(u)}function y(t,n){var o=n.length>0,r=t.length>0,s=function(i,s,a,l,h){var u,c,d,p=0,f="0",m=i&&[],g=[],v=D,y=i||r&&C.find.TAG("*",h),b=j+=null==v?1:Math.random()||.1,k=y.length;for(h&&(D=s!==M&&s);f!==k&&null!=(u=y[f]);f++){if(r&&u){for(c=0;d=t[c++];)if(d(u,s,a)){l.push(u);break}h&&(j=b)}o&&((u=!d&&u)&&p--,i&&m.push(u))}if(p+=f,o&&f!==p){for(c=0;d=n[c++];)d(m,g,s,a);if(i){if(p>0)for(;f--;)m[f]||g[f]||(g[f]=G.call(l));g=_(g)}Q.apply(l,g),h&&!i&&g.length>0&&p+n.length>1&&e.uniqueSort(l)}return h&&(j=b,D=v),m};return o?i(s):s}var b,k,C,I,w,E,S,x,D,T,N,O,M,A,P,L,U,F,B,R="sizzle"+1*new Date,H=t.document,j=0,z=0,q=n(),V=n(),W=n(),$=function(t,e){return t===e&&(N=!0),0},Y=1<<31,J={}.hasOwnProperty,X=[],G=X.pop,K=X.push,Q=X.push,Z=X.slice,te=function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=ie.replace("w","w#"),re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",se=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),he=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(se),pe=new RegExp("^"+oe+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,_e=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,ke=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Ce=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Ie=function(){O()};try{Q.apply(X=Z.call(H.childNodes),H.childNodes),X[H.childNodes.length].nodeType}catch(we){Q={apply:X.length?function(t,e){K.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}k=e.support={},w=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},O=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:H;return i!==M&&9===i.nodeType&&i.documentElement?(M=i,A=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ie,!1):n.attachEvent&&n.attachEvent("onunload",Ie)),P=!w(i),k.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),k.getElementsByTagName=o(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),k.getElementsByClassName=ge.test(i.getElementsByClassName),k.getById=o(function(t){return A.appendChild(t).id=R,!i.getElementsByName||!i.getElementsByName(R).length}),k.getById?(C.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&P){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(t){var e=t.replace(ke,Ce);return function(t){return t.getAttribute("id")===e}}):(delete C.find.ID,C.filter.ID=function(t){var e=t.replace(ke,Ce);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),C.find.TAG=k.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):k.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},C.find.CLASS=k.getElementsByClassName&&function(t,e){return P?e.getElementsByClassName(t):void 0},U=[],L=[],(k.qsa=ge.test(i.querySelectorAll))&&(o(function(t){A.appendChild(t).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||L.push("\\["+ne+"*(?:value|"+ee+")"),t.querySelectorAll("[id~="+R+"-]").length||L.push("~="),t.querySelectorAll(":checked").length||L.push(":checked"),t.querySelectorAll("a#"+R+"+*").length||L.push(".#.+[+~]")}),o(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&L.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),(k.matchesSelector=ge.test(F=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&o(function(t){k.disconnectedMatch=F.call(t,"div"),F.call(t,"[s!='']:x"),U.push("!=",se)}),L=L.length&&new RegExp(L.join("|")),U=U.length&&new RegExp(U.join("|")),e=ge.test(A.compareDocumentPosition),B=e||ge.test(A.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},$=e?function(t,e){if(t===e)return N=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!k.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===H&&B(H,t)?-1:e===i||e.ownerDocument===H&&B(H,e)?1:T?te(T,t)-te(T,e):0:4&n?-1:1)}:function(t,e){if(t===e)return N=!0,0;var n,o=0,r=t.parentNode,a=e.parentNode,l=[t],h=[e];if(!r||!a)return t===i?-1:e===i?1:r?-1:a?1:T?te(T,t)-te(T,e):0;if(r===a)return s(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)h.unshift(n);for(;l[o]===h[o];)o++;return o?s(l[o],h[o]):l[o]===H?-1:h[o]===H?1:0},i):M},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==M&&O(t),n=n.replace(ce,"='$1']"),!(!k.matchesSelector||!P||U&&U.test(n)||L&&L.test(n)))try{var i=F.call(t,n);if(i||k.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(o){}return e(n,M,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==M&&O(t),B(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==M&&O(t);var n=C.attrHandle[e.toLowerCase()],i=n&&J.call(C.attrHandle,e.toLowerCase())?n(t,e,!P):void 0;return void 0!==i?i:k.attributes||!P?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(N=!k.detectDuplicates,T=!k.sortStable&&t.slice(0),t.sort($),N){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return T=null,t},I=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=I(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=I(e);return n},C=e.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(ke,Ce),t[3]=(t[3]||t[4]||t[5]||"").replace(ke,Ce),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&de.test(n)&&(e=E(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(ke,Ce).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=q[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&q(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var r=e.attr(o,t);return null==r?"!="===n:n?(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(ae," ")+" ").indexOf(i)>-1:"|="===n?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var h,u,c,d,p,f,m=r!==s?"nextSibling":"previousSibling",_=e.parentNode,g=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(_){if(r){for(;m;){for(c=e;c=c[m];)if(a?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?_.firstChild:_.lastChild],s&&v){for(u=_[R]||(_[R]={}),h=u[t]||[],p=h[0]===j&&h[1],d=h[0]===j&&h[2],c=p&&_.childNodes[p];c=++p&&c&&c[m]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){u[t]=[j,p,d];break}}else if(v&&(h=(e[R]||(e[R]={}))[t])&&h[0]===j)d=h[1];else for(;(c=++p&&c&&c[m]||(d=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==g:1!==c.nodeType)||!++d||(v&&((c[R]||(c[R]={}))[t]=[j,d]),c!==e)););return d-=o,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,n){var o,r=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[R]?r(n):r.length>1?(o=[t,t,"",n],C.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=r(t,n),s=o.length;s--;)i=te(t,o[s]),t[i]=!(e[i]=o[s])}):function(t){return r(t,0,o)}):r}},pseudos:{not:i(function(t){var e=[],n=[],o=S(t.replace(le,"$1"));return o[R]?i(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(ke,Ce),function(e){return(e.textContent||e.innerText||I(e)).indexOf(t)>-1}}),lang:i(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(ke,Ce).toLowerCase(),function(e){var n;do if(n=P?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===A},focus:function(t){return t===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return _e.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:h(function(){return[0]}),last:h(function(t,e){return[e-1]}),eq:h(function(t,e,n){return[0>n?n+e:n]}),even:h(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:h(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:h(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:h(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},C.pseudos.nth=C.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})C.pseudos[b]=l(b);return c.prototype=C.filters=C.pseudos,C.setFilters=new c,E=e.tokenize=function(t,n){var i,o,r,s,a,l,h,u=V[t+" "];if(u)return n?0:u.slice(0);for(a=t,l=[],h=C.preFilter;a;){(!i||(o=he.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=ue.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(le," ")}),a=a.slice(i.length));for(s in C.filter)!(o=fe[s].exec(a))||h[s]&&!(o=h[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):V(t,l).slice(0)},S=e.compile=function(t,e){var n,i=[],o=[],r=W[t+" "];if(!r){for(e||(e=E(t)),n=e.length;n--;)r=v(e[n]),r[R]?i.push(r):o.push(r);r=W(t,y(o,i)),r.selector=t}return r},x=e.select=function(t,e,n,i){var o,r,s,a,l,h="function"==typeof t&&t,c=!i&&E(t=h.selector||t);if(n=n||[],1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&k.getById&&9===e.nodeType&&P&&C.relative[r[1].type]){if(e=(C.find.ID(s.matches[0].replace(ke,Ce),e)||[])[0],!e)return n;h&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=fe.needsContext.test(t)?0:r.length;o--&&(s=r[o],!C.relative[a=s.type]);)if((l=C.find[a])&&(i=l(s.matches[0].replace(ke,Ce),ye.test(r[0].type)&&u(e.parentNode)||e))){if(r.splice(o,1),t=i.length&&d(r),!t)return Q.apply(n,i),n;break}}return(h||S(t,c))(i,e,!P,n,ye.test(t)&&u(e.parentNode)||e),n},k.sortStable=R.split("").sort($).join("")===R,k.detectDuplicates=!!N,O(),k.sortDetached=o(function(t){return 1&t.compareDocumentPosition(M.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),k.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(ee,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);oe.find=he,oe.expr=he.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=he.uniqueSort,oe.text=he.getText,oe.isXMLDoc=he.isXML,oe.contains=he.contains;var ue=oe.expr.match.needsContext,ce=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,de=/^.[^:#\[\.,]*$/;oe.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?oe.find.matchesSelector(i,t)?[i]:[]:oe.find.matches(t,oe.grep(e,function(t){return 1===t.nodeType}))},oe.fn.extend({find:function(t){var e,n=[],i=this,o=i.length;if("string"!=typeof t)return this.pushStack(oe(t).filter(function(){for(e=0;o>e;e++)if(oe.contains(i[e],this))return!0}));for(e=0;o>e;e++)oe.find(t,i[e],n);return n=this.pushStack(o>1?oe.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&ue.test(t)?oe(t):t||[],!1).length}});var pe,fe=t.document,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,_e=oe.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:me.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||pe).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof oe?e[0]:e,oe.merge(this,oe.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:fe,!0)),ce.test(n[1])&&oe.isPlainObject(e))for(n in e)oe.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if(i=fe.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return pe.find(t);this.length=1,this[0]=i}return this.context=fe,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):oe.isFunction(t)?"undefined"!=typeof pe.ready?pe.ready(t):t(oe):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),oe.makeArray(t,this))};_e.prototype=oe.fn,pe=oe(fe);var ge=/^(?:parents|prev(?:Until|All))/,ve={children:!0,contents:!0,next:!0,prev:!0};oe.extend({dir:function(t,e,n){for(var i=[],o=t[e];o&&9!==o.nodeType&&(void 0===n||1!==o.nodeType||!oe(o).is(n));)1===o.nodeType&&i.push(o),o=o[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),oe.fn.extend({has:function(t){var e,n=oe(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(oe.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,r=[],s=ue.test(t)||"string"!=typeof t?oe(t,e||this.context):0;o>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?oe.unique(r):r)},index:function(t){return t?"string"==typeof t?oe.inArray(this[0],oe(t)):oe.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(oe.unique(oe.merge(this.get(),oe(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),oe.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return oe.dir(t,"parentNode")},parentsUntil:function(t,e,n){return oe.dir(t,"parentNode",n)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return oe.dir(t,"nextSibling")},prevAll:function(t){return oe.dir(t,"previousSibling")},nextUntil:function(t,e,n){return oe.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return oe.dir(t,"previousSibling",n)},siblings:function(t){return oe.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return oe.sibling(t.firstChild)},contents:function(t){return oe.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:oe.merge([],t.childNodes)}},function(t,e){oe.fn[t]=function(n,i){var o=oe.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=oe.filter(i,o)),this.length>1&&(ve[t]||(o=oe.unique(o)),ge.test(t)&&(o=o.reverse())),this.pushStack(o)}});var ye=/\S+/g,be={};oe.Callbacks=function(t){t="string"==typeof t?be[t]||r(t):oe.extend({},t);var e,n,i,o,s,a,l=[],h=!t.once&&[],u=function(r){for(n=t.memory&&r,i=!0,s=a||0,a=0,o=l.length,e=!0;l&&o>s;s++)if(l[s].apply(r[0],r[1])===!1&&t.stopOnFalse){n=!1;break}e=!1,l&&(h?h.length&&u(h.shift()):n?l=[]:c.disable())},c={add:function(){if(l){var i=l.length;!function r(e){oe.each(e,function(e,n){var i=oe.type(n);"function"===i?t.unique&&c.has(n)||l.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),e?o=l.length:n&&(a=i,u(n))}return this},remove:function(){return l&&oe.each(arguments,function(t,n){for(var i;(i=oe.inArray(n,l,i))>-1;)l.splice(i,1),e&&(o>=i&&o--,s>=i&&s--)}),this},has:function(t){return t?oe.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=h=n=void 0,this},disabled:function(){return!l},lock:function(){return h=void 0,n||c.disable(),this},locked:function(){return!h},fireWith:function(t,n){return!l||i&&!h||(n=n||[],n=[t,n.slice?n.slice():n],e?h.push(n):u(n)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},oe.extend({Deferred:function(t){var e=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return oe.Deferred(function(n){oe.each(e,function(e,r){var s=oe.isFunction(t[e])&&t[e];o[r[1]](function(){var t=s&&s.apply(this,arguments);t&&oe.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===i?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?oe.extend(t,i):i}},o={};return i.pipe=i.then,oe.each(e,function(t,r){var s=r[2],a=r[3];i[r[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,r=X.call(arguments),s=r.length,a=1!==s||t&&oe.isFunction(t.promise)?s:0,l=1===a?t:oe.Deferred(),h=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?X.call(arguments):o,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(e=new Array(s),n=new Array(s),i=new Array(s);s>o;o++)r[o]&&oe.isFunction(r[o].promise)?r[o].promise().done(h(o,i,r)).fail(l.reject).progress(h(o,n,e)):--a;return a||l.resolveWith(i,r),l.promise()}});var ke;oe.fn.ready=function(t){return oe.ready.promise().done(t),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(t){t?oe.readyWait++:oe.ready(!0)},ready:function(t){if(t===!0?!--oe.readyWait:!oe.isReady){if(!fe.body)return setTimeout(oe.ready);oe.isReady=!0,t!==!0&&--oe.readyWait>0||(ke.resolveWith(fe,[oe]),oe.fn.triggerHandler&&(oe(fe).triggerHandler("ready"),oe(fe).off("ready")))}}}),oe.ready.promise=function(e){if(!ke)if(ke=oe.Deferred(),"complete"===fe.readyState)setTimeout(oe.ready);else if(fe.addEventListener)fe.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{fe.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var n=!1;try{n=null==t.frameElement&&fe.documentElement}catch(i){}n&&n.doScroll&&!function o(){if(!oe.isReady){try{n.doScroll("left")}catch(t){return setTimeout(o,50)}s(),oe.ready()}}()}return ke.promise(e)};var Ce,Ie="undefined";for(Ce in oe(ne))break;ne.ownLast="0"!==Ce,ne.inlineBlockNeedsLayout=!1,oe(function(){var t,e,n,i;n=fe.getElementsByTagName("body")[0],n&&n.style&&(e=fe.createElement("div"),i=fe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==Ie&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=fe.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(e){ne.deleteExpando=!1}}t=null}(),oe.acceptData=function(t){var e=oe.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return 1!==n&&9!==n?!1:!e||e!==!0&&t.getAttribute("classid")===e};var we=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ee=/([A-Z])/g;oe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?oe.cache[t[oe.expando]]:t[oe.expando],!!t&&!h(t)},data:function(t,e,n){return u(t,e,n)},removeData:function(t,e){return c(t,e)},_data:function(t,e,n){return u(t,e,n,!0)},_removeData:function(t,e){return c(t,e,!0)}}),oe.fn.extend({data:function(t,e){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(o=oe.data(r),1===r.nodeType&&!oe._data(r,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),l(r,i,o[i])));oe._data(r,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){oe.data(this,t)}):arguments.length>1?this.each(function(){oe.data(this,t,e)}):r?l(r,t,oe.data(r,t)):void 0},removeData:function(t){return this.each(function(){oe.removeData(this,t)})}}),oe.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=oe._data(t,e),n&&(!i||oe.isArray(n)?i=oe._data(t,e,oe.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=oe.queue(t,e),i=n.length,o=n.shift(),r=oe._queueHooks(t,e),s=function(){oe.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return oe._data(t,n)||oe._data(t,n,{empty:oe.Callbacks("once memory").add(function(){oe._removeData(t,e+"queue"),oe._removeData(t,n)})})}}),oe.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?oe.queue(this[0],t):void 0===e?this:this.each(function(){var n=oe.queue(this,t,e);oe._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&oe.dequeue(this,t)})},dequeue:function(t){return this.each(function(){oe.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=oe.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)n=oe._data(r[s],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(e)}});var Se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xe=["Top","Right","Bottom","Left"],De=function(t,e){return t=e||t,"none"===oe.css(t,"display")||!oe.contains(t.ownerDocument,t)},Te=oe.access=function(t,e,n,i,o,r,s){var a=0,l=t.length,h=null==n;if("object"===oe.type(n)){o=!0;for(a in n)oe.access(t,e,a,n[a],!0,r,s)}else if(void 0!==i&&(o=!0,oe.isFunction(i)||(s=!0),h&&(s?(e.call(t,i),e=null):(h=e,e=function(t,e,n){return h.call(oe(t),n)})),e))for(;l>a;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return o?t:h?e.call(t):l?e(t[0],n):r},Ne=/^(?:checkbox|radio)$/i;!function(){var t=fe.createElement("input"),e=fe.createElement("div"),n=fe.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===e.firstChild.nodeType,ne.tbody=!e.getElementsByTagName("tbody").length,ne.htmlSerialize=!!e.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==fe.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,n.appendChild(t),ne.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,n.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ne.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(i){ne.deleteExpando=!1}}}(),function(){var e,n,i=fe.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})n="on"+e,(ne[e+"Bubbles"]=n in t)||(i.setAttribute(n,"t"),ne[e+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Oe=/^(?:input|select|textarea)$/i,Me=/^key/,Ae=/^(?:mouse|pointer|contextmenu)|click/,Pe=/^(?:focusinfocus|focusoutblur)$/,Le=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(t,e,n,i,o){var r,s,a,l,h,u,c,d,p,f,m,_=oe._data(t);if(_){for(n.handler&&(l=n,n=l.handler,o=l.selector),n.guid||(n.guid=oe.guid++),(s=_.events)||(s=_.events={}),(u=_.handle)||(u=_.handle=function(t){return typeof oe===Ie||t&&oe.event.triggered===t.type?void 0:oe.event.dispatch.apply(u.elem,arguments)},u.elem=t),e=(e||"").match(ye)||[""],a=e.length;a--;)r=Le.exec(e[a])||[],p=m=r[1],f=(r[2]||"").split(".").sort(),p&&(h=oe.event.special[p]||{},p=(o?h.delegateType:h.bindType)||p,h=oe.event.special[p]||{},c=oe.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&oe.expr.match.needsContext.test(o),namespace:f.join(".")},l),(d=s[p])||(d=s[p]=[],d.delegateCount=0,h.setup&&h.setup.call(t,i,f,u)!==!1||(t.addEventListener?t.addEventListener(p,u,!1):t.attachEvent&&t.attachEvent("on"+p,u))),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,c):d.push(c),oe.event.global[p]=!0);t=null}},remove:function(t,e,n,i,o){var r,s,a,l,h,u,c,d,p,f,m,_=oe.hasData(t)&&oe._data(t);if(_&&(u=_.events)){for(e=(e||"").match(ye)||[""],h=e.length;h--;)if(a=Le.exec(e[h])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(c=oe.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,d=u[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=d.length;r--;)s=d[r],!o&&m!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(d.splice(r,1),s.selector&&d.delegateCount--,c.remove&&c.remove.call(t,s));l&&!d.length&&(c.teardown&&c.teardown.call(t,f,_.handle)!==!1||oe.removeEvent(t,p,_.handle),delete u[p])}else for(p in u)oe.event.remove(t,p+e[h],n,i,!0);oe.isEmptyObject(u)&&(delete _.handle,oe._removeData(t,"events"))}},trigger:function(e,n,i,o){var r,s,a,l,h,u,c,d=[i||fe],p=ee.call(e,"type")?e.type:e,f=ee.call(e,"namespace")?e.namespace.split("."):[];if(a=u=i=i||fe,3!==i.nodeType&&8!==i.nodeType&&!Pe.test(p+oe.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),s=p.indexOf(":")<0&&"on"+p,e=e[oe.expando]?e:new oe.Event(p,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:oe.makeArray(n,[e]),h=oe.event.special[p]||{},o||!h.trigger||h.trigger.apply(i,n)!==!1)){if(!o&&!h.noBubble&&!oe.isWindow(i)){for(l=h.delegateType||p,Pe.test(l+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),u=a;
u===(i.ownerDocument||fe)&&d.push(u.defaultView||u.parentWindow||t)}for(c=0;(a=d[c++])&&!e.isPropagationStopped();)e.type=c>1?l:h.bindType||p,r=(oe._data(a,"events")||{})[e.type]&&oe._data(a,"handle"),r&&r.apply(a,n),r=s&&a[s],r&&r.apply&&oe.acceptData(a)&&(e.result=r.apply(a,n),e.result===!1&&e.preventDefault());if(e.type=p,!o&&!e.isDefaultPrevented()&&(!h._default||h._default.apply(d.pop(),n)===!1)&&oe.acceptData(i)&&s&&i[p]&&!oe.isWindow(i)){u=i[s],u&&(i[s]=null),oe.event.triggered=p;try{i[p]()}catch(m){}oe.event.triggered=void 0,u&&(i[s]=u)}return e.result}},dispatch:function(t){t=oe.event.fix(t);var e,n,i,o,r,s=[],a=X.call(arguments),l=(oe._data(this,"events")||{})[t.type]||[],h=oe.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,t)!==!1){for(s=oe.event.handlers.call(this,t,l),e=0;(o=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,r=0;(i=o.handlers[r++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,n=((oe.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,r,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(o=[],r=0;a>r;r++)i=e[r],n=i.selector+" ",void 0===o[n]&&(o[n]=i.needsContext?oe(n,this).index(l)>=0:oe.find(n,this,null,[l]).length),o[n]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},fix:function(t){if(t[oe.expando])return t;var e,n,i,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Ae.test(o)?this.mouseHooks:Me.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new oe.Event(r),e=i.length;e--;)n=i[e],t[n]=r[n];return t.target||(t.target=r.srcElement||fe),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,r):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,r=e.button,s=e.fromElement;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||fe,o=i.documentElement,n=i.body,t.pageX=e.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?e.toElement:s),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return oe.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return oe.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=oe.extend(new oe.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?oe.event.trigger(o,null,e):oe.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},oe.removeEvent=fe.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===Ie&&(t[i]=null),t.detachEvent(i,n))},oe.Event=function(t,e){return this instanceof oe.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?d:p):this.type=t,e&&oe.extend(this,e),this.timeStamp=t&&t.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(t,e)},oe.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){oe.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return(!o||o!==i&&!oe.contains(i,o))&&(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),ne.submitBubbles||(oe.event.special.submit={setup:function(){return oe.nodeName(this,"form")?!1:void oe.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=oe.nodeName(e,"input")||oe.nodeName(e,"button")?e.form:void 0;n&&!oe._data(n,"submitBubbles")&&(oe.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),oe._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&oe.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return oe.nodeName(this,"form")?!1:void oe.event.remove(this,"._submit")}}),ne.changeBubbles||(oe.event.special.change={setup:function(){return Oe.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(oe.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),oe.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),oe.event.simulate("change",this,t,!0)})),!1):void oe.event.add(this,"beforeactivate._change",function(t){var e=t.target;Oe.test(e.nodeName)&&!oe._data(e,"changeBubbles")&&(oe.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||oe.event.simulate("change",this.parentNode,t,!0)}),oe._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return oe.event.remove(this,"._change"),!Oe.test(this.nodeName)}}),ne.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){oe.event.simulate(e,t.target,oe.event.fix(t),!0)};oe.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=oe._data(i,e);o||i.addEventListener(t,n,!0),oe._data(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=oe._data(i,e)-1;o?oe._data(i,e,o):(i.removeEventListener(t,n,!0),oe._removeData(i,e))}}}),oe.fn.extend({on:function(t,e,n,i,o){var r,s;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(r in t)this.on(r,e,n,t[r],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=p;else if(!i)return this;return 1===o&&(s=i,i=function(t){return oe().off(t),s.apply(this,arguments)},i.guid=s.guid||(s.guid=oe.guid++)),this.each(function(){oe.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,oe(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=p),this.each(function(){oe.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){oe.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?oe.event.trigger(t,e,n,!0):void 0}});var Ue="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Fe=/ jQuery\d+="(?:null|\d+)"/g,Be=new RegExp("<(?:"+Ue+")[\\s/>]","i"),Re=/^\s+/,He=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,je=/<([\w:]+)/,ze=/<tbody/i,qe=/<|&#?\w+;/,Ve=/<(?:script|style|link)/i,We=/checked\s*(?:[^=]|=\s*.checked.)/i,$e=/^$|\/(?:java|ecma)script/i,Ye=/^true\/(.*)/,Je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ge=m(fe),Ke=Ge.appendChild(fe.createElement("div"));Xe.optgroup=Xe.option,Xe.tbody=Xe.tfoot=Xe.colgroup=Xe.caption=Xe.thead,Xe.th=Xe.td,oe.extend({clone:function(t,e,n){var i,o,r,s,a,l=oe.contains(t.ownerDocument,t);if(ne.html5Clone||oe.isXMLDoc(t)||!Be.test("<"+t.nodeName+">")?r=t.cloneNode(!0):(Ke.innerHTML=t.outerHTML,Ke.removeChild(r=Ke.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||oe.isXMLDoc(t)))for(i=_(r),a=_(t),s=0;null!=(o=a[s]);++s)i[s]&&I(o,i[s]);if(e)if(n)for(a=a||_(t),i=i||_(r),s=0;null!=(o=a[s]);s++)C(o,i[s]);else C(t,r);return i=_(r,"script"),i.length>0&&k(i,!l&&_(t,"script")),i=a=o=null,r},buildFragment:function(t,e,n,i){for(var o,r,s,a,l,h,u,c=t.length,d=m(e),p=[],f=0;c>f;f++)if(r=t[f],r||0===r)if("object"===oe.type(r))oe.merge(p,r.nodeType?[r]:r);else if(qe.test(r)){for(a=a||d.appendChild(e.createElement("div")),l=(je.exec(r)||["",""])[1].toLowerCase(),u=Xe[l]||Xe._default,a.innerHTML=u[1]+r.replace(He,"<$1></$2>")+u[2],o=u[0];o--;)a=a.lastChild;if(!ne.leadingWhitespace&&Re.test(r)&&p.push(e.createTextNode(Re.exec(r)[0])),!ne.tbody)for(r="table"!==l||ze.test(r)?"<table>"!==u[1]||ze.test(r)?0:a:a.firstChild,o=r&&r.childNodes.length;o--;)oe.nodeName(h=r.childNodes[o],"tbody")&&!h.childNodes.length&&r.removeChild(h);for(oe.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else p.push(e.createTextNode(r));for(a&&d.removeChild(a),ne.appendChecked||oe.grep(_(p,"input"),g),f=0;r=p[f++];)if((!i||-1===oe.inArray(r,i))&&(s=oe.contains(r.ownerDocument,r),a=_(d.appendChild(r),"script"),s&&k(a),n))for(o=0;r=a[o++];)$e.test(r.type||"")&&n.push(r);return a=null,d},cleanData:function(t,e){for(var n,i,o,r,s=0,a=oe.expando,l=oe.cache,h=ne.deleteExpando,u=oe.event.special;null!=(n=t[s]);s++)if((e||oe.acceptData(n))&&(o=n[a],r=o&&l[o])){if(r.events)for(i in r.events)u[i]?oe.event.remove(n,i):oe.removeEvent(n,i,r.handle);l[o]&&(delete l[o],h?delete n[a]:typeof n.removeAttribute!==Ie?n.removeAttribute(a):n[a]=null,J.push(o))}}}),oe.fn.extend({text:function(t){return Te(this,function(t){return void 0===t?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||fe).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?oe.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||oe.cleanData(_(n)),n.parentNode&&(e&&oe.contains(n.ownerDocument,n)&&k(_(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&oe.cleanData(_(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&oe.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return oe.clone(this,t,e)})},html:function(t){return Te(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Fe,""):void 0;if(!("string"!=typeof t||Ve.test(t)||!ne.htmlSerialize&&Be.test(t)||!ne.leadingWhitespace&&Re.test(t)||Xe[(je.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(He,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(oe.cleanData(_(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,oe.cleanData(_(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=G.apply([],t);var n,i,o,r,s,a,l=0,h=this.length,u=this,c=h-1,d=t[0],p=oe.isFunction(d);if(p||h>1&&"string"==typeof d&&!ne.checkClone&&We.test(d))return this.each(function(n){var i=u.eq(n);p&&(t[0]=d.call(this,n,i.html())),i.domManip(t,e)});if(h&&(a=oe.buildFragment(t,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(r=oe.map(_(a,"script"),y),o=r.length;h>l;l++)i=a,l!==c&&(i=oe.clone(i,!0,!0),o&&oe.merge(r,_(i,"script"))),e.call(this[l],i,l);if(o)for(s=r[r.length-1].ownerDocument,oe.map(r,b),l=0;o>l;l++)i=r[l],$e.test(i.type||"")&&!oe._data(i,"globalEval")&&oe.contains(s,i)&&(i.src?oe._evalUrl&&oe._evalUrl(i.src):oe.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Je,"")));a=n=null}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){oe.fn[t]=function(t){for(var n,i=0,o=[],r=oe(t),s=r.length-1;s>=i;i++)n=i===s?this:this.clone(!0),oe(r[i])[e](n),K.apply(o,n.get());return this.pushStack(o)}});var Qe,Ze={};!function(){var t;ne.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,n,i;return n=fe.getElementsByTagName("body")[0],n&&n.style?(e=fe.createElement("div"),i=fe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==Ie&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(fe.createElement("div")).style.width="5px",t=3!==e.offsetWidth),n.removeChild(i),t):void 0}}();var tn,en,nn=/^margin/,on=new RegExp("^("+Se+")(?!px)[a-z%]+$","i"),rn=/^(top|right|bottom|left)$/;t.getComputedStyle?(tn=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)},en=function(t,e,n){var i,o,r,s,a=t.style;return n=n||tn(t),s=n?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==s||oe.contains(t.ownerDocument,t)||(s=oe.style(t,e)),on.test(s)&&nn.test(e)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0===s?s:s+""}):fe.documentElement.currentStyle&&(tn=function(t){return t.currentStyle},en=function(t,e,n){var i,o,r,s,a=t.style;return n=n||tn(t),s=n?n[e]:void 0,null==s&&a&&a[e]&&(s=a[e]),on.test(s)&&!rn.test(e)&&(i=a.left,o=t.runtimeStyle,r=o&&o.left,r&&(o.left=t.currentStyle.left),a.left="fontSize"===e?"1em":s,s=a.pixelLeft+"px",a.left=i,r&&(o.left=r)),void 0===s?s:s+""||"auto"}),function(){function e(){var e,n,i,o;n=fe.getElementsByTagName("body")[0],n&&n.style&&(e=fe.createElement("div"),i=fe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=s=!1,l=!0,t.getComputedStyle&&(r="1%"!==(t.getComputedStyle(e,null)||{}).top,s="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,o=e.appendChild(fe.createElement("div")),o.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",o.style.marginRight=o.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(o,null)||{}).marginRight),e.removeChild(o)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=e.getElementsByTagName("td"),o[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===o[0].offsetHeight,a&&(o[0].style.display="",o[1].style.display="none",a=0===o[0].offsetHeight),n.removeChild(i))}var n,i,o,r,s,a,l;n=fe.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=n.getElementsByTagName("a")[0],i=o&&o.style,i&&(i.cssText="float:left;opacity:.5",ne.opacity="0.5"===i.opacity,ne.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,oe.extend(ne,{reliableHiddenOffsets:function(){return null==a&&e(),a},boxSizingReliable:function(){return null==s&&e(),s},pixelPosition:function(){return null==r&&e(),r},reliableMarginRight:function(){return null==l&&e(),l}}))}(),oe.swap=function(t,e,n,i){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=s[r];return o};var sn=/alpha\([^)]*\)/i,an=/opacity\s*=\s*([^)]*)/,ln=/^(none|table(?!-c[ea]).+)/,hn=new RegExp("^("+Se+")(.*)$","i"),un=new RegExp("^([+-])=("+Se+")","i"),cn={position:"absolute",visibility:"hidden",display:"block"},dn={letterSpacing:"0",fontWeight:"400"},pn=["Webkit","O","Moz","ms"];oe.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=en(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=oe.camelCase(e),l=t.style;if(e=oe.cssProps[a]||(oe.cssProps[a]=x(l,a)),s=oe.cssHooks[e]||oe.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:l[e];if(r=typeof n,"string"===r&&(o=un.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(oe.css(t,e)),r="number"),null!=n&&n===n&&("number"!==r||oe.cssNumber[a]||(n+="px"),ne.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(s&&"set"in s&&void 0===(n=s.set(t,n,i)))))try{l[e]=n}catch(h){}}},css:function(t,e,n,i){var o,r,s,a=oe.camelCase(e);return e=oe.cssProps[a]||(oe.cssProps[a]=x(t.style,a)),s=oe.cssHooks[e]||oe.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=en(t,e,i)),"normal"===r&&e in dn&&(r=dn[e]),""===n||n?(o=parseFloat(r),n===!0||oe.isNumeric(o)?o||0:r):r}}),oe.each(["height","width"],function(t,e){oe.cssHooks[e]={get:function(t,n,i){return n?ln.test(oe.css(t,"display"))&&0===t.offsetWidth?oe.swap(t,cn,function(){return O(t,e,i)}):O(t,e,i):void 0},set:function(t,n,i){var o=i&&tn(t);return T(t,n,i?N(t,e,i,ne.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,o),o):0)}}}),ne.opacity||(oe.cssHooks.opacity={get:function(t,e){return an.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,o=oe.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===oe.trim(r.replace(sn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=sn.test(r)?r.replace(sn,o):r+" "+o)}}),oe.cssHooks.marginRight=S(ne.reliableMarginRight,function(t,e){return e?oe.swap(t,{display:"inline-block"},en,[t,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(t,e){oe.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[t+xe[i]+e]=r[i]||r[i-2]||r[0];return o}},nn.test(t)||(oe.cssHooks[t+e].set=T)}),oe.fn.extend({css:function(t,e){return Te(this,function(t,e,n){var i,o,r={},s=0;if(oe.isArray(e)){for(i=tn(t),o=e.length;o>s;s++)r[e[s]]=oe.css(t,e[s],!1,i);return r}return void 0!==n?oe.style(t,e,n):oe.css(t,e)},t,e,arguments.length>1)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){De(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=M,M.prototype={constructor:M,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(oe.cssNumber[n]?"":"px")},cur:function(){var t=M.propHooks[this.prop];return t&&t.get?t.get(this):M.propHooks._default.get(this)},run:function(t){var e,n=M.propHooks[this.prop];return this.pos=e=this.options.duration?oe.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=oe.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){oe.fx.step[t.prop]?oe.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[oe.cssProps[t.prop]]||oe.cssHooks[t.prop])?oe.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},oe.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},oe.fx=M.prototype.init,oe.fx.step={};var fn,mn,_n=/^(?:toggle|show|hide)$/,gn=new RegExp("^(?:([+-])=|)("+Se+")([a-z%]*)$","i"),vn=/queueHooks$/,yn=[U],bn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=gn.exec(e),r=o&&o[3]||(oe.cssNumber[t]?"":"px"),s=(oe.cssNumber[t]||"px"!==r&&+i)&&gn.exec(oe.css(n.elem,t)),a=1,l=20;if(s&&s[3]!==r){r=r||s[3],o=o||[],s=+i||1;do a=a||".5",s/=a,oe.style(n.elem,t,s+r);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return o&&(s=n.start=+s||+i||0,n.unit=r,n.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),n}]};oe.Animation=oe.extend(B,{tweener:function(t,e){oe.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;o>i;i++)n=t[i],bn[n]=bn[n]||[],bn[n].unshift(e)},prefilter:function(t,e){e?yn.unshift(t):yn.push(t)}}),oe.speed=function(t,e,n){var i=t&&"object"==typeof t?oe.extend({},t):{complete:n||!n&&e||oe.isFunction(t)&&t,duration:t,easing:n&&e||e&&!oe.isFunction(e)&&e};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.fn.extend({fadeTo:function(t,e,n,i){return this.filter(De).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=oe.isEmptyObject(t),r=oe.speed(e,n,i),s=function(){var e=B(this,oe.extend({},t),r);(o||oe._data(this,"finish"))&&e.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=oe.timers,s=oe._data(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&vn.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));(e||!n)&&oe.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=oe._data(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=oe.timers,s=i?i.length:0;for(n.finish=!0,oe.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;s>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(t,e){var n=oe.fn[e];oe.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(P(e,!0),t,i,o)}}),oe.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){oe.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),oe.timers=[],oe.fx.tick=function(){var t,e=oe.timers,n=0;for(fn=oe.now();n<e.length;n++)t=e[n],t()||e[n]!==t||e.splice(n--,1);e.length||oe.fx.stop(),fn=void 0},oe.fx.timer=function(t){oe.timers.push(t),t()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){mn||(mn=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(mn),mn=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,e){return t=oe.fx?oe.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t,e,n,i,o;e=fe.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=e.getElementsByTagName("a")[0],n=fe.createElement("select"),o=n.appendChild(fe.createElement("option")),t=e.getElementsByTagName("input")[0],i.style.cssText="top:1px",ne.getSetAttribute="t"!==e.className,ne.style=/top/.test(i.getAttribute("style")),ne.hrefNormalized="/a"===i.getAttribute("href"),ne.checkOn=!!t.value,ne.optSelected=o.selected,ne.enctype=!!fe.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!o.disabled,t=fe.createElement("input"),t.setAttribute("value",""),ne.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ne.radioValue="t"===t.value}();var kn=/\r/g;oe.fn.extend({val:function(t){var e,n,i,o=this[0];{if(arguments.length)return i=oe.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(o=i?t.call(this,n,oe(this).val()):t,null==o?o="":"number"==typeof o?o+="":oe.isArray(o)&&(o=oe.map(o,function(t){return null==t?"":t+""})),e=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return e=oe.valHooks[o.type]||oe.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(kn,""):null==n?"":n)}}}),oe.extend({valHooks:{option:{get:function(t){var e=oe.find.attr(t,"value");return null!=e?e:oe.trim(oe.text(t))}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,r="select-one"===t.type||0>o,s=r?null:[],a=r?o+1:i.length,l=0>o?a:r?o:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==o||(ne.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&oe.nodeName(n.parentNode,"optgroup"))){if(e=oe(n).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var n,i,o=t.options,r=oe.makeArray(e),s=o.length;s--;)if(i=o[s],oe.inArray(oe.valHooks.option.get(i),r)>=0)try{i.selected=n=!0}catch(a){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(t,e){return oe.isArray(e)?t.checked=oe.inArray(oe(t).val(),e)>=0:void 0}},ne.checkOn||(oe.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Cn,In,wn=oe.expr.attrHandle,En=/^(?:checked|selected)$/i,Sn=ne.getSetAttribute,xn=ne.input;oe.fn.extend({attr:function(t,e){return Te(this,oe.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){oe.removeAttr(this,t)})}}),oe.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===Ie?oe.prop(t,e,n):(1===r&&oe.isXMLDoc(t)||(e=e.toLowerCase(),i=oe.attrHooks[e]||(oe.expr.match.bool.test(e)?In:Cn)),void 0===n?i&&"get"in i&&null!==(o=i.get(t,e))?o:(o=oe.find.attr(t,e),null==o?void 0:o):null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void oe.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(ye);if(r&&1===t.nodeType)for(;n=r[o++];)i=oe.propFix[n]||n,oe.expr.match.bool.test(n)?xn&&Sn||!En.test(n)?t[i]=!1:t[oe.camelCase("default-"+n)]=t[i]=!1:oe.attr(t,n,""),t.removeAttribute(Sn?n:i)},attrHooks:{type:{set:function(t,e){if(!ne.radioValue&&"radio"===e&&oe.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),In={set:function(t,e,n){return e===!1?oe.removeAttr(t,n):xn&&Sn||!En.test(n)?t.setAttribute(!Sn&&oe.propFix[n]||n,n):t[oe.camelCase("default-"+n)]=t[n]=!0,n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(t,e){var n=wn[e]||oe.find.attr;wn[e]=xn&&Sn||!En.test(e)?function(t,e,i){var o,r;return i||(r=wn[e],wn[e]=o,o=null!=n(t,e,i)?e.toLowerCase():null,wn[e]=r),o}:function(t,e,n){return n?void 0:t[oe.camelCase("default-"+e)]?e.toLowerCase():null}}),xn&&Sn||(oe.attrHooks.value={set:function(t,e,n){return oe.nodeName(t,"input")?void(t.defaultValue=e):Cn&&Cn.set(t,e,n)}}),Sn||(Cn={set:function(t,e,n){var i=t.getAttributeNode(n);return i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n)?e:void 0}},wn.id=wn.name=wn.coords=function(t,e,n){var i;return n?void 0:(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},oe.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:void 0},set:Cn.set},oe.attrHooks.contenteditable={set:function(t,e,n){Cn.set(t,""===e?!1:e,n)}},oe.each(["width","height"],function(t,e){oe.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}})),ne.style||(oe.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Dn=/^(?:input|select|textarea|button|object)$/i,Tn=/^(?:a|area)$/i;oe.fn.extend({prop:function(t,e){return Te(this,oe.prop,t,e,arguments.length>1)},removeProp:function(t){return t=oe.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),oe.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,o,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return r=1!==s||!oe.isXMLDoc(t),r&&(e=oe.propFix[e]||e,o=oe.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=oe.find.attr(t,"tabindex");return e?parseInt(e,10):Dn.test(t.nodeName)||Tn.test(t.nodeName)&&t.href?0:-1}}}}),ne.hrefNormalized||oe.each(["href","src"],function(t,e){oe.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ne.optSelected||(oe.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),ne.enctype||(oe.propFix.enctype="encoding");var Nn=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(t){var e,n,i,o,r,s,a=0,l=this.length,h="string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).addClass(t.call(this,e,this.className))});if(h)for(e=(t||"").match(ye)||[];l>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Nn," "):" ")){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=oe.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(t){var e,n,i,o,r,s,a=0,l=this.length,h=0===arguments.length||"string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).removeClass(t.call(this,e,this.className))});if(h)for(e=(t||"").match(ye)||[];l>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Nn," "):"")){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");s=t?oe.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(oe.isFunction(t)?function(n){oe(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,o=oe(this),r=t.match(ye)||[];e=r[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);
else(n===Ie||"boolean"===n)&&(this.className&&oe._data(this,"__className__",this.className),this.className=this.className||t===!1?"":oe._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Nn," ").indexOf(e)>=0)return!0;return!1}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){oe.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),oe.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var On=oe.now(),Mn=/\?/,An=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;oe.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,i=null,o=oe.trim(e+"");return o&&!oe.trim(o.replace(An,function(t,e,o,r){return n&&e&&(i=0),0===i?t:(n=o||e,i+=!r-!o,"")}))?Function("return "+o)():oe.error("Invalid JSON: "+e)},oe.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(i=new DOMParser,n=i.parseFromString(e,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e))}catch(o){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+e),n};var Pn,Ln,Un=/#.*$/,Fn=/([?&])_=[^&]*/,Bn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Rn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Hn=/^(?:GET|HEAD)$/,jn=/^\/\//,zn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,qn={},Vn={},Wn="*/".concat("*");try{Ln=location.href}catch($n){Ln=fe.createElement("a"),Ln.href="",Ln=Ln.href}Pn=zn.exec(Ln.toLowerCase())||[],oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ln,type:"GET",isLocal:Rn.test(Pn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?j(j(t,oe.ajaxSettings),e):j(oe.ajaxSettings,t)},ajaxPrefilter:R(qn),ajaxTransport:R(Vn),ajax:function(t,e){function n(t,e,n,i){var o,u,g,v,b,C=e;2!==y&&(y=2,a&&clearTimeout(a),h=void 0,s=i||"",k.readyState=t>0?4:0,o=t>=200&&300>t||304===t,n&&(v=z(c,k,n)),v=q(c,v,k,o),o?(c.ifModified&&(b=k.getResponseHeader("Last-Modified"),b&&(oe.lastModified[r]=b),b=k.getResponseHeader("etag"),b&&(oe.etag[r]=b)),204===t||"HEAD"===c.type?C="nocontent":304===t?C="notmodified":(C=v.state,u=v.data,g=v.error,o=!g)):(g=C,(t||!C)&&(C="error",0>t&&(t=0))),k.status=t,k.statusText=(e||C)+"",o?f.resolveWith(d,[u,C,k]):f.rejectWith(d,[k,C,g]),k.statusCode(_),_=void 0,l&&p.trigger(o?"ajaxSuccess":"ajaxError",[k,c,o?u:g]),m.fireWith(d,[k,C]),l&&(p.trigger("ajaxComplete",[k,c]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,o,r,s,a,l,h,u,c=oe.ajaxSetup({},e),d=c.context||c,p=c.context&&(d.nodeType||d.jquery)?oe(d):oe.event,f=oe.Deferred(),m=oe.Callbacks("once memory"),_=c.statusCode||{},g={},v={},y=0,b="canceled",k={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!u)for(u={};e=Bn.exec(s);)u[e[1].toLowerCase()]=e[2];e=u[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return y||(t=v[n]=v[n]||t,g[t]=e),this},overrideMimeType:function(t){return y||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)_[e]=[_[e],t[e]];else k.always(t[k.status]);return this},abort:function(t){var e=t||b;return h&&h.abort(e),n(0,e),this}};if(f.promise(k).complete=m.add,k.success=k.done,k.error=k.fail,c.url=((t||c.url||Ln)+"").replace(Un,"").replace(jn,Pn[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=oe.trim(c.dataType||"*").toLowerCase().match(ye)||[""],null==c.crossDomain&&(i=zn.exec(c.url.toLowerCase()),c.crossDomain=!(!i||i[1]===Pn[1]&&i[2]===Pn[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Pn[3]||("http:"===Pn[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=oe.param(c.data,c.traditional)),H(qn,c,e,k),2===y)return k;l=oe.event&&c.global,l&&0===oe.active++&&oe.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Hn.test(c.type),r=c.url,c.hasContent||(c.data&&(r=c.url+=(Mn.test(r)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Fn.test(r)?r.replace(Fn,"$1_="+On++):r+(Mn.test(r)?"&":"?")+"_="+On++)),c.ifModified&&(oe.lastModified[r]&&k.setRequestHeader("If-Modified-Since",oe.lastModified[r]),oe.etag[r]&&k.setRequestHeader("If-None-Match",oe.etag[r])),(c.data&&c.hasContent&&c.contentType!==!1||e.contentType)&&k.setRequestHeader("Content-Type",c.contentType),k.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Wn+"; q=0.01":""):c.accepts["*"]);for(o in c.headers)k.setRequestHeader(o,c.headers[o]);if(c.beforeSend&&(c.beforeSend.call(d,k,c)===!1||2===y))return k.abort();b="abort";for(o in{success:1,error:1,complete:1})k[o](c[o]);if(h=H(Vn,c,e,k)){k.readyState=1,l&&p.trigger("ajaxSend",[k,c]),c.async&&c.timeout>0&&(a=setTimeout(function(){k.abort("timeout")},c.timeout));try{y=1,h.send(g,n)}catch(C){if(!(2>y))throw C;n(-1,C)}}else n(-1,"No Transport");return k},getJSON:function(t,e,n){return oe.get(t,e,n,"json")},getScript:function(t,e){return oe.get(t,void 0,e,"script")}}),oe.each(["get","post"],function(t,e){oe[e]=function(t,n,i,o){return oe.isFunction(n)&&(o=o||i,i=n,n=void 0),oe.ajax({url:t,type:e,dataType:o,data:n,success:i})}}),oe._evalUrl=function(t){return oe.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(t){if(oe.isFunction(t))return this.each(function(e){oe(this).wrapAll(t.call(this,e))});if(this[0]){var e=oe(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(oe.isFunction(t)?function(e){oe(this).wrapInner(t.call(this,e))}:function(){var e=oe(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=oe.isFunction(t);return this.each(function(n){oe(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||oe.css(t,"display"))},oe.expr.filters.visible=function(t){return!oe.expr.filters.hidden(t)};var Yn=/%20/g,Jn=/\[\]$/,Xn=/\r?\n/g,Gn=/^(?:submit|button|image|reset|file)$/i,Kn=/^(?:input|select|textarea|keygen)/i;oe.param=function(t,e){var n,i=[],o=function(t,e){e=oe.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(t)||t.jquery&&!oe.isPlainObject(t))oe.each(t,function(){o(this.name,this.value)});else for(n in t)V(n,t[n],e,o);return i.join("&").replace(Yn,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=oe.prop(this,"elements");return t?oe.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!oe(this).is(":disabled")&&Kn.test(this.nodeName)&&!Gn.test(t)&&(this.checked||!Ne.test(t))}).map(function(t,e){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(t){return{name:e.name,value:t.replace(Xn,"\r\n")}}):{name:e.name,value:n.replace(Xn,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&W()||$()}:W;var Qn=0,Zn={},ti=oe.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Zn)Zn[t](void 0,!0)}),ne.cors=!!ti&&"withCredentials"in ti,ti=ne.ajax=!!ti,ti&&oe.ajaxTransport(function(t){if(!t.crossDomain||ne.cors){var e;return{send:function(n,i){var o,r=t.xhr(),s=++Qn;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)void 0!==n[o]&&r.setRequestHeader(o,n[o]+"");r.send(t.hasContent&&t.data||null),e=function(n,o){var a,l,h;if(e&&(o||4===r.readyState))if(delete Zn[s],e=void 0,r.onreadystatechange=oe.noop,o)4!==r.readyState&&r.abort();else{h={},a=r.status,"string"==typeof r.responseText&&(h.text=r.responseText);try{l=r.statusText}catch(u){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=h.text?200:404}h&&i(a,l,h,r.getAllResponseHeaders())},t.async?4===r.readyState?setTimeout(e):r.onreadystatechange=Zn[s]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return oe.globalEval(t),t}}}),oe.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),oe.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=fe.head||oe("head")[0]||fe.documentElement;return{send:function(i,o){e=fe.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||o(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var ei=[],ni=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ei.pop()||oe.expando+"_"+On++;return this[t]=!0,t}}),oe.ajaxPrefilter("json jsonp",function(e,n,i){var o,r,s,a=e.jsonp!==!1&&(ni.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(o=e.jsonpCallback=oe.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(ni,"$1"+o):e.jsonp!==!1&&(e.url+=(Mn.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||oe.error(o+" was not called"),s[0]},e.dataTypes[0]="json",r=t[o],t[o]=function(){s=arguments},i.always(function(){t[o]=r,e[o]&&(e.jsonpCallback=n.jsonpCallback,ei.push(o)),s&&oe.isFunction(r)&&r(s[0]),s=r=void 0}),"script"):void 0}),oe.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||fe;var i=ce.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=oe.buildFragment([t],e,o),o&&o.length&&oe(o).remove(),oe.merge([],i.childNodes))};var ii=oe.fn.load;oe.fn.load=function(t,e,n){if("string"!=typeof t&&ii)return ii.apply(this,arguments);var i,o,r,s=this,a=t.indexOf(" ");return a>=0&&(i=oe.trim(t.slice(a,t.length)),t=t.slice(0,a)),oe.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&oe.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){o=arguments,s.html(i?oe("<div>").append(oe.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){s.each(n,o||[t.responseText,e,t])}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){oe.fn[e]=function(t){return this.on(e,t)}}),oe.expr.filters.animated=function(t){return oe.grep(oe.timers,function(e){return t===e.elem}).length};var oi=t.document.documentElement;oe.offset={setOffset:function(t,e,n){var i,o,r,s,a,l,h,u=oe.css(t,"position"),c=oe(t),d={};"static"===u&&(t.style.position="relative"),a=c.offset(),r=oe.css(t,"top"),l=oe.css(t,"left"),h=("absolute"===u||"fixed"===u)&&oe.inArray("auto",[r,l])>-1,h?(i=c.position(),s=i.top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),oe.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+o),"using"in e?e.using.call(t,d):c.css(d)}},oe.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){oe.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return e=r.documentElement,oe.contains(e,o)?(typeof o.getBoundingClientRect!==Ie&&(i=o.getBoundingClientRect()),n=Y(r),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===oe.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),oe.nodeName(t[0],"html")||(n=t.offset()),n.top+=oe.css(t[0],"borderTopWidth",!0),n.left+=oe.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-oe.css(i,"marginTop",!0),left:e.left-n.left-oe.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||oi;t&&!oe.nodeName(t,"html")&&"static"===oe.css(t,"position");)t=t.offsetParent;return t||oi})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);oe.fn[t]=function(i){return Te(this,function(t,i,o){var r=Y(t);return void 0===o?r?e in r?r[e]:r.document.documentElement[i]:t[i]:void(r?r.scrollTo(n?oe(r).scrollLeft():o,n?o:oe(r).scrollTop()):t[i]=o)},t,i,arguments.length,null)}}),oe.each(["top","left"],function(t,e){oe.cssHooks[e]=S(ne.pixelPosition,function(t,n){return n?(n=en(t,e),on.test(n)?oe(t).position()[e]+"px":n):void 0})}),oe.each({Height:"height",Width:"width"},function(t,e){oe.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){oe.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||o===!0?"margin":"border");return Te(this,function(e,n,i){var o;return oe.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?oe.css(e,n,s):oe.style(e,n,i,s)},e,r?i:void 0,r,null)}})}),oe.fn.size=function(){return this.length},oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var ri=t.jQuery,si=t.$;return oe.noConflict=function(e){return t.$===oe&&(t.$=si),e&&t.jQuery===oe&&(t.jQuery=ri),oe},typeof e===Ie&&(t.jQuery=t.$=oe),oe}),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)},fire:function(e,n,i){var o=t.Event(n);return e.trigger(o,i),o.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(i){var o,r,s,a,l,h,u,c;if(n.fire(i,"ajax:before")){if(a=i.data("cross-domain"),l=a===e?null:a,h=i.data("with-credentials")||null,u=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){o=i.attr("method"),r=i.attr("action"),s=i.serializeArray();var d=i.data("ujs:submit-button");d&&(s.push(d),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(o=i.data("method"),r=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(o=i.data("method")||"get",r=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):(o=i.data("method"),r=n.href(i),s=i.data("params")||null);return c={type:o||"GET",data:s,dataType:u,beforeSend:function(t,o){return o.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),n.fire(i,"ajax:beforeSend",[t,o])?void i.trigger("ajax:send",t):!1},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:l},h&&(c.xhrFields={withCredentials:h}),r&&(c.url=r),n.ajax(c)}return!1},handleMethod:function(i){var o=n.href(i),r=i.data("method"),s=i.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),h=t('<form method="post" action="'+o+'"></form>'),u='<input name="_method" value="'+r+'" type="hidden" />';l!==e&&a!==e&&(u+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&h.attr("target",s),h.hide().append(u).appendTo("body"),h.submit()},formElements:function(e,n){return e.is("form")?t(e[0].elements).filter(n):e.find(n)},disableFormElements:function(e){n.formElements(e,n.disableSelector).each(function(){n.disableFormElement(t(this))})},disableFormElement:function(t){var n,i;n=t.is("button")?"html":"val",i=t.data("disable-with"),t.data("ujs:enable-with",t[n]()),i!==e&&t[n](i),t.prop("disabled",!0)},enableFormElements:function(e){n.formElements(e,n.enableSelector).each(function(){n.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,i=t.data("confirm"),o=!1;return i?(n.fire(t,"confirm")&&(o=n.confirm(i),e=n.fire(t,"confirm:complete",[o])),o&&e):!0},blankInputs:function(e,n,i){var o,r,s=t(),a=n||"input,textarea",l=e.find(a);return l.each(function(){if(o=t(this),r=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):o.val(),!r==!i){if(o.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+o.attr("name")+'"]').length)return!0;s=s.add(o)}}),s.length?s:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var i=t.data("disable-with");t.data("ujs:enable-with",t.html()),i!==e&&t.html(i),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),t(window).on("pageshow.rails",function(){t(t.rails.enableSelector).each(function(){var e=t(this);e.data("ujs:enable-with")&&t.rails.enableFormElement(e)}),t(t.rails.linkDisableSelector).each(function(){var e=t(this);e.data("ujs:enable-with")&&t.rails.enableElement(e)})}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(t(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var o=t(this),r=o.data("method"),s=o.data("params"),a=i.metaKey||i.ctrlKey;if(!n.allowAction(o))return n.stopEverything(i);if(!a&&o.is(n.linkDisableSelector)&&n.disableElement(o),o.data("remote")!==e){if(a&&(!r||"GET"===r)&&!s)return!0;var l=n.handleRemote(o);return l===!1?n.enableElement(o):l.fail(function(){n.enableElement(o)}),!1}return r?(n.handleMethod(o),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var o=n.handleRemote(i);return o===!1?n.enableFormElement(i):o.fail(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var o,r,s=t(this),a=s.data("remote")!==e;if(!n.allowAction(s))return n.stopEverything(i);if(s.attr("novalidate")==e&&(o=n.blankInputs(s,n.requiredInputSelector),o&&n.fire(s,"ajax:aborted:required",[o])))return n.stopEverything(i);if(a){if(r=n.nonBlankInputs(s,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(s)},13);var l=n.fire(s,"ajax:aborted:file",[r]);return l||setTimeout(function(){n.enableFormElements(s)},13),l}return n.handleRemote(s),!1}setTimeout(function(){n.disableFormElements(s)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var o=i.attr("name"),r=o?{name:o,value:i.val()}:null;i.closest("form").data("ujs:submit-button",r)}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(jQuery),Ink.createModule("Ink.Autoload",1,["Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Dom.Loaded_1","Ink.UI.SmoothScroller_1","Ink.UI.Close_1","Ink.UI.Drawer_1"],function(t,e,n,i,o,r){"use strict";function s(e){try{t.select(e,a)}catch(n){return Ink.error(n),!1}return!0}var a=document.createElement("div"),l={selectors:{Animate_1:".ink-animate",Carousel_1:".ink-carousel",DatePicker_1:".ink-datepicker",Draggable_1:".ink-draggable",Dropdown_1:".ink-dropdown","Droppable_1.add":".ink-droppable",FormValidator_2:".ink-formvalidator",Gallery_1:"ul.ink-gallery-source",LazyLoad_1:".ink-lazyload",Modal_1:".ink-modal",ProgressBar_1:".ink-progress-bar",SortableList_1:".ink-sortable-list",Spy_1:'[data-spy="true"]',Stacker_1:".ink-stacker",Sticky_1:".ink-sticky, .sticky",Table_1:".ink-table",Tabs_1:".ink-tabs",Toggle_1:".ink-toggle, .toggle",Tooltip_1:".ink-tooltip, .tooltip",TreeView_1:".ink-tree-view"},defaultOptions:{},run:function(n,s){function a(i){var o;/\./.test(i)&&(i=i.split("."),o=i[1],i=i[0]);var r="Ink.UI."+i,a=t.select(s.selectors[i],n);a=e.filter(a,h),a.length&&Ink.requireModules([r],function(t){e.forEach(a,function(e){("function"!=typeof t.getInstance||null==t.getInstance(e))&&(o?t[o](e,l.defaultOptions[i]):new t(e,l.defaultOptions[i]))})})}function h(t){return s.forceAutoload===!0?!0:"function"==typeof t.getAttribute||"object"==typeof t.getAttribute?"false"!==t.getAttribute("data-autoload"):void 0}s=Ink.extendObj({selectors:l.selectors},s||{});for(var u in s.selectors)s.selectors.hasOwnProperty(u)&&a(u);s.createClose!==!1&&new o,s.createSmoothScroller!==!1&&i.init(),s.createDrawer!==!1&&(!t.matchesSelector(document.body,".ink-drawer")||r.getInstance&&r.getInstance(document.body)||new r(document.body))},add:function(t,e){return s(e)?void(l.selectors[t]?l.selectors[t]+=", "+e:l.selectors[t]=e):!1},remove:function(t){delete l.selectors[t]}};for(var h in l.selectors)l.selectors.hasOwnProperty(h)&&(l.defaultOptions[h]={});return window.INK_NO_AUTO_LOAD||n.run(function(){l.run(document,{createSmoothScroller:!0,createClose:!0}),l.firstRunDone=!0}),l}),Ink.createModule("Ink.Autoload",1,["Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Dom.Loaded_1","Ink.UI.SmoothScroller_1","Ink.UI.Close_1","Ink.UI.Drawer_1"],function(t,e,n,i,o,r){"use strict";function s(e){try{t.select(e,a)}catch(n){return Ink.error(n),!1}return!0}var a=document.createElement("div"),l={selectors:{Animate_1:".ink-animate",Carousel_1:".ink-carousel",DatePicker_1:".ink-datepicker",Draggable_1:".ink-draggable",Dropdown_1:".ink-dropdown","Droppable_1.add":".ink-droppable",FormValidator_2:".ink-formvalidator",Gallery_1:"ul.ink-gallery-source",LazyLoad_1:".ink-lazyload",Modal_1:".ink-modal",ProgressBar_1:".ink-progress-bar",SortableList_1:".ink-sortable-list",Spy_1:'[data-spy="true"]',Stacker_1:".ink-stacker",Sticky_1:".ink-sticky, .sticky",Table_1:".ink-table",Tabs_1:".ink-tabs",Toggle_1:".ink-toggle, .toggle",Tooltip_1:".ink-tooltip, .tooltip",TreeView_1:".ink-tree-view"},defaultOptions:{},run:function(n,s){function a(i){var o;/\./.test(i)&&(i=i.split("."),o=i[1],i=i[0]);var r="Ink.UI."+i,a=t.select(s.selectors[i],n);a=e.filter(a,h),a.length&&Ink.requireModules([r],function(t){e.forEach(a,function(e){("function"!=typeof t.getInstance||null==t.getInstance(e))&&(o?t[o](e,l.defaultOptions[i]):new t(e,l.defaultOptions[i]))})})}function h(t){return s.forceAutoload===!0?!0:"function"==typeof t.getAttribute||"object"==typeof t.getAttribute?"false"!==t.getAttribute("data-autoload"):void 0}s=Ink.extendObj({selectors:l.selectors},s||{});for(var u in s.selectors)s.selectors.hasOwnProperty(u)&&a(u);s.createClose!==!1&&new o,s.createSmoothScroller!==!1&&i.init(),s.createDrawer!==!1&&(!t.matchesSelector(document.body,".ink-drawer")||r.getInstance&&r.getInstance(document.body)||new r(document.body))},add:function(t,e){return s(e)?void(l.selectors[t]?l.selectors[t]+=", "+e:l.selectors[t]=e):!1},remove:function(t){delete l.selectors[t]}};for(var h in l.selectors)l.selectors.hasOwnProperty(h)&&(l.defaultOptions[h]={});return window.INK_NO_AUTO_LOAD||n.run(function(){l.run(document,{createSmoothScroller:!0,createClose:!0}),l.firstRunDone=!0}),l});var Holder=Holder||{};!function(t,e){function n(t,e){var n="complete",i="readystatechange",o=!1,r=o,s=!0,a=t.document,l=a.documentElement,h=a.addEventListener?"addEventListener":"attachEvent",u=a.addEventListener?"removeEventListener":"detachEvent",c=a.addEventListener?"":"on",d=function(s){(s.type!=i||a.readyState==n)&&(("load"==s.type?t:a)[u](c+s.type,d,o),!r&&(r=!0)&&e.call(t,null))},p=function(){try{l.doScroll("left")}catch(t){return void setTimeout(p,50)}d("poll")};if(a.readyState==n)e.call(t,"lazy");else{if(a.createEventObject&&l.doScroll){try{s=!t.frameElement}catch(f){}s&&p()}a[h](c+"DOMContentLoaded",d,o),a[h](c+i,d,o),t[h](c+"load",d,o)}}function o(t){t=t.match(/^(\W)?(.*)/);var e=document["getElement"+(t[1]?"#"==t[1]?"ById":"sByClassName":"sByTagName")](t[2]),n=[];return null!=e&&(n=e.length?e:0==e.length?e:[e]),n}function r(t,e){var n={};for(var i in t)n[i]=t[i];for(var o in e)n[o]=e[o];return n}function s(t,e,n){var i=[e,t].sort(),o=Math.round(i[1]/16),r=(Math.round(i[0]/16),Math.max(n.size,o));return{height:r}}function a(t,e,n,i){var o=s(e.width,e.height,n),r=o.height,a=e.width*i,l=e.height*i,h=n.font?n.font:"sans-serif";f.width=a,f.height=l,t.textAlign="center",t.textBaseline="middle",t.fillStyle=n.background,t.fillRect(0,0,a,l),t.fillStyle=n.foreground,t.font="bold "+r+"px "+h;var u=n.text?n.text:e.width+"x"+e.height;return t.measureText(u).width/a>1&&(r=n.size/(t.measureText(u).width/a)),t.font="bold "+r*i+"px "+h,t.fillText(u,a/2,l/2,a),f.toDataURL("image/png")}function l(t,e,n,i){var o=n.dimensions,s=n.theme,l=n.text?decodeURIComponent(n.text):n.text,h=o.width+"x"+o.height;s=l?r(s,{text:l}):s,s=n.font?r(s,{font:n.font}):s,"image"==t?(e.setAttribute("data-src",i),e.setAttribute("alt",l?l:s.text?s.text+" ["+h+"]":h),(p||!n.auto)&&(e.style.width=o.width+"px",e.style.height=o.height+"px"),p?e.style.backgroundColor=s.background:e.setAttribute("src",a(m,o,s,v))):p||(e.style.backgroundImage="url("+a(m,o,s,v)+")",e.style.backgroundSize=o.width+"px "+o.height+"px")}function h(t,e){var n=e.dimensions,i=e.theme,o=e.text,s=n.width+"x"+n.height;i=o?r(i,{text:o}):i;var a=document.createElement("div");t.fluidRef&&(a=t.fluidRef),a.style.backgroundColor=i.background,a.style.color=i.foreground,a.className=t.className+" holderjs-fluid",a.style.width=e.dimensions.width+(e.dimensions.width.indexOf("%")>0?"":"px"),a.style.height=e.dimensions.height+(e.dimensions.height.indexOf("%")>0?"":"px"),a.id=t.id,t.style.width=0,t.style.height=0,t.fluidRef||(i.text?a.appendChild(document.createTextNode(i.text)):(a.appendChild(document.createTextNode(s)),y.push(a),setTimeout(u,0))),t.fluidRef=a,t.parentNode.insertBefore(a,t.nextSibling),window.jQuery&&jQuery(function(e){e(t).on("load",function(){t.style.width=a.style.width,t.style.height=a.style.height,e(t).show(),e(a).remove()})})}function u(){for(i in y)if(y.hasOwnProperty(i)){var t=y[i],e=t.firstChild;t.style.lineHeight=t.offsetHeight+"px",e.data=t.offsetWidth+"x"+t.offsetHeight}}function c(e,n){var i={theme:b.themes.gray},o=!1;for(sl=e.length,j=0;j<sl;j++){var r=e[j];t.flags.dimensions.match(r)?(o=!0,i.dimensions=t.flags.dimensions.output(r)):t.flags.fluid.match(r)?(o=!0,i.dimensions=t.flags.fluid.output(r),i.fluid=!0):t.flags.colors.match(r)?i.theme=t.flags.colors.output(r):n.themes[r]?i.theme=n.themes[r]:t.flags.text.match(r)?i.text=t.flags.text.output(r):t.flags.font.match(r)?i.font=t.flags.font.output(r):t.flags.auto.match(r)&&(i.auto=!0)}return o?i:!1}var d=!1,p=!1,f=document.createElement("canvas");if(document.getElementsByClassName||(document.getElementsByClassName=function(t){var e,n,i,o=document,r=[];if(o.querySelectorAll)return o.querySelectorAll("."+t);if(o.evaluate)for(n=".//*[contains(concat(' ', @class, ' '), ' "+t+" ')]",e=o.evaluate(n,o,null,0,null);i=e.iterateNext();)r.push(i);else for(e=o.getElementsByTagName("*"),n=new RegExp("(^|\\s)"+t+"(\\s|$)"),i=0;i<e.length;i++)n.test(e[i].className)&&r.push(e[i]);return r}),window.getComputedStyle||(window.getComputedStyle=function(t){return this.el=t,this.getPropertyValue=function(e){var n=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),n.test(e)&&(e=e.replace(n,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]?t.currentStyle[e]:null},this}),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(t){var e=this.__proto__||this.constructor.prototype;return t in this&&(!(t in e)||e[t]!==this[t])}),f.getContext)if(f.toDataURL("image/png").indexOf("data:image/png")<0)p=!0;else var m=f.getContext("2d");else p=!0;var _=1,g=1;p||(_=window.devicePixelRatio||1,g=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1);var v=_/g,y=[],b={domain:"holder.js",images:"img",bgnodes:".holderjs",themes:{gray:{background:"#eee",foreground:"#aaa",size:12},social:{background:"#3a5a97",foreground:"#fff",size:12},industrial:{background:"#434A52",foreground:"#C2F200",size:12},ink:{background:"#222",foreground:"#fff",size:18}},stylesheet:".holderjs-fluid {font-size:16px;font-weight:bold;text-align:center;font-family:sans-serif;margin:0}"};t.flags={dimensions:{regex:/^(\d+)x(\d+)$/,output:function(t){var e=this.regex.exec(t);return{width:+e[1],height:+e[2]}}},fluid:{regex:/^([0-9%]+)x([0-9%]+)$/,output:function(t){var e=this.regex.exec(t);return{width:e[1],height:e[2]}}},colors:{regex:/#([0-9a-f]{3,})\:#([0-9a-f]{3,})/i,output:function(t){var e=this.regex.exec(t);return{size:b.themes.gray.size,foreground:"#"+e[2],background:"#"+e[1]}}},text:{regex:/text\:(.*)/,output:function(t){return this.regex.exec(t)[1]}},font:{regex:/font\:(.*)/,output:function(t){return this.regex.exec(t)[1]}},auto:{regex:/^auto$/}};for(var k in t.flags)t.flags.hasOwnProperty(k)&&(t.flags[k].match=function(t){return t.match(this.regex)});t.add_theme=function(e,n){return null!=e&&null!=n&&(b.themes[e]=n),t},t.add_image=function(e,n){var i=o(n);if(i.length)for(var r=0,s=i.length;s>r;r++){var a=document.createElement("img");
a.setAttribute("data-src",e),i[r].appendChild(a)}return t},t.run=function(e){var n=r(b,e),i=[],s=[],a=[];for("string"==typeof n.images?s=o(n.images):window.NodeList&&n.images instanceof window.NodeList?s=n.images:window.Node&&n.images instanceof window.Node&&(s=[n.images]),"string"==typeof n.bgnodes?a=o(n.bgnodes):window.NodeList&&n.elements instanceof window.NodeList?a=n.bgnodes:window.Node&&n.bgnodes instanceof window.Node&&(a=[n.bgnodes]),d=!0,m=0,f=s.length;f>m;m++)i.push(s[m]);var u=document.getElementById("holderjs-style");u||(u=document.createElement("style"),u.setAttribute("id","holderjs-style"),u.type="text/css",document.getElementsByTagName("head")[0].appendChild(u)),n.nocss||(u.styleSheet?u.styleSheet.cssText+=n.stylesheet:u.appendChild(document.createTextNode(n.stylesheet)));for(var p=new RegExp(n.domain+'/(.*?)"?\\)'),f=a.length,m=0;f>m;m++){var _=window.getComputedStyle(a[m],null).getPropertyValue("background-image"),g=_.match(p);if(g){var v=c(g[1].split("/"),n);v&&l("background",a[m],v,_)}}for(f=i.length,m=0;f>m;m++){var y=attr_data_src=_=null;try{y=i[m].getAttribute("src"),attr_datasrc=i[m].getAttribute("data-src")}catch(k){}if(null==attr_datasrc&&y&&y.indexOf(n.domain)>=0?_=y:attr_datasrc&&attr_datasrc.indexOf(n.domain)>=0&&(_=attr_datasrc),_){var v=c(_.substr(_.lastIndexOf(n.domain)+n.domain.length+1).split("/"),n);v&&(v.fluid?h(i[m],v,_):l("image",i[m],v,_))}}return t},n(e,function(){window.addEventListener?(window.addEventListener("resize",u,!1),window.addEventListener("orientationchange",u,!1)):window.attachEvent("onresize",u),d||t.run()}),"function"==typeof define&&define.amd&&define("Holder",[],function(){return t})}(Holder,window),function(t,e){function n(t,e){var n=t.createElement("p"),i=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var t=v.elements;return"string"==typeof t?t.split(" "):t}function o(t){var e=g[t[m]];return e||(e={},_++,t[m]=_,g[_]=e),e}function r(t,n,i){return n||(n=e),c?n.createElement(t):(i||(i=o(n)),n=i.cache[t]?i.cache[t].cloneNode():f.test(t)?(i.cache[t]=i.createElem(t)).cloneNode():i.createElem(t),n.canHaveChildren&&!p.test(t)?i.frag.appendChild(n):n)}function s(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return v.shivMethods?r(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/\w+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(v,e.frag)}function a(t){t||(t=e);var i=o(t);return!v.shivCSS||u||i.hasCSS||(i.hasCSS=!!n(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),c||s(t,i),t}function l(t){for(var e,n=t.attributes,i=n.length,o=t.ownerDocument.createElement(b+":"+t.nodeName);i--;)e=n[i],e.specified&&o.setAttribute(e.nodeName,e.nodeValue);return o.style.cssText=t.style.cssText,o}function h(t){function e(){clearTimeout(a._removeSheetTimer),r&&r.removeNode(!0),r=null}var r,s,a=o(t),h=t.namespaces,u=t.parentWindow;return!k||t.printShived?t:("undefined"==typeof h[b]&&h.add(b),u.attachEvent("onbeforeprint",function(){e();var o,a,h;h=t.styleSheets;for(var u=[],c=h.length,d=Array(c);c--;)d[c]=h[c];for(;h=d.pop();)if(!h.disabled&&y.test(h.media)){try{o=h.imports,a=o.length}catch(p){a=0}for(c=0;a>c;c++)d.push(o[c]);try{u.push(h.cssText)}catch(f){}}for(o=u.reverse().join("").split("{"),a=o.length,c=RegExp("(^|[\\s,>+~])("+i().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),d="$1"+b+"\\:$2";a--;)u=o[a]=o[a].split("}"),u[u.length-1]=u[u.length-1].replace(c,d),o[a]=u.join("}");for(u=o.join("{"),a=t.getElementsByTagName("*"),c=a.length,d=RegExp("^(?:"+i().join("|")+")$","i"),h=[];c--;)o=a[c],d.test(o.nodeName)&&h.push(o.applyElement(l(o)));s=h,r=n(t,u)}),u.attachEvent("onafterprint",function(){for(var t=s,n=t.length;n--;)t[n].removeNode();clearTimeout(a._removeSheetTimer),a._removeSheetTimer=setTimeout(e,500)}),t.printShived=!0,t)}var u,c,d=t.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",_=0,g={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",u="hidden"in t;var n;if(!(n=1==t.childNodes.length)){e.createElement("a");var i=e.createDocumentFragment();n="undefined"==typeof i.cloneNode||"undefined"==typeof i.createDocumentFragment||"undefined"==typeof i.createElement}c=n}catch(o){c=u=!0}}();var v={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:!1!==d.shivCSS,supportsUnknownElements:c,shivMethods:!1!==d.shivMethods,type:"default",shivDocument:a,createElement:r,createDocumentFragment:function(t,n){if(t||(t=e),c)return t.createDocumentFragment();for(var n=n||o(t),r=n.frag.cloneNode(),s=0,a=i(),l=a.length;l>s;s++)r.createElement(a[s]);return r}};t.html5=v,a(e);var y=/^$|\b(?:all|print)\b/,b="html5shiv",k=!c&&function(){var n=e.documentElement;return!("undefined"==typeof e.namespaces||"undefined"==typeof e.parentWindow||"undefined"==typeof n.applyElement||"undefined"==typeof n.removeNode||"undefined"==typeof t.attachEvent)}();v.type+=" print",v.shivPrint=h,h(e)}(this,document),function(t,e){function n(){var t=m.elements;return"string"==typeof t?t.split(" "):t}function i(t){var e=f[t[d]];return e||(e={},p++,t[d]=p,f[p]=e),e}function o(t,n,o){return n||(n=e),l?n.createElement(t):(o||(o=i(n)),n=o.cache[t]?o.cache[t].cloneNode():c.test(t)?(o.cache[t]=o.createElem(t)).cloneNode():o.createElem(t),n.canHaveChildren&&!u.test(t)?o.frag.appendChild(n):n)}function r(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return m.shivMethods?o(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/[\w\-]+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(m,e.frag)}function s(t){t||(t=e);var n=i(t);if(m.shivCSS&&!a&&!n.hasCSS){var o,s=t;o=s.createElement("p"),s=s.getElementsByTagName("head")[0]||s.documentElement,o.innerHTML="x<style>article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}</style>",o=s.insertBefore(o.lastChild,s.firstChild),n.hasCSS=!!o}return l||r(t,n),t}var a,l,h=t.html5||{},u=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,c=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,d="_html5shiv",p=0,f={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",a="hidden"in t;var n;if(!(n=1==t.childNodes.length)){e.createElement("a");var i=e.createDocumentFragment();n="undefined"==typeof i.cloneNode||"undefined"==typeof i.createDocumentFragment||"undefined"==typeof i.createElement}l=n}catch(o){l=a=!0}}();var m={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:!1!==h.shivCSS,supportsUnknownElements:l,shivMethods:!1!==h.shivMethods,type:"default",shivDocument:s,createElement:o,createDocumentFragment:function(t,o){if(t||(t=e),l)return t.createDocumentFragment();for(var o=o||i(t),r=o.frag.cloneNode(),s=0,a=n(),h=a.length;h>s;s++)r.createElement(a[s]);return r}};t.html5=m,s(e)}(this,document),function(t,e){"use strict";if(!("Ink"in t)){var n={},i={},o=[],r={},s=[],a={},l=Function.prototype.apply,h=function(t){if("object"!=typeof t)return!1;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};t.Ink={VERSION:"3.1.7",_checkPendingRequireModules:function(){var t,e,n,o,r,a,l=[],h=[];for(t=0,e=s.length;e>t;++t)if(n=s[t]){for(o in n.left)n.left.hasOwnProperty(o)&&(r=i[o],r&&(n.args[n.left[o]]=r,delete n.left[o],--n.remaining));if(n.remaining>0)l.push(n);else{if(a=n.cb,!a)continue;delete n.cb,h.push([a,n.args])}}s=l;for(var u=0;u<h.length;u++)h[u][0].apply(!1,h[u][1]);s.length>0&&setTimeout(function(){Ink._checkPendingRequireModules()},0)},getPath:function(t,e){var i,o,r,s,a=t.split(/[._]/g);for(o=a.length;o>=0;o-=1)if(i=a.slice(0,o+1).join("."),n[i]){r=i;break}return r in n?(s=n[r],/\/$/.test(s)||(s+="/"),o<a.length&&(s+=a.slice(o+1).join("/")+"/"),e||(s+="lib.js"),s):null},setPath:function(t,e){n[t.replace(/_/,".")]=e},loadScript:function(t,n){if(-1===t.indexOf("/")){var i=t;if(t=this.getPath(t),null===t)throw new Error('Could not load script "'+i+'". Path not found in the registry. Did you misspell the name, or forgot to call setPath()?')}var o=e.createElement("script");o.setAttribute("type",n||"text/javascript"),o.setAttribute("src",t),"onerror"in o&&(o.onerror=function(){Ink.error(["Failed to load script from ",t,"."].join(""))});var r=e.head||e.getElementsByTagName("head")[0];return r?r.appendChild(o):void 0},_loadLater:function(t){setTimeout(function(){i[t]||r[t]||a[t]||(r[t]=!0,Ink.loadScript(t))},0)},namespace:function(e,n){if(!e||!e.length)return null;for(var i,o=e.split("."),r=t,s=0,a=o.length;a>s;++s)r[o[s]]=r[o[s]]||{},i=r,r=r[o[s]];return n?[i,o[s-1]]:r},getModule:function(t,e){var n=e?[t,"_",e].join(""):t;return i[n]},createModule:function(e,n,s,l){if("string"!=typeof e)throw new Error("module name must be a string!");if(!("number"==typeof n||"string"==typeof n&&n.length>0))throw new Error("version number missing!");var u=[e,"_",n].join("");a[u]=!0;var c=function(){if(!i[u]){delete r[u],delete r[e];var s=Array.prototype.slice.call(arguments),c=l.apply(t,s);o.push(u),"object"==typeof c?c._version=n:"function"==typeof c&&(c.prototype._version=n,c._version=n);var d,p=0===e.indexOf("Ink.");p&&(d=Ink.namespace(e,!0)),i[u]=c,delete a[u],p&&(d[0][d[1]+"_"+n]=c),i[e]=c,p&&h(d[0][d[1]])&&(d[0][d[1]]=c),this&&Ink._checkPendingRequireModules()}};this.requireModules(s,c)},requireModules:function(t,e){var n,o,a,l,h;if(o=t&&t.length,a={args:new Array(o),left:{},remaining:o,cb:e},"object"!=typeof t||void 0===t.length)throw new Error("Dependency list should be an array!");if("function"!=typeof e)throw new Error("Callback should be a function!");for(n=0;o>n;++n)Ink._moduleRenames[t[n]]?(Ink.warn(t[n]+" was renamed to "+Ink._moduleRenames[t[n]]),l=Ink._moduleRenames[t[n]]):l=t[n],l?(h=i[l],h?(a.args[n]=h,--a.remaining):(r[l]||Ink._loadLater(l),a.left[l]=n)):--a.remaining;a.remaining>0?s.push(a):e.apply(!0,a.args)},_moduleRenames:{"Ink.UI.Aux_1":"Ink.UI.Common_1"},getModulesLoadOrder:function(){return o.slice()},getModuleScripts:function(){var t=this.getModulesLoadOrder();return t.unshift("Ink_1"),t=t.map(function(t){return["<scr",'ipt type="text/javascript" src="',Ink.getModuleURL(t),'"></scr',"ipt>"].join("")}),t.join("\n")},createExt:function(t,e,n,i){return Ink.createModule("Ink.Ext."+t,e,n,i)},bind:function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments),o=n.concat(i);return t.apply(e===!1?this:e,o)}},bindMethod:function(t,e){return Ink.bind.apply(Ink,[t[e],t].concat([].slice.call(arguments,2)))},bindEvent:function(e,n){var i=Array.prototype.slice.call(arguments,2);return function(o){var r=i.slice();return r.unshift(o||t.event),e.apply(n===!1?this:n,r)}},i:function(t){return"string"==typeof t?e.getElementById(t)||null:t},ss:function(t,n){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(t,n||e)},s:function(t,n){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(t,n||e)[0]||null},extendObj:function(t){for(var e=[].slice.call(arguments,1),n=0,i=e.length;i>n;n++)if(e[n])for(var o in e[n])Object.prototype.hasOwnProperty.call(e[n],o)&&(t[o]=e[n][o]);return t},log:function(){var e=t.console;e&&e.log&&l.call(e.log,e,arguments)},warn:function(){var e=t.console;e&&e.warn&&l.call(e.warn,e,arguments)},error:function(){var e=t.console;e&&e.error&&l.call(e.error,e,arguments)}}}}(window,document),Ink.createModule("Ink.Net.Ajax","1",[],function(){"use strict";var Ajax=function(t,e){this.init(t,e)};Ajax.globalOptions={parameters:{},requestHeaders:{}};var xMLHttpRequestWithCredentials="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest;return Ajax.prototype={init:function(t,e){if(!t)throw new Error("new Ink.Net.Ajax: Pass a url as the first argument!");var n=Ink.extendObj({asynchronous:!0,contentType:"application/x-www-form-urlencoded",cors:!1,validateCors:!1,debug:!1,delay:0,evalJS:!0,method:"POST",parameters:null,postBody:"",requestHeaders:null,sanitizeJSON:!1,signRequest:!1,timeout:0,useCredentials:!1,xhrProxy:"",onComplete:null,onCreate:null,onException:null,onFailure:null,onHeaders:null,onInit:null,onSuccess:null,onTimeout:null},Ajax.globalOptions);if(e&&"object"==typeof e){if(n=Ink.extendObj(n,e),"object"==typeof e.parameters)n.parameters=Ink.extendObj(Ink.extendObj({},Ajax.globalOptions.parameters),e.parameters);else if(null!==e.parameters){var i=this.paramsObjToStr(Ajax.globalOptions.parameters);i&&(n.parameters=e.parameters+"&"+i)}n.requestHeaders=Ink.extendObj({},Ajax.globalOptions.requestHeaders),n.requestHeaders=Ink.extendObj(n.requestHeaders,e.requestHeaders)}this.options=n,this.safeCall("onInit"),this.url=t;var o=this._locationFromURL(t);this.isHTTP=this._locationIsHTTP(o),this.isCrossDomain=this._locationIsCrossDomain(o,location),this.requestHasBody=n.method.search(/^get|head$/i)<0,this.options.validateCors===!0&&(this.options.cors=this.isCrossDomain),this.options.cors&&(this.isCrossDomain=!1),this.transport=this.getTransport(),this.request()},_locationFromURL:function(t){var e=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","a"):document.createElement("a");return e.setAttribute("href",t),e},_locationIsHTTP:function(t){return t.href.match(/^https?:/i)?!0:!1},_locationIsCrossDomain:function(t,e){if(e=e||window.location,Ajax.prototype._locationIsHTTP(t)&&"widget:"!==e.protocol&&"object"!=typeof window.widget){var n=t.href.split("//"),i=e.href.split("//");if(1===n.length||1===i.length)return!1;var o=n[0],r=i[0],s=/:|\//,a=n[1].split(s)[0],l=i[1].split(s)[0];return o!==r||a!==l}return!1},getTransport:function(){if(!xMLHttpRequestWithCredentials&&this.options.cors&&"XDomainRequest"in window)return this.usingXDomainReq=!0,new XDomainRequest;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"==typeof ActiveXObject)return null;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){return new ActiveXObject("Microsoft.XMLHTTP")}},setHeaders:function(){if(this.transport)try{var t={Accept:"text/javascript,text/xml,application/xml,application/xhtml+xml,text/html,application/json;q=0.9,text/plain;q=0.8,video/x-mng,image/png,image/jpeg,image/gif;q=0.2,*/*;q=0.1","Accept-Language":navigator.language,"X-Requested-With":"XMLHttpRequest","X-Ink-Version":"3"};if(this.options.cors&&(this.options.signRequest||delete t["X-Requested-With"],delete t["X-Ink-Version"]),this.options.requestHeaders&&"object"==typeof this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&(t[e]=this.options.requestHeaders[e]);this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005&&(t.Connection="close");for(var n in t)t.hasOwnProperty(n)&&this.transport.setRequestHeader(n,t[n])}catch(i){}},paramsObjToStr:function(t){var e,n,i,o,r=[];if("object"!=typeof t)return t;for(i in t)if(t.hasOwnProperty(i))if(o=t[i],"[object Array]"!==Object.prototype.toString.call(o)||isNaN(o.length))r=r.concat([encodeURIComponent(i),"=",encodeURIComponent(o),"&"]);else for(e=0,n=o.length;n>e;e++)r=r.concat([encodeURIComponent(i),"[]","=",encodeURIComponent(o[e]),"&"]);return r.length>0&&r.pop(),r.join("")},setParams:function(){var t=null,e=this.options.parameters;t="object"==typeof e?this.paramsObjToStr(e):""+e,t&&(this.url=this.url.indexOf("?")>-1?this.url.split("#")[0]+"&"+t:this.url.split("#")[0]+"?"+t)},getHeader:function(t){if(this.usingXDomainReq&&"Content-Type"===t)return this.transport.contentType;try{return this.transport.getResponseHeader(t)}catch(e){return null}},getAllHeaders:function(){try{return this.transport.getAllResponseHeaders()}catch(t){return null}},getResponse:function(){var t=this.transport,e={headerJSON:null,responseJSON:null,getHeader:this.getHeader,getAllHeaders:this.getAllHeaders,request:this,transport:t,timeTaken:new Date-this.startTime,requestedUrl:this.url};e.readyState=t.readyState;try{e.responseText=t.responseText}catch(n){}try{e.responseXML=t.responseXML}catch(n){}try{e.status=t.status}catch(n){e.status=0}try{e.statusText=t.statusText}catch(n){e.statusText=""}return e},abort:function(){if(this.transport){clearTimeout(this.delayTimeout),clearTimeout(this.stoTimeout),this._aborted=!0;try{this.transport.abort()}catch(t){}this.finish()}},runStateChange:function(){if(!this._aborted){var t=this.transport.readyState;if(3===t)this.isHTTP&&this.safeCall("onHeaders");else if(4===t||this.usingXDomainReq){if(this.options.asynchronous&&this.options.delay&&this.startTime+this.options.delay>(new Date).getTime())return void(this.delayTimeout=setTimeout(Ink.bind(this.runStateChange,this),this.options.delay+this.startTime-(new Date).getTime()));var e,n=this.transport.responseText,i=this.getResponse(),o=this.transport.status;this.isHTTP&&!this.options.asynchronous&&this.safeCall("onHeaders"),clearTimeout(this.stoTimeout),0===o?this.isHTTP?this.safeCall("onException",new Error("Ink.Net.Ajax: network error! (HTTP status 0)")):o=n?200:404:304===o&&(o=200);var r=this.usingXDomainReq||o>=200&&300>o,s=this.getHeader("Content-Type")||"";if(this.options.evalJS&&(s.indexOf("application/json")>=0||"force"===this.options.evalJS))try{e=this.evalJSON(n,this.sanitizeJSON),e&&(n=i.responseJSON=e)}catch(a){r&&this.safeCall("onException",a)}if(this.usingXDomainReq&&-1!==s.indexOf("xml")&&"DOMParser"in window){var l;switch(s){case"application/xml":case"application/xhtml+xml":case"image/svg+xml":l=s;break;default:l="text/xml"}var h=(new DOMParser).parseFromString(this.transport.responseText,l);this.transport.responseXML=h,i.responseXML=h}null!=this.transport.responseXML&&null==i.responseJSON&&""!==this.transport.responseXML.xml&&(n=this.transport.responseXML),(o||this.usingXDomainReq)&&(r?this.safeCall("onSuccess",i,n):this.safeCall("onFailure",i,n),this.safeCall("on"+o,i,n)),this.finish(i,n)}}},finish:function(t,e){if(t&&this.safeCall("onComplete",t,e),clearTimeout(this.stoTimeout),this.transport){try{this.transport.onreadystatechange=null}catch(n){}"function"==typeof this.transport.destroy&&this.transport.destroy(),this.transport=null}},safeCall:function(t){var e=arguments[1]instanceof Error?arguments[1]:null;if("function"==typeof this.options[t])try{this.options[t].apply(this,[].slice.call(arguments,1))}catch(n){Ink.error("Ink.Net.Ajax: an error was raised while executing "+t+".",n)}else e&&Ink.error("Ink.Net.Ajax: "+e)},setRequestHeader:function(t,e){this.options.requestHeaders||(this.options.requestHeaders={}),this.options.requestHeaders[t]=e},request:function(){if(this.transport){var t=null;this.requestHasBody?(null!==this.options.postBody&&""!==this.options.postBody?(t=this.options.postBody,this.setParams()):null!==this.options.parameters&&""!==this.options.parameters&&(t=this.options.parameters),"object"!=typeof t||t.nodeType?"object"!=typeof t&&null!==t&&(t=""+t):t=this.paramsObjToStr(t),this.options.contentType&&this.setRequestHeader("Content-Type",this.options.contentType)):this.setParams();var e=this.url,n=this.options.method,i=this.isCrossDomain;i&&this.options.xhrProxy&&(this.setRequestHeader("X-Url",e),e=this.options.xhrProxy+encodeURIComponent(e),i=!1);try{this.transport.open(n,e,this.options.asynchronous)}catch(o){return this.safeCall("onException",o),this.finish(this.getResponse(),null)}this.setHeaders(),this.safeCall("onCreate"),this.options.timeout&&!isNaN(this.options.timeout)&&(this.stoTimeout=setTimeout(Ink.bind(function(){this.options.onTimeout&&(this.safeCall("onTimeout"),this.abort())},this),1e3*this.options.timeout)),this.options.useCredentials&&!this.usingXDomainReq&&(this.transport.withCredentials=!0),this.options.asynchronous&&!this.usingXDomainReq?this.transport.onreadystatechange=Ink.bind(this.runStateChange,this):this.usingXDomainReq&&(this.transport.onload=Ink.bind(this.runStateChange,this));try{if(i)return void Ink.error("Ink.Net.Ajax: You are attempting to request a URL which is cross-domain from this one. To do this, you *must* enable the `cors` option!");this.startTime=(new Date).getTime(),this.transport.send(t)}catch(o){return this.safeCall("onException",o),this.finish(this.getResponse(),null)}this.options.asynchronous||this.runStateChange()}},isJSON:function(t){return"string"==typeof t&&t?(t=t.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(t)):!1},evalJSON:function(strJSON,sanitize){if(strJSON&&(!sanitize||this.isJSON(strJSON)))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("Ink.Net.Ajax: Bad JSON string. "+e)}return null}},Ajax.load=function(t,e){var n=Ajax.prototype._locationIsCrossDomain(window.location,Ajax.prototype._locationFromURL(t));return new Ajax(t,{method:"GET",cors:n,onSuccess:function(t){e(t.responseJSON||t.responseText,t)}})},Ajax.ping=function(t,e){var n=Ajax.prototype._locationIsCrossDomain(window.location,Ajax.prototype._locationFromURL(t));return new Ajax(t,{method:"HEAD",cors:n,onSuccess:function(t){"function"==typeof e&&e(t)}})},Ajax}),Ink.createModule("Ink.Net.JsonP","1",[],function(){"use strict";var t=function(t,e){this.init(t,e)};return t.prototype={init:function(t,e){if(this.options=Ink.extendObj({onSuccess:void 0,onFailure:void 0,failureObj:{},timeout:10,params:{},callbackParam:"jsoncallback",internalCallback:"_cb",randVar:!1},e||{}),this.randVar=this.options.randVar!==!1?this.options.randVar:parseInt(1e5*Math.random(),10),this.options.internalCallback+=this.randVar,this.uri=t,"function"==typeof this.options.onComplete&&(this.options.onSuccess=this.options.onComplete),"string"!=typeof this.uri)throw new Error("Ink.Net.JsonP: Please define an URI");if("function"!=typeof this.options.onSuccess)throw new Error("Ink.Net.JsonP: please define a callback function on option onSuccess!");Ink.Net.JsonP[this.options.internalCallback]=Ink.bind(function(){this.options.onSuccess(arguments[0]),this._cleanUp()},this),this.timeout=setTimeout(Ink.bind(function(){this.abort(),"function"==typeof this.options.onFailure&&this.options.onFailure(this.options.failureObj)},this),1e3*this.options.timeout),this._addScriptTag()},abort:function(){Ink.Net.JsonP[this.options.internalCallback]=Ink.bindMethod(this,"_cleanUp")},_addParamsToGet:function(t,e){var n,i,o,r=-1!==t.indexOf("?"),s=[t];for(i in e)e.hasOwnProperty(i)&&(r?n="&":(n="?",r=!0),o=e[i],"number"==typeof o||o||(o=""),s=s.concat([n,i,"=",encodeURIComponent(o)]));return s.join("")},_getScriptContainer:function(){return document.body||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement},_addScriptTag:function(){this.options.params[this.options.callbackParam]="Ink.Net.JsonP."+this.options.internalCallback,this.options.params.rnd_seed=this.randVar,this.uri=this._addParamsToGet(this.uri,this.options.params),this._scriptEl=document.createElement("script"),this._scriptEl.type="text/javascript",this._scriptEl.src=this.uri;var t=this._getScriptContainer();t.appendChild(this._scriptEl)},_cleanUp:function(){this.timeout&&window.clearTimeout(this.timeout),delete this.options.onSuccess,delete this.options.onFailure,delete Ink.Net.JsonP[this.options.internalCallback],this._removeScriptTag()},_removeScriptTag:function(){this._scriptEl&&(this._scriptEl.parentNode.removeChild(this._scriptEl),delete this._scriptEl)}},t}),Ink.createModule("Ink.Dom.Browser","1",[],function(){"use strict";var t={IE:!1,GECKO:!1,OPERA:!1,SAFARI:!1,KONQUEROR:!1,CHROME:!1,model:!1,version:!1,userAgent:!1,cssPrefix:!1,domPrefix:!1,init:function(){this.detectBrowser(),this.setDimensions(),this.setReferrer()},setDimensions:function(){var t=0,e=0;"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(t=document.body.clientWidth,e=document.body.clientHeight),this.windowWidth=t,this.windowHeight=e},setReferrer:function(){this.referrer=document.referrer&&document.referrer.length?window.escape(document.referrer):!1},detectBrowser:function(){this._sniffUserAgent(navigator.userAgent)},_sniffUserAgent:function(t){if(this.userAgent=t,t=t.toLowerCase(),/applewebkit\//.test(t))if(this.cssPrefix="-webkit-",this.domPrefix="Webkit",/(chrome|crios)\//.test(t))this.CHROME=!0,this.model="chrome",this.version=t.replace(/(.*)chrome\/([^\s]+)(.*)/,"$2");else{this.SAFARI=!0,this.model="safari";var e=/version\/([^) ]+)/;this.version=e.test(t)?t.match(e)[1]:t.replace(/(.*)applewebkit\/([^\s]+)(.*)/,"$2")}else if(/opera/.test(t))this.OPERA=!0,this.model="opera",this.version=t.replace(/(.*)opera.([^\s$]+)(.*)/,"$2"),this.cssPrefix="-o-",this.domPrefix="O";else if(/konqueror/.test(t))this.KONQUEROR=!0,this.model="konqueror",this.version=t.replace(/(.*)konqueror\/([^;]+);(.*)/,"$2"),this.cssPrefix="-khtml-",this.domPrefix="Khtml";else if(/(msie|trident)/i.test(t))this.IE=!0,this.model="ie",this.version=/rv:((?:\d|\.)+)/.test(t)?t.match(/rv:((?:\d|\.)+)/)[1]:t.replace(/(.*)\smsie\s([^;]+);(.*)/,"$2"),this.cssPrefix="-ms-",this.domPrefix="ms";else if(/gecko/.test(t)){this.cssPrefix="-moz-",this.domPrefix="Moz",this.GECKO=!0;var n=/(camino|chimera|epiphany|minefield|firefox|firebird|phoenix|galeon|iceweasel|k\-meleon|seamonkey|netscape|songbird|sylera)/;if(n.test(t))this.model=t.match(n)[1],this.version=t.replace(new RegExp("(.*)"+this.model+"/([^;\\s$]+)(.*)"),"$2");else{this.model="mozilla";var i=/(.*)rv:([^)]+)(.*)/;i.test(t)&&(this.version=t.replace(i,"$2"))}}},debug:function(){var t="known browsers: (ie, gecko, opera, safari, konqueror) \n";t+=[this.IE,this.GECKO,this.OPERA,this.SAFARI,this.KONQUEROR]+"\n",t+="cssPrefix -> "+this.cssPrefix+"\n",t+="domPrefix -> "+this.domPrefix+"\n",t+="model -> "+this.model+"\n",t+="version -> "+this.version+"\n",t+="\n",t+="original UA -> "+this.userAgent,alert(t)}};return t.init(),t}),Ink.createModule("Ink.Dom.Css",1,[],function(){"use strict";var t="defaultView"in document&&"getComputedStyle"in document.defaultView?document.defaultView.getComputedStyle:window.getComputedStyle,e={addRemoveClassName:function(t,e,n){return n?this.addClassName(t,e):void this.removeClassName(t,e)},addClassName:function(t,n){if(t=Ink.i(t),!t||!n)return null;n=(""+n).split(/[, ]+/);for(var i=0,o=n.length;o>i;i++)n[i].replace(/^\s+|\s+$/g,"")&&("undefined"!=typeof t.classList?t.classList.add(n[i]):e.hasClassName(t,n[i])||(t.className+=(t.className?" ":"")+n[i]))},removeClassName:function(t,e){if(t=Ink.i(t),!t||!e)return null;e=(""+e).split(/[, ]+/);var n=0,i=e.length;if("undefined"!=typeof t.classList)for(;i>n;n++)t.classList.remove(e[n]);else{for(var o,r=t.className||"";i>n;n++)o=new RegExp("(^|\\s+)"+e[n]+"(\\s+|$)"),r=r.replace(o," ");t.className=r.replace(/^\s+/,"").replace(/\s+$/,"")}},setClassName:function(t,e,n){this.addRemoveClassName(t,e,n||!1)},hasClassName:function(t,e,n){if(t=Ink.i(t),!t||!e)return!1;e=(""+e).split(/[, ]+/);for(var i,o,r=0,s=e.length;s>r;r++){if("undefined"!=typeof t.classList)i=t.classList.contains(e[r]);else{var a=t.className;a===e[r]?i=!0:(o=new RegExp("(^|\\s)"+e[r]+"(\\s|$)"),i=o.test(a))}if(i&&!n)return!0;if(!i&&n)return!1}return n?!0:!1},blinkClass:function(t,n,i,o){t=Ink.i(t),e.addRemoveClassName(t,n,!o),setTimeout(function(){e.addRemoveClassName(t,n,o)},Number(i)||100)},toggleClassName:function(t,n,i){return t&&n?"undefined"!=typeof i?e.addRemoveClassName(t,n,i):void("undefined"==typeof t.classList||/[, ]/.test(n)?e.hasClassName(t,n)?e.removeClassName(t,n):e.addClassName(t,n):(t=Ink.i(t),null!==t&&t.classList.toggle(n))):!1},setOpacity:function(t,e){if(t=Ink.i(t),null!==t){var n=1;isNaN(Number(e))||(n=0>=e?0:1>=e?e:100>=e?e/100:1),"undefined"!=typeof t.style.opacity?t.style.opacity=n:t.style.filter="alpha(opacity:"+(100*n|0)+")"}},_camelCase:function(t){return t?t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}):t},getStyle:function(e,n){if(e=Ink.i(e),null!==e&&e.style){n="float"===n?"cssFloat":this._camelCase(n);var i=e.style[n];if(!t||i&&"auto"!==i)!i&&e.currentStyle&&(i=e.currentStyle[n],"auto"!==i||"width"!==n&&"height"!==n||(i=e["offset"+n.charAt(0).toUpperCase()+n.slice(1)]+"px"));else{var o=t(e,null);i=o?o[n]:null}if("opacity"===n)return i?parseFloat(i,10):1;if("borderTopWidth"===n||"borderBottomWidth"===n||"borderRightWidth"===n||"borderLeftWidth"===n){if("thin"===i)return"1px";if("medium"===i)return"3px";if("thick"===i)return"5px"}return"auto"===i?null:i}},setStyle:function(t,e){if(t=Ink.i(t),null!==t)if("string"==typeof e)t.style.cssText+="; "+e,-1!==e.indexOf("opacity")&&this.setOpacity(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]);else for(var n in e)e.hasOwnProperty(n)&&("opacity"===n?this.setOpacity(t,e[n]):"float"===n||"cssFloat"===n?"undefined"==typeof t.style.styleFloat?t.style.cssFloat=e[n]:t.style.styleFloat=e[n]:t.style[n]=e[n])},show:function(t,e){t=Ink.i(t),null!==t&&(t.style.display=e||"")},hide:function(t){t=Ink.i(t),null!==t&&(t.style.display="none")},showHide:function(t,e){t=Ink.i(t),t&&(t.style.display=e?"":"none")},toggle:function(t,e){t=Ink.i(t),null!==t&&("undefined"!=typeof e?e===!0?this.show(t):this.hide(t):"none"===this.getStyle(t,"display").toLowerCase()?this.show(t):this.hide(t))},_getRefTag:function(t){if(t.firstElementChild)return t.firstElementChild;for(var e=t.firstChild;e;e=e.nextSibling)if(1===e.nodeType)return e;return null},appendStyleTag:function(t,e,n){n=Ink.extendObj({type:"text/css",force:!1},n||{});var i,o,r=document.getElementsByTagName("style"),s=!1,a=!0;for(i=0,o=r.length;o>i;i++)s=r[i].innerHTML,s.indexOf(t)>=0&&(a=!1);if(a){var l=document.createElement("style"),h=document.getElementsByTagName("head")[0],u=!1,c="";l.type=n.type,c+=t+" {",c+=e,c+="} ","undefined"!=typeof l.styleSheet?l.styleSheet.cssText=c:l.appendChild(document.createTextNode(c)),n.force?h.appendChild(l):(u=this._getRefTag(h),u&&h.insertBefore(l,u))}},appendStylesheet:function(t,e){e=Ink.extendObj({media:"screen",type:"text/css",force:!1},e||{});var n,i=document.createElement("link"),o=document.getElementsByTagName("head")[0];i.media=e.media,i.type=e.type,i.href=t,i.rel="Stylesheet",e.force?o.appendChild(i):(n=this._getRefTag(o),n&&o.insertBefore(i,n))},_loadingCSSFiles:{},_loadedCSSFiles:{},appendStylesheetCb:function(t,e){if(!t)return e(t);if(this._loadedCSSFiles[t])return e(t);var n=this._loadingCSSFiles[t];if(n)return n.push(e);this._loadingCSSFiles[t]=[e];var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t;var o=document.getElementsByTagName("head")[0];o.appendChild(i);var r=document.createElement("img");r.onerror=Ink.bindEvent(function(t,e){var n=e;this._loadedCSSFiles[n]=!0;for(var i=this._loadingCSSFiles[n],o=0,r=i.length;r>o;++o)i[o](n);delete this._loadingCSSFiles[n]},this,t),r.src=t},decToHex:function(t){var e=function(t){return 1===t.length&&(t="0"+t),t=t.toUpperCase()};if("object"==typeof t){var n=e(parseInt(t.r,10).toString(16)),i=e(parseInt(t.g,10).toString(16)),o=e(parseInt(t.b,10).toString(16));return n+i+o}t+="";var r=t.match(/\((\d+),\s?(\d+),\s?(\d+)\)/);return null!==r?e(parseInt(r[1],10).toString(16))+e(parseInt(r[2],10).toString(16))+e(parseInt(r[3],10).toString(16)):e(parseInt(t,10).toString(16))},hexToDec:function(t){return 0===t.indexOf("#")&&(t=t.substr(1)),6===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16)}:3===t.length?{r:parseInt(t.charAt(0)+t.charAt(0),16),g:parseInt(t.charAt(1)+t.charAt(1),16),b:parseInt(t.charAt(2)+t.charAt(2),16)}:t.length<=2?parseInt(t,16):void 0
},getPropertyFromStylesheet:function(t,e){var n=this.getRuleFromStylesheet(t);return n?n.style[e]:null},getPropertyFromStylesheet2:function(t,e){for(var n,i=this.getRulesFromStylesheet(t),o=0,r=i.length;r>o;o++)if(n=i[o].style[e],null!==n&&void 0!==n)return n;return null},getRuleFromStylesheet:function(t){var e,n,i,o,r,s=document.styleSheets;if(!s)return null;for(var a=0,l=document.styleSheets.length;l>a;++a){if(e=document.styleSheets[a],n=e.rules?e.rules:e.cssRules,!n)return null;for(i=0,o=n.length;o>i;++i)if(r=n[i],r.selectorText&&r.selectorText===t)return r}return null},getRulesFromStylesheet:function(t){var e,n,i,o,r,s=[],a=document.styleSheets;if(!a)return s;for(var l=0,h=document.styleSheets.length;h>l;++l){if(e=document.styleSheets[l],n=e.rules?e.rules:e.cssRules,!n)return null;for(i=0,o=n.length;o>i;++i)r=n[i],r.selectorText&&r.selectorText===t&&s.push(r)}return s},getPropertiesFromRule:function(t){var e,n,i,o=this.getRuleFromStylesheet(t),r={};o=o.style.cssText;var s,a,l,h,u=o.split(";");for(n=0,i=u.length;i>n;++n)" "===u[n].charAt(0)&&(u[n]=u[n].substring(1)),s=u[n].split(":"),e=this._camelCase(s[0].toLowerCase()),a=s[1],a&&(a=a.substring(1),"padding"===e||"margin"===e||"borderWidth"===e?("borderWidth"===e?(l="border",h="Width"):(l=e,h=""),-1!==a.indexOf(" ")?(a=a.split(" "),r[l+"Top"+h]=a[0],r[l+"Bottom"+h]=a[0],r[l+"Left"+h]=a[1],r[l+"Right"+h]=a[1]):(r[l+"Top"+h]=a,r[l+"Bottom"+h]=a,r[l+"Left"+h]=a,r[l+"Right"+h]=a)):"borderRadius"===e?-1!==a.indexOf(" ")?(a=a.split(" "),r.borderTopLeftRadius=a[0],r.borderBottomRightRadius=a[0],r.borderTopRightRadius=a[1],r.borderBottomLeftRadius=a[1]):(r.borderTopLeftRadius=a,r.borderTopRightRadius=a,r.borderBottomLeftRadius=a,r.borderBottomRightRadius=a):r[e]=a);return r},changeFontSize:function(t,e,n,i,o){var r=this;Ink.requireModules(["Ink.Dom.Selector_1"],function(s){var a;if("string"!=typeof t?a="1st argument must be a CSS selector rule.":"number"!=typeof e?a="2nd argument must be a number.":void 0!==n&&"+"!==n&&"*"!==n?a='3rd argument must be one of "+", "*".':void 0!==i&&("number"!=typeof i||0>=i)?a="4th argument must be a positive number.":void 0!==o&&("number"!=typeof o||o>o)&&(a="5th argument must be a positive number greater than minValue."),a)throw new TypeError(a);var l,h,u=s.select(t);void 0===i&&(i=1),n="*"===n?function(t,e){return t*e}:function(t,e){return t+e};for(var c=0,d=u.length;d>c;++c)h=u[c],l=parseFloat(r.getStyle(h,"fontSize")),l=n(l,e),i>l||"number"==typeof o&&l>o||(h.style.fontSize=l+"px")})}};return e}),Ink.createModule("Ink.Dom.Element",1,[],function(){"use strict";function t(t){var e={};try{e=t.getBoundingClientRect()}catch(n){e={top:t.offsetTop,left:t.offsetLeft}}return e}var e="function"==typeof document.createRange&&"function"==typeof window.Range.prototype.createContextualFragment,n="Ink.Dom.Element tbody: "+Math.random(),i=function(){var t=document.createElement("div");return t.innerHTML="<table>",0!==t.getElementsByTagName("tbody").length}(),o={isDOMElement:function(t){return null!==t&&"object"==typeof t&&"nodeType"in t&&1===t.nodeType},get:function(t){return"undefined"!=typeof t?"string"==typeof t?document.getElementById(t):t:null},create:function(t,e){var n=document.createElement(t);if(e)for(var i in e)e.hasOwnProperty(i)&&(i in o?o[i](n,e[i]):"className"===i||"class"===i?n.className=e.className||e["class"]:n.setAttribute(i,e[i]));return n},remove:function(t){t=Ink.i(t);var e;t&&(e=t.parentNode)&&e.removeChild(t)},scrollTo:function(t){if(t=o.get(t)){if(t.scrollIntoView)return t.scrollIntoView();var e={},n=0,i=0;do n+=t.offsetTop||0,i+=t.offsetLeft||0,t=t.offsetParent;while(t);e={x:i,y:n},window.scrollTo(e.x,e.y)}},offsetTop:function(t){return o.offset(t)[1]},offsetLeft:function(t){return o.offset(t)[0]},positionedOffset:function(t){var e=0,n=0;t=o.get(t);do if(e+=t.offsetTop||0,n+=t.offsetLeft||0,t=t.offsetParent){if("body"===t.tagName.toLowerCase())break;var i=t.style.position;if(!i&&t.currentStyle&&(i=t.currentStyle.position),(!i||"auto"===i)&&"undefined"!=typeof getComputedStyle){var r=getComputedStyle(t,null);i=r?r.position:null}if("relative"===i||"absolute"===i)break}while(t);return[n,e]},offset:function(e){e=Ink.i(e);var n=[0,0],i=e.ownerDocument,o=i.documentElement,r=t(e),s=i.body,a=o.clientTop||s.clientTop||0,l=o.clientLeft||s.clientLeft||0,h=i.pageYOffset||o.scrollTop||s.scrollTop,u=i.pageXOffset||o.scrollLeft||s.scrollLeft,c=r.top+h-a,d=r.left+u-l;return n=[d,c]},scroll:function(t){return t=t?Ink.i(t):document.body,[window.pageXOffset?window.pageXOffset:t.scrollLeft,window.pageYOffset?window.pageYOffset:t.scrollTop]},_getPropPx:function(t,e){var n,i,o=t.getPropertyValue?t.getPropertyValue(e):t[e];return o?(i=o.indexOf("px"),n=-1===i?0:parseFloat(o,10)):n=0,n},offset2:function(t){return o.offset(t)},hasAttribute:function(t,e){return t=Ink.i(t),t.hasAttribute?t.hasAttribute(e):!!t.getAttribute(e)},insertAfter:function(t,e){(e=o.get(e))&&(null!==e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t))},insertBefore:function(t,e){(e=o.get(e))&&e.parentNode.insertBefore(t,e)},insertTop:function(t,e){(e=o.get(e))&&(e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t))},insertBottom:function(t,e){e=Ink.i(e),e.appendChild(t)},textContent:function(t){t=Ink.i(t);var e,n,i,r;switch(t&&t.nodeType){case 9:return o.textContent(t.documentElement||t.body&&t.body.parentNode||t.body);case 1:if(e="textContent"in t?t.textContent:t.innerText,"undefined"!=typeof e)return e;case 11:if(e=t.textContent,"undefined"!=typeof e)return e;if(t.firstChild===t.lastChild)return o.textContent(t.firstChild);for(e=[],i=t.childNodes,n=0,r=i.length;r>n;++n)e.push(o.textContent(i[n]));return e.join("");case 3:case 4:return t.nodeValue}return""},setTextContent:function(t,e){switch(t=Ink.i(t),t&&t.nodeType){case 1:if("innerText"in t){t.innerText=e;break}case 11:if("textContent"in t){t.textContent=e;break}case 9:for(;t.firstChild;)t.removeChild(t.firstChild);if(""!==e){var n=t.ownerDocument||t;t.appendChild(n.createTextNode(e))}break;case 3:case 4:t.nodeValue=e}},isLink:function(t){var e=t&&1===t.nodeType&&(/^a|area$/i.test(t.tagName)||t.hasAttributeNS&&t.hasAttributeNS("http://www.w3.org/1999/xlink","href"));return!!e},isAncestorOf:function(t,e){if(!e||!t)return!1;if(e.compareDocumentPosition)return 0!==(16&t.compareDocumentPosition(e));for(;e=e.parentNode;)if(e===t)return!0;return!1},descendantOf:function(t,e){return t!==e&&o.isAncestorOf(t,e)},firstElementChild:function(t){if(!t)return null;if("firstElementChild"in t)return t.firstElementChild;for(var e=t.firstChild;e&&1!==e.nodeType;)e=e.nextSibling;return e},lastElementChild:function(t){if(!t)return null;if("lastElementChild"in t)return t.lastElementChild;for(var e=t.lastChild;e&&1!==e.nodeType;)e=e.previousSibling;return e},nextElementSibling:function(t){var e=null;if(!t)return e;if("nextElementSibling"in t)return t.nextElementSibling;for(e=t.nextSibling;e&&1!==e.nodeType;)e=e.nextSibling;return e},previousElementSibling:function(t){var e=null;if(!t)return e;if("previousElementSibling"in t)return t.previousElementSibling;for(e=t.previousSibling;e&&1!==e.nodeType;)e=e.previousSibling;return e},elementWidth:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.offsetWidth},elementHeight:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.offsetHeight},elementLeft:function(t){return o.offsetLeft(t)},elementTop:function(t){return o.offsetTop(t)},elementDimensions:function(t){return t=Ink.i(t),[t.offsetWidth,t.offsetHeight]},outerDimensions:function(e){var n=t(e),i=Ink.getModule("Ink.Dom.Css_1"),o=Ink.bindMethod(i,"getStyle",e);return[n.right-n.left+parseFloat(o("marginLeft")||0)+parseFloat(o("marginRight")||0),n.bottom-n.top+parseFloat(o("marginTop")||0)+parseFloat(o("marginBottom")||0)]},inViewport:function(e,n){var i=t(Ink.i(e));return"boolean"==typeof n&&(n={partial:n,margin:0}),n=Ink.extendObj({partial:!1,margin:0},n||{}),n.partial?i.bottom+n.margin>0&&i.left-n.margin<o.viewportWidth()&&i.top-n.margin<o.viewportHeight()&&i.right+n.margin>0:i.top+n.margin>0&&i.right-n.margin<o.viewportWidth()&&i.bottom-n.margin<o.viewportHeight()&&i.left+n.margin>0},isHidden:function(t){var e=t.offsetWidth,n=t.offsetHeight,i="tr"===t.tagName.toLowerCase(),o=Ink.getModule("Ink.Dom.Css_1");return 0!==e||0!==n||i?0===e||0===n||i?"none"===o.getStyle(t,"display").toLowerCase():!1:!0},isVisible:function(t){return!this.isHidden(t)},clonePosition:function(t,e){var n=o.offset(e);return t.style.left=n[0]+"px",t.style.top=n[1]+"px",t},ellipsizeText:function(t){(t=Ink.i(t))&&(t.style.overflow="hidden",t.style.whiteSpace="nowrap",t.style.textOverflow="ellipsis")},findUpwardsHaving:function(t,e){for(;t&&1===t.nodeType;){if(e(t))return t;t=t.parentNode}return!1},findUpwardsByClass:function(t,e){var n=new RegExp("(^|\\s)"+e+"(\\s|$)"),i=function(t){var e=t.className;return e&&n.test(e)};return o.findUpwardsHaving(t,i)},findUpwardsByTag:function(t,e){e=e.toUpperCase();var n=function(t){return t.nodeName&&t.nodeName.toUpperCase()===e};return o.findUpwardsHaving(t,n)},findUpwardsById:function(t,e){var n=function(t){return t.id===e};return o.findUpwardsHaving(t,n)},findUpwardsBySelector:function(t,e){var n=Ink.getModule("Ink.Dom.Selector","1");if(!n)throw new Error("This method requires Ink.Dom.Selector");var i=function(t){return n.matchesSelector(t,e)};return o.findUpwardsHaving(t,i)},getChildrenText:function(t,e){var n,i,r,s=t.childNodes,a=s.length,l="";if(!t)return l;for(i=0;a>i;++i)n=s[i],n&&3===n.nodeType&&(r=o._trimString(String(n.data)),r.length>0?(l+=r,e&&t.removeChild(n)):t.removeChild(n));return l},_trimString:function(t){return String.prototype.trim?t.trim():t.replace(/^\s*/,"").replace(/\s*$/,"")},getSelectValues:function(t){for(var e=Ink.i(t),n=[],i=0;i<e.options.length;++i)n.push(e.options[i].value);return n},_normalizeData:function(t){for(var e,n=[],i=0,o=t.length;o>i;++i)e=t[i],e instanceof Array?1===e.length&&e.push(e[0]):e=[e,e],n.push(e);return n},fillSelect:function(t,e,n,i){var r=Ink.i(t);if(r){r.innerHTML="";var s,a;n||(a=document.createElement("option"),a.setAttribute("value",""),r.appendChild(a)),e=o._normalizeData(e);for(var l=0,h=e.length;h>l;++l)s=e[l],a=document.createElement("option"),a.setAttribute("value",s[0]),s.length>2&&a.setAttribute("extra",s[2]),a.appendChild(document.createTextNode(s[1])),s[0]===i&&a.setAttribute("selected","selected"),r.appendChild(a)}},fillRadios:function(t,e,n,i,r,s){t=Ink.i(t);var a=document.createElement("span");o.insertAfter(a,t),n=o._normalizeData(n);var l,h;i||(h=document.createElement("input"),h.setAttribute("type","radio"),h.setAttribute("name",e),h.setAttribute("value",""),a.appendChild(h),s&&a.appendChild(document.createElement(s)));for(var u=0;u<n.length;++u)l=n[u],h=document.createElement("input"),h.setAttribute("type","radio"),h.setAttribute("name",e),h.setAttribute("value",l[0]),a.appendChild(h),a.appendChild(document.createTextNode(l[1])),s&&a.appendChild(document.createElement(s)),l[0]===r&&(h.checked=!0);return a},fillChecks:function(t,e,n,i,r){t=Ink.i(t);var s=document.createElement("span");o.insertAfter(s,t),n=o._normalizeData(n),"]"!==e.substring(e.length-1)&&(e+="[]");for(var a,l,h=0;h<n.length;++h)a=n[h],l=document.createElement("input"),l.setAttribute("type","checkbox"),l.setAttribute("name",e),l.setAttribute("value",a[0]),s.appendChild(l),s.appendChild(document.createTextNode(a[1])),r&&s.appendChild(document.createElement(r)),a[0]===i&&(l.checked=!0);return s},parentIndexOf:function(t,e){if(e||(e=t,t=t.parentNode),!t)return!1;for(var n=0,i=t.children.length;i>n;++n)if(t.children[n]===e)return n;return!1},nextSiblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=o.parentIndexOf(t.parentNode,t),r=++i,s=n.length;s>r;r++)e.push(n[r]);return e}return[]},previousSiblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=o.parentIndexOf(t.parentNode,t),r=0,s=i;s>r;r++)e.push(n[r]);return e}return[]},siblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=0,o=n.length;o>i;i++)t!==n[i]&&e.push(n[i]);return e}return[]},childElementCount:function(t){return t=Ink.i(t),"childElementCount"in t?t.childElementCount:t?o.siblings(t).length+1:0},_wrapElements:{TABLE:function(t,e){return t.innerHTML=i?"<table>"+e+"<tbody><tr><td>"+n+"</tr></td></tbody></table>":"<table>"+e+"</table>",t.firstChild},TBODY:function(t,e){return t.innerHTML="<table><tbody>"+e+"</tbody></table>",t.firstChild.getElementsByTagName("tbody")[0]},THEAD:function(t,e){return t.innerHTML="<table><thead>"+e+"</thead><tbody></tbody></table>",t.firstChild.getElementsByTagName("thead")[0]},TFOOT:function(t,e){return t.innerHTML="<table><tfoot>"+e+"</tfoot><tbody></tbody></table>",t.firstChild.getElementsByTagName("tfoot")[0]},TR:function(t,e){return t.innerHTML="<table><tbody><tr>"+e+"</tr></tbody></table>",t.firstChild.firstChild.firstChild}},_getWrapper:function(t,e){var r=t.nodeName&&t.nodeName.toUpperCase(),s=document.createElement("div"),a=o._wrapElements[r];if(!a)return s.innerHTML=e,s;if(s=a(s,e),i&&"TABLE"===r)for(var l=s.getElementsByTagName("td"),h=0,u=l.length;u>h;h++)if(l[h].innerHTML===n){var c=l[h].parentNode.parentNode;c.parentNode.removeChild(c)}return s},appendHTML:function(t,e){if(t=Ink.i(t),null!==t)for(var n=o._getWrapper(t,e);n.firstChild;)t.appendChild(n.firstChild)},prependHTML:function(t,e){if(t=Ink.i(t),null!==t)for(var n=o._getWrapper(t,e);n.lastChild;)t.insertBefore(n.lastChild,t.firstChild)},setHTML:function(t,e){if(t=Ink.i(t),null!==t)try{t.innerHTML=e}catch(n){o.clear(t),o.appendHTML(t,e)}},wrap:function(t,e){t=Ink.i(t),e=Ink.i(e);var n=t.nextSibling,i=t.parentNode;return e.appendChild(t),null!==n?i.insertBefore(e,n):i.appendChild(e),e},unwrap:function(t,e){t=Ink.i(t);var n;n="string"==typeof e?o.findUpwardsBySelector(t,e):"object"==typeof e&&e.tagName?o.findUpwardsHaving(t,function(t){return t===e}):t.parentNode,n&&n.parentNode&&o.insertBefore(t,n)},replace:function(t,e){t=Ink.i(t),null!==t&&t.parentNode.replaceChild(e,t)},removeTextNodeChildren:function(t){if(t=Ink.i(t),null!==t){var e,n,i=t;for(t=t.firstChild;t;)n=3===t.nodeType,e=t,t=t.nextSibling,n&&i.removeChild(e)}},htmlToFragment:e?function(t){var e;return"string"!=typeof t?document.createDocumentFragment():(e=document.createRange(),e.selectNode(document.body),e.createContextualFragment(t))}:function(t){var e,n,i=document.createDocumentFragment();if("string"!=typeof t)return i;for(e=document.createElement("div"),e.innerHTML=t;n=e.firstChild;)i.appendChild(n);return i},_camelCase:function(t){return t?t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}):t},data:function(t){var e;if("object"!=typeof t&&"string"!=typeof t)throw"[Ink.Dom.Element.data] :: Invalid selector defined";if("object"==typeof t)e=t;else{var n=Ink.getModule("Ink.Dom.Selector",1);if(!n)throw"[Ink.Dom.Element.data] :: this method requires Ink.Dom.Selector - v1";if(e=n.select(t),e.length<=0)throw"[Ink.Dom.Element.data] :: Can't find any element with the specified selector";e=e[0]}var i,r,s,a={},l=e.attributes||[];if(l)for(var h=0,u=l.length;u>h;++h)i=l[h],r=i.name,s=i.value,r&&0===r.indexOf("data-")&&(a[o._camelCase(r.replace("data-",""))]=s);return a},clear:function(t,e){for(;e=t.lastChild;)t.removeChild(e)},moveCursorTo:function(t,e){if(t=Ink.i(t),null!==t)if(t.setSelectionRange)t.setSelectionRange(e,e);else{var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}},pageWidth:function(){var t;t=window.innerWidth&&window.scrollMaxX?window.innerWidth+window.scrollMaxX:document.body.scrollWidth>document.body.offsetWidth?document.body.scrollWidth:document.body.offsetWidth;var e;return window.self.innerWidth?e=document.documentElement.clientWidth?document.documentElement.clientWidth:window.self.innerWidth:document.documentElement&&document.documentElement.clientWidth?e=document.documentElement.clientWidth:document.body&&(e=document.body.clientWidth),e>t?t:e},pageHeight:function(){var t;t=window.innerHeight&&window.scrollMaxY?window.innerHeight+window.scrollMaxY:document.body.scrollHeight>document.body.offsetHeight?document.body.scrollHeight:document.body.offsetHeight;var e;return window.self.innerHeight?e=window.self.innerHeight:document.documentElement&&document.documentElement.clientHeight?e=document.documentElement.clientHeight:document.body&&(e=document.body.clientHeight),e>t?e:t},viewportWidth:function(){return"undefined"!=typeof window.innerWidth?window.innerWidth:document.documentElement&&"undefined"!=typeof document.documentElement.offsetWidth?document.documentElement.offsetWidth:void 0},viewportHeight:function(){return"undefined"!=typeof window.innerHeight?window.innerHeight:document.documentElement&&"undefined"!=typeof document.documentElement.offsetHeight?document.documentElement.offsetHeight:void 0},scrollWidth:function(){return"undefined"!=typeof window.self.pageXOffset?window.self.pageXOffset:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft},scrollHeight:function(){return"undefined"!=typeof window.self.pageYOffset?window.self.pageYOffset:"undefined"!=typeof document.body&&"undefined"!=typeof document.body.scrollTop&&"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollTop?document.body.scrollTop||document.documentElement.scrollTop:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}};return o}),Ink.createModule("Ink.Dom.Event",1,[],function(){/*!
      * Bean - copyright (c) Jacob Thornton 2011-2012
      * https://github.com/fat/bean
      * MIT license
      */
var t=function(t,e,n){return n()}("bean",this,function(t,e){t=t||"bean",e=e||this;var n,i=window,o=e[t],r=/[^\.]*(?=\..*)\.|.*/,s=/\..*/,a="addEventListener",l="removeEventListener",h=document||{},u=h.documentElement||{},c=u[a],d=c?a:"attachEvent",p={},f=Array.prototype.slice,m=function(t,e){return t.split(e||" ")},_=function(t){return"string"==typeof t},g=function(t){return"function"==typeof t},v="click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll ",y="show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinputreadystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ",b=function(t,e,n){for(n=0;n<e.length;n++)e[n]&&(t[e[n]]=1);return t}({},m(v+(c?y:""))),k=function(){var t="compareDocumentPosition"in u?function(t,e){return e.compareDocumentPosition&&16===(16&e.compareDocumentPosition(t))}:"contains"in u?function(t,e){return e=9===e.nodeType||e===window?u:e,e!==t&&e.contains(t)}:function(t,e){for(;t=t.parentNode;)if(t===e)return 1;return 0},e=function(e){var n=e.relatedTarget;return n?n!==this&&"xul"!==n.prefix&&!/document/.test(this.toString())&&!t(n,this):null==n};return{mouseenter:{base:"mouseover",condition:e},mouseleave:{base:"mouseout",condition:e},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),C=function(){var t=m("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName path"),e=t.concat(m("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement movementX movementY region")),n=e.concat(m("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),o=t.concat(m("char charCode key keyCode keyIdentifier keyLocation location isComposing code")),r=t.concat(m("data")),s=t.concat(m("touches targetTouches changedTouches scale rotation")),a=t.concat(m("data origin source")),l=t.concat(m("state")),c=/over|out/,d=[{reg:/key/i,fix:function(t,e){return e.keyCode=t.keyCode||t.which,o}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(t,n,i){return n.rightClick=3===t.which||2===t.button,n.pos={x:0,y:0},t.pageX||t.pageY?(n.clientX=t.pageX,n.clientY=t.pageY):(t.clientX||t.clientY)&&(n.clientX=t.clientX+h.body.scrollLeft+u.scrollLeft,n.clientY=t.clientY+h.body.scrollTop+u.scrollTop),c.test(i)&&(n.relatedTarget=t.relatedTarget||t[("mouseover"==i?"from":"to")+"Element"]),e}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return n}},{reg:/^text/i,fix:function(){return r}},{reg:/^touch|^gesture/i,fix:function(){return s}},{reg:/^message$/i,fix:function(){return a}},{reg:/^popstate$/i,fix:function(){return l}},{reg:/.*/,fix:function(){return t}}],p={},f=function(t,e,n){if(arguments.length&&(t=t||((e.ownerDocument||e.document||e).parentWindow||i).event,this.originalEvent=t,this.isNative=n,this.isBean=!0,t)){var o,r,s,a,l,h=t.type,u=t.target||t.srcElement;if(this.target=u&&3===u.nodeType?u.parentNode:u,n){if(l=p[h],!l)for(o=0,r=d.length;r>o;o++)if(d[o].reg.test(h)){p[h]=l=d[o].fix;break}for(a=l(t,this,h),o=a.length;o--;)!((s=a[o])in this)&&s in t&&(this[s]=t[s])}}};return f.prototype.preventDefault=function(){if(this.originalEvent.preventDefault)this.originalEvent.preventDefault();else try{this.originalEvent.returnValue=!1}catch(t){}},f.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},f.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},f.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},f.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},f.prototype.clone=function(t){var e=new f(this,this.element,this.isNative);return e.currentTarget=t,e},f}(),I=function(t,e){return c||e||t!==h&&t!==i?t:u},w=function(){var t=function(t,e,n,i){var o=function(n,o){return e.apply(t,i?f.call(o,n?0:1).concat(i):o)},r=function(n,i){return e.__beanDel?e.__beanDel.ft(n.target,t):i},s=n?function(t){var e=r(t,this);return n.apply(e,arguments)?(t&&(t.currentTarget=e),o(t,arguments)):void 0}:function(t){return e.__beanDel&&(t=t.clone(r(t))),o(t,arguments)};return s.__beanDel=e.__beanDel,s},e=function(e,n,i,o,r,s,a){var l,h=k[n];"unload"==n&&(i=T(N,e,n,i,o)),h&&(h.condition&&(i=t(e,i,h.condition,s)),n=h.base||n),this.isNative=l=b[n]&&!!e[d],this.customType=!c&&!l&&n,this.element=e,this.type=n,this.original=o,this.namespaces=r,this.eventType=c||l?n:"propertychange",this.target=I(e,l),this[d]=!!this.target[d],this.root=a,this.handler=t(e,i,null,s)};return e.prototype.inNamespaces=function(t){var e,n,i=0;if(!t)return!0;if(!this.namespaces)return!1;for(e=t.length;e--;)for(n=this.namespaces.length;n--;)t[e]==this.namespaces[n]&&i++;return t.length===i},e.prototype.matches=function(t,e,n){return!(this.element!==t||e&&this.original!==e||n&&this.handler!==n)},e}(),E=function(){var t={},e=function(n,i,o,r,s,a){var l=s?"r":"$";if(i&&"*"!=i){var h,u=0,c=t[l+i],d="*"==n;if(!c)return;for(h=c.length;h>u;u++)if((d||c[u].matches(n,o,r))&&!a(c[u],c,u,i))return}else for(var p in t)p.charAt(0)==l&&e(n,p.substr(1),o,r,s,a)},n=function(e,n,i,o){var r,s=t[(o?"r":"$")+n];if(s)for(r=s.length;r--;)if(!s[r].root&&s[r].matches(e,i,null))return!0;return!1},i=function(t,n,i,o){var r=[];return e(t,n,i,null,o,function(t){return r.push(t)}),r},o=function(e){var n=!e.root&&!this.has(e.element,e.type,null,!1),i=(e.root?"r":"$")+e.type;return(t[i]||(t[i]=[])).push(e),n},r=function(n){e(n.element,n.type,null,n.handler,n.root,function(e,n,i){return n.splice(i,1),e.removed=!0,0===n.length&&delete t[(e.root?"r":"$")+e.type],!1})},s=function(){var e,n=[];for(e in t)"$"==e.charAt(0)&&(n=n.concat(t[e]));return n};return{has:n,get:i,put:o,del:r,entries:s}}(),S=function(t){n=arguments.length?t:h.querySelectorAll?function(t,e){return e.querySelectorAll(t)}:function(){throw new Error("Bean: No selector engine installed")}},x=function(t,e){if(c||!e||!t||t.propertyName=="_on"+e){var n=E.get(this,e||t.type,null,!1),i=n.length,o=0;for(t=new C(t,this,!0),e&&(t.type=e);i>o&&!t.isImmediatePropagationStopped();o++)n[o].removed||n[o].handler.call(this,t)}},D=c?function(t,e,n){t[n?a:l](e,x,!1)}:function(t,e,n,i){var o;n?(E.put(o=new w(t,i||e,function(e){x.call(t,e,i)},x,null,null,!0)),i&&null==t["_on"+i]&&(t["_on"+i]=0),o.target.attachEvent("on"+o.eventType,o.handler)):(o=E.get(t,i||e,x,!0)[0],o&&(o.target.detachEvent("on"+o.eventType,o.handler),E.del(o)))},T=function(t,e,n,i,o){return function(){i.apply(this,arguments),t(e,n,o)}},N=function(t,e,n,i){var o,r,a=e&&e.replace(s,""),l=E.get(t,a,null,!1),h={};for(o=0,r=l.length;r>o;o++)n&&l[o].original!==n||!l[o].inNamespaces(i)||(E.del(l[o]),!h[l[o].eventType]&&l[o][d]&&(h[l[o].eventType]={t:l[o].eventType,c:l[o].type}));for(o in h)h.hasOwnProperty(o)&&(E.has(t,h[o].t,null,!1)||D(t,h[o].t,!1,h[o].c))},O=function(t,e){var i=function(e,i){for(var o,r=_(t)?n(t,i):t;e&&e!==i;e=e.parentNode)for(o=r.length;o--;)if(r[o]===e)return e},o=function(t){var n=i(t.target,this);n&&e.apply(n,arguments)};return o.__beanDel={ft:i,selector:t},o},M=c?function(t,e,n){var o=h.createEvent(t?"HTMLEvents":"UIEvents");o[t?"initEvent":"initUIEvent"](e,!0,!0,i,1),n.dispatchEvent(o)}:function(t,e,n){n=I(n,t),t?n.fireEvent("on"+e,h.createEventObject()):n["_on"+e]++},A=function(t,e,n){var i,o,a,l,h=_(e);if(h&&e.indexOf(" ")>0){for(e=m(e),l=e.length;l--;)A(t,e[l],n);return t}if(o=h&&e.replace(s,""),o&&k[o]&&(o=k[o].base),!e||h)(a=h&&e.replace(r,""))&&(a=m(a,".")),N(t,o,n,a);else if(g(e))N(t,null,e);else for(i in e)e.hasOwnProperty(i)&&A(t,i,e[i]);return t},P=function(t,e,i,o){var a,l,h,u,c,_,v;{if(void 0!==i||"object"!=typeof e){for(g(i)?(c=f.call(arguments,3),o=a=i):(a=o,c=f.call(arguments,4),o=O(i,a,n)),h=m(e),this===p&&(o=T(A,t,e,o,a)),u=h.length;u--;)v=E.put(_=new w(t,h[u].replace(s,""),o,a,m(h[u].replace(r,""),"."),c,!1)),_[d]&&v&&D(t,_.eventType,!0,_.customType);return t}for(l in e)e.hasOwnProperty(l)&&P.call(this,t,l,e[l])}},L=function(t,e,n,i){return P.apply(null,_(n)?[t,n,e,i].concat(arguments.length>3?f.call(arguments,5):[]):f.call(arguments))},U=function(){return P.apply(p,arguments)},F=function(t,e,n){var i,o,a,l,h,u=m(e);for(i=u.length;i--;)if(e=u[i].replace(s,""),(l=u[i].replace(r,""))&&(l=m(l,".")),l||n||!t[d])for(h=E.get(t,e,null,!1),n=[!1].concat(n),o=0,a=h.length;a>o;o++)h[o].inNamespaces(l)&&h[o].handler.apply(t,n);else M(b[e],e,t);return t},B=function(t,e,n){for(var i,o,r=E.get(e,n,null,!1),s=r.length,a=0;s>a;a++)r[a].original&&(i=[t,r[a].type],(o=r[a].handler.__beanDel)&&i.push(o.selector),i.push(r[a].original),P.apply(null,i));return t},R={on:P,add:L,one:U,off:A,remove:A,clone:B,fire:F,Event:C,setSelectorEngine:S,noConflict:function(){return e[t]=o,this}};if(i.attachEvent){var H=function(){var t,e=E.entries();for(t in e)e[t].type&&"unload"!==e[t].type&&A(e[t].element,e[t].type);i.detachEvent("onunload",H),i.CollectGarbage&&i.CollectGarbage()};i.attachEvent("onunload",H)}return S(Ink.ss),R}),e={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_SPACE:32,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,throttle:function(t,e,n){function i(s){var a=+new Date,l=a-r;if(n.preventDefault&&s&&"function"==typeof s.preventDefault&&s.preventDefault(),l>=e)return r=a,t.apply("bind"in n?n.bind:this,[].slice.call(arguments));var h=this,u=[].slice.call(arguments);o&&clearTimeout(o),o=setTimeout(function(){return o=null,i.apply(h,u)},e-l)}e=e||0,n=n||{};var o,r=0;return i},element:function(t){var e=t.delegationTarget||t.target||"mouseout"===t.type&&t.fromElement||"mouseleave"===t.type&&t.fromElement||"mouseover"===t.type&&t.toElement||"mouseenter"===t.type&&t.toElement||t.srcElement||null;return!e||3!==e.nodeType&&4!==e.nodeType?e:e.parentNode},relatedTarget:function(t){var e=t.relatedTarget||"mouseout"===t.type&&t.toElement||"mouseleave"===t.type&&t.toElement||"mouseover"===t.type&&t.fromElement||"mouseenter"===t.type&&t.fromElement||null;return!e||3!==e.nodeType&&4!==e.nodeType?e:e.parentNode},findElement:function(t,e,n){for(var i=this.element(t);;){if(i.nodeName.toLowerCase()===e.toLowerCase())return i;if(i=i.parentNode,!i)return n?!1:document;if(!i.parentNode)return n?!1:document}},observe:function(t,e,n,i){return t=Ink.i(t),t?(t.addEventListener?t.addEventListener(e,n,!!i):t.attachEvent("on"+e,n=Ink.bind(n,t)),n):void 0},observeOnce:function(t,n,i,o){var r=function(){return e.stopObserving(t,n,s),i.apply(this,arguments)},s=e.observe(t,n,r,o);return s},observeMulti:function(t,e,n,i){if("string"==typeof t?t=Ink.ss(t):t&&1===t.nodeType&&(t=[t]),!t[0])return!1;for(var o=0,r=t.length;r>o;o++)this.observe(t[o],e,n,i);return n},observeDelegated:function(t,n,i,o){return e.observe(t,n,function(n){var r=e.element(n);if(r&&r!==t)for(var s=r;s!==t&&s!==document&&s;){if(Ink.Dom.Selector_1.matchesSelector(s,i))return n.delegationTarget=s,o(n);s=s.parentNode}})},stopObserving:function(t,e,n,i){t=Ink.i(t),t&&(t.removeEventListener?t.removeEventListener(e,n,!!i):t.detachEvent("on"+e,n))},stop:function(t){null!==t.cancelBubble&&(t.cancelBubble=!0),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),window.attachEvent&&(t.returnValue=!1),null!==t.cancel&&(t.cancel=!0)},stopPropagation:function(t){null!==t.cancelBubble&&(t.cancelBubble=!0),t.stopPropagation&&t.stopPropagation()},stopDefault:function(t){t.preventDefault&&t.preventDefault(),window.attachEvent&&(t.returnValue=!1),null!==t.cancel&&(t.cancel=!0)},pointer:function(t){return{x:this.pointerX(t),y:this.pointerY(t)}},pointerX:function(t){return t.touches&&t.touches[0]&&t.touches[0].pageX||t.pageX||t.clientX},pointerY:function(t){return t.touches&&t.touches[0]&&t.touches[0].pageY||t.pageY||t.clientY},isLeftClick:function(t){if(window.addEventListener){if(0===t.button)return!0;if("touchend"===t.type&&null===t.button)return!0}else if(1===t.button)return!0;return!1},isRightClick:function(t){return 2===t.button},isMiddleClick:function(t){return window.addEventListener?1===t.button:4===t.button},getCharFromKeyboardEvent:function(t,e){var n=t.keyCode,i=String.fromCharCode(n),o=t.shiftKey;if(n>=65&&90>=n)return"boolean"==typeof e&&(o=e),o?i:i.toLowerCase();if(n>=96&&105>=n)return String.fromCharCode(48+(n-96));switch(n){case 109:case 189:return"-";case 107:case 187:return"+"}return i},debug:function(){}};return Ink.extendObj(e,t)}),Ink.createModule("Ink.Dom.FormSerialize",1,["Ink.Util.Array_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n){"use strict";function i(n){return null!=n&&!e.isDOMElement(n)&&(t.isArray(n)||"string"!=typeof n&&"number"==typeof n.length)}function o(t){return i(t)?t:[t]}var r={serialize:function(e,n){n=n||{};var i={},o={},s=this.asPairs(e,{elements:!0,emptyArray:o,outputUnchecked:n.outputUnchecked});return null==s?s:(t.forEach(s,function(t){var e=/\[\]$/.test(t[0]),n=t[0].replace(/\[\]$/,""),s=t[1],a=t[2];s===o?i[n]=[]:r._resultsInArray(a)||e?n in i?(i[n]instanceof Array||(i[n]=[i[n]]),i[n].push(s)):i[n]=e?[s]:s:i[n]=s}),i)},asPairs:function(e,i){function o(t,e,n){a.push(i.elements?[t,e,n]:[t,e])}function s(e){var r=e.nodeName.toLowerCase(),s=(e.type+"").toLowerCase();if("select"===r&&e.multiple){var a=!1;t.forEach(n.select("option:checked",e),function(t){o(e.name,t.value,e),a=!0}),!a&&"emptyArray"in i&&o(e.name,i.emptyArray,e)}else"input"!==r||"checkbox"!==s&&"radio"!==s||!i.outputUnchecked?o(e.name,e.value,e):o(e.name,null,e)}var a=[];if(i=i||{},e=Ink.i(e)){for(var l=t.filter(e.elements,function(t){return r._isSerialized(t,i)}),h=0,u=l.length;u>h;h++)s(l[h]);return a}return null},fillIn:function(t,e){if(!(t=Ink.i(t)))return null;var n;if("object"!=typeof e||i(e)){if(!i(e))return null;n=e}else n=r._objToPairs(e);return r._fillInPairs(t,n)},_objToPairs:function(t){var e,n=[];for(var i in t)if(t.hasOwnProperty(i)){e=o(t[i]);for(var r=0,s=e.length;s>r;r++)n.push([i,e[r]]);0===s&&n.push([i,[]])}return n},_fillInPairs:function(e,n){n=t.groupBy(n,{key:function(t){return t[0].replace(/\[\]$/,"")},adjacentGroups:!0}),n=t.map(n,function(e){var n=t.reduce(e,function(t,e){return[null,t[1].concat([e[1]])]},[null,[]])[1];return[e[0][0],n]});for(var i,s,a,l=0,h=n.length;h>l;l++){if(i=n[l][0],i in e)s=e[i];else{if(!(i+"[]"in e))continue;s=e[i+"[]"],i+="[]"}s=o(s),a=n[l][1],r._fillInOne(i,s,a)}},_fillInOne:function(t,n,i){var o=n[0],s=o.nodeName.toLowerCase(),a=o.getAttribute("type");a=a&&a.toLowerCase();var l="select"===s&&e.hasAttribute(o,"multiple");if("checkbox"===a||"radio"===a)r._fillInBoolean(n,i,"checked");else if(l)r._fillInBoolean(n[0].options,i,"selected");else{n.length!==i.length&&Ink.warn("Form had "+n.length+' inputs named "'+t+'", but received '+i.length+" values.");for(var h=0,u=Math.min(n.length,i.length);u>h;h+=1)n[h].value=i[h]}},_fillInBoolean:function(e,n,i){t.forEach(e,function(e){var o=t.inArray(e.value,n);e[i]=o})},_resultsInArray:function(t){var n=t.getAttribute("type"),i=t.nodeName.toLowerCase();return"checkbox"===n||"select"===i&&e.hasAttribute(t,"multiple")},_isSerialized:function(t,n){if(n=n||{},!e.isDOMElement(t))return!1;if(!e.hasAttribute(t,"name"))return!1;var i=t.nodeName.toLowerCase();return i&&"fieldset"!==i?"checkbox"===t.type||"radio"===t.type?n.outputUnchecked?!0:!!t.checked:!0:!1}};return r}),Ink.createModule("Ink.Dom.Loaded",1,[],function(){"use strict";var t={_contexts:[],run:function(t,e){e||(e=t,t=window);for(var n,i=0,o=this._contexts.length;o>i;i++)if(this._contexts[i][0]===t){n=this._contexts[i][1];break}n||(n={cbQueue:[],win:t,doc:t.document,root:t.document.documentElement,done:!1,top:!0},n.handlers={checkState:Ink.bindEvent(this._checkState,this,n),poll:Ink.bind(this._poll,this,n)},this._contexts.push([t,n]));var r=n.doc.addEventListener;n.add=r?"addEventListener":"attachEvent",n.rem=r?"removeEventListener":"detachEvent",n.pre=r?"":"on",n.det=r?"DOMContentLoaded":"onreadystatechange",n.wet=n.pre+"load";var s=n.handlers.checkState,a=/complete|loaded/.test(n.doc.readyState)&&"about:blank"!==n.win.location.toString();if(a)setTimeout(Ink.bind(function(){e.call(n.win,"lazy")},this),0);else{n.cbQueue.push(e),n.doc[n.add](n.det,s),n.win[n.add](n.wet,s);var l=1;try{l=n.win.frameElement}catch(h){}if(!r&&n.root&&n.root.doScroll){try{n.top=!l}catch(h){}n.top&&this._poll(n)}}},_checkState:function(t,e){if(t&&("readystatechange"!==t.type||/complete|loaded/.test(e.doc.readyState))){var n="load"===t.type?e.win:e.doc;n[e.rem](e.pre+t.type,e.handlers.checkState,!1),this._ready(e)}},_poll:function(t){try{t.root.doScroll("left")}catch(e){return setTimeout(t.handlers.poll,50)}this._ready(t)},_ready:function(t){if(!t.done){t.done=!0;for(var e=0;e<t.cbQueue.length;++e)t.cbQueue[e].call(t.win);t.cbQueue=[]}}};return t}),Ink.createModule("Ink.Dom.Selector",1,[],function(){"use strict";function t(t){return fe.test(t+"")}function e(){var t,e=[];return t=function(n,i){return e.push(n+=" ")>C.cacheLength&&delete t[e.shift()],t[n]=i}}function n(t){return t[F]=!0,t}function i(t){var e=N.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e=null}}function o(t,e,n,i){var o,r,s,a,l,c,d,p,f,m;if((e?e.ownerDocument||e:B)!==N&&T(e),e=e||N,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(M&&!i){if(o=me.exec(t))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&U(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((s=o[3])&&R.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(s)),n}if(R.qsa&&!A.test(t)){if(d=!0,p=F,f=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=h(t),(d=e.getAttribute("id"))?p=d.replace(ve,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+u(c[l]);f=pe.test(t)&&e.parentNode||e,m=c.join(",")}if(m)try{return Q.apply(n,f.querySelectorAll(m)),n}catch(_){}finally{d||e.removeAttribute("id")}}}return v(t.replace(ae,"$1"),e,n,i)}function r(t,e){var n=e&&t,i=n&&(~e.sourceIndex||J)-(~t.sourceIndex||J);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function a(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function l(t){return n(function(e){return e=+e,n(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function h(t,e){var n,i,r,s,a,l,h,u=q[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],h=C.preFilter;a;){(!n||(i=le.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),l.push(r=[])),n=!1,(i=he.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(ae," ")}),a=a.slice(n.length));for(s in C.filter)!(i=de[s].exec(a))||h[s]&&!(i=h[s](i))||(n=i.shift(),r.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?o.error(t):q(t,l).slice(0)}function u(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function c(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=j++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,s){var a,l,h,u=H+" "+r;if(s){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(h=e[F]||(e[F]={}),(l=h[i])&&l[0]===u){if((a=l[1])===!0||a===k)return a===!0}else if(l=h[i]=[u],l[1]=t(e,n,s)||k,l[1]===!0)return!0}}function d(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function p(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,h=null!=e;l>a;a++)(r=t[a])&&(!n||n(r,i,o))&&(s.push(r),h&&e.push(a));return s}function f(t,e,i,o,r,s){return o&&!o[F]&&(o=f(o)),r&&!r[F]&&(r=f(r,s)),n(function(n,s,a,l){var h,u,c,d=[],f=[],m=s.length,_=n||g(e||"*",a.nodeType?[a]:a,[]),v=!t||!n&&e?_:p(_,d,t,a,l),y=i?r||(n?t:m||o)?[]:s:v;if(i&&i(v,y,a,l),o)for(h=p(y,f),o(h,[],a,l),u=h.length;u--;)(c=h[u])&&(y[f[u]]=!(v[f[u]]=c));if(n){if(r||t){if(r){for(h=[],u=y.length;u--;)(c=y[u])&&h.push(v[u]=c);r(null,y=[],h,l)}for(u=y.length;u--;)(c=y[u])&&(h=r?te.call(n,c):d[u])>-1&&(n[h]=!(s[h]=c))}}else y=p(y===s?y.splice(m,y.length):y),r?r(null,s,y,l):Q.apply(s,y)})}function m(t){for(var e,n,i,o=t.length,r=C.relative[t[0].type],s=r||C.relative[" "],a=r?1:0,l=c(function(t){return t===e},s,!0),h=c(function(t){return te.call(e,t)>-1},s,!0),p=[function(t,n,i){return!r&&(i||n!==S)||((e=n).nodeType?l(t,n,i):h(t,n,i))}];o>a;a++)if(n=C.relative[t[a].type])p=[c(d(p),n)];else{if(n=C.filter[t[a].type].apply(null,t[a].matches),n[F]){for(i=++a;o>i&&!C.relative[t[i].type];i++);return f(a>1&&d(p),a>1&&u(t.slice(0,a-1)).replace(ae,"$1"),n,i>a&&m(t.slice(a,i)),o>i&&m(t=t.slice(i)),o>i&&u(t))}p.push(n)}return d(p)}function _(t,e){var i=0,r=e.length>0,s=t.length>0,a=function(n,a,l,h,u){var c,d,f,m=[],_=0,g="0",v=n&&[],y=null!=u,b=S,I=n||s&&C.find.TAG("*",u&&a.parentNode||a),w=H+=null==b?1:Math.random()||.1;for(y&&(S=a!==N&&a,k=i);null!=(c=I[g]);g++){if(s&&c){for(d=0;f=t[d++];)if(f(c,a,l)){h.push(c);break}y&&(H=w,k=++i)}r&&((c=!f&&c)&&_--,n&&v.push(c))}if(_+=g,r&&g!==_){for(d=0;f=e[d++];)f(v,m,a,l);if(n){if(_>0)for(;g--;)v[g]||m[g]||(m[g]=G.call(h));m=p(m)}Q.apply(h,m),y&&!n&&m.length>0&&_+e.length>1&&o.uniqueSort(h)}return y&&(H=w,S=b),v};return r?n(a):a}function g(t,e,n){for(var i=0,r=e.length;r>i;i++)o(t,e[i],n);return n}function v(t,e,n,i){var o,r,s,a,l,c=h(t);if(!i&&1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===e.nodeType&&M&&C.relative[r[1].type]){if(e=(C.find.ID(s.matches[0].replace(be,ke),e)||[])[0],!e)return n;t=t.slice(r.shift().value.length)}for(o=de.needsContext.test(t)?0:r.length;o--&&(s=r[o],!C.relative[a=s.type]);)if((l=C.find[a])&&(i=l(s.matches[0].replace(be,ke),pe.test(r[0].type)&&e.parentNode||e))){if(r.splice(o,1),t=i.length&&u(r),!t)return Q.apply(n,i),n;break}}return E(t,c)(i,e,!M,n,pe.test(t)),n}function y(){}/*!
 * Sizzle CSS Selector Engine
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
var b,k,C,I,w,E,S,x,D,T,N,O,M,A,P,L,U,F="sizzle"+-new Date,B=window.document,R={},H=0,j=0,z=e(),q=e(),V=e(),W=!1,$=function(){return 0},Y="undefined",J=1<<31,X=[],G=X.pop,K=X.push,Q=X.push,Z=X.slice,te=X.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ee="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=ne.replace("w","w#"),oe="([*^$|!~]?=)",re="\\["+ee+"*("+ne+")"+ee+"*(?:"+oe+ee+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ie+")|)|)"+ee+"*\\]",se=":("+ne+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+re.replace(3,8)+")*)|.*)\\)|)",ae=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),le=new RegExp("^"+ee+"*,"+ee+"*"),he=new RegExp("^"+ee+"*([\\x20\\t\\r\\n\\f>+~])"+ee+"*"),ue=new RegExp(se),ce=new RegExp("^"+ie+"$"),de={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),NAME:new RegExp("^\\[name=['\"]?("+ne+")['\"]?\\]"),TAG:new RegExp("^("+ne.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},pe=/[\x20\t\r\n\f]*[+~]/,fe=/^[^{]+\{\s*\[native code/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/'|\\/g,ye=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,be=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,ke=function(t,e){var n="0x"+e-65536;return n!==n?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Q.apply(X=Z.call(B.childNodes),B.childNodes),X[B.childNodes.length].nodeType}catch(Ce){Q={apply:X.length?function(t,e){K.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=o.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},T=o.setDocument=function(e){var n=e?e.ownerDocument||e:B;return n!==N&&9===n.nodeType&&n.documentElement?(N=n,O=n.documentElement,M=!w(n),R.getElementsByTagName=i(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),R.attributes=i(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),R.getElementsByClassName=i(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",t.getElementsByClassName&&t.getElementsByClassName("e").length?(t.lastChild.className="e",2===t.getElementsByClassName("e").length):!1}),R.getByName=i(function(t){t.id=F+0,t.appendChild(N.createElement("a")).setAttribute("name",F),t.appendChild(N.createElement("i")).setAttribute("name",F),O.appendChild(t);var e=n.getElementsByName&&n.getElementsByName(F).length===2+n.getElementsByName(F+0).length;return O.removeChild(t),e}),R.sortDetached=i(function(t){return t.compareDocumentPosition&&1&t.compareDocumentPosition(N.createElement("div"))}),C.attrHandle=i(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==Y&&"#"===t.firstChild.getAttribute("href")})?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},R.getByName?(C.find.ID=function(t,e){if(typeof e.getElementById!==Y&&M){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(t){var e=t.replace(be,ke);return function(t){return t.getAttribute("id")===e}}):(C.find.ID=function(t,e){if(typeof e.getElementById!==Y&&M){var n=e.getElementById(t);return n?n.id===t||typeof n.getAttributeNode!==Y&&n.getAttributeNode("id").value===t?[n]:void 0:[]}},C.filter.ID=function(t){var e=t.replace(be,ke);return function(t){var n=typeof t.getAttributeNode!==Y&&t.getAttributeNode("id");return n&&n.value===e}}),C.find.TAG=R.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==Y?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},C.find.NAME=R.getByName&&function(t,e){return typeof e.getElementsByName!==Y?e.getElementsByName(name):void 0},C.find.CLASS=R.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==Y&&M?e.getElementsByClassName(t):void 0},P=[],A=[":focus"],(R.qsa=t(n.querySelectorAll))&&(i(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||A.push("\\["+ee+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||A.push(":checked")}),i(function(t){t.innerHTML="<input type='hidden' i=''/>",t.querySelectorAll("[i^='']").length&&A.push("[*^$]="+ee+"*(?:\"\"|'')"),t.querySelectorAll(":enabled").length||A.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),A.push(",.*:")})),(R.matchesSelector=t(L=O.matchesSelector||O.mozMatchesSelector||O.webkitMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&i(function(t){R.disconnectedMatch=L.call(t,"div"),L.call(t,"[s!='']:x"),P.push("!=",se)}),A=new RegExp(A.join("|")),P=P.length&&new RegExp(P.join("|")),U=t(O.contains)||O.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},$=O.compareDocumentPosition?function(t,e){if(t===e)return W=!0,0;var i=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return i?1&i||x&&e.compareDocumentPosition(t)===i?t===n||U(B,t)?-1:e===n||U(B,e)?1:D?te.call(D,t)-te.call(D,e):0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var i,o=0,s=t.parentNode,a=e.parentNode,l=[t],h=[e];if(t===e)return W=!0,0;if(!s||!a)return t===n?-1:e===n?1:s?-1:a?1:0;if(s===a)return r(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)h.unshift(i);for(;l[o]===h[o];)o++;return o?r(l[o],h[o]):l[o]===B?-1:h[o]===B?1:0},N):N},o.matches=function(t,e){return o(t,null,null,e)},o.matchesSelector=function(t,e){if((t.ownerDocument||t)!==N&&T(t),e=e.replace(ye,"='$1']"),R.matchesSelector&&M&&(!P||!P.test(e))&&!A.test(e))try{var n=L.call(t,e);if(n||R.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(i){}return o(e,N,null,[t]).length>0},o.contains=function(t,e){return(t.ownerDocument||t)!==N&&T(t),U(t,e)},o.attr=function(t,e){var n;return(t.ownerDocument||t)!==N&&T(t),M&&(e=e.toLowerCase()),(n=C.attrHandle[e])?n(t):!M||R.attributes?t.getAttribute(e):((n=t.getAttributeNode(e))||t.getAttribute(e))&&t[e]===!0?e:n&&n.specified?n.value:null},o.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},o.uniqueSort=function(t){var e,n=[],i=0,o=0;if(W=!R.detectDuplicates,x=!R.sortDetached,D=!R.sortStable&&t.slice(0),t.sort($),W){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return t},I=o.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=I(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i];i++)n+=I(e);return n},C=o.selectors={cacheLength:50,createPseudo:n,match:de,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(be,ke),t[3]=(t[4]||t[5]||"").replace(be,ke),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||o.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&o.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return de.CHILD.test(t[0])?null:(t[4]?t[2]=t[4]:n&&ue.test(n)&&(e=h(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(be,ke).toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+ee+")"+t+"("+ee+"|$)"))&&z(t,function(t){return e.test(t.className||typeof t.getAttribute!==Y&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=o.attr(i,t);return null==r?"!="===e:e?(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r+" ").indexOf(n)>-1:"|="===e?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var h,u,c,d,p,f,m=r!==s?"nextSibling":"previousSibling",_=e.parentNode,g=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(_){if(r){for(;m;){for(c=e;c=c[m];)if(a?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?_.firstChild:_.lastChild],s&&v){for(u=_[F]||(_[F]={}),h=u[t]||[],p=h[0]===H&&h[1],d=h[0]===H&&h[2],c=p&&_.childNodes[p];c=++p&&c&&c[m]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){u[t]=[H,p,d];break}}else if(v&&(h=(e[F]||(e[F]={}))[t])&&h[0]===H)d=h[1];else for(;(c=++p&&c&&c[m]||(d=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==g:1!==c.nodeType)||!++d||(v&&((c[F]||(c[F]={}))[t]=[H,d]),c!==e)););return d-=o,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,e){var i,r=C.pseudos[t]||C.setFilters[t.toLowerCase()]||o.error("unsupported pseudo: "+t);return r[F]?r(e):r.length>1?(i=[t,t,"",e],C.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,n){for(var i,o=r(t,e),s=o.length;s--;)i=te.call(t,o[s]),t[i]=!(n[i]=o[s])}):function(t){return r(t,0,i)}):r}},pseudos:{not:n(function(t){var e=[],i=[],o=E(t.replace(ae,"$1"));return o[F]?n(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,n,r){return e[0]=t,o(e,null,r,i),!i.pop()}}),has:n(function(t){return function(e){return o(t,e).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||I(e)).indexOf(t)>-1}}),lang:n(function(t){return ce.test(t||"")||o.error("unsupported lang: "+t),t=t.replace(be,ke).toLowerCase(),function(e){var n;do if(n=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(t){var e=window.location&&window.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===O},focus:function(t){return t===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return _e.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[0>n?n+e:n]}),even:l(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:l(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}};for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})C.pseudos[b]=a(b);return E=o.compile=function(t,e){var n,i=[],o=[],r=V[t+" "];if(!r){for(e||(e=h(t)),n=e.length;n--;)r=m(e[n]),r[F]?i.push(r):o.push(r);r=V(t,_(o,i))}return r},C.pseudos.nth=C.pseudos.eq,y.prototype=C.filters=C.pseudos,C.setFilters=new y,R.sortStable=F.split("").sort($).join("")===F,T(),[0,0].sort($),R.detectDuplicates=W,{select:o,matches:o.matches,matchesSelector:o.matchesSelector}}),Ink.createModule("Ink.Util.Array","1",[],function(){"use strict";var t=Array.prototype,e={isArray:Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},groupBy:function(t,n){function i(t){return"function"==typeof n.key?n.key(t):"string"==typeof n.key?t[n.key]:t}function o(t){var e=n.pairs?[t,[]]:[];return a.push(e),s.push(t),e}n=n||{};for(var r,s=[],a=[],l=0,h=t.length;h>l;l++){r=i(t[l]);var u;u=n.adjacentGroups?s[s.length-1]===r?a[a.length-1]:o(r):a[e.keyValue(r,s,!0)]||o(r),n.pairs?u[1].push(t[l]):u.push(t[l])}return a},reduce:function(e,n,i){if(t.reduce)return t.reduce.apply(e,t.slice.call(arguments,1));var o,r=Object(e),s=r.length>>>0,a=0;if(arguments.length>=3)o=i;else{for(;s>a&&!(a in r);)a++;if(a>=s)throw new TypeError("Reduce of empty array with no initial value");o=r[a++]}for(;s>a;a++)a in r&&(o=n(o,r[a],a,r));return o},inArray:function(t,e){if("object"==typeof e)for(var n=0,i=e.length;i>n;++n)if(e[n]===t)return!0;return!1},sortMulti:function(t,e){if("undefined"==typeof t||t.constructor!==Array)return!1;if("string"!=typeof e)return t.sort();if(t.length>0){if("undefined"==typeof t[0][e])return!1;t.sort(function(t,n){var i=t[e],o=n[e];return o>i?-1:i>o?1:0})}return t},keyValue:function(t,e,n){if("undefined"!=typeof t&&"object"==typeof e&&this.inArray(t,e)){for(var i=[],o=0,r=e.length;r>o;++o)if(e[o]===t){if("undefined"!=typeof n&&n===!0)return o;i.push(o)}return i}return!1},shuffle:function(t){if("undefined"!=typeof t&&t.constructor!==Array)return!1;for(var e=t.length,n=!1,i=!1;e--;)i=Math.floor(Math.random()*(e+1)),n=t[e],t[e]=t[i],t[i]=n;return t},forEach:function(e,n,i){if(t.forEach)return t.forEach.call(e,n,i);for(var o=0,r=e.length>>>0;r>o;o++)n.call(i,e[o],o,e)},each:function(){e.forEach.apply(e,t.slice.call(arguments))},map:function(e,n,i){if(t.map)return t.map.call(e,n,i);for(var o=new Array(s),r=0,s=e.length>>>0;s>r;r++)o[r]=n.call(i,e[r],r,e);return o},filter:function(e,n,i){if(t.filter)return t.filter.call(e,n,i);for(var o=[],r=null,s=0,a=e.length;a>s;s++)r=e[s],n.call(i,r,s,e)&&o.push(r);return o},some:function(t,e,n){if(null===t)throw new TypeError("First argument is invalid.");var i=Object(t),o=i.length>>>0;if("function"!=typeof e)throw new TypeError("Second argument must be a function.");for(var r=0;o>r;r++)if(r in i&&e.call(n,i[r],r,i))return!0;return!1},intersect:function(t,e){if(!t||!e||t instanceof Array==!1||e instanceof Array==!1)return[];for(var n=[],i=0,o=t.length;o>i;++i)for(var r=0,s=e.length;s>r;++r)t[i]===e[r]&&n.push(t[i]);return n},convert:function(e){return t.slice.call(e||[],0)},unique:function(t){if(!Array.prototype.lastIndexOf){var n=[];return e.forEach(e.convert(t),function(t){e.inArray(t,n)||n.push(t)}),n}return e.filter(e.convert(t),function(t,e,n){return n.lastIndexOf(t)===e})},range:function(t,e,n){n||(n=1);var i,o=[];if(n>0)for(i=t;e>i;i+=n)o.push(i);else for(i=t;i>e;i+=n)o.push(i);return o},insert:function(t,e,n){t.splice(e,0,n)},remove:function(t,e,n){for(var i=[],o=0,r=t.length;r>o;o++)o>=e&&e+n>o||i.push(t[o]);return i}};return e}),Ink.createModule("Ink.Util.BinPack","1",[],function(){"use strict";/*
        Copyright (c) 2011, 2012, 2013 Jake Gordon and contributors

        Permission is hereby granted, free of charge, to any person obtaining a copy
        of this software and associated documentation files (the "Software"), to deal
        in the Software without restriction, including without limitation the rights
        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        copies of the Software, and to permit persons to whom the Software is
        furnished to do so, subject to the following conditions:

        The above copyright notice and this permission notice shall be included in all
        copies or substantial portions of the Software.

        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
        SOFTWARE.
    */
var t=function(t,e){this.init(t,e)};t.prototype={init:function(t,e){this.root={x:0,y:0,w:t,h:e}},fit:function(t){var e,n,i;for(e=0;e<t.length;++e)i=t[e],(n=this.findNode(this.root,i.w,i.h))&&(i.fit=this.splitNode(n,i.w,i.h))},findNode:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.w&&n<=t.h?t:null},splitNode:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,w:t.w,h:t.h-n},t.right={x:t.x+e,y:t.y,w:t.w-e,h:n},t}};var e=function(){};e.prototype={fit:function(t){var e,n,i,o=t.length,r=o>0?t[0].w:0,s=o>0?t[0].h:0;for(this.root={x:0,y:0,w:r,h:s},e=0;o>e;e++)i=t[e],i.fit=(n=this.findNode(this.root,i.w,i.h))?this.splitNode(n,i.w,i.h):this.growNode(i.w,i.h)},findNode:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.w&&n<=t.h?t:null},splitNode:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,w:t.w,h:t.h-n},t.right={x:t.x+e,y:t.y,w:t.w-e,h:n},t},growNode:function(t,e){var n=t<=this.root.w,i=e<=this.root.h,o=i&&this.root.h>=this.root.w+t,r=n&&this.root.w>=this.root.h+e;return o?this.growRight(t,e):r?this.growDown(t,e):i?this.growRight(t,e):n?this.growDown(t,e):null},growRight:function(t,e){this.root={used:!0,x:0,y:0,w:this.root.w+t,h:this.root.h,down:this.root,right:{x:this.root.w,y:0,w:t,h:this.root.h}};var n;return(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null},growDown:function(t,e){this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+e,down:{x:0,y:this.root.h,w:this.root.w,h:e},right:this.root};var n;return(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null}};var n={random:function(){return Math.random()-.5},w:function(t,e){return e.w-t.w},h:function(t,e){return e.h-t.h},a:function(t,e){return e.area-t.area},max:function(t,e){return Math.max(e.w,e.h)-Math.max(t.w,t.h)},min:function(t,e){return Math.min(e.w,e.h)-Math.min(t.w,t.h)},height:function(t,e){return n.msort(t,e,["h","w"])},width:function(t,e){return n.msort(t,e,["w","h"])},area:function(t,e){return n.msort(t,e,["a","h","w"])},maxside:function(t,e){return n.msort(t,e,["max","min","h","w"])},msort:function(t,e,i){var o,r;for(r=0;r<i.length;++r)if(o=n[i[r]](t,e),0!==o)return o;return 0}},i=function(){return[this.w," x ",this.h].join("")},o={binPack:function(o){var r,s,a;for(r=0,s=o.blocks.length;s>r;++r)a=o.blocks[r],"area"in a||(a.area=a.w*a.h);var l=o.dimensions?new t(o.dimensions[0],o.dimensions[1]):new e;o.sorter||(o.sorter="maxside"),o.blocks.sort(n[o.sorter]),l.fit(o.blocks);var h=[l.root.w,l.root.h],u=[],c=[];for(r=0,s=o.blocks.length;s>r;++r)a=o.blocks[r],a.fit?u.push(a):(a.toString=i,c.push(a));var d=h[0]*h[1],p=0;for(r=0,s=u.length;s>r;++r)a=u[r],p+=a.area;return{dimensions:h,filled:p/d,blocks:o.blocks,fitted:u,unfitted:c}}};return o}),Ink.createModule("Ink.Util.Cookie","1",[],function(){"use strict";var t={get:function(t){var e=document.cookie||!1,n={};if(e){e=e.replace(new RegExp("; ","g"),";");var i=e.split(";"),o=[];if(i.length>0)for(var r=0;r<i.length;r++)o=i[r].split("="),2===o.length&&(n[o[0]]=decodeURIComponent(o[1]));if(t)return"undefined"!=typeof n[t]?n[t]:null}return n},set:function(t,e,n,i,o,r){var s;if(!t||e===!1||"undefined"==typeof t||"undefined"==typeof e)return!1;s=t+"="+encodeURIComponent(e);var a=!1,l=!1,h=!1,u=!1;if(n&&"undefined"!=typeof n&&!isNaN(n)){var c=new Date,d=parseInt(Number(c.valueOf()),10)+1e3*Number(parseInt(n,10)),p=new Date(d),f=p.toGMTString(),m=new RegExp("([^\\s]+)(\\s\\d\\d)\\s(\\w\\w\\w)\\s(.*)");f=f.replace(m,"$1$2-$3-$4"),a="expires="+f}else a="undefined"==typeof n||isNaN(n)||0!==Number(parseInt(n,10))?"expires=Thu, 01-Jan-2037 00:00:01 GMT":"";l=i&&"undefined"!=typeof i?"path="+i:"path=/",o?h="domain="+o:/\./.test(window.location.hostname)&&(h="domain="+window.location.hostname),u=r&&"undefined"!=typeof r?r:!1,document.cookie=s+"; "+a+"; "+l+(h?"; "+h:"")+"; "+u},remove:function(t,e,n){var i=-1;this.set(t,"deleted",i,e,n)}};return t}),Ink.createModule("Ink.Util.Date","1",[],function(){"use strict";var t={_months:function(t){var e=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return e[t]},_iMonth:function(t){return Number(t)?+t-1:{janeiro:0,jan:0,fevereiro:1,fev:1,"mar\xe7o":2,mar:2,abril:3,abr:3,maio:4,mai:4,junho:5,jun:5,julho:6,jul:6,agosto:7,ago:7,setembro:8,set:8,outubro:9,out:9,novembro:10,nov:10,dezembro:11,dez:11}[t.toLowerCase()]},_wDays:function(t){var e=["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"];return e[t]},_iWeek:function(t){return Number(t)?+t||7:{segunda:1,seg:1,"ter\xe7a":2,ter:2,quarta:3,qua:3,quinta:4,qui:4,sexta:5,sex:5,"s\xe1bado":6,"s\xe1b":6,domingo:7,dom:7}[t.toLowerCase()]},_daysInMonth:function(t,e){var n;return n=1===t||3===t||5===t||7===t||8===t||10===t||12===t?31:4===t||6===t||9===t||11===t?30:e%400===0||e%4===0&&e%100!==0?29:28},get:function(t,e){("undefined"==typeof t||""===t)&&(t="Y-m-d");var n,i=t.split(""),o=new Array(i.length),r="\\";n="undefined"==typeof e?new Date:new Date("number"==typeof e?1e3*e:e);for(var s,a,l,h=0;h<i.length;h++)switch(i[h]){case r:o[h]=i[h+1],h++;break;case"d":var u=n.getDate();o[h]=String(u).length>1?u:"0"+u;break;case"D":o[h]=this._wDays(n.getDay()).substring(0,3);break;case"j":o[h]=n.getDate();break;case"l":o[h]=this._wDays(n.getDay());break;case"N":o[h]=n.getDay()||7;break;case"S":var c=n.getDate(),d=["st","nd","rd"],p="";o[h]=c>=11&&13>=c?"th":(p=d[String(c).substr(-1)-1])?p:"th";break;case"w":o[h]=n.getDay();break;case"z":s=Date.UTC(n.getFullYear(),0,0),a=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),o[h]=Math.floor((a-s)/864e5);break;case"W":var f=new Date(n.getFullYear(),0,1);s=f.getDay()||7;var m=Math.floor((n-f)/864e5+1);o[h]=Math.ceil((m-(8-s))/7)+1;break;case"F":o[h]=this._months(n.getMonth());break;case"m":var _=String(n.getMonth()+1);o[h]=_.length>1?_:"0"+_;break;case"M":o[h]=this._months(n.getMonth()).substring(0,3);break;case"n":o[h]=n.getMonth()+1;break;case"t":o[h]=this._daysInMonth(n.getMonth()+1,n.getYear());break;case"L":var g=n.getFullYear();o[h]=g%4?!1:g%100?!0:g%400?!1:!0;break;case"o":throw'"o" not implemented!';case"Y":o[h]=n.getFullYear();break;case"y":o[h]=String(n.getFullYear()).substring(2);break;case"a":o[h]=n.getHours()<12?"am":"pm";break;case"A":o[h]=n.getHours<12?"AM":"PM";break;case"B":throw'"B" not implemented!';case"g":l=n.getHours(),o[h]=12>=l?l:l-12;break;case"G":o[h]=String(n.getHours());break;case"h":l=String(n.getHours()),l=12>=l?l:l-12,o[h]=l.length>1?l:"0"+l;break;case"H":l=String(n.getHours()),o[h]=l.length>1?l:"0"+l;break;case"i":var v=String(n.getMinutes());o[h]=v.length>1?v:"0"+v;break;case"s":var y=String(n.getSeconds());o[h]=y.length>1?y:"0"+y;break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":s=new Date(n.getFullYear(),0,1),o[h]=n.getTimezoneOffset()!==s.getTimezoneOffset()?1:0;break;case"O":var b=n.getTimezoneOffset(),k=b%60;l=String((b-k)/60*-1),"-"!==l.charAt(0)&&(l="+"+l),l=3===l.length?l:l.replace(/([+\-])(\d)/,"$10$2"),o[h]=l+k+"0";break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":o[h]=60*n.getTimezoneOffset();break;case"c":throw'"c" not implemented!';case"r":var C=this._wDays(n.getDay()).substr(0,3),I=this._months(n.getMonth()).substr(0,3);o[h]=C+", "+n.getDate()+" "+I+this.get(" Y H:i:s O",n);break;case"U":o[h]=Math.floor(n.getTime()/1e3);break;default:o[h]=i[h]}return o.join("")},set:function(t,e){if("undefined"!=typeof e){("undefined"==typeof t||""===t)&&(t="Y-m-d");for(var n,i=t.split(""),o=new Array(i.length),r="\\",s={year:void 0,month:void 0,day:void 0,dayY:void 0,dayW:void 0,week:void 0,hour:void 0,hourD:void 0,min:void 0,sec:void 0,msec:void 0,ampm:void 0,diffM:void 0,diffH:void 0,date:void 0},a=0,l=0;l<i.length;l++)switch(i[l]){case r:o[l]=i[l+1],l++;break;case"d":o[l]="(\\d{2})",s.day={original:l,match:a++};break;case"j":o[l]="(\\d{1,2})",s.day={original:l,match:a++};break;case"D":o[l]="([\\w\xe1]{3})",s.dayW={original:l,match:a++};break;case"l":o[l]="([\\w\xe1]{5,7})",s.dayW={original:l,match:a++};break;case"N":o[l]="(\\d)",s.dayW={original:l,match:a++};break;case"w":o[l]="(\\d)",s.dayW={original:l,match:a++};break;case"S":o[l]="\\w{2}";break;case"z":o[l]="(\\d{1,3})",s.dayY={original:l,match:a++};break;case"W":o[l]="(\\d{1,2})",s.week={original:l,match:a++};break;case"F":o[l]="([\\w\xe7]{4,9})",s.month={original:l,match:a++};break;case"M":o[l]="(\\w{3})",s.month={original:l,match:a++};break;case"m":o[l]="(\\d{2})",s.month={original:l,match:a++};break;case"n":o[l]="(\\d{1,2})",s.month={original:l,match:a++};break;case"t":o[l]="\\d{2}";break;case"L":o[l]="\\w{4,5}";break;case"o":throw'"o" not implemented!';case"Y":o[l]="(\\d{4})",s.year={original:l,match:a++};break;case"y":o[l]="(\\d{2})",("undefined"==typeof s.year||"Y"!==i[s.year.original])&&(s.year={original:l,match:a++});break;case"a":o[l]="(am|pm)",s.ampm={original:l,match:a++};break;case"A":o[l]="(AM|PM)",s.ampm={original:l,match:a++};break;case"B":throw'"B" not implemented!';case"g":o[l]="(\\d{1,2})",s.hourD={original:l,match:a++};break;case"G":o[l]="(\\d{1,2})",s.hour={original:l,match:a++};break;case"h":o[l]="(\\d{2})",s.hourD={original:l,match:a++};break;case"H":o[l]="(\\d{2})",s.hour={original:l,match:a++};break;case"i":o[l]="(\\d{2})",s.min={original:l,match:a++};break;case"s":o[l]="(\\d{2})",s.sec={original:l,match:a++};break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":o[l]="\\d";break;case"O":o[l]="([-+]\\d{4})",s.diffH={original:l,match:a++};break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":o[l]="(\\-?\\d{1,5})",s.diffM={original:l,match:a++};break;case"c":throw'"c" not implemented!';case"r":o[l]="([\\w\xe1]{3}, \\d{1,2} \\w{3} \\d{4} \\d{2}:\\d{2}:\\d{2} [+\\-]\\d{4})",s.date={original:l,match:a++};break;case"U":o[l]="(\\d{1,13})",s.date={original:l,match:a++};break;default:o[l]=i[l]}var h=new RegExp(o.join(""));try{if(n=e.match(h),!n)return}catch(u){return}var c,d,p="undefined"!=typeof s.date,f="undefined"!=typeof s.year,m="undefined"!=typeof s.dayY,_="undefined"!=typeof s.day,g="undefined"!=typeof s.month,v=g&&_,y=!g&&_,b="undefined"!=typeof s.dayW,k="undefined"!=typeof s.week,C=k&&b,I=!k&&b,w=m||v||!f&&y||C||!f&&I,E=!(f||m||_||g||b||k),S="undefined"!=typeof s.hourD&&"undefined"!=typeof s.ampm,x="undefined"!=typeof s.hour,D=S||x,T="undefined"!=typeof s.min,N="undefined"!=typeof s.sec,O="undefined"!=typeof s.msec,M=!E||D,A=M||T,P="undefined"!=typeof s.diffM,L="undefined"!=typeof s.diffH;if(p){if("U"===i[s.date.original])return new Date(1e3*+n[s.date.match+1]);var U=n[s.date.match+1].match(/\w{3}, (\d{1,2}) (\w{3}) (\d{4}) (\d{2}):(\d{2}):(\d{2}) ([+\-]\d{4})/);return c=+U[4]+ +U[7].slice(0,3),d=+U[5]+(U[7].slice(0,1)+U[7].slice(3))/100*60,new Date(U[3],this._iMonth(U[2]),U[1],c,d,U[6])}var F,B,R,H,j,z,q=new Date;if(w||E){if(w){if(f){var V=q.getFullYear()-50+"";F=n[s.year.match+1],"y"===i[s.year.original]&&(F=+V.slice(0,2)+(F>=V.slice(2)?0:1)+F)}else F=q.getFullYear();if(m)B=0,R=n[s.dayY.match+1];else if(_)B=g?this._iMonth(n[s.month.match+1]):q.getMonth(),R=n[s.day.match+1];else{B=0;var W;W=k?n[s.week.match+1]:this.get("W",q),R=7*(W-2)+(8-(new Date(F,0,1).getDay()||7))+this._iWeek(n[s.week.match+1])}if(0===B&&R>31){var $=new Date(F,B,R);B=$.getMonth(),R=$.getDate()}}else F=q.getFullYear(),B=q.getMonth(),R=q.getDate();return c=S?+n[s.hourD.match+1]+("pm"===n[s.ampm.match+1]?12:0):x?n[s.hour.match+1]:E?q.getHours():"00",d=T?n[s.min.match+1]:M?"00":q.getMinutes(),H=N?n[s.sec.match+1]:A?"00":q.getSeconds(),j=O?n[s.msec.match+1]:"000",z=L?n[s.diffH.match+1]:P?String(-1*n[s.diffM.match+1]/60*100).replace(/^(\d)/,"+$1").replace(/(^[\-+])(\d{3}$)/,"$10$2"):"+0000",new Date(F,B,R,c,d,H)}}}};return t}),Ink.createModule("Ink.Util.Dumper","1",[],function(){"use strict";var t={_tab:"\xa0\xa0\xa0\xa0",_formatParam:function(t){var e="";switch(typeof t){case"string":e="(string) "+t;break;case"number":e="(number) "+t;break;case"boolean":e="(boolean) "+t;break;case"object":e=null!==t?t.constructor===Array?"Array \n{\n"+this._outputFormat(t,0)+"\n}":"Object \n{\n"+this._outputFormat(t,0)+"\n}":"null";break;default:e=!1}return e},_getTabs:function(t){for(var e="",n=0;t>n;n++)e+=this._tab;return e},_outputFormat:function(t,e){var n="",i=!1;for(var o in t)if(null!==t[o])if("object"!=typeof t[o]||t[o].constructor!==Array&&t[o].constructor!==Object){if(t[o].constructor===Function)continue;n=n+this._tab+this._getTabs(e)+"["+o+"] => "+t[o]+"\n"}else t[o].constructor===Array?i="Array":t[o].constructor===Object&&(i="Object"),n+=this._tab+this._getTabs(e)+"["+o+"] => <b>"+i+"</b>\n",n+=this._tab+this._getTabs(e)+"{\n",n+=this._outputFormat(t[o],e+1)+this._tab+this._getTabs(e)+"}\n";else n=n+this._tab+this._getTabs(e)+"["+o+"] => null \n";return n},printDump:function(t,e){if(e&&"undefined"!=typeof e)if("string"==typeof e)document.getElementById(e).innerHTML="<pre>"+this._formatParam(t)+"</pre>";else{if("object"!=typeof e)throw"TARGET must be an element or an element ID";e.innerHTML="<pre>"+this._formatParam(t)+"</pre>"}else document.write("<pre>"+this._formatParam(t)+"</pre>")},returnDump:function(t){return this._formatParam(t)},alertDump:function(t){window.alert(this._formatParam(t).replace(/(<b>)(Array|Object)(<\/b>)/g,"$2"))},windowDump:function(t){var e="dumperwindow_"+1e4*Math.random(),n=window.open("",e,"width=400,height=300,left=50,top=50,status,menubar,scrollbars,resizable");n.document.open(),n.document.write("<pre>"+this._formatParam(t)+"</pre>"),n.document.close(),n.focus()}};return t}),Ink.createModule("Ink.Util.I18n","1",[],function(){"use strict";var t=/\{(?:(\{.*?})|(?:%s:)?(\d+)|(?:%s)?|([\w-]+))}/g,e=function(t,e){return"function"==typeof t?t.apply(this,e):"undefined"!=typeof t?t:""},n=function(t,e,i){return this instanceof n?void this.reset().lang(e).testMode(i).append(t||{},e):new n(t,e,i)};return n.prototype={reset:function(){return this._dicts=[],this._dict={},this._testMode=!1,this._lang=this._gLang,this},clone:function(){for(var t=new n,e=0,i=this._dicts.length;i>e;e++)t.append(this._dicts[e]);return t.testMode(this.testMode()),t.lang(this.lang()),t},append:function(t){return this._dicts.push(t),this._dict=Ink.extendObj(this._dict,t[this._lang]),this},lang:function(t){if(!arguments.length)return this._lang;if(t&&this._lang!==t){this._lang=t,this._dict={};for(var e=0,n=this._dicts.length;n>e;e++)this._dict=Ink.extendObj(this._dict,this._dicts[e][t]||{})}return this},testMode:function(t){return arguments.length?(void 0!==t&&(this._testMode=!!t),this):!!this._testMode},getKey:function(t){var e,i=this._gLang,o=this._lang;return t in this._dict?e=this._dict[t]:(n.langGlobal(o),e=this._gDict[t],n.langGlobal(i)),e},text:function(n){if("string"==typeof n){var i=Array.prototype.slice.call(arguments,1),o=0,r="object"==typeof i[0],s=this.getKey(n);return void 0===s&&(s=this._testMode?"["+n+"]":n),"number"==typeof s&&(s+=""),"string"==typeof s?s=s.replace(t,function(t,n,s,a){var l=n?n:s?i[s-(r?0:1)]:a?i[0][a]||"":i[o++ +(r?1:0)];return e(l,[o].concat(i))}):"function"==typeof s?s.apply(this,i):s instanceof Array?e(s[i[0]],i):"object"==typeof s?e(s[i[0]],i):""}},ntext:function(t,e,n){var i,o=Array.prototype.slice.apply(arguments);if(2===o.length&&"number"==typeof e){if(i=this.getKey(t),!(i instanceof Array))return"";o.splice(0,1),i=i[1===e?0:1]}else o.splice(0,2),i=1===n?t:e;return this.text.apply(this,[i].concat(o))},ordinal:function(t){if(void 0===t)return"";var n=+t.toString().slice(-1),i=this.getKey("_ordinals");if(void 0===i)return"";if("string"==typeof i)return i;var o;return"function"==typeof i&&(o=i(t,n),"string"==typeof o)?o:"exceptions"in i&&(o="function"==typeof i.exceptions?i.exceptions(t,n):t in i.exceptions?e(i.exceptions[t],[t,n]):void 0,"string"==typeof o)?o:"byLastDigit"in i&&(o="function"==typeof i.byLastDigit?i.byLastDigit(n,t):n in i.byLastDigit?e(i.byLastDigit[n],[n,t]):void 0,"string"==typeof o)?o:"default"in i&&(o=e(i["default"],[t,n]),"string"==typeof o)?o:""},alias:function(){var t=Ink.bind(n.prototype.text,this);return t.ntext=Ink.bind(n.prototype.ntext,this),t.append=Ink.bind(n.prototype.append,this),t.ordinal=Ink.bind(n.prototype.ordinal,this),t.testMode=Ink.bind(n.prototype.testMode,this),t}},n.reset=function(){n.prototype._gDicts=[],n.prototype._gDict={},n.prototype._gLang="pt_PT"},n.reset(),n.appendGlobal=function(t,e){if(e){if(!(e in t)){var i={};i[e]=t,t=i}e!==n.prototype._gLang&&n.langGlobal(e)}n.prototype._gDicts.push(t),Ink.extendObj(n.prototype._gDict,t[n.prototype._gLang])},n.langGlobal=function(t){if(!arguments.length)return n.prototype._gLang;if(t&&n.prototype._gLang!==t){n.prototype._gLang=t,n.prototype._gDict={};for(var e=0,i=n.prototype._gDicts.length;i>e;e++)Ink.extendObj(n.prototype._gDict,n.prototype._gDicts[e][t]||{})}},n}),Ink.createModule("Ink.Util.Json","1",[],function(){"use strict";function twoDigits(t){var e=""+t;return 1===e.length?"0"+e:e}var function_call=Function.prototype.call,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,dateToISOString=Date.prototype.toISOString?Ink.bind(function_call,Date.prototype.toISOString):function(t){return t.getUTCFullYear()+"-"+twoDigits(t.getUTCMonth()+1)+"-"+twoDigits(t.getUTCDate())+"T"+twoDigits(t.getUTCHours())+":"+twoDigits(t.getUTCMinutes())+":"+twoDigits(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},InkJson={_nativeJSON:window.JSON||null,_convertToUnicode:!1,_escape:function(t){var e={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)&&(t=t.replace(/([\x00-\x1f\\"])/g,function(t,n){var i=e[n];return i?i:(i=n.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})),t},_toUnicode:function(t){if(this._convertToUnicode){for(var e="",n=!1,i=!1,o=0,r=t.length;r>o;){if(n=t.charCodeAt(o),n>=32&&126>=n||8===n||9===n||10===n||12===n||13===n||32===n||34===n||47===n||58===n||92===n)i=34===n||92===n||47===n?"\\"+t.charAt(o):8===n?"\\b":9===n?"\\t":10===n?"\\n":12===n?"\\f":13===n?"\\r":t.charAt(o);else if(this._convertToUnicode){for(i=t.charCodeAt(o).toString(16)+"".toUpperCase();i.length<4;)i="0"+i;i="\\u"+i}else i=t.charAt(o);e+=i,o++}return e}return this._escape(t)},_stringifyValue:function(t){if("string"==typeof t)return'"'+this._toUnicode(t)+'"';if("number"!=typeof t||!isNaN(t)&&isFinite(t)){if("undefined"==typeof t||null===t)return"null";if("function"==typeof t.toJSON){var e=t.toJSON();return"string"==typeof e?'"'+this._escape(e)+'"':this._escape(e.toString())}if("number"==typeof t||"boolean"==typeof t)return""+t;if("function"==typeof t)return"null";if(t.constructor===Date)return'"'+this._escape(dateToISOString(t))+'"';if(t.constructor===Array){for(var n="",i=0,o=t.length;o>i;i++)i>0&&(n+=","),n+=this._stringifyValue(t[i]);return"["+n+"]"}var r="";for(var s in t)({}).hasOwnProperty.call(t,s)&&(""!==r&&(r+=","),r+='"'+this._escape(s)+'": '+this._stringifyValue(t[s]));return"{"+r+"}"}return"null"},stringify:function(t,e){return this._convertToUnicode=!!e,!this._convertToUnicode&&this._nativeJSON?this._nativeJSON.stringify(t):this._stringifyValue(t)},parse:function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}};return InkJson}),Ink.createModule("Ink.Util.String","1",[],function(){"use strict";var InkUtilString={_chars:["&","\xe0","\xe1","\xe2","\xe3","\xe4","\xe5","\xe6","\xe7","\xe8","\xe9","\xea","\xeb","\xec","\xed","\xee","\xef","\xf0","\xf1","\xf2","\xf3","\xf4","\xf5","\xf6","\xf8","\xf9","\xfa","\xfb","\xfc","\xfd","\xfe","\xff","\xc0","\xc1","\xc2","\xc3","\xc4","\xc5","\xc6","\xc7","\xc8","\xc9","\xca","\xcb","\xcc","\xcd","\xce","\xcf","\xd0","\xd1","\xd2","\xd3","\xd4","\xd5","\xd6","\xd8","\xd9","\xda","\xdb","\xdc","\xdd","\xde","\u20ac",'"',"\xdf","<",">","\xa2","\xa3","\xa4","\xa5","\xa6","\xa7","\xa8","\xa9","\xaa","\xab","\xac","\xad","\xae","\xaf","\xb0","\xb1","\xb2","\xb3","\xb4","\xb5","\xb6","\xb7","\xb8","\xb9","\xba","\xbb","\xbc","\xbd","\xbe"],_entities:["amp","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","euro","quot","szlig","lt","gt","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34"],_accentedChars:["\xe0","\xe1","\xe2","\xe3","\xe4","\xe5","\xe8","\xe9","\xea","\xeb","\xec","\xed","\xee","\xef","\xf2","\xf3","\xf4","\xf5","\xf6","\xf9","\xfa","\xfb","\xfc","\xe7","\xf1","\xc0","\xc1","\xc2","\xc3","\xc4","\xc5","\xc8","\xc9","\xca","\xcb","\xcc","\xcd","\xce","\xcf","\xd2","\xd3","\xd4","\xd5","\xd6","\xd9","\xda","\xdb","\xdc","\xc7","\xd1"],_accentedRemovedChars:["a","a","a","a","a","a","e","e","e","e","i","i","i","i","o","o","o","o","o","u","u","u","u","c","n","A","A","A","A","A","A","E","E","E","E","I","I","I","I","O","O","O","O","O","U","U","U","U","C","N"],_htmlUnsafeChars:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},ucFirst:function(t,e){var n=e?/(^|\s)(\w)(\S{2,})/:/(^|\s)(\w)(\S{2,})/g;return t?String(t).replace(n,function(t,e,n,i){return e+n.toUpperCase()+i.toLowerCase()}):t},trim:function(t){return"string"==typeof t?t.replace(/^\s+|\s+$|\n+$/g,""):t},stripTags:function(t,e){if(e&&"string"==typeof e){for(var n=InkUtilString.trim(e).split(","),i=[],o=!1,r=0;r<n.length;r++)""!==InkUtilString.trim(n[r])&&(o=InkUtilString.trim(n[r].replace(/(<|\>)/g,"").replace(/\s/,"")),i.push("(<"+o+"\\s[^>]+>|<(\\s|\\/)?(\\s|\\/)?"+o+">)"));for(var s=i.join("|"),a=new RegExp(s,"i"),l=t.match(new RegExp("<[^>]*>","g")),h=0;h<l.length;h++)l[h].match(a)||(t=t.replace(new RegExp(l[h],"gm"),""));return t}return t.replace(/<[^\>]+\>/g,"")},htmlEntitiesEncode:function(t){if(t&&t.replace)for(var e=!1,n=0;n<InkUtilString._chars.length;n++)e=new RegExp(InkUtilString._chars[n],"gm"),t=t.replace(e,"&"+InkUtilString._entities[n]+";");return t},htmlEntitiesDecode:function(t){if(t&&t.replace){for(var e=!1,n=0;n<InkUtilString._entities.length;n++)e=new RegExp("&"+InkUtilString._entities[n]+";","gm"),t=t.replace(e,InkUtilString._chars[n]);t=t.replace(/&#[^;]+;?/g,function(t){return String.fromCharCode("x"===t.charAt(2)?parseInt(t.substring(3),16):parseInt(t.substring(2),10))})}return t},utf8Encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e+=String.fromCharCode(i):i>127&&2048>i?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e},shortString:function(t,e){for(var n=t.split(" "),i="",o=0;o<n.length;o++){if((i+n[o]+" ").length>=e){i+="&hellip;";break}i+=n[o]+" "}return i},truncateString:function(t,e){return t.length-1>e?t.substr(0,e-1)+"\u2026":t},utf8Decode:function(t){for(var e="",n=0,i=0,o=0,r=0;n<t.length;)i=t.charCodeAt(n),128>i?(e+=String.fromCharCode(i),n++):i>191&&224>i?(o=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&o),n+=2):(o=t.charCodeAt(n+1),r=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&r),n+=3);return e},removeAccentedChars:function(t){for(var e=t,n=!1,i=0;i<InkUtilString._accentedChars.length;i++)n=new RegExp(InkUtilString._accentedChars[i],"gm"),e=e.replace(n,""+InkUtilString._accentedRemovedChars[i]);return e},substrCount:function(t,e){return t?t.split(e).length-1:0},evalJSON:function(strJSON,sanitize){if("undefined"==typeof sanitize||null===sanitize||InkUtilString.isJSON(strJSON))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("ERROR: Bad JSON string...")}},isJSON:function(t){return t=t.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(t)},htmlEscapeUnsafe:function(t){var e=InkUtilString._htmlUnsafeChars;return null!==t?String(t).replace(/[<>&'"]/g,function(t){return e[t]}):t},normalizeWhitespace:function(t){return null!==t?InkUtilString.trim(String(t).replace(/\s+/g," ")):t},toUnicode:function(t){if("string"==typeof t){for(var e="",n=!1,i=!1,o=t.length,r=0;o>r;){if(n=t.charCodeAt(r),n>=32&&126>=n||8===n||9===n||10===n||12===n||13===n||32===n||34===n||47===n||58===n||92===n)i=8===n?"\\b":9===n?"\\t":10===n?"\\n":12===n?"\\f":13===n?"\\r":t.charAt(r);else{for(i=t.charCodeAt(r).toString(16)+"".toUpperCase();i.length<4;)i="0"+i;i="\\u"+i}e+=i,r++}return e}},escape:function(t){var e=t.charCodeAt(0).toString(16).split("");if(e.length<3){for(;e.length<2;)e.unshift("0");e.unshift("x")}else{for(;e.length<4;)e.unshift("0");e.unshift("u")}return e.unshift("\\"),e.join("")},unescape:function(t){var e=t.lastIndexOf("0");e=-1===e?2:Math.min(e,2);var n=t.substring(e),i=parseInt(n,16);return String.fromCharCode(i)},escapeText:function(t,e){void 0===e&&(e=["[","]","'",","]);for(var n,i,o=[],r=0,s=t.length;s>r;++r)n=t[r],i=n.charCodeAt(0),(32>i||i>126&&-1===e.indexOf(n))&&(n=InkUtilString.escape(n)),o.push(n);return o.join("")},escapedCharRegex:/(\\x[0-9a-fA-F]{2})|(\\u[0-9a-fA-F]{4})/g,unescapeText:function(t){for(var e;e=InkUtilString.escapedCharRegex.exec(t);)e=e[0],t=t.replace(e,InkUtilString.unescape(e)),InkUtilString.escapedCharRegex.lastIndex=0;return t},strcmp:function(t,e){return t===e?0:t>e?1:-1},packetize:function(t,e){for(var n,i=t.length,o=new Array(Math.ceil(i/e)),r=t.split(""),s=0;i;)n=Math.min(e,i),o[s++]=r.splice(0,n).join(""),i-=n;return o}};return InkUtilString}),Ink.createModule("Ink.Util.Url","1",[],function(){"use strict";var t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",getUrl:function(){return window.location.href},genQueryString:function(t,e){var n,i,o,r=-1!==t.indexOf("?"),s=[t];for(i in e)e.hasOwnProperty(i)&&(r?n="&":(n="?",r=!0),o=e[i],"number"==typeof o||o||(o=""),s=s.concat([n,encodeURIComponent(i),"=",encodeURIComponent(o)]));return s.join("")},getQueryString:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n={};if(e.match(/\?(.+)/i)){var i=e.replace(/^(.*)\?([^\#]+)(\#(.*))?/g,"$2");if(i.length>0)for(var o=i.split(/[;&]/),r=0;r<o.length;r++){var s=o[r].split("=");n[decodeURIComponent(s[0])]="undefined"!=typeof s[1]&&s[1]?decodeURIComponent(s[1]):!1}}return n},getAnchor:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n=!1;return e.match(/#(.+)/)&&(n=e.replace(/([^#]+)#(.*)/,"$2")),n},getAnchorString:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n={};if(e.match(/#(.+)/i)){var i=e.replace(/^([^#]+)#(.*)?/g,"$2");if(i.length>0)for(var o=i.split(/[;&]/),r=0;r<o.length;r++){var s=o[r].split("=");n[decodeURIComponent(s[0])]="undefined"!=typeof s[1]&&s[1]?decodeURIComponent(s[1]):!1}}return n},parseUrl:function(t){var e={};if(t&&"string"==typeof t){if(t.match(/^([^:]+):\/\//i)){var n=/^([^:]+):\/\/([^\/]*)\/?([^\?#]*)\??([^#]*)#?(.*)/i;t.match(n)&&(e.scheme=t.replace(n,"$1"),e.host=t.replace(n,"$2"),e.path="/"+t.replace(n,"$3"),e.query=t.replace(n,"$4")||!1,e.fragment=t.replace(n,"$5")||!1)}else{var i=new RegExp("^([^\\?]+)\\?([^#]+)#(.*)","i"),o=new RegExp("^([^\\?]+)\\?([^#]+)#?","i"),r=new RegExp("^([^\\?]+)\\??","i");t.match(i)?(e.scheme=!1,e.host=!1,e.path=t.replace(i,"$1"),e.query=t.replace(i,"$2"),e.fragment=t.replace(i,"$3")):t.match(o)?(e.scheme=!1,e.host=!1,e.path=t.replace(o,"$1"),e.query=t.replace(o,"$2"),e.fragment=!1):t.match(r)&&(e.scheme=!1,e.host=!1,e.path=t.replace(r,"$1"),e.query=!1,e.fragment=!1)}if(e.host){var s=/^(.*?)\\:(\\d+)$/i;if(e.host.match(s)){var a=e.host;e.host=a.replace(s,"$1"),e.port=a.replace(s,"$2")}else e.port=!1;if(e.host.match(/@/i)){var l=e.host;e.host=l.split("@")[1];var h=l.split("@")[0];h.match(/\:/)?(e.user=h.split(":")[0],e.pass=h.split(":")[1]):(e.user=h,e.pass=!1)}}}return e},format:function(t){var e="",n="",i="",o="",r="";return"string"==typeof t.protocol?e=t.protocol+"//":"string"==typeof t.scheme&&(e=t.scheme+"://"),n=t.host||t.hostname||"",i=t.path||"","string"==typeof t.query?r=t.query:"string"==typeof t.search&&(r=t.search.replace(/^\?/,"")),"string"==typeof t.fragment?o=t.fragment:"string"==typeof t.hash&&(o=t.hash.replace(/#$/,"")),[e,n,i,r&&"?"+r,o&&"#"+o].join("")},currentScriptElement:function(t){var e=document.getElementsByTagName("script");if("undefined"==typeof t)return e.length>0?e[e.length-1]:!1;for(var n=!1,i=new RegExp(""+t,"i"),o=0,r=e.length;r>o;o++)if(n=e[o],i.test(n.src))return n;return!1}};return t}),Ink.createModule("Ink.Util.Validator","1",[],function(){"use strict";var t={_countryCodes:["AO","CV","MZ","TL","PT"],_internacionalPT:351,_indicativosPT:{21:"lisboa",22:"porto",231:"mealhada",232:"viseu",233:"figueira da foz",234:"aveiro",235:"arganil",236:"pombal",238:"seia",239:"coimbra",241:"abrantes",242:"ponte de s\xf4r",243:"santar\xe9m",244:"leiria",245:"portalegre",249:"torres novas",251:"valen\xe7a",252:"vila nova de famalic\xe3o",253:"braga",254:"peso da r\xe9gua",255:"penafiel",256:"s\xe3o jo\xe3o da madeira",258:"viana do castelo",259:"vila real",261:"torres vedras",262:"caldas da ra\xednha",263:"vila franca de xira",265:"set\xfabal",266:"\xe9vora",268:"estremoz",269:"santiago do cac\xe9m",271:"guarda",272:"castelo branco",273:"bragan\xe7a",274:"proen\xe7a-a-nova",275:"covilh\xe3",276:"chaves",277:"idanha-a-nova",278:"mirandela",279:"moncorvo",281:"tavira",282:"portim\xe3o",283:"odemira",284:"beja",285:"moura",286:"castro verde",289:"faro",291:"funchal, porto santo",292:"corvo, faial, flores, horta, pico",295:"angra do hero\xedsmo, graciosa, s\xe3o jorge, terceira",296:"ponta delgada, s\xe3o miguel, santa maria",91:"rede m\xf3vel 91 (Vodafone / Yorn)",93:"rede m\xf3vel 93 (Optimus)",96:"rede m\xf3vel 96 (TMN)",92:"rede m\xf3vel 92 (TODOS)",707:"n\xfamero \xfanico",760:"n\xfamero \xfanico",800:"n\xfamero gr\xe1tis",808:"chamada local",30:"voip"},_internacionalCV:238,_indicativosCV:{2:"fixo",91:"m\xf3vel 91",95:"m\xf3vel 95",97:"m\xf3vel 97",98:"m\xf3vel 98",99:"m\xf3vel 99"},_internacionalAO:244,_indicativosAO:{2:"fixo",91:"m\xf3vel 91",92:"m\xf3vel 92"},_internacionalMZ:258,_indicativosMZ:{2:"fixo",82:"m\xf3vel 82",84:"m\xf3vel 84"},_internacionalTL:670,_indicativosTL:{3:"fixo",7:"m\xf3vel 7"},_characterGroups:{numbers:["0-9"],asciiAlpha:["a-zA-Z"],latin1Alpha:["a-zA-Z","\xc0-\xff"],unicodeAlpha:["a-zA-Z","\xc0-\xff","\u0100-\u1fff","\u2c00-\ud7ff"],space:[" "],dash:["-"],underscore:["_"],nicknamePunctuation:["_.-"],singleLineWhitespace:["	 "],newline:["\n"],whitespace:["	\n\f\r\xa0 "],asciiPunctuation:["!-/",":-@","[-`","{-~"],latin1Punctuation:["!-/",":-@","[-`","{-~","\xa1-\xbf","\xd7","\xf7"],unicodePunctuation:["!-/",":-@","[-`","{-~","\xa1-\xbf","\xd7","\xf7","\u2000-\u206f","\u2e00-\u2e7f","\u3000-\u303f"]},createRegExp:function(e){var n="^[";for(var i in e)if(e.hasOwnProperty(i)){if(!(i in t._characterGroups))throw new Error("group "+i+" is not a valid character group");e[i]&&(n+=t._characterGroups[i].join(""))}return new RegExp("^["===n?"$^":n+"]*?$")},checkCharacterGroups:function(e,n){return t.createRegExp(n).test(e)},unicode:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({unicodeAlpha:!0},n))},latin1:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({latin1Alpha:!0},n))},ascii:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({asciiAlpha:!0},n))},number:function(e,n){if(e+="",n=Ink.extendObj({decimalSep:".",thousandSep:"",negative:!0,decimalPlaces:null,maxDigits:null,max:null,min:null,returnNumber:!1},n||{}),n.thousandSep)return e=e.replace(new RegExp("\\"+n.thousandSep,"g"),""),n.thousandSep="",t.number(e,n);if(n.negative===!1)return n.min=0,n.negative=!0,t.number(e,n);if("."!==n.decimalSep&&(e=e.replace(new RegExp("\\"+n.decimalSep,"g"),".")),!/^(-)?(\d+)?(\.\d+)?$/.test(e)||""===e)return!1;
var i;if(n.decimalSep&&-1!==e.indexOf(n.decimalSep)){if(i=e.split(n.decimalSep),null!==n.decimalPlaces&&i[1].length>n.decimalPlaces)return!1}else i=[""+e,""];if(null!==n.maxDigits&&i[0].replace(/-/g,"").length>n.maxDigits)return i;var o=parseFloat(e);return null!==n.maxExcl&&o>=n.maxExcl||null!==n.minExcl&&o<=n.minExcl?!1:null!==n.max&&o>n.max||null!==n.min&&o<n.min?!1:n.returnNumber?o:!0},_isLeapYear:function(t){var e=/^\d{4}$/;return e.test(t)?t%4?!1:t%100?!0:t%400?!1:!0:!1},_dateParsers:{"yyyy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{4})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yyyy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{4})(\/)(\d{1,2})(\/)(\d{1,2})$/},"yy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{2})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{2})(\/)(\d{1,2})(\/)(\d{1,2})$/},"dd-mm-yyyy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{4})$/},"dd/mm/yyyy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{4})$/},"dd-mm-yy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{2})$/},"dd/mm/yy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{2})$/}},_daysInMonth:function(t,e){var n=0;return t=parseInt(t,10),e=parseInt(e,10),1===t||3===t||5===t||7===t||8===t||10===t||12===t?n=31:4===t||6===t||9===t||11===t?n=30:2===t&&(n=e%400===0||e%4===0&&e%100!==0?29:28),n},_isValidDate:function(t,e,n){var i=/^\d{4}$/,o=/^\d{1,2}$/;return i.test(t)&&o.test(e)&&o.test(n)&&e>=1&&12>=e&&n>=1&&this._daysInMonth(e,t)>=n?!0:!1},email:function(t){var e=new RegExp("^[_a-z0-9-]+((\\.|\\+)[_a-z0-9-]+)*@([\\w]*-?[\\w]*\\.)+[a-z]{2,4}$","i");return!!e.test(t)},mail:function(e){return t.email(e)},url:function(t,e){if("undefined"==typeof e||e===!1){var n=new RegExp("(^(http\\:\\/\\/|https\\:\\/\\/)(.+))","i");n.test(t)===!1&&(t="http://"+t)}var i=new RegExp("^(http:\\/\\/|https:\\/\\/)([\\w]*(-?[\\w]*)*\\.)+[a-z]{2,4}","i");return i.test(t)===!1?!1:!0},isPTPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosPT)"string"==typeof this._indicativosPT[n]&&e.push(n);var i=e.join("|"),o=/^(00351|\+351)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{9}/i;if(9===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isPortuguesePhone:function(t){return this.isPTPhone(t)},isCVPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosCV)"string"==typeof this._indicativosCV[n]&&e.push(n);var i=e.join("|"),o=/^(00238|\+238)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{7}/i;if(7===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isAOPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosAO)"string"==typeof this._indicativosAO[n]&&e.push(n);var i=e.join("|"),o=/^(00244|\+244)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{9}/i;if(9===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isMZPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosMZ)"string"==typeof this._indicativosMZ[n]&&e.push(n);var i=e.join("|"),o=/^(00258|\+258)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{8,9}/i;if((9===t.length||8===t.length)&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t)){if(0===t.indexOf("2")&&8===t.length)return!0;if(0===t.indexOf("8")&&9===t.length)return!0}}return!1},isTLPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosTL)"string"==typeof this._indicativosTL[n]&&e.push(n);var i=e.join("|"),o=/^(00670|\+670)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{7}/i;if(7===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isPhone:function(){var t;if(0===arguments.length)return!1;var e=arguments[0];if(arguments.length>1){if(arguments[1].constructor!==Array){if("function"==typeof this["is"+arguments[1].toUpperCase()+"Phone"])return this["is"+arguments[1].toUpperCase()+"Phone"](e);throw"Invalid Country Code!"}var n;for(t=0;t<arguments[1].length;t++){if("function"!=typeof(n=this["is"+arguments[1][t].toUpperCase()+"Phone"]))throw"Invalid Country Code!";if(n(e))return!0}}else for(t=0;t<this._countryCodes.length;t++)if(this["is"+this._countryCodes[t]+"Phone"](e))return!0;return!1},codPostal:function(t,e,n){var i=/^(\s*\-\s*|\s+)$/,o=/^\s+|\s+$/g,r=/^[1-9]\d{3}$/,s=/^\d{3}$/,a=/^(.{4})(.*)(.{3})$/;if(t=t.replace(o,""),"undefined"!=typeof e){if(e=e.replace(o,""),r.test(t)&&s.test(e))return n?[!0,!0]:!0}else{if(r.test(t))return n?[!0,!1]:!0;var l=t.match(a);if(null!==l&&r.test(l[1])&&i.test(l[2])&&s.test(l[3]))return n?[!0,!1]:!0}return n?[!1,!1]:!1},isDate:function(t,e){if("undefined"==typeof this._dateParsers[t])return!1;var n=this._dateParsers[t].year,i=this._dateParsers[t].month,o=this._dateParsers[t].day,r=this._dateParsers[t].parser,s=this._dateParsers[t].sep,a=e.match(r);if(null!==a&&a[2]===a[4]&&a[2]===s){var l=2===a[n].length?"20"+a[n].toString():a[n];if(this._isValidDate(l,a[i].toString(),a[o].toString()))return!0}return!1},isColor:function(t){var e,n=!1,i=/^[a-zA-Z]+$/,o=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,r=/^rgb\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,s=/^rgba\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/,a=/^hsl\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,l=/^hsla\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/;if(i.test(t)||o.test(t))return!0;var h;if(null!==(e=r.exec(t))||null!==(e=s.exec(t)))for(h=e.length;h--;){if((2===h||4===h||6===h)&&"undefined"!=typeof e[h]&&""!==e[h]){if(!("undefined"!=typeof e[h-1]&&e[h-1]>=0&&e[h-1]<=100))return!1;n=!0}if(1===h||3===h||5===h&&("undefined"==typeof e[h+1]||""===e[h+1])){if(!("undefined"!=typeof e[h]&&e[h]>=0&&e[h]<=255))return!1;n=!0}}if(null!==(e=a.exec(t))||null!==(e=l.exec(t)))for(h=e.length;h--;){if(3===h||5===h){if(!("undefined"!=typeof e[h-1]&&"undefined"!=typeof e[h]&&""!==e[h]&&e[h-1]>=0&&e[h-1]<=100))return!1;n=!0}if(1===h){if(!("undefined"!=typeof e[h]&&e[h]>=0&&e[h]<=360))return!1;n=!0}}return n},isIP:function(t,e){if("string"!=typeof t)return!1;switch(e=(e||"ipv4").toLowerCase()){case"ipv4":return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t);case"ipv6":return/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(t);default:return!1}},_creditCardSpecs:{"default":{length:"13,14,15,16,17,18,19",prefix:/^.+/,luhn:!0},"american express":{length:"15",prefix:/^3[47]/,luhn:!0},"diners club":{length:"14,16",prefix:/^36|55|30[0-5]/,luhn:!0},discover:{length:"16",prefix:/^6(?:5|011)/,luhn:!0},jcb:{length:"15,16",prefix:/^3|1800|2131/,luhn:!0},maestro:{length:"16,18",prefix:/^50(?:20|38)|6(?:304|759)/,luhn:!0},mastercard:{length:"16",prefix:/^5[1-5]/,luhn:!0},visa:{length:"13,16",prefix:/^4/,luhn:!0}},_luhn:function(t){if(t=parseInt(t,10),"number"!=typeof t&&t%1!==0)return!1;t+="";var e,n=t.length,i=0;for(e=n-1;e>=0;e-=2)i+=parseInt(t.substr(e,1),10);for(e=n-2;e>=0;e-=2){var o=parseInt(2*t.substr(e,1),10);i+=o>=10?o-9:o}return i%10===0},isCreditCard:function(t,e){if(/\d+/.test(t)===!1)return!1;if("undefined"==typeof e)e="default";else if(e instanceof Array){var n,i=e.length;for(n=0;i>n;n++)if(this.isCreditCard(t,e[n]))return!0;return!1}if(e=e.toLowerCase(),"undefined"==typeof this._creditCardSpecs[e])return!1;var o=t.length+"";return-1===this._creditCardSpecs[e].length.split(",").indexOf(o)?!1:this._creditCardSpecs[e].prefix.test(t)?this._creditCardSpecs[e].luhn===!1?!0:this._luhn(t):!1},getEANCheckDigit:function(t){var e,n,i=0;for(t=String(t);t.length<12;)t="00000"+t;for(e=t.length,n=e-1;n>=0;n--)i+=(n%2*2+1)*Number(t.charAt(n));return 10-i%10},isEAN:function(e,n){switch(void 0===n&&(n="ean-13"),n){case"ean-13":if(13!==e.length)return!1;break;case"ean-8":if(8!==e.length)return!1;break;default:return!1}var i=e.substr(0,e.length-1),o=e.charAt(e.length-1),r=t.getEANCheckDigit(i);return String(r)===o}};return t}),Ink.createModule("Ink.UI.Animate",1,["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(t,e,n){"use strict";function i(){t.BaseUIComponent.apply(this,arguments)}var o=function(t){return"animationName"in t.style?"animation":"webkitAnimationName"in t.style?"webkitAnimation":null}(document.createElement("div")),r={animation:"animationend",webkitAnimation:"webkitAnimationEnd"}[o];return i._name="Animate_1",i._optionDefinition={trigger:["Element",null],duration:["String","slow"],animation:["String"],removeClass:["Boolean",!0],onEnd:["Function",function(){}]},i.prototype._init=function(){isNaN(parseInt(this._options.duration,10))||(this._options.duration=parseInt(this._options.duration,10)),this._options.trigger?e.observe(this._options.trigger,"click",Ink.bind(function(){this.animate()},this)):this.animate()},i.prototype.animate=function(){i.animate(this._element,this._options.animation,this._options)},Ink.extendObj(i,{_animationPrefix:o,animationSupported:!!o,animationEndEventName:r,animate:function(e,s,a){function l(t){t.target===e&&t.animationName===s&&(a.onEnd&&a.onEnd(t),a.removeClass&&n.removeClassName(e,s),"string"==typeof a.duration&&n.removeClassName(e,a.duration),e.removeEventListener(r,l,!1))}return e=t.elOrSelector(e),"number"==typeof a||"string"==typeof a?a={duration:a}:a||(a={}),"function"==typeof arguments[3]&&(a.onEnd=arguments[3]),"number"!=typeof a.duration&&"string"!=typeof a.duration&&(a.duration=400),i.animationSupported?("number"==typeof a.duration?e.style[o+"Duration"]=a.duration+"ms":"string"==typeof a.duration&&n.addClassName(e,a.duration),n.addClassName(e,["animated",s]),void e.addEventListener(r,l,!1)):void(a.onEnd&&setTimeout(function(){a.onEnd(null)},0))}}),t.createUIComponent(i),i}),Ink.createModule("Ink.UI.Carousel","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.UI.Pagination_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";function s(t,e,n){return Math.min(n,Math.max(e,t))}function a(){t.BaseUIComponent.apply(this,arguments)}function l(t,e){t.style.transitionProperty=t.style.oTransitionProperty=t.style.msTransitionProperty=t.style.mozTransitionProperty=t.style.webkitTransitionProperty=e}var h=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/30)};return a._name="Carousel_1",a._optionDefinition={autoAdvance:["Integer",0],axis:["String","x"],initialPage:["Integer",0],spaceAfterLastSlide:["Boolean",!0],keyboardSupport:["Boolean",!1],pagination:["String",null],onChange:["Function",null],onInit:["Function",function(){}],swipe:["Boolean",!0]},a.prototype={_init:function(){this._handlers={paginationChange:Ink.bindMethod(this,"_onPaginationChange"),windowResize:e.throttle(Ink.bindMethod(this,"refit"),200)},e.observe(window,"resize",this._handlers.windowResize),this._isY="y"===this._options.axis;var t=Ink.s("ul.stage",this._element);t.style.width="100%",this._ulEl=t,i.removeTextNodeChildren(t),null==this._options.pagination&&(this._currentPage=this._options.initialPage),this.refit(),this._isY&&(this._ulEl.style.whiteSpace="normal"),this._options.swipe&&(e.observe(this._element,"touchstart",Ink.bindMethod(this,"_onTouchStart")),e.observe(this._element,"touchmove",Ink.bindMethod(this,"_onTouchMove")),e.observe(this._element,"touchend",Ink.bindMethod(this,"_onTouchEnd"))),this._setUpPagination(),this._setUpAutoAdvance(),this._options.onInit.call(this,this)},refit:function(){var t=this._isY,e=function(e,n){return e?n?i.outerDimensions(e)[t?0:1]:i.outerDimensions(e)[t?1:0]:0};this._liEls=Ink.ss("li.slide",this._ulEl);var n=this._liEls.length,o=this._ulEl.getBoundingClientRect();this._ctnLength=t?o.bottom-o.top:o.right-o.left,this._elLength=e(this._liEls[0]),this._slidesPerPage=Math.floor(this._ctnLength/this._elLength)||1,isFinite(this._slidesPerPage)||(this._slidesPerPage=1);var r=Math.ceil(n/this._slidesPerPage),a=this._numPages!==r;this._numPages=r,this._deltaLength=this._slidesPerPage*this._elLength,this._IE7(),this._pagination&&a&&this._pagination.setSize(this._numPages),this.setPage(s(this.getPage(),0,this._numPages-1))},_setUpPagination:function(){this._options.pagination?(t.isDOMElement(this._options.pagination)||"string"==typeof this._options.pagination?this._pagination=new o(this._options.pagination,{size:this._numPages,onChange:this._handlers.paginationChange}):(this._pagination=this._options.pagination,this._pagination.setOnChange(this._handlers.paginationChange),this._pagination.setSize(this._numPages)),this._pagination.setCurrent(this._options.initialPage||0)):this._currentPage=this._options.initialPage||0},_setUpAutoAdvance:function(){this._options.autoAdvance&&this.autoAdvance(this._options.autoAdvance)},autoAdvance:function(t){function e(){n.nextPage(!0),n._autoAdvanceSto=setTimeout(e,t)}if(!this._autoAdvanceSto){var n=this;this._autoAdvanceSto=setTimeout(e,t)}},stopAutoAdvance:function(){this._autoAdvanceSto&&(clearTimeout(this._autoAdvanceSto),this._autoAdvanceSto=null)},_IE7:function(){if(r.IE&&""+r.version.split(".")[0]=="7")for(var t=Ink.ss("li.slide",this._ulEl),e=function(e,i){t[n].style[e]=i},n=0,i=t.length;i>n;n++)e("position","absolute"),e(this._isY?"top":"left",n*this._elLength+"px")},_onTouchStart:function(t){if(!(t.touches.length>1)){this._swipeData={x:e.pointerX(t),y:e.pointerY(t)};var n=this._ulEl.getBoundingClientRect();this._swipeData.firstUlPos=n[this._isY?"top":"left"],this._swipeData.inUlX=this._swipeData.x-n.left,this._swipeData.inUlY=this._swipeData.y-n.top,l(this._ulEl,"none"),this._touchMoveIsFirstTouchMove=!0}},_onTouchMove:function(t){if(!(t.touches.length>1)){var n=e.pointerX(t),i=e.pointerY(t),o=this._swipeData.y-i,r=this._swipeData.x-n;if(this._touchMoveIsFirstTouchMove){var s=Math.abs(o),a=Math.abs(r);this._touchMoveIsFirstTouchMove=void 0,this._scrolling=this._isY?a>s:s>a,this._scrolling||this._onAnimationFrame()}!this._scrolling&&this._swipeData&&(e.stopDefault(t),this._swipeData.pointerDelta=this._isY?o:r,this._swipeData.pointerPos=this._isY?i:n)}},_onAnimationFrame:function(){var t=this._swipeData;if(t&&!this._scrolling&&!this._touchMoveIsFirstTouchMove){var e,n=this._element.getBoundingClientRect();e=this._isY?t.pointerPos-t.inUlY-n.top:t.pointerPos-t.inUlX-n.left,this._ulEl.style[this._isY?"top":"left"]=e+"px",h(Ink.bindMethod(this,"_onAnimationFrame"))}},_onTouchEnd:function(t){if(this._swipeData&&this._swipeData.pointerPos&&!this._scrolling&&!this._touchMoveIsFirstTouchMove){var n=.1,i=this._swipeData.pointerDelta,o=this.getPage(),r=i/this._elLength/this._slidesPerPage;Math.abs(r)>n&&(o+=Math[0>i?"floor":"ceil"](r)),o=s(o,0,this._numPages-1),isNaN(o)||this.setPage(o),e.stopDefault(t)}l(this._ulEl,null),this._swipeData=null,this._touchMoveIsFirstTouchMove=void 0,this._scrolling=void 0},_onPaginationChange:function(t){this._setPage(t.getCurrent())},getPage:function(){return this._pagination?this._pagination.getCurrent():this._currentPage||0},getPagination:function(){return this._pagination||null},setPage:function(t,e){return e&&(t%=this._numPages,0>t&&(t=this._numPages-t)),t=s(t,0,this._numPages-1),t===this._currentPage?void(this._swipeData&&this._setPage(t)):void(this._pagination?this._pagination.setCurrent(t):this._setPage(t))},_setPage:function(t){var e=t*this._deltaLength,n=t===this._numPages-1;if(!this._options.spaceAfterLastSlide&&n&&t>0){var i=this._liEls.length-t*this._slidesPerPage;i<this._slidesPerPage&&(e=(t-1)*this._deltaLength+i*this._elLength)}this._ulEl.style[this._isY?"top":"left"]=["-",e/this._ctnLength*100,"%"].join(""),this._options.onChange&&this._options.onChange.call(this,t),this._currentPage=t},nextPage:function(t){this.setPage(this.getPage()+1,t)},previousPage:function(t){this.setPage(this.getPage()-1,t)},getSlidesPerPage:function(){return this._slidesPerPage},getTotalPages:function(){return this._numPages},getStageElm:function(){return this._ulEl},getSlidesList:function(){return this._liEls},getTotalSlides:function(){return this.getSlidesList().length}},t.createUIComponent(a),a}),Ink.createModule("Ink.UI.Close","1",["Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e){"use strict";function n(){t.observe(document.body,"click",function(n){var i=t.element(n);if(i=e.findUpwardsByClass(i,"ink-close")||e.findUpwardsByClass(i,"ink-dismiss")){var o=e.findUpwardsByClass(i,"ink-alert")||e.findUpwardsByClass(i,"ink-alert-block")||i;o&&(t.stop(n),e.remove(o))}})}return n._name="Close_1",n}),Ink.createModule("Ink.UI.Common","1",["Ink.Dom.Element_1","Ink.Net.Ajax_1","Ink.Dom.Css_1","Ink.Dom.Selector_1","Ink.Util.Url_1"],function(t,e,n,i,o){"use strict";function r(){this&&this!==window&&"function"==typeof this.constructor&&Ink.warn("You called a method on an incorrectly instantiated "+this.constructor._name+" component. Check the warnings above to see what went wrong.")}function s(t,e){for(var n in t)if(t.hasOwnProperty(n)){if("constructor"===n)continue;"function"==typeof e[n]&&(e[n]=r)}}function a(t,e){var n=this.constructor,i=n._name;if(!this||this===window)throw new Error('Use "new InkComponent()" instead of "InkComponent()"');if(this&&!(this instanceof a))throw new Error("You forgot to call Ink.UI.Common.createUIComponent() on this module!");if(!t&&!n._componentOptions.elementIsOptional)return void Ink.error(new Error(i+': You need to pass an element or a selector as the first argument to "new '+i+'()"'));this._element=f.elsOrSelector(t,i+': An element with the selector "'+t+'" was not found!')[0],this._element||n._componentOptions.elementIsOptional||(o=!1,Ink.error(new Error(t+' does not match an element on the page. You need to pass a valid selector to "new '+i+'".'))),this._options=f.options(i,n._optionDefinition,e,this._element);var o=a._validateInstance(this)===!0;if(o&&"function"==typeof this._init)try{this._init.apply(this,arguments)}catch(r){o=!1,Ink.error(r)}o?this._element&&f.registerInstance(this):a._stubInstance(this,n,i)}var l={},h=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},u="WeakMap"in window,c=u?new WeakMap:null,d=[],p={get:function(t){return u?c.get(t):d[t.getAttribute("__InkInstance")]},set:function(t,e){u?c.set(t,e):t.setAttribute("__InkInstance",d.push(e)-1)}},f={Layouts:{TINY:"tiny",SMALL:"small",MEDIUM:"medium",LARGE:"large",XLARGE:"xlarge"},isDOMElement:t.isDOMElement,isInteger:function(t){return"number"==typeof t&&t%1===0},elOrSelector:function(t,e){if(!f.isDOMElement(t)){var n=i.select(t);return 0===n.length?(Ink.warn(e+" must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself."),null):n[0]}return t},elsOrSelector:function(t,e,n){var o;if("string"==typeof t?o=i.select(t):f.isDOMElement(t)?o=[t]:t&&"object"==typeof t&&"number"==typeof t.length&&(o=t),o&&o.length)return o;if(n)throw new TypeError(e+" must either be a DOM Element, an Array of elements, or a selector expression!\nThe script element must also be after the DOM Element itself.");return[]},options:function(e,n,i,o){function r(t){return a=n[t][0],u=a.toLowerCase(),c=2===n[t].length?n[t][1]:l,a||g("Ink.UI.Common.options: Always specify a type!"),u in f._coerce_funcs||g("Ink.UI.Common.options: "+n[t][0]+" is not a valid type. Use one of "+h(f._coerce_funcs).join(", ")),(!n[t].length||n[t].length>2)&&g('the "defaults" argument must be an object mapping option names to [typestring, optional] arrays.'),s=t in p?f._coerce_from_string(u,p[t],t,e):l,s!==l?f._options_validate(s,u)?s:(v("("+t+" option) Invalid "+u+" "+_(s)),c):t in i?i[t]:c!==l?c:void g("Option "+t+" is required!")}"string"!=typeof e&&(o=i,i=n,n=e,e=""),i=i||{};var s,a,u,c,d={},p=o?t.data(o):{},m=function(t){return e&&(t=e+': "'+(""+t).replace(/"/,'\\"')+'"'),t},_=function(t){return'"'+(""+t).replace(/"/,'\\"')+'"'},g=function(t){throw new Error(m(t))},v=function(t){Ink.error(m(t)+". Ignoring option.")};for(var y in n)n.hasOwnProperty(y)&&(d[y]=r(y));return d},_coerce_from_string:function(t,e,n,i){return t in f._coerce_funcs?f._coerce_funcs[t](e,n,i):e},_options_validate:function(t,e){return e in f._options_validate_types?f._options_validate_types[e].call(f,t):!1},_coerce_funcs:function(){var t={element:function(t){return f.elOrSelector(t,"")},elements:function(t){return f.elsOrSelector(t,"",!1)},object:function(t){return t},number:function(t){return parseFloat(t)},"boolean":function(t){return!("false"===t||""===t||null===t)},string:function(t){return t},"function":function(t,e,n){return Ink.error(n+': You cannot specify the option "'+e+"\" through data-attributes because it's a function"),l}};return t["float"]=t.integer=t.number,t}(),_options_validate_types:function(){var t={string:function(t){return"string"==typeof t},number:function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)},integer:function(t){return t===Math.round(t)},element:function(t){return f.isDOMElement(t)},elements:function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&t.length},"boolean":function(t){return"boolean"==typeof t},object:function(){return!0}};return t["float"]=t.number,t}(),clone:function(t){try{return JSON.parse(JSON.stringify(t))}catch(e){throw new Error("Given object cannot have loops!")}},childIndex:t.parentIndexOf,ajaxJSON:function(t,n,i){new e(t,{evalJS:"force",method:"POST",parameters:n,onSuccess:function(t){try{if(t=t.responseJSON,"ok"!==t.status)throw"server error: "+t.message;i(null,t)}catch(e){i(e)}},onFailure:function(){i("communication failure")}})},currentLayout:function(){var t,e,o,r,s,a=i.select("#ink-layout-detector")[0];if(!a){a=document.createElement("div"),a.id="ink-layout-detector";for(o in f.Layouts)f.Layouts.hasOwnProperty(o)&&(r=f.Layouts[o],s=document.createElement("div"),s.className="show-"+r+" hide-all",s.setAttribute("data-ink-layout",r),a.appendChild(s));document.body.appendChild(a)}for(t=0,e=a.children.length;e>t;++t)if(s=a.children[t],"block"===n.getStyle(s,"display"))return s.getAttribute("data-ink-layout");return"large"},hashSet:function(t){if("object"!=typeof t)throw new TypeError("o should be an object!");var e=o.getAnchorString();e=Ink.extendObj(e,t),window.location.hash=o.genQueryString("",e).substring(1)},cleanChildren:function(e){if(!f.isDOMElement(e))throw new Error("Please provide a valid DOMElement");t.clear(e)},storeIdAndClasses:function(t,e){if(!f.isDOMElement(t))throw"Please provide a valid Element as first parameter";var n=t.id;n&&(e._id=n);var i=t.className;i&&(e._classes=i)},restoreIdAndClasses:function(t,e){if(!f.isDOMElement(t))throw"Please provide a valid Element as first parameter";e._id&&t.id!==e._id&&(t.id=e._id),e._classes&&-1===t.className.indexOf(e._classes)&&(t.className?t.className+=" "+e._classes:t.className=e._classes),e._instanceId&&!t.getAttribute("data-instance")&&t.setAttribute("data-instance",e._instanceId)},_warnDoubleInstantiation:function(t,e){function n(t){return(t.constructor&&t.constructor._name||t._name||"").replace(/_.*?$/,"")}var i=f.getInstance(t);if(""!==n(e)&&i){var o=n(e);if(o){for(var r=0,s=i.length;s>r;r++)if(o===n(i[r]))return Ink.warn("Creating more than one "+o+"for the same element.","(Was creating a "+o+" on:",t,")."),!1;return!0}}},registerInstance:function(t,e){if(t){if(e||(e=t._element),!f.isDOMElement(e))throw new TypeError("Ink.UI.Common.registerInstance: The element passed in is not a DOM element!");if(f._warnDoubleInstantiation(e,t)===!1)return!1;var n=p.get(e);return n||(n=[],p.set(e,n)),n.push(t),!0}},unregisterInstance:function(t){if(t&&t._element)for(var e=p.get(t._element),n=0,i=e.length;i>n;n++)e[n]===t&&e.splice(n,1)},getInstance:function(t,e){var n=t;if(t=f.elOrSelector(t),!f.isDOMElement(t))return Ink.warn("Ink.UI.Common: getInstance called on non-element ("+n+")"),[];var i=p.get(t);if(i||(i=[]),"function"!=typeof e)return i;for(var o=0,r=i.length;r>o;o++)if(i[o]instanceof e)return i[o];return null},getInstanceFromSelector:function(t){return f.getInstance(t)},getInstanceIds:function(){if(d.length>0)return d;var t=[];for(var e in c)c.hasOwnProperty(e)&&t.push(e);return t},getInstances:function(){if(d.length>0)return d;var t=[];for(var e in c)c.hasOwnProperty(e)&&t.push(c[e]);return t},destroyComponent:function(){f.unregisterInstance(this),this._element.parentNode.removeChild(this._element)}};return a._validateInstance=function(t){var e;if("function"!=typeof t._validate)return!0;try{e=t._validate()}catch(n){e=n}return e instanceof Error?(t._validationError=e,!1):!0},a._stubInstance=function(t,e,n){s(e.prototype,t),s(a.prototype,t),Ink.warn(n+" was not correctly created. "+(t._validationError||""))},a.getInstance=function(t){return t=f.elOrSelector(t),f.getInstance(t,this)},Ink.extendObj(a.prototype,{getOption:function(t){return!this.constructor||t in this.constructor._optionDefinition?this._options[t]:void Ink.error('"'+t+'" is not an option for '+this.constructor._name)},setOption:function(t,e){return!this.constructor||t in this.constructor._optionDefinition?void(this._options[t]=e):void Ink.error('"'+t+" is not an option for "+this.constructor._name)},getElement:function(){return this._element}}),f.BaseUIComponent=a,f.createUIComponent=function(t,e){function n(t,e){if(!t)throw new Error("Ink.UI_1.createUIComponent: "+e)}function i(e,i,o){var r=t[e];n("undefined"!=typeof r,t+" doesn't have a \""+e+'" property. '+o),n(i&&typeof r===i,"typeof "+t+"."+e+' is not "'+i+'". '+o)}t._componentOptions=e||{},n("function"==typeof t,"constructor argument is not a function!"),i("_name","string","This property is used for error messages. Set it to the full module path and version (Ink.My.Module_1)."),i("_optionDefinition","object","This property contains the option names, types and defaults. See Ink.UI.Common.options() for reference.");var o=t.prototype;t.prototype="function"==typeof Object.create?Object.create(a.prototype):function(){function t(){}return t.prototype=a.prototype,new t}(),Ink.extendObj(t.prototype,o),t.prototype.constructor=t,Ink.extendObj(t,a)},f}),Ink.createModule("Ink.UI.DatePicker","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.Date_1","Ink.Util.I18n_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(t,e,n){return t>n&&(t=n),e>t&&(t=e),t}function h(t){var e=t.split("-");return c(+e[0],+e[1]-1,+e[2])}function u(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function c(t,e,n){return{_year:t,_month:e,_day:n}}function d(t){return{_year:t.getFullYear(),_month:t.getMonth(),_day:t.getDate()}}function p(t){return 10*Math.floor(t/10)}function f(){t.BaseUIComponent.apply(this,arguments)}var m=new a({pt_PT:{"datepicker.clean":"Limpar","datepicker.close":"Fechar","datepicker.format":"dd-mm-yyyy","datepicker.of":" de ","datepicker.next_button":"\xbb","datepicker.prev_button":"\xab","datepicker.months":{1:"Janeiro",2:"Fevereiro",3:"Mar\xe7o",4:"Abril",5:"Maio",6:"Junho",7:"Julho",8:"Agosto",9:"Setembro",10:"Outubro",11:"Novembro",12:"Dezembro"},"datepicker.week_days":{0:"Domingo",1:"Segunda-feira",2:"Ter\xe7a-feira",3:"Quarta-feira",4:"Quinta-feira",5:"Sexta-feira",6:"S\xe1bado"}},en_US:{"datepicker.clean":"Clear","datepicker.close":"Close","datepicker.format":"dd-mm-yyyy","datepicker.of":" of ","datepicker.next_button":"\xbb","datepicker.prev_button":"\xab","datepicker.months":{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},"datepicker.week_days":{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}}},"en_US");return f._name="DatePicker_1",f._optionDefinition={autoOpen:["Boolean",!1],pickerField:["Element",null],containerElement:["Element",null],cssClass:["String","ink-calendar bottom"],dateRange:["String",null],displayInSelect:["Boolean",!1],dayField:["Element",null],monthField:["Element",null],yearField:["Element",null],format:["String","yyyy-mm-dd"],onFocus:["Boolean",!0],onMonthSelected:["Function",null],onSetDate:["Function",null],onYearSelected:["Function",null],position:["String","right"],showClean:["Boolean",!0],showClose:["Boolean",!0],shy:["Boolean",!0],startDate:["String",null],startWeekDay:["Number",1],validDayFn:["Function",null],validMonthFn:["Function",null],validYearFn:["Function",null],nextValidDateFn:["Function",null],prevValidDateFn:["Function",null],yearRange:["String",null],lang:["String",null],month:["Object",null],wDay:["Object",null],nextLinkText:["String",null],prevLinkText:["String",null],ofText:["String",null],cleanText:["String",null],closeText:["String",null]},f.prototype={_init:function(){this.i18n=m.clone(),this._options.lang&&this.i18n.lang(this._options.lang);var t=this._options.lang||m.lang(),e={};e[t]={},this._options.month&&(e[t]["datepicker.months"]=this._options.month),this._options.wDay&&(e[t]["datepicker.week_days"]=this._options.wDay),this._options.nextLinkText&&(e[t]["datepicker.next_button"]=this._options.nextLinkText),this._options.prevLinkText&&(e[t]["datepicker.prev_button"]=this._options.prevLinkText),this._options.ofText&&(e[t]["datepicker.of"]=this._options.ofText),this._options.cleanText&&(e[t]["datepicker.clean"]=this._options.cleanText),this._options.closeText&&(e[t]["datepicker.close"]=this._options.closeText),u(e[t]).length&&this.i18n.append(e),this._options.format=this._dateParsers[this._options.format]||this._options.format,this._hoverPicker=!1,this._picker=this._options.pickerField||null,this._setMinMax(this._options.dateRange||this._options.yearRange),this.setDate(this._options.startDate?this._options.startDate:this._element&&this._element.value?this._element.value:new Date),(this._options.startWeekDay<0||this._options.startWeekDay>6)&&(Ink.warn('Ink.UI.DatePicker_1: option "startWeekDay" must be between 0 (sunday) and 6 (saturday)'),this._options.startWeekDay=l(this._options.startWeekDay,0,6)),Ink.extendObj(this._options,this._lang||{}),this._render(),this._listenToContainerObjectEvents()},_validate:function(){if(this._options.displayInSelect&&!(this._options.dayField&&this._options.monthField&&this._options.yearField))throw new Error("Ink.UI.DatePicker: displayInSelect option enabled.Please specify dayField, monthField and yearField selectors.")},_render:function(){this._containerObject=document.createElement("div"),this._containerObject.className=this._options.cssClass+" ink-datepicker-calendar hide-all",this._renderSuperTopBar();var e=document.createElement("div");e.className="ink-calendar-top",this._monthDescContainer=document.createElement("div"),this._monthDescContainer.className="ink-calendar-month_desc",this._monthPrev=document.createElement("div"),this._monthPrev.className="ink-calendar-prev",this._monthPrev.appendChild(i.create("a",{href:"#prev",className:"change_month_prev",setHTML:this.i18n.text("datepicker.prev_button")})),this._monthNext=document.createElement("div"),this._monthNext.className="ink-calendar-next",this._monthNext.appendChild(i.create("a",{href:"#next",className:"change_month_next",setHTML:this.i18n.text("datepicker.next_button")})),e.appendChild(this._monthPrev),e.appendChild(this._monthDescContainer),e.appendChild(this._monthNext),this._monthContainer=document.createElement("div"),this._monthContainer.className="ink-calendar-month",this._containerObject.appendChild(e),this._containerObject.appendChild(this._monthContainer),this._monthSelector=this._renderMonthSelector(),this._containerObject.appendChild(this._monthSelector),this._yearSelector=document.createElement("ul"),this._yearSelector.className="ink-calendar-year-selector",this._containerObject.appendChild(this._yearSelector),(!this._options.onFocus||this._options.displayInSelect)&&(this._picker=this._options.pickerField?t.elOrSelector(this._options.pickerField,"pickerField"):i.create("a",{href:"#open_cal",setHTML:"open",insertBottom:this._element.parentNode,className:"ink-datepicker-picker-field"})),this._appendDatePickerToDom(),this._renderMonth(),this._monthChanger=i.create("a",{href:"#monthchanger",className:"ink-calendar-link-month",setTextContent:this.i18n.getKey("datepicker.months")[this._month+1]}),this._ofText=i.create("span",{className:"ink-calendar-of-text",setTextContent:this.i18n.text("datepicker.of")}),this._yearChanger=i.create("a",{href:"#yearchanger",className:"ink-calendar-link-year",setTextContent:this._year}),this._monthDescContainer.appendChild(this._monthChanger),this._monthDescContainer.appendChild(this._ofText),this._monthDescContainer.appendChild(this._yearChanger),this._options.inline?this.show():this._addOpenCloseEvents(),this._addDateChangeHandlersToInputs()
},_addDateChangeHandlersToInputs:function(){var t=this._element;this._options.displayInSelect&&(t=[this._options.dayField,this._options.monthField,this._options.yearField]),e.observeMulti(t,"change",Ink.bindEvent(function(){this._updateDate(),this._showDefaultView(),this.setDate(),this._inline||this._hoverPicker||this._hide(!0)},this))},show:function(){this._updateDate(),this._renderMonth(),n.removeClassName(this._containerObject,"hide-all")},_addOpenCloseEvents:function(){var t=this._picker||this._element;e.observe(t,"click",Ink.bindEvent(function(t){e.stop(t),this.show()},this)),this._options.autoOpen&&this.show(),this._options.displayInSelect||e.observe(t,"blur",Ink.bindEvent(function(){this._hoverPicker||this._hide(!0)},this)),this._options.shy&&e.observe(document,"click",Ink.bindEvent(function(t){for(var n=e.element(t),o=[this._options.dayField,this._options.monthField,this._options.yearField,this._picker,this._element],r=0,s=o.length;s>r;r++)if(o[r]&&i.descendantOf(o[r],n))return;this._hide(!0)},this))},_renderMonthSelector:function(){var t=document.createElement("ul");t.className="ink-calendar-month-selector";for(var e=document.createElement("ul"),n=1;12>=n;n++)e.appendChild(this._renderMonthButton(n)),n%4===0&&(t.appendChild(e),e=document.createElement("ul"));return t},_renderMonthButton:function(t){var e=document.createElement("li");return e.appendChild(i.create("a",{"data-cal-month":t,setTextContent:this.i18n.getKey("datepicker.months")[t].substring(0,3)})),e},_appendDatePickerToDom:function(){if(this._options.containerElement){var e=t.elOrSelector(this._options.containerElement);e.appendChild(this._containerObject)}var n=o.matchesSelector(this._element.parentNode,".ink-form .control-group .control, .ink-form .control-group .control > *");n?(this._wrapper=this._element.parentNode,this._wrapperIsControl=!0):(this._wrapper=i.create("div",{className:"ink-datepicker-wrapper"}),i.wrap(this._element,this._wrapper)),i.insertAfter(this._containerObject,this._element)},_renderSuperTopBar:function(){this._options.showClose&&this._options.showClean&&(this._superTopBar=document.createElement("div"),this._superTopBar.className="ink-calendar-top-options",this._options.showClean&&this._superTopBar.appendChild(i.create("a",{className:"clean",setHTML:this.i18n.text("datepicker.clean")})),this._options.showClose&&this._superTopBar.appendChild(i.create("a",{className:"close",setHTML:this.i18n.text("datepicker.close")})),this._containerObject.appendChild(this._superTopBar))},_listenToContainerObjectEvents:function(){e.observe(this._containerObject,"mouseover",Ink.bindEvent(function(t){e.stop(t),this._hoverPicker=!0},this)),e.observe(this._containerObject,"mouseout",Ink.bindEvent(function(t){e.stop(t),this._hoverPicker=!1},this)),e.observe(this._containerObject,"click",Ink.bindEvent(this._onClick,this))},_onClick:function(t){var i=e.element(t);return n.hasClassName(i,"ink-calendar-off")?(e.stopDefault(t),null):(e.stop(t),this._onRelativeChangerClick(i),this._onAbsoluteChangerClick(i),n.hasClassName(i,"ink-calendar-link-month")?this._showMonthSelector():n.hasClassName(i,"ink-calendar-link-year")?this._showYearSelector():n.hasClassName(i,"clean")?this._clean():n.hasClassName(i,"close")&&this._hide(!1),void this._updateDescription())},_onRelativeChangerClick:function(t){var e={change_year_next:1,change_year_prev:-1},n={change_month_next:1,change_month_prev:-1};t.className in n?this._updateCal(n[t.className]):t.className in e&&this._showYearSelector(e[t.className])},_onAbsoluteChangerClick:function(t){var e=i.data(t);Number(e.calDay)?(this.setDate(new Date(this._year,this._month,e.calDay)),this._options.shy?this._hide():this._updateCal()):Number(e.calMonth)?(this._month=Number(e.calMonth)-1,this._showDefaultView(),this._updateCal()):Number(e.calYear)&&this._changeYear(Number(e.calYear))},_changeYear:function(t){t=+t,isNaN(t)||(this._year=t,"function"==typeof this._options.onYearSelected&&this._options.onYearSelected(this,{year:this._year}),this._showMonthSelector())},_clean:function(){this._options.displayInSelect?(this._options.yearField.selectedIndex=0,this._options.monthField.selectedIndex=0,this._options.dayField.selectedIndex=0):this._element.value=""},_hide:function(t){t=void 0===t?!0:t,(t===!1||t&&this._options.shy)&&n.addClassName(this._containerObject,"hide-all")},_setMinMax:function(t){function e(){n._min=i,n._max=o}var n=this,i={_year:-Number.MAX_VALUE,_month:0,_day:1},o={_year:Number.MAX_VALUE,_month:11,_day:31};if(!t)return e();var s=t.split(":"),a=/^(\d{4})((\-)(\d{1,2})((\-)(\d{1,2}))?)?$/;r.each([{name:"_min",date:s[0],noLim:i},{name:"_max",date:s[1],noLim:o}],Ink.bind(function(t){var e=t.noLim;if("NOW"===t.date.toUpperCase()){var n=new Date;e=d(n)}else"EVER"===t.date.toUpperCase()?e=t.noLim:a.test(t.date)&&(e=h(t.date),e._month=l(e._month,0,11),e._day=l(e._day,1,this._daysInMonth(e._year,e._month+1)));this[t.name]=e},this));var u=-1!==this._dateCmp(this._max,this._min);u||e()},_fitDateToRange:function(t){return this._isValidDate(t)||(t=d(new Date)),-1===this._dateCmp(t,this._min)?Ink.extendObj({},this._min):1===this._dateCmp(t,this._max)?Ink.extendObj({},this._max):Ink.extendObj({},t)},_dateWithinRange:function(t){return arguments.length||(t=this),!this._dateAboveMax(t)&&!this._dateBelowMin(t)},_dateAboveMax:function(t){return 1===this._dateCmp(t,this._max)},_dateBelowMin:function(t){return-1===this._dateCmp(t,this._min)},_dateCmp:function(t,e){return this._dateCmpUntil(t,e,"_day")},_dateCmpUntil:function(t,e,n){var i=["_year","_month","_day"],o=-1;do{if(o++,t[i[o]]>e[i[o]])return 1;if(t[i[o]]<e[i[o]])return-1}while(i[o]!==n&&void 0!==t[i[o+1]]&&void 0!==e[i[o+1]]);return 0},_showDefaultView:function(){this._yearSelector.style.display="none",this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._getPrevMonth()||(this._monthPrev.childNodes[0].className="action_inactive"),this._getNextMonth()||(this._monthNext.childNodes[0].className="action_inactive"),this._monthContainer.style.display="block"},_updateDate:function(){var t;!this._options.displayInSelect&&this._element.value?t=this._parseDate(this._element.value):this._options.displayInSelect&&(t={_year:this._options.yearField[this._options.yearField.selectedIndex].value,_month:this._options.monthField[this._options.monthField.selectedIndex].value-1,_day:this._options.dayField[this._options.dayField.selectedIndex].value}),t&&(t=this._fitDateToRange(t),this._year=t._year,this._month=t._month,this._day=t._day),this._setDate(),this._updateDescription(),this._renderMonth()},_updateDescription:function(){i.setTextContent(this._monthChanger,this.i18n.getKey("datepicker.months")[this._month+1]),i.setTextContent(this._ofText,this.i18n.text("datepicker.of")),i.setTextContent(this._yearChanger,this._year)},_showYearSelector:function(t){this._incrementViewingYear(t);var e=this._year-this._year%10,n=e-1;i.setHTML(this._yearSelector,"");var o=i.create("ul");if(this._yearSelector.appendChild(o),n>this._min._year){var r=i.create("li");r.appendChild(i.create("a",{href:"#year_prev",className:"change_year_prev",setHTML:this.i18n.text("datepicker.prev_button")})),o.appendChild(r)}else o.appendChild(i.create("li",{setHTML:"&nbsp;"}));for(var s=1;11>s;s++)s%4===0&&(o=i.create("ul"),this._yearSelector.appendChild(o)),n=e+s-1,o.appendChild(this._getYearButton(n));if(n<this._max._year){var a=i.create("li");a.appendChild(i.create("a",{href:"#year_next",className:"change_year_next",setHTML:this.i18n.text("datepicker.next_button")})),o.appendChild(a)}else o.appendChild(i.create("li",{setHTML:"&nbsp;"}));this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._monthSelector.style.display="none",this._monthContainer.style.display="none",this._yearSelector.style.display="block"},_incrementViewingYear:function(t){if(t){var e=+this._year+10*t;e-=e%10,e>this._max._year||e+9<this._min._year||(this._year=+this._year+10*t)}},_getYearButton:function(t){var e="";this._acceptableYear({_year:t})?t===this._year&&(e="ink-calendar-on"):e="ink-calendar-off";var n=i.create("li");return n.appendChild(i.create("a",{href:"#","data-cal-year":t,className:e,setTextContent:t})),n},_showMonthSelector:function(){this._yearSelector.style.display="none",this._monthContainer.style.display="none",this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._addMonthClassNames(),this._monthSelector.style.display="block"},_parseDate:function(t){var e=s.set(this._options.format,t);return e?d(e):null},_isValidDate:function(t){var e=/^\d{4}$/,n=/^\d{1,2}$/;return e.test(t._year)&&n.test(t._month)&&n.test(t._day)&&+t._month+1>=1&&+t._month+1<=12&&+t._day>=1&&+t._day<=this._daysInMonth(t._year,t._month+1)},_isDate:function(t,e){try{if("undefined"==typeof t)return!1;var n=s.set(t,e);if(n&&this._isValidDate(d(n)))return!0}catch(i){}return!1},_acceptableDay:function(t){return this._acceptableDateComponent(t,"validDayFn")},_acceptableMonth:function(t){return this._acceptableDateComponent(t,"validMonthFn")},_acceptableYear:function(t){return this._acceptableDateComponent(t,"validYearFn")},_acceptableDateComponent:function(t,e){return this._options[e]?this._callUserCallbackBool(this._options[e],t):this._dateWithinRange(t)},_writeDateInFormat:function(){return s.get(this._options.format,this.getDate())},setDate:function(t){if(t&&"function"==typeof t.getDate&&(t=[t.getFullYear(),t.getMonth()+1,t.getDate()].join("-")),/\d{4}-\d{1,2}-\d{1,2}/.test(t)){var e=t.split("-");this._year=+e[0],this._month=+e[1]-1,this._day=+e[2]}this._setDate()},getDate:function(){if(!this._day)throw"Ink.UI.DatePicker: Still picking a date. Cannot getDate now!";return new Date(this._year,this._month,this._day)},_setDate:function(t){if(t){var e=i.data(t);this._day=+e.calDay||this._day,this._options.onSetDate&&this._options.onSetDate(this,{date:this.getDate()})}var n=this._fitDateToRange(this);this._year=n._year,this._month=n._month,this._day=n._day,this._options.displayInSelect?(this._options.dayField.value=this._day,this._options.monthField.value=this._month+1,this._options.yearField.value=this._year):this._element.value=this._writeDateInFormat()},_updateCal:function(t){"function"==typeof this._options.onMonthSelected&&this._options.onMonthSelected(this,{year:this._year,month:this._month}),t&&null===this._updateMonth(t)||this._renderMonth()},_daysInMonth:function(t,e){var n={2:t%400===0||t%4===0&&t%100!==0?29:28,4:30,6:30,9:30,11:30};return n[e]||31},_updateMonth:function(t){var e;return t>0?e=this._getNextMonth():0>t&&(e=this._getPrevMonth()),e?(this._year=e._year,this._month=e._month,void(this._day=e._day)):null},_getNextMonth:function(t){return this._tryLeap(t,"Month","next",function(t){return t._month+=1,t._month>11&&(t._month=0,t._year+=1),t})},_getPrevMonth:function(t){return this._tryLeap(t,"Month","prev",function(t){return t._month-=1,t._month<0&&(t._month=11,t._year-=1),t})},_getPrevYear:function(t){return this._tryLeap(t,"Year","prev",function(t){return t._year-=1,t})},_getNextYear:function(t){return this._tryLeap(t,"Year","next",function(t){return t._year+=1,t})},_tryLeap:function(t,e,n,i){t=t||{_year:this._year,_month:this._month,_day:this._day};var o="prev"===n?"_min":"_max",r=this[o];if(0===this._dateCmpUntil(t,r,e))return null;var s=this._options[n+"ValidDateFn"];if(s)return this._callUserCallbackDate(s,t);t=i(t);var a=this._daysInMonth(t._year,t._month+1);return t._day>a&&(t._day=a),t=this._fitDateToRange(t),this["_acceptable"+e](t)?t:null},_getNextDecade:function(t){t=t||{_year:this._year,_month:this._month,_day:this._day};var e=this._getCurrentDecade(t);return e+10>this._max._year?null:e+10},_getPrevDecade:function(t){t=t||{_year:this._year,_month:this._month,_day:this._day};var e=this._getCurrentDecade(t);return p(e-10)<p(this._min._year)?null:e-10},_getCurrentDecade:function(t){return t=t?t._year||t:this._year,p(this._year)},_callUserCallbackBase:function(t,e){return t.call(this,e._year,e._month+1,e._day)},_callUserCallbackBool:function(t,e){return!!this._callUserCallbackBase(t,e)},_callUserCallbackDate:function(t,e){var n=this._callUserCallbackBase(t,e);return n?d(n):null},_dateParsers:{"yyyy-mm-dd":"Y-m-d","yyyy/mm/dd":"Y/m/d","yy-mm-dd":"y-m-d","yy/mm/dd":"y/m/d","dd-mm-yyyy":"d-m-Y","dd/mm/yyyy":"d/m/Y","dd-mm-yy":"d-m-y","dd/mm/yy":"d/m/y","mm/dd/yyyy":"m/d/Y","mm-dd-yyyy":"m-d-Y"},_renderMonth:function(){var t=this._month,e=this._year;this._showDefaultView(),i.setHTML(this._monthContainer,""),this._monthContainer.appendChild(this._getMonthCalendarHeader(this._options.startWeekDay)),this._monthContainer.appendChild(this._getDayButtons(e,t))},_getFirstDayIndex:function(t,e){var n=new Date(t,e,1).getDay(),i=this._options.startWeekDay||0,o=n-i;return o%=7,0>o&&(o+=7),o},_getDayButtons:function(t,e){var n=this._daysInMonth(t,e+1),o=document.createDocumentFragment(),r=i.create("ul");o.appendChild(r);for(var s=this._getFirstDayIndex(t,e),a=0;s>a;a++)r.appendChild(i.create("li",{className:"ink-calendar-empty",setHTML:"&nbsp;"}));for(var l=1;n>=l;l++)(l-1+s)%7===0&&(r=i.create("ul"),o.appendChild(r)),r.appendChild(this._getDayButton(t,e,l));return o},_getDayButton:function(t,e,n){var o={},r=c(t,e,n);this._acceptableDay(r)?(o["data-cal-day"]=n,this._day&&0===this._dateCmp(r,this)&&(o.className="ink-calendar-on")):o.className="ink-calendar-off",o.setTextContent=n;var s=i.create("li");return s.appendChild(i.create("a",o)),s},_getMonthCalendarHeader:function(t){for(var e,n=i.create("ul",{className:"ink-calendar-header"}),o=0;7>o;o++)e=(t+o)%7,n.appendChild(i.create("li",{setTextContent:this.i18n.getKey("datepicker.week_days")[e].substring(0,1)}));return n},_addMonthClassNames:function(t){r.forEach((t||this._monthSelector).getElementsByTagName("a"),Ink.bindMethod(this,"_addMonthButtonClassNames"))},_addMonthButtonClassNames:function(t){var e=i.data(t);if(!e.calMonth)throw"not a calendar month button!";var o=+e.calMonth-1;if(o===this._month)n.addClassName(t,"ink-calendar-on"),n.removeClassName(t,"ink-calendar-off");else{n.removeClassName(t,"ink-calendar-on");var r=!this._acceptableMonth({_year:this._year,_month:o});n.addRemoveClassName(t,"ink-calendar-off",r)}},setI18n:function(t){t.clone&&(t=t.clone()),this.i18n=t},getI18n:function(){return this.i18n||m},setLanguage:function(t){this.i18n||this.setI18n(m),this.i18n.lang(t)},getLanguage:function(){return this.i18n?this.i18n.lang():m.lang()},showMonth:function(){this._renderMonth()},isMonthRendered:function(){var t=o.select(".ink-calendar-header",this._containerObject)[0];return"none"!==n.getStyle(t.parentNode,"display")&&"none"!==n.getStyle(t.parentNode.parentNode,"display")},destroy:function(){i.unwrap(this._element),i.remove(this._wrapper),i.remove(this._containerObject),t.unregisterInstance.call(this)}},t.createUIComponent(f),f}),Ink.createModule("Ink.UI.DragDrop",1,["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.UI.Common_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";function s(t){t.exceptFor.style.display="none";var e=document.elementFromPoint(t.x,t.y);return t.exceptFor.style.display="",e}function a(){o.BaseUIComponent.apply(this,arguments)}return a._name="DragDrop_1",a._optionDefinition={dragItem:["String",".drag-item"],dragHandle:["String",".drag-handle"],dropZone:["String",".drop-zone"],ignoreDrag:["String",".drag-ignore"],draggedCloneClass:["String","drag-cloned-item"],placeholderClass:["String","drag-placeholder-item"],onDrag:["Function",null],onDrop:["Function",null]},a.prototype={_init:function(){this._dragActive=!1,this._draggedElm=null,this._clonedElm=null,this._placeholderElm=null,this._originalDrop=null,this._mouseDelta=[0,0],this._addEvents()},_addEvents:function(){e.on(this._element,"mousedown touchstart",Ink.bindEvent(this._onMouseDown,this))},_onMouseDown:function(n){var i=e.element(n),o=t.findUpwardsBySelector(i,this._options.dragItem),r=t.findUpwardsBySelector(i,this._options.ignoreDrag);if(o&&!r){e.stopDefault(n);var s=Ink.s(this._options.dragHandle,o);s&&t.findUpwardsBySelector(i,this._options.dragHandle)?this._dragActive=!0:s||(this._dragActive=!0),this._dragActive&&this._startDrag(n,o)}},_startDrag:function(i,o){this._clonedElm=o.cloneNode(!0),this._placeholderElm=o.cloneNode(!1),n.addClassName(this._clonedElm,this._options.draggedCloneClass),this._clonedElm.removeAttribute("id"),n.addClassName(this._placeholderElm,this._options.placeholderClass),this._placeholderElm.removeAttribute("id");var r=o.getBoundingClientRect(),s=[r.right-r.left,r.bottom-r.top];this._clonedElm.style.width=s[0]+"px",this._clonedElm.style.height=s[1]+"px",this._placeholderElm.style.width=s[0]+"px",this._placeholderElm.style.height=s[1]+"px",this._placeholderElm.style.visibility="hidden",this._clonedElm.style.position="fixed",this._clonedElm.style.zIndex="1000",this._clonedElm.style.left=r.left+"px",this._clonedElm.style.top=r.top+"px";var a=e.pointer(i),l=t.offset(o);this._mouseDelta=[a.x-l[0],a.y-l[1]],this._clonedElm.style.opacity="0.6",o.parentNode.insertBefore(this._clonedElm,o),this._draggedElm=o,o.parentNode.insertBefore(this._placeholderElm,o),n.addClassName(o,"hide-all");var h="function"==typeof this._options.onDrag,u="function"==typeof this._options.onDrop;if(h||u){var c={dragItem:this._draggedElm,dropZone:this.getDropZone(this._draggedElm)};h&&this._options.onDrag.call(this,c),u&&(this._originalDrop=c.dropZone)}var d=e.throttle(this._onMouseMove,50,{preventDefault:!0,bind:this});e.on(document,"mousemove.inkdraggable touchmove.inkdraggable",d),e.on(document,"mouseup.inkdraggable touchend.inkdraggable",Ink.bindEvent(this._onMouseUp,this))},_onMouseMove:function(n){if(this._dragActive){var i=e.pointer(n),o=t.scrollWidth(),r=t.scrollHeight();this._clonedElm.style.left=i.x-this._mouseDelta[0]-o+"px",this._clonedElm.style.top=i.y-this._mouseDelta[1]-r+"px";var a=s({x:i.x-o,y:i.y-r,exceptFor:this._clonedElm}),l=this.getDropZone(a),h=l&&(t.isAncestorOf(this._element,l)||this._element===l);if(l&&h){var u=t.findUpwardsBySelector(a,this._options.dragItem);u&&this.isDragItem(u)?this._insertPlaceholder(u):this._dropZoneIsEmpty(l)&&l.appendChild(this._placeholderElm)}}},isDragItem:function(t){return r.matchesSelector(t,this._options.dragItem)&&t!==this._draggedElm&&t!==this._placeholderElm&&t!==this._clonedElm},_dropZoneIsEmpty:function(t){var e=Ink.ss(this._options.dragItem,t);return!i.some(e,Ink.bindMethod(this,"isDragItem"))},_onMouseUp:function(){this._dragActive&&(t.insertBefore(this._draggedElm,this._placeholderElm),t.remove(this._placeholderElm),t.remove(this._clonedElm),n.removeClassName(this._draggedElm,"hide-all"),e.off(document,".inkdraggable"),this._dragActive=!1,"function"==typeof this._options.onDrop&&this._options.onDrop.call(this,{origin:this._originalDrop,dragItem:this._draggedElm,dropZone:this.getDropZone(this._draggedElm)}),this._placeholderElm=null,this._clonedElm=null,this._draggedElm=null,this._originalDrop=null)},getDropZone:function(e){var n=t.findUpwardsBySelector(e,this._options.dropZone)||this._element;return t.isAncestorOf(this._element,n)||n===this._element?n:null},getDraggedElement:function(){return this.dragActive?this._draggedElm:null},_insertPlaceholder:function(e){var n=!0;i.inArray(this._placeholderElm,t.previousSiblings(e))||(n=!1),n?t.insertAfter(this._placeholderElm,e):t.insertBefore(this._placeholderElm,e)},destroy:function(){this._dragActive&&e.off(document,".inkdraggable"),o.destroyComponent.call(this)}},o.createUIComponent(a),a}),Ink.createModule("Ink.UI.Draggable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1","Ink.UI.Common_1"],function(t,e,n,i,o,r){"use strict";function s(t,e,n){return t=Math.min(t,n),t=Math.max(t,e)}function a(){r.BaseUIComponent.apply(this,arguments)}var l=0,h=1;return a._name="Draggable_1",a._optionDefinition={constraint:["String",!1],constraintElm:["Element",!1],top:["Number",!1],right:["Number",!1],bottom:["Number",!1],left:["Number",!1],handle:["Element",!1],revert:["Boolean",!1],cursor:["String","move"],zIndex:["Number",9999],fps:["Number",0],droppableProxy:["Element",!1],mouseAnchor:["String",void 0],dragClass:["String","drag"],skipChildren:["Boolean",!0],onStart:["Function",!1],onEnd:["Function",!1],onDrag:["Function",!1],onChange:["Function",!1]},a.prototype={_init:function(){var t=this._options;this.constraintElm=t.constraintElm&&r.elOrSelector(t.constraintElm),this.handle=!1,this.elmStartPosition=!1,this.active=!1,this.dragged=!1,this.prevCoords=!1,this.placeholder=!1,this.position=!1,this.zindex=!1,this.firstDrag=!0,t.fps&&(this.deltaMs=1e3/t.fps,this.lastRunAt=0),this.handlers={},this.handlers.start=Ink.bindEvent(this._onStart,this),this.handlers.dragFacade=Ink.bindEvent(this._onDragFacade,this),this.handlers.drag=Ink.bindEvent(this._onDrag,this),this.handlers.end=Ink.bindEvent(this._onEnd,this),this.handlers.selectStart=function(t){return e.stop(t),!1},this.handle=this._options.handle?r.elOrSelector(this._options.handle):this._element,this.handle.style.cursor=t.cursor,e.observe(this.handle,"touchstart",this.handlers.start),e.observe(this.handle,"mousedown",this.handlers.start),i.IE&&e.observe(this._element,"selectstart",this.handlers.selectStart)},destroy:function(){e.stopObserving(this.handle,"touchstart",this.handlers.start),e.stopObserving(this.handle,"mousedown",this.handlers.start),i.IE&&e.stopObserving(this._element,"selectstart",this.handlers.selectStart)},_getCoords:function(e){var n=[t.scrollWidth(),t.scrollHeight()];return{x:(e.touches?e.touches[0].clientX:e.clientX)+n[l],y:(e.touches?e.touches[0].clientY:e.clientY)+n[h]}},_cloneStyle:function(e,i){i.className=e.className,i.style.borderWidth="0",i.style.padding="0",i.style.position="absolute",i.style.width=t.elementWidth(e)+"px",i.style.height=t.elementHeight(e)+"px",i.style.left=t.elementLeft(e)+"px",i.style.top=t.elementTop(e)+"px",i.style.cssFloat=n.getStyle(e,"float"),i.style.display=n.getStyle(e,"display")},_onStart:function(i){if(!this.active&&e.isLeftClick(i)||"undefined"==typeof i.button){var o=e.element(i);if(this._options.skipChildren&&o!==this.handle)return;e.stop(i),n.addClassName(this._element,this._options.dragClass),this.elmStartPosition=[t.elementLeft(this._element),t.elementTop(this._element)];var r=[parseInt(n.getStyle(this._element,"left"),10),parseInt(n.getStyle(this._element,"top"),10)],s=t.elementDimensions(this._element);this.originalPosition=[r[l]?r[l]:null,r[h]?r[h]:null],this.delta=this._getCoords(i),this.active=!0,this.position=n.getStyle(this._element,"position"),this.zindex=n.getStyle(this._element,"zIndex");var a=document.createElement("div");if(a.style.position=this.position,a.style.width=s[l]+"px",a.style.height=s[h]+"px",a.style.marginTop=n.getStyle(this._element,"margin-top"),a.style.marginBottom=n.getStyle(this._element,"margin-bottom"),a.style.marginLeft=n.getStyle(this._element,"margin-left"),a.style.marginRight=n.getStyle(this._element,"margin-right"),a.style.borderWidth="0",a.style.padding="0",a.style.cssFloat=n.getStyle(this._element,"float"),a.style.display=n.getStyle(this._element,"display"),a.style.visibility="hidden",this.delta2=[this.delta.x-this.elmStartPosition[l],this.delta.y-this.elmStartPosition[h]],this._options.mouseAnchor){var u=this._options.mouseAnchor.split(" "),c=[s[l],s[h]];"left"===u[0]?c[l]=0:"center"===u[0]&&(c[l]=parseInt(c[l]/2,10)),"top"===u[1]?c[h]=0:"center"===u[1]&&(c[h]=parseInt(c[h]/2,10)),this.applyDelta=[this.delta2[l]-c[l],this.delta2[h]-c[h]]}var d=this._options.fps?"dragFacade":"drag";if(this.placeholder=a,this._options.onStart&&this._options.onStart(this._element,i),this._options.droppableProxy){this.proxy=document.createElement("div"),s=[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight];var p=this.proxy.style;p.width=s[l]+"px",p.height=s[h]+"px",p.position="fixed",p.left="0",p.top="0",p.zIndex=this._options.zIndex+1,p.backgroundColor="#FF0000",n.setOpacity(this.proxy,0);for(var f=document.body.firstChild;f&&1!==f.nodeType;)f=f.nextSibling;document.body.insertBefore(this.proxy,f),e.observe(this.proxy,"mousemove",this.handlers[d]),e.observe(this.proxy,"touchmove",this.handlers[d])}else e.observe(document,"mousemove",this.handlers[d]);return this._element.style.position="absolute",this._element.style.zIndex=this._options.zIndex,this._element.parentNode.insertBefore(this.placeholder,this._element),this._onDrag(i),e.observe(document,"mouseup",this.handlers.end),e.observe(document,"touchend",this.handlers.end),!1}},_onDragFacade:function(t){var e=+new Date;(!this.lastRunAt||e>this.lastRunAt+this.deltaMs)&&(this.lastRunAt=e,this._onDrag(t))},_onDrag:function(n){if(this.active){e.stop(n),this.dragged=!0;var i=this._getCoords(n),o=i.x,r=i.y,a=this._options,u=!1,c=!1;if(this.prevCoords&&o!==this.prevCoords.x||r!==this.prevCoords.y){a.onDrag&&a.onDrag(this._element,n),this.prevCoords=i,u=this.elmStartPosition[l]+o-this.delta.x,c=this.elmStartPosition[h]+r-this.delta.y;var d=t.elementDimensions(this._element);if(this.constraintElm){var p=t.offset(this.constraintElm),f=t.elementDimensions(this.constraintElm),m=p[h]+(a.top||0),_=p[h]+f[h]-(a.bottom||0),g=p[l]+(a.left||0),v=p[l]+f[l]-(a.right||0);c=s(c,m,_-d[h]),u=s(u,g,v-d[l])}else if(a.constraint){var y=a.right===!1?t.pageWidth()-d[l]:a.right,b=a.left===!1?0:a.left,k=a.top===!1?0:a.top,C=a.bottom===!1?t.pageHeight()-d[h]:a.bottom;("horizontal"===a.constraint||"both"===a.constraint)&&(u=s(u,b,y)),("vertical"===a.constraint||"both"===a.constraint)&&(c=s(c,k,C))}var I=Ink.getModule("Ink.UI.Droppable_1");if(this.firstDrag&&(I&&I.updateAll(),this.firstDrag=!1),u&&(this._element.style.left=u+"px"),c&&(this._element.style.top=c+"px"),I){var w=this._options.mouseAnchor?{x:o-this.applyDelta[l],y:r-this.applyDelta[h]}:i;I.action(w,"drag",n,this._element)}a.onChange&&a.onChange(this)}}},_onEnd:function(i){if(e.stopObserving(document,"mousemove",this.handlers.drag),e.stopObserving(document,"touchmove",this.handlers.drag),this._options.fps&&this._onDrag(i),n.removeClassName(this._element,this._options.dragClass),this.active&&this.dragged){this._options.droppableProxy&&document.body.removeChild(this.proxy),this.pt&&(t.remove(this.pt),this.pt=void 0),this.placeholder&&t.remove(this.placeholder),this._options.revert&&(this._element.style.position=this.position,this._element.style.zIndex=null!==this.zindex?this.zindex:"auto",this._element.style.left=this.originalPosition[l]?this.originalPosition[l]+"px":"",this._element.style.top=this.originalPosition[h]?this.originalPosition[h]+"px":""),this._options.onEnd&&this._options.onEnd(this._element,i);var o=Ink.getModule("Ink.UI.Droppable_1");o&&o.action(this._getCoords(i),"drop",i,this._element),this.position=!1,this.zindex=!1,this.firstDrag=!0}this.active=!1,this.dragged=!1}},r.createUIComponent(a),a}),Ink.createModule("Ink.UI.Drawer","1",["Ink.UI.Common_1","Ink.Dom.Loaded_1","Ink.Dom.Selector_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(t,e,n,i,o,r){"use strict";function s(t){if(document.addEventListener){d&&a();var e=!1;d=function(n){return"mousedown"===n.type||"mouseup"===n.type?void(e="mousedown"===n.type):void(e||t(n.target))},document.addEventListener("focus",d,!0),document.addEventListener("mousedown",d,!0),document.addEventListener("mouseup",d,!0)}}function a(){document.addEventListener&&d&&(document.removeEventListener("focus",d,!0),document.removeEventListener("mousedown",d,!0),document.removeEventListener("mouseup",d,!0),d=null)}function l(t){for(var e=Ink.ss("[tabindex]",t),n=null,i=null,o=0;o<e.length;o++){var r=+e[o].tabIndex;r||e.splice(o,1),(null===n||n>r)&&(n=r,i=e[o])}if(i)return i.focus(),!0;var s=Ink.s(c,t);return s?(s.focus(),!0):!1}function h(t){return'Ink.UI.Drawer_1: Could not find the "'+t+'" element on this page. Please make sure it exists.'}function u(e,n){t.isDOMElement(e)||(n=e),t.BaseUIComponent.apply(this,[document.body,n])}var c=['[tabindex]:not([tabindex="-1"])',"input","select","textarea","button","object","a[href]","area"].join(","),d=null,p=function(t){var e={WebkitTransitionProperty:"webkitTransitionEnd",transitionProperty:"transitionend"};for(var n in e)if(e.hasOwnProperty(n)&&void 0!==t.style[n])return{styleProp:n,eventName:e[n]};return!1}(document.createElement("div"));return u.transitionSupport=p,u._name="Drawer_1",u._optionDefinition={parentSelector:["String",".ink-drawer"],leftDrawer:["String",".left-drawer"],leftTrigger:["String",".left-drawer-trigger"],rightDrawer:["String",".right-drawer"],rightTrigger:["String",".right-drawer-trigger"],contentDrawer:["String",".content-drawer"],mode:["String","push"],sides:["String","both"]},u.prototype={_init:function(){function t(t){t.drawer&&t.triggers.length?e=!0:n=h(t.drawer?t.drawerOption:t.triggerOption)}if(this._contentDrawers=Ink.ss(this._options.contentDrawer),this._leftDrawer=Ink.s(this._options.leftDrawer),this._leftTriggers=Ink.ss(this._options.leftTrigger),this._rightDrawer=Ink.s(this._options.rightDrawer),this._rightTriggers=Ink.ss(this._options.rightTrigger),r.addClassName(document.body,"ink-drawer"),0===this._contentDrawers.length)throw new Error('Ink.UI.Drawer_1: Could not find any "'+this._options.contentDrawer+'" elements on this page. Please make sure you have at least one.');switch(this._options.sides){case"both":this._triggers=this._options.leftTrigger+", "+this._options.rightTrigger+", "+this._options.contentDrawer;break;case"left":this._triggers=this._options.leftTrigger+", "+this._options.contentDrawer;break;case"right":this._triggers=this._options.rightTrigger+", "+this._options.contentDrawer}var e=!1,n=null;("left"===this._options.sides||"both"===this._options.sides)&&t({name:"left",drawer:this._leftDrawer,drawerOption:this._options.leftDrawer,triggers:this._leftTriggers,triggerOption:this._options.leftTrigger}),("right"===this._options.sides||"both"===this._options.sides)&&t({name:"right",drawer:this._rightDrawer,drawerOption:this._options.rightDrawer,triggers:this._rightTriggers,triggerOption:this._options.rightTrigger}),e||Ink.warn(n),this._isOpen=!1,this._direction=void 0,this._handlers={click:Ink.bindEvent(this._onClick,this),afterTransition:Ink.bindEvent(this._afterTransition,this)},this._addEvents()},_onClick:function(t){var e=i.findUpwardsBySelector(t.currentTarget,this._options.leftTrigger)?"left":i.findUpwardsBySelector(t.currentTarget,this._options.rightTrigger)?"right":null;if(e)return void this._onTriggerClicked(t,e);if(this._isOpen){var n=i.findUpwardsBySelector(t.currentTarget,this._options.contentDrawer),o=i.isLink(t.target);(n||o)&&this.close(),n&&t.preventDefault()}},_onTriggerClicked:function(t,e){this._isOpen?this.close():this.open(e),t.preventDefault()},_afterTransition:function(){this._isOpen||r.removeClassName(this._getRecentDrawer(),"show")},_addEvents:function(){o.on(document.body,"click",this._triggers+', a[href*="#"]',this._handlers.click)},_getRecentDrawer:function(){return"left"===this._direction?this._leftDrawer:"right"===this._direction?this._rightDrawer:null},open:function(t){this._isOpen=!0,this._direction=t;var e=this._getRecentDrawer();r.addClassName(e,"show"),setTimeout(Ink.bind(function(){r.addClassName(document.body,[this._options.mode,t])},this),0),p&&this._transitionWillOccur(e)&&o.one(e,p.eventName,function(){r.removeClassName(e,"show");+e.offsetWidth;r.addClassName(e,"show")});var n=document.activeElement,h=l(e);s(Ink.bind(function(t){var o=i.isAncestorOf(e,t);o||(this.close(),a(),h&&n&&n.focus())},this))},_transitionWillOccur:function(t){return!(!p||!r.getStyle(t,p.styleProp))},close:function(){if(this._isOpen!==!1){var t=this._getRecentDrawer();if(t){a(),this._isOpen=!1;var e=null;p&&(e=this._transitionWillOccur(this._getRecentDrawer())),r.removeClassName(document.body,[this._options.mode,this._direction]),e?o.one(document.body,p.eventName,this._handlers.afterTransition):this._handlers.afterTransition()}}}},t.createUIComponent(u),u}),Ink.createModule("Ink.UI.Dropdown","1",["Ink.UI.Common_1","Ink.UI.Toggle_1","Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="Dropdown_1",o._optionDefinition={target:["Element"],hoverOpen:["Number",null],dismissOnInsideClick:["Boolean",!1],dismissOnOutsideClick:["Boolean",!0],dismissAfter:["Number",null],onInsideClick:["Function",null],onOutsideClick:["Function",null],onOpen:["Function",null],onDismiss:["Function",null]},o.prototype={_init:function(){this._toggle=new e(this._element,{target:this._options.target,closeOnInsideClick:null,closeOnClick:!1,onChangeState:Ink.bind(function(t){return this._openOrDismiss(t,!0,!0)
},this)}),n.observeMulti([this._options.target,this._element],"mouseout",Ink.bindMethod(this,"_onMouseOut")),n.observeMulti([this._options.target,this._element],"mouseover",Ink.bindMethod(this,"_onMouseOver")),n.observe(this._options.target,"click",Ink.bindMethod(this,"_onInsideClick")),n.observe(document,"click",Ink.bindMethod(this,"_onOutsideClick"))},_onMouseOver:function(){"number"==typeof this._options.hoverOpen&&this._toggle.getState()===!1&&(clearTimeout(this._openTimeout),this._openTimeout=setTimeout(Ink.bindMethod(this,"open",!0),1e3*this._options.hoverOpen)),"number"==typeof this._options.dismissAfter&&clearTimeout(this._dismissTimeout)},_onMouseOut:function(){"number"==typeof this._options.dismissAfter&&this._toggle.getState()===!0&&(clearTimeout(this._dismissTimeout),this._dismissTimeout=setTimeout(Ink.bindMethod(this,"dismiss",!0),1e3*this._options.dismissAfter)),"number"==typeof this._options.hoverOpen&&clearTimeout(this._openTimeout)},_onInsideClick:function(t){var e=this._handlerCall("onInsideClick",n.element(t));e!==!1&&this._options.dismissOnInsideClick&&this.dismiss(!0)},_onOutsideClick:function(t){var e=n.element(t),o=i.findUpwardsHaving(e,Ink.bind(function(t){return t===this._element},this)),r=i.findUpwardsHaving(e,Ink.bind(function(t){return t===this._options.target},this));if(!o&&!r){var s=this._handlerCall("onOutsideClick",e);if(s===!1)return;this._options.dismissOnOutsideClick&&this.dismiss(!0)}},dismiss:function(t){this._openOrDismiss(!1,t,arguments[1])},open:function(t){this._openOrDismiss(!0,t,arguments[1])},_openOrDismiss:function(t,e,n){if(!this._toggle||this._toggle.getState()!==t){if(e&&this._handlerCall(t?"onOpen":"onDismiss")===!1)return!1;n||this._toggle.setState(t),clearTimeout(this._dismissTimeout),clearTimeout(this._openTimeout)}},_handlerCall:function(t){return this._options[t]?this._options[t].call(this,[].slice.call(arguments,1)):void 0}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Droppable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.UI.Common_1","Ink.Util.Array_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";var s=function(t){return function(e){return n.addClassName(t,e)}},a=function(t){return function(e){return n.removeClassName(t,e)}},l={debug:!1,_droppables:[],_draggables:[],add:function(e,n){function o(t){t.style.position="inherit"}e=i.elOrSelector(e,"Droppable.add target element");var r=Ink.extendObj({hoverClass:n.hoverclass||!1,accept:!1,onHover:!1,onDrop:!1,onDropOut:!1},n||{},t.data(e));"string"==typeof r.hoverClass&&(r.hoverClass=r.hoverClass.split(/\s+/));var s,a=this,l={move:function(t,e){o(t),e.appendChild(t)},copy:function(t,e){o(t),e.appendChild(t.cloneNode(!0))},revert:function(t){a._findDraggable(t).originalParent.appendChild(t),o(t)}};if("string"==typeof r.onHover&&(s=r.onHover,r.onHover=l[s],void 0===r.onHover))throw new Error("Unknown hover event handler: "+s);if("string"==typeof r.onDrop&&(s=r.onDrop,r.onDrop=l[s],void 0===r.onDrop))throw new Error("Unknown drop event handler: "+s);if("string"==typeof r.onDropOut&&(s=r.onDropOut,r.onDropOut=l[s],void 0===r.onDropOut))throw new Error("Unknown dropOut event handler: "+s);var h={element:e,data:{},options:r};this._droppables.push(h),this._update(h)},_findData:function(t){for(var e=this._droppables,n=0,i=e.length;i>n;n++)if(e[n].element===t)return e[n]},_findDraggable:function(t){for(var e=this._draggables,n=0,i=e.length;i>n;n++)if(e[n].element===t)return e[n]},updateAll:function(){o.each(this._droppables,l._update)},update:function(t){this._update(this._findData(t))},_update:function(e){var n=e.data,i=e.element;n.left=t.offsetLeft(i),n.top=t.offsetTop(i),n.right=n.left+t.elementWidth(i),n.bottom=n.top+t.elementHeight(i)},remove:function(t){t=i.elOrSelector(t);for(var e=this._droppables.length,n=0;e>n;n++)if(this._droppables[n].element===t){this._droppables.splice(n,1);break}return e!==this._droppables.length},action:function(t,e,n,i){o.each(this._droppables,Ink.bind(function(l){var h=l.data,u=l.options,c=l.element;(!u.accept||r.matches(u.accept,[i]).length)&&("drag"!==e||this._findDraggable(i)||this._draggables.push({element:i,originalParent:i.parentNode}),t.x>=h.left&&t.x<=h.right&&t.y>=h.top&&t.y<=h.bottom?"drag"===e?(u.hoverClass&&o.each(u.hoverClass,s(c)),u.onHover&&u.onHover(i,c)):"drop"===e&&(u.hoverClass&&o.each(u.hoverClass,a(c)),u.onDrop&&u.onDrop(i,c,n)):"drag"===e&&u.hoverClass?o.each(u.hoverClass,a(c)):"drop"===e&&u.onDropOut&&u.onDropOut(i,c,n))},this))}};return l}),Ink.createModule("Ink.UI.FormValidator","1",["Ink.Dom.Element_1","Ink.Dom.Css_1","Ink.Util.Validator_1","Ink.Dom.Selector_1"],function(t,e,n,i){"use strict";function o(t){if(!t.name)return[];if(!t.form)return i.select('[name="'+t.name+'"]');var e=t.form[t.name];return e?("undefined"==typeof e.length&&(e=[e]),e):function(){for(var e=[],n=Ink.ss("*",t.form),i=0;i<n.length;i++)n[i].name===t.name&&e.push(n[i]);return e}()}var r={version:"1",_flagMap:{"ink-fv-required":{msg:"Required field"},"ink-fv-email":{msg:"Invalid e-mail address"},"ink-fv-url":{msg:"Invalid URL"},"ink-fv-number":{msg:"Invalid number"},"ink-fv-phone_pt":{msg:"Invalid phone number"},"ink-fv-phone_cv":{msg:"Invalid phone number"},"ink-fv-phone_mz":{msg:"Invalid phone number"},"ink-fv-phone_ao":{msg:"Invalid phone number"},"ink-fv-date":{msg:"Invalid date"},"ink-fv-confirm":{msg:"Confirmation does not match"},"ink-fv-custom":{msg:""}},elements:{},confirmElms:{},hasConfirm:{},_errorClassName:"tip error",_errorValidationClassName:"validaton",_errorTypeWarningClassName:"warning",_errorTypeErrorClassName:"error",validate:function(t,e){if(this._free(),e=Ink.extendObj({onSuccess:!1,onError:!1,customFlag:!1,confirmGroup:[]},e||{}),"string"==typeof t&&(t=document.getElementById(t)),null===t)return!1;this.element=t,("undefined"==typeof this.element.id||null===this.element.id||""===this.element.id)&&(this.element.id="ink-fv_randomid_"+Math.round(99999*Math.random())),this.custom=e.customFlag,this.confirmGroup=e.confirmGroup;var n=this._validateElements();return n.length>0?(e.onError?e.onError(n):this._showError(t,n),!1):(e.onError||this._clearError(t),this._clearCache(),e.onSuccess&&e.onSuccess(),!0)},reset:function(){this._clearError(),this._clearCache()},_free:function(){this.element=null,this.custom=!1,this.confirmGroup=!1},_clearCache:function(){this.element=null,this.elements=[],this.custom=!1,this.confirmGroup=!1},_getElements:function(){var t=this.elements[this.element.id]=[];this.confirmElms[this.element.id]=[];for(var n=i.select(":input",this.element),o=!1,r=0,s=n.length;s>r;r++){o=n[r];var a=(o.getAttribute("type")+"").toLowerCase();if("radio"===a||"checkbox"===a){if(0===t.length||o.getAttribute("type")!==t[t.length-1].getAttribute("type")&&o.getAttribute("name")!==t[t.length-1].getAttribute("name"))for(var l in this._flagMap)if(e.hasClassName(o,l)){t.push(o);break}}else{for(var h in this._flagMap)if(e.hasClassName(o,h)&&"ink-fv-confirm"!==h){t.push(o);break}e.hasClassName(o,"ink-fv-confirm")&&(this.confirmElms[this.element.id].push(o),this.hasConfirm[this.element.id]=!0)}}},_validateElements:function(){var t;this._getElements(),this.hasConfirm[this.element.id]===!0&&(t=this._makeConfirmGroups());for(var n,i=[],o=!1,r=!1,s=0,a=this.elements[this.element.id].length;a>s;s++)if(n=!1,o=this.elements[this.element.id][s],!o.disabled)for(var l in this._flagMap)if(e.hasClassName(o,l))if("ink-fv-custom"!==l&&"ink-fv-confirm"!==l)this._isValid(o,l)||(n?i[i.length-1].errors.push(l):(i.push({elm:o,errors:[l]}),n=!0));else if("ink-fv-confirm"!==l)r=this._isCustomValid(o),r.length>0&&i.push({elm:o,errors:[l],custom:r});else if("ink-fv-confirm"===l)continue;return i=this._validateConfirmGroups(t,i)},_validateConfirmGroups:function(t,e){var n=!1;for(var i in t)t.hasOwnProperty(i)&&(n=t[i],2===n.length&&n[0].value!==n[1].value&&e.push({elm:n[1],errors:["ink-fv-confirm"]}));return e},_makeConfirmGroups:function(){var t;if(this.confirmGroup&&this.confirmGroup.length>0){t={};for(var n=!1,i=!1,o=0,r=this.confirmElms[this.element.id].length;r>o;o++){n=this.confirmElms[this.element.id][o];for(var s=0,a=this.confirmGroup.length;a>s;s++)i=this.confirmGroup[s],e.hasClassName(n,i)&&("undefined"==typeof t[i]?t[i]=[n]:t[i].push(n))}return t}return 2===this.confirmElms[this.element.id].length&&(t={"ink-fv-confirm":[this.confirmElms[this.element.id][0],this.confirmElms[this.element.id][1]]}),t},_isCustomValid:function(t){for(var n=[],i=!1,o=0,r=this.custom.length;r>o;o++)i=this.custom[o],e.hasClassName(t,i.flag)&&(i.callback(t,i.msg)||n.push({flag:i.flag,msg:i.msg}));return n},_isValid:function(t,i){var r=t.nodeName.toLowerCase(),s=(t.getAttribute("type")||"").toLowerCase(),a=this._trim(t.value);if("ink-fv-required"!==i&&"checkbox"!==s&&"radio"!==s&&""===a)return!e.hasClassName(t,"ink-fv-required");switch(i){case"ink-fv-required":if("select"===r)return t.selectedIndex>0?!0:!1;if("checkbox"!==s&&"radio"!==s)return""!==a;if("checkbox"===s||"radio"===s){for(var l=o(t),h=0,u=l.length;u>h;h++)if(l[h].checked===!0)return!0;return!1}return!1;case"ink-fv-email":return n.mail(t.value);case"ink-fv-url":return n.url(t.value);case"ink-fv-number":return!isNaN(Number(t.value))&&isFinite(Number(t.value));case"ink-fv-phone_pt":return n.isPTPhone(t.value);case"ink-fv-phone_cv":return n.isCVPhone(t.value);case"ink-fv-phone_ao":return n.isAOPhone(t.value);case"ink-fv-phone_mz":return n.isMZPhone(t.value);case"ink-fv-date":var c=Ink.getModule("Ink.Dom.Element",1),d=c.data(t),p="yyyy-mm-dd";if(e.hasClassName(t,"ink-datepicker")&&"format"in d?p=d.format:"validFormat"in d&&(p=d.validFormat),!(p in n._dateParsers)){var f=[];for(var m in n._dateParsers)n._dateParsers.hasOwnProperty(m)&&f.push(m);throw new Error("The attribute data-valid-format must be one of the following values: "+f.join(", "))}return n.isDate(p,t.value);case"ink-fv-custom":}return!1},_showError:function(t,e){this._clearError(t);for(var n=!1,i=0,o=e.length;o>i;i++)n=e[i].elm,n&&this._showAnErrorOnElement(n,e[i])},_showAnErrorOnElement:function(n,i){var o=t.findUpwardsByClass(n,"control-group"),r=t.findUpwardsByClass(n,"control"),s=[this._errorClassName,this._errorTypeClassName].join(" "),a=t.create("p",{className:s});a.innerHTML="ink-fv-custom"!==i.errors[0]?this._flagMap[i.errors[0]].msg:i.custom[0].msg;var l=r||o;l?l.appendChild(a):t.insertAfter(a,n),r&&("ink-fv-required"===i.errors[0]?e.addClassName(o,"validation error"):e.addClassName(o,"validation warning"))},_clearError:function(n){for(var i,o,r=n.getElementsByTagName("p"),s=r.length-1;s>=0;s--)i=r[s],e.hasClassName(i,this._errorClassName)&&(o=t.findUpwardsBySelector(i,".control-group"),o&&e.removeClassName(o,["validation","error","warning"]),e.hasClassName(i,this._errorClassName,!0)&&t.remove(i));var a=n.getElementsByTagName("ul");for(s=a.length-1;s>=0;s--)i=a[s],e.hasClassName(i,"control-group")&&e.removeClassName(i,"validation error")},_trim:function(t){return"string"==typeof t?t.replace(/^\s+|\s+$|\n+$/g,""):void 0}};return r}),Ink.createModule("Ink.UI.FormValidator","2",["Ink.UI.Common_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.Util.I18n_1","Ink.Util.Validator_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(t){switch(t.nodeName.toLowerCase()){case"select":return Ink.s("option:selected",t).value;case"textarea":return t.value;case"input":if(!("type"in t))return t.value;if("radio"===t.type||"checkbox"===t.type){if(t.checked)return t.value}else if("file"!==t.type)return t.value;return;default:return t.innerHTML}}function h(){t.BaseUIComponent.apply(this,arguments)}function u(){t.BaseUIComponent.apply(this,arguments)}var c={required:function(t){return"undefined"!=typeof t&&!/^\s*$/.test(t)},min_length:function(t,e){return"string"==typeof t&&t.length>=parseInt(e,10)},max_length:function(t,e){return"string"==typeof t&&t.length<=parseInt(e,10)},exact_length:function(t,e){return"string"==typeof t&&t.length===parseInt(e,10)},email:function(t){return"string"==typeof t&&a.mail(t)},url:function(t,e){return e=e||!1,"string"==typeof t&&a.url(t,e)},ip:function(t,e){return"string"!=typeof t?!1:a.isIP(t,e)},phone:function(t,e){if("string"!=typeof t)return!1;var n=e?e.toUpperCase():"";return a["is"+n+"Phone"](t)},credit_card:function(t,e){return"string"!=typeof t?!1:a.isCreditCard(t,e||"default")},date:function(t,e){return"string"==typeof t&&a.isDate(e,t)},alpha:function(t,e){return a.ascii(t,{singleLineWhitespace:e})},text:function(t,e,n){return a.unicode(t,{singleLineWhitespace:e,unicodePunctuation:n})},latin:function(t,e,n){return"string"!=typeof t?!1:a.latin1(t,{latin1Punctuation:e,singleLineWhitespace:n})},alpha_numeric:function(t){return a.ascii(t,{numbers:!0})},alpha_dash:function(t){return a.ascii(t,{dash:!0,underscore:!0})},digit:function(t){return"string"==typeof t&&/^[0-9]{1}$/.test(t)},integer:function(t,e){return a.number(t,{negative:!e,decimalPlaces:0})},decimal:function(t,e,n,i){return a.number(t,{decimalSep:e||".",decimalPlaces:+n||null,maxDigits:+i})},numeric:function(t,e,n,i){return e=e||".",-1!==t.indexOf(e)?c.decimal(t,e,n,i):c.integer(t)},range:function(t,e,n,i){return t=+t,e=+e,n=+n,isNaN(t)||isNaN(e)||isNaN(n)?!1:e>t||t>n?!1:i?(t-e)%i===0:!0},color:function(t){return a.isColor(t)},matches:function(t,e){var n=this.getFormElements()[e];if(!n){for(var i=Ink.ss("input, select, textarea, .control-group",this._options.form._element),o=0;o<i.length;o++)if((i[o].name||i[o].id)===e)return l(i[o])===t;return!1}n=n[0];var r=n.getValue();return n._rules.required&&""===r?!1:t===r},ean:function(t){return a.isEAN(t.replace(/[^\d]/g,""),"ean-13")}},d=new s({en_US:{"formvalidator.required":"Filling {field} is mandatory","formvalidator.min_length":"The {field} must have a minimum size of {param1} characters","formvalidator.max_length":"The {field} must have a maximum size of {param1} characters","formvalidator.exact_length":"The {field} must have an exact size of {param1} characters","formvalidator.email":"The {field} must have a valid e-mail address","formvalidator.url":"The {field} must have a valid URL","formvalidator.ip":"The {field} does not contain a valid {param1} IP address","formvalidator.phone":"The {field} does not contain a valid {param1} phone number","formvalidator.credit_card":"The {field} does not contain a valid {param1} credit card","formvalidator.date":"The {field} should contain a date in the {param1} format","formvalidator.alpha":"The {field} should only contain letters","formvalidator.text":"The {field} should only contain alphabetic characters","formvalidator.latin":"The {field} should only contain alphabetic characters","formvalidator.alpha_numeric":"The {field} should only contain letters or numbers","formvalidator.alpha_dash":"The {field} should only contain letters or dashes","formvalidator.digit":"The {field} should only contain a digit","formvalidator.integer":"The {field} should only contain an integer","formvalidator.decimal":"The {field} should contain a valid decimal number","formvalidator.numeric":"The {field} should contain a number","formvalidator.range":"The {field} should contain a number between {param1} and {param2}","formvalidator.color":"The {field} should contain a valid color","formvalidator.matches":"The {field} should match the field {param1}"},pt_PT:{"formvalidator.required":"Preencher {field} \xe9 obrigat\xf3rio","formvalidator.min_length":"{field} deve ter no m\xednimo {param1} caracteres","formvalidator.max_length":"{field} tem um tamanho m\xe1ximo de {param1} caracteres","formvalidator.exact_length":"{field} devia ter exactamente {param1} caracteres","formvalidator.email":"{field} deve ser um e-mail v\xe1lido","formvalidator.url":"O {field} deve ser um URL v\xe1lido","formvalidator.ip":"{field} n\xe3o tem um endere\xe7o IP {param1} v\xe1lido","formvalidator.phone":"{field} deve ser preenchido com um n\xfamero de telefone {param1} v\xe1lido.","formvalidator.credit_card":"{field} n\xe3o tem um cart\xe3o de cr\xe9dito {param1} v\xe1lido","formvalidator.date":"{field} deve conter uma data no formato {param1}","formvalidator.alpha":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.text":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.latin":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.alpha_numeric":"{field} deve conter apenas letras e n\xfameros","formvalidator.alpha_dash":"{field} deve conter apenas letras e tra\xe7os","formvalidator.digit":"{field} destina-se a ser preenchido com apenas um d\xedgito","formvalidator.integer":"{field} deve conter um n\xfamero inteiro","formvalidator.decimal":"{field} deve conter um n\xfamero v\xe1lido","formvalidator.numeric":"{field} deve conter um n\xfamero v\xe1lido","formvalidator.range":"{field} deve conter um n\xfamero entre {param1} e {param2}","formvalidator.color":"{field} deve conter uma cor v\xe1lida","formvalidator.matches":"{field} deve corresponder ao campo {param1}"}},"en_US");return h._name="FormElement_1",h._optionDefinition={label:["String",null],rules:["String",null],error:["String",null],form:["Object"]},h.prototype={_init:function(){this._errors={},this._rules={},this._value=null,null===this._options.label&&(this._options.label=this._getLabel())},_getLabel:function(){var t=e.findUpwardsBySelector(this._element,".control-group label");return t?e.textContent(t):this._element.name||this._element.id||""},_parseRules:function(t){this._rules={},t=t.split("|");var e,n,i,o,r=t.length;if(r>0)for(e=0;r>e;e++)if(n=t[e])if(-1!==(o=n.indexOf("["))){i=n.substr(o+1),i=i.split("]"),i=i[0],i=i.split(",");for(var s=0,a=i.length;a>s;s++)i[s]="true"===i[s]?!0:"false"===i[s]?!1:i[s];i.splice(0,0,this.getValue()),n=n.substr(0,o),this._rules[n]=i}else this._rules[n]=[this.getValue()]},_addError:function(t){for(var e=this._rules[t]||[],n={field:this._options.label,value:this.getValue()},i=1;i<e.length;i++)n["param"+i]=e[i];var o,r="formvalidator."+t;this._options.error?o=this._options.error:(o=d.text(r,n),o===r&&(o="[Validation message not found for rule ]"+t)),this._errors[t]=o},getValue:function(){return l(this._element)},getErrors:function(){return this._errors},getElement:function(){return this._element},getFormElements:function(){return this._options.form._formElements},validate:function(){this._errors={},this._parseRules(this._options.rules);var t=""!==this.getValue()||"required"in this._rules||"matches"in this._rules;if(t)for(var e in this._rules)if(this._rules.hasOwnProperty(e)){if("function"!=typeof c[e])return Ink.warn('Rule "'+e+'" not found. Used in element:',this._element),this._addError(null),!1;if(c[e].apply(this,this._rules[e])===!1)return this._addError(e),!1}return!0}},t.createUIComponent(h),u._name="FormValidator_1",u._optionDefinition={eventTrigger:["String","submit"],neverSubmit:["Boolean",!1],searchFor:["String","input, select, textarea, .control-group"],beforeValidation:["Function",void 0],onError:["Function",void 0],onSuccess:["Function",void 0]},u.setRule=function(t,e,n){if(c[t]=n,d.getKey("formvalidator."+t)!==e){var i={};i["formvalidator."+t]=e;var o={};o[d.lang()]=i,d.append(o)}},u.getI18n=function(){return d},u.setI18n=function(t){d=t},u.appendI18n=function(){d.append.apply(d,[].slice.call(arguments))},u.setLanguage=function(t){d.lang(t)},u.getRules=function(){return c},u.prototype={_init:function(){this._rootElement=this._element,this._formElements={},this._errorMessages=[],this._markedErrorElements=[],"string"==typeof this._options.eventTrigger&&n.observe(this._rootElement,this._options.eventTrigger,Ink.bindEvent(this.validate,this))},getElements:function(){this._formElements||(this._formElements={});for(var t=i.select(this._options.searchFor,this._rootElement),n=0;n<t.length;n+=1){var o=t[n],r=e.data(o);if("rules"in r){var s,a={form:this};"name"in o&&o.name?s=o.name:"id"in o&&o.id?s=o.id:(s="element_"+Math.floor(100*Math.random()),o.id=s),s in this._formElements||(this._formElements[s]=[]);var l=this._getOrCreateFormElementInstance(s,o,a);l&&this._formElements[s].push(l)}}return this._formElements},_getOrCreateFormElementInstance:function(t,e,n){for(var i=0;i<this._formElements[t].length;i++)if(this._formElements[t][i].getElement()===e)return null;return new h(e,n)},setI18n:function(t){t.clone&&(t=t.clone()),this.i18n=t},getI18n:function(){return this.i18n||d},setLanguage:function(t){this.i18n||this.setI18n(d),this.i18n.lang(t)},getLanguage:function(){return this.i18n?this.i18n.lang():d.lang()},validate:function(t){this._options.neverSubmit&&t&&n.stopDefault(t),"function"==typeof this._options.beforeValidation&&this._options.beforeValidation(),r.each(this._markedErrorElements,function(t){o.removeClassName(t,["validation","error"])}),r.each(this._errorMessages,e.remove),this.getElements();var i=[];for(var s in this._formElements)if(this._formElements.hasOwnProperty(s))for(var a=0;a<this._formElements[s].length;a+=1)this._formElements[s][a].validate()||i.push(this._formElements[s][a]);return 0===i.length?("function"==typeof this._options.onSuccess&&this._options.onSuccess(),!0):(t&&n.stopDefault(t),"function"==typeof this._options.onError&&this._options.onError(i),this._errorMessages=[],this._markedErrorElements=[],r.each(i,Ink.bind(function(t){var n,i;o.hasClassName(t.getElement(),"control-group")?(n=t.getElement(),i=Ink.s(".control",t.getElement())):(n=e.findUpwardsByClass(t.getElement(),"control-group"),i=e.findUpwardsByClass(t.getElement(),"control")),n&&(o.addClassName(n,["validation","error"]),this._markedErrorElements.push(n));var r=document.createElement("p");o.addClassName(r,"tip"),i||n?(i||n).appendChild(r):e.insertAfter(r,t.getElement());var s=t.getErrors(),a=[];for(var l in s)s.hasOwnProperty(l)&&a.push(s[l]);r.innerHTML=a.join("<br/>"),this._errorMessages.push(r)},this)),!1)}},t.createUIComponent(u),u.FormElement=h,u.validationFunctions=c,u}),Ink.createModule("Ink.UI.ImageQuery","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Util.Array_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="ImageQuery_1",o._optionDefinition={src:["String"],retina:["String",void 0],queries:["Object"],onLoad:["Function",null]},o.prototype={_init:function(){var t;if(-1!==(t=this._element.src.lastIndexOf("?"))){var n=this._element.src.substr(t);this._filename=this._element.src.replace(n,"").split("/").pop()+n}else this._filename=this._element.src.split("/").pop();this._options.queries||(this._options.queries=[]),this._options.queries=i.sortMulti(this._options.queries,"width").reverse(),"function"==typeof this._options.onLoad&&e.observe(this._element,"load",Ink.bindEvent(this._onLoad,this)),this._onResize(),e.observe(window,"resize",e.throttle(Ink.bindMethod(this,"_onResize"),400))},_onResize:function(){if(this._options.queries.length){var t=this._findCurrentQuery();this._element.src=this.getQuerySrc(t)}},_findCurrentQuery:function(){for(var t=n.viewportWidth(),e=this._options.queries,i=e.length-1,o=0;i>o;o+=1)if(e[o].width<=t)return e[o];return e[i]},getQuerySrc:function(t){var e=t.src||this._options.src;if(window.devicePixelRatio>1&&void 0!==this._options.retina&&(e=t.retina||this._options.retina),t.file=this._filename,"function"==typeof e&&(e=e.apply(this,[this._element,t]),"string"!=typeof e))throw'[ImageQuery] :: "src" callback does not return a string';return e=e.replace(/{:(.*?)}/g,function(e,n){return t[n]}),delete t.file,e},_onLoad:function(){this._options.onLoad.call(this)}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.LazyLoad","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Css_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="LazyLoad_1",o._optionDefinition={item:["String",".lazyload-item"],placeholder:["String",null],loadedClass:["String",null],source:["String","data-src"],destination:["String","src"],delay:["Number",100],delta:["Number",0],image:["Boolean",!0],scrollElement:["Element",window],touchEvents:["Boolean",!0],onInsideViewport:["Function",!1],onAfterAttributeChange:["Function",!1],autoInit:["Boolean",!0]},o.prototype={_init:function(){this._aData=[],this._hasEvents=!1,this._options.autoInit&&this._activate()},_activate:function(){this._getData(),this._hasEvents||this._addEvents(),this._onScrollThrottled()},_getData:function(){for(var t=Ink.ss(this._options.item,this._element),e=null,i=0,o=t.length;o>i;i++)null==this._options.placeholder||n.hasAttribute(t[i],this._options.destination)||t[i].setAttribute(this._options.destination,this._options.placeholder),e=t[i].getAttribute(this._options.source),null===e&&this._options.image||this._aData.push({elm:t[i],original:e})},_addEvents:function(){this._onScrollThrottled=e.throttle(Ink.bindEvent(this._onScroll,this),this._options.delay),"ontouchmove"in document.documentElement&&this._options.touchEvents&&e.observe(document.documentElement,"touchmove",this._onScrollThrottled),e.observe(this._options.scrollElement,"scroll",this._onScrollThrottled),this._hasEvents=!0},_removeEvents:function(){"ontouchmove"in document.documentElement&&this._options.touchEvents&&e.stopObserving(document.documentElement,"touchmove",this._onScrollThrottled),e.stopObserving(this._options.scrollElement,"scroll",this._onScrollThrottled),this._hasEvents=!1},_onScroll:function(){for(var t,e=0;e<this._aData.length;e++)t=this._aData[e],n.inViewport(t.elm,{partial:!0,margin:this._options.delta})&&(this._elInViewport(t),this._aData.splice(e,1),e-=1);0===this._aData.length&&this._removeEvents()},_elInViewport:function(t){this._userCallback("onInsideViewport",{element:t.elm}),this._options.image&&(t.elm.setAttribute(this._options.destination,t.original),this._options.loadedClass&&i.addClassName(t.elm,this._options.loadedClass),t.elm.removeAttribute(this._options.source)),this._userCallback("onAfterAttributeChange",{element:t.elm})},_userCallback:function(t){"function"==typeof this._options[t]&&this._options[t].apply(this,[].slice.call(arguments,1))},reload:function(){this._activate()},destroy:function(){this._hasEvents&&this._removeEvents(),t.destroyComponent.call(this)}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Modal","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}var a=function(t){return t.style.opacity="invalid","invalid"!==t.style.opacity}(i.create("div",{style:"opacity: 1"})),l=function(t){return"10vh"===t.style.height&&"10vw"===t.style.width}(i.create("div",{style:"height:10vh;width:10vw"})),h=function(t){return""!==t.style.display}(i.create("div",{style:"display: flex"})),u=function(t){t=t.replace(/^\s+|\s+$/g,"");var e=-1!==t.indexOf("%"),n=-1!==t.indexOf("px");return e||n?!e&&n?t:!n&&e?t:t+"px":t+"%"},c=function(t,e){for(var n,i=t.split(/\s+/g),o=0;o<i.length;o++){var r=i[o].split("-"),s=r[0].replace(/^\s+|\s+$/g,"");if(s===e)return u(r[1]);"all"===s&&(n=u(r[1]))}return n},d=[];return s._name="Modal_1",s._optionDefinition={width:["String","90%"],height:["String","90%"],shadeClass:["String",void 0],modalClass:["String",void 0],trigger:["String",void 0],triggerEvent:["String","click"],autoDisplay:["Boolean",!0],markup:["String",void 0],onShow:["Function",void 0],onDismiss:["Function",void 0],closeOnClick:["Boolean",!1],closeOnEscape:["Boolean",!0],responsive:["Boolean",!0]},s.prototype={_init:function(){if(this._handlers={click:Ink.bindEvent(this._onShadeClick,this),keyDown:Ink.bindEvent(this._onKeyDown,this),resize:null},this._dimensionIsVariant={width:-1!==(""+this._options.width).indexOf(" "),height:-1!==(""+this._options.height).indexOf(" ")},this._isOpen=!1,this._markupMode=this._element?n.hasClassName(this._element,"ink-modal"):!1,this._markupMode){if(this._modalDiv=this._element,this._modalShadow=this._modalDiv.parentNode,this._contentContainer=o.select(".modal-body",this._modalDiv)[0],!this._contentContainer)throw new Error('Ink.UI.Modal: Missing div with class "modal-body"');this._options.markup=this._contentContainer.innerHTML}else this._modalShadow=i.create("div",{className:"ink-shade"}),this._modalDiv=i.create("div",{className:"ink-modal ink-space"}),this._element&&(this._options.markup=this._element.innerHTML),this._modalShadow.appendChild(this._modalDiv),document.body.appendChild(this._modalShadow);if(this._markupMode||this.setContentMarkup(this._options.markup),"string"==typeof this._options.shadeClass&&n.addClassName(this._modalShadow,this._options.shadeClass),"string"==typeof this._options.modalClass&&n.addClassName(this._modalDiv,this._options.modalClass),this._options.trigger){var r=t.elsOrSelector(this._options.trigger,"");e.observeMulti(r,this._options.triggerEvent,Ink.bindEvent(this.open,this))}else this._options.autoDisplay&&this.open()},_dimensionIsPercentage:function(){var t=this._getDimensions();return{width:-1!==(""+t.width).indexOf("%"),height:-1!==(""+t.height).indexOf("%")}},_getDimensions:function(e){e=e||{};var n,o={width:this._options.width,height:this._options.height};if((this._dimensionIsVariant.width||this._dimensionIsVariant.height)&&(n=t.currentLayout()),this._dimensionIsVariant.width&&(o.width=c(o.width,n)),this._dimensionIsVariant.height&&(o.height=c(o.height,n)),e.dynamic){var r=this._dimensionIsPercentage();if(!r.width){var s=.9*i.viewportWidth();parseFloat(o.width)>=s&&(o.width=s+"px")}if(!r.height){var a=.9*i.viewportHeight();parseFloat(o.height)>=a&&(o.height=a+"px")}}return o},_reposition:function(){var t,e=this._dimensionIsPercentage(),n=this._getDimensions();l&&e.height?this._modalDiv.style.marginTop=-parseFloat(n.height)/2+"vh":l?(t=parseFloat(n.height)>.9*i.viewportHeight(),(t!==this._heightWasLargerThan90Percent||!t||this._dimensionIsVariant.height)&&(this._heightWasLargerThan90Percent=t,t?(this._modalDiv.style.marginTop="0",this._modalDiv.style.top="5vh"):(this._modalDiv.style.marginTop=-parseFloat(n.height)/2+"px",this._modalDiv.style.top=""))):this._modalDiv.style.marginTop=-i.elementHeight(this._modalDiv)/2+"px",l&&e.width?this._modalDiv.style.marginLeft=-parseFloat(n.width)/2+"vw":l?(t=parseFloat(n.width)>.9*i.viewportWidth(),(t!==this._widthWasLargerThan90Percent||!t||this._dimensionIsVariant.width)&&(this._widthWasLargerThan90Percent=t,t?(this._modalDiv.style.marginLeft="0",this._modalDiv.style.left="5vw"):(this._modalDiv.style.marginLeft=-parseFloat(n.width)/2+"px",this._modalDiv.style.left=""))):this._modalDiv.style.marginLeft=-i.elementWidth(this._modalDiv)/2+"px"},_onResize:function(){var t=this._dimensionIsVariant.height||this._dimensionIsVariant.width,e=this._dimensionIsPercentage(),n=!e.height||!e.width;t&&this._resize(),(!l||t)&&this._avoidModalLargerThanScreen(),(!l||n||t)&&this._reposition(),h||this._resizeContainer()},_onShadeClick:function(t){var r=e.element(t);if(r===this._modalShadow&&this._options.closeOnClick)this.dismiss();else if(n.hasClassName(r,"ink-close")||n.hasClassName(r,"ink-dismiss")||i.findUpwardsBySelector(r,".ink-close,.ink-dismiss")||this._options.closeOnClick&&(!i.descendantOf(this._shadeElement,r)||r===this._shadeElement)){for(var s=o.select(".ink-alert",this._shadeElement),a=s.length,l=0;a>l;l++)if(i.descendantOf(s[l],r))return;this.dismiss(),this._isOpen||e.stop(t)}},_onKeyDown:function(t){27===t.keyCode&&this._isOpen&&this._options.closeOnEscape&&d[d.length-1]===this&&(this.dismiss(),this._isOpen||e.stop(t))},_resize:function(){var t=this._getDimensions();this._modalDiv.style.width=t.width,this._modalDiv.style.height=t.height},_resizeContainer:function(){var t=i.elementHeight(this._modalDiv);this._modalHeader=o.select(".modal-header",this._modalDiv)[0],this._modalHeader&&(t-=i.elementHeight(this._modalHeader)),this._modalFooter=o.select(".modal-footer",this._modalDiv)[0],this._modalFooter&&(t-=i.elementHeight(this._modalFooter)),this._contentContainer.style.height=t+"px",this._markupMode},_resizeContainerFlex:function(){this._contentContainer.style.flex="1",this._modalDiv.style.display="flex",this._modalDiv.style.flexDirection="column"},_avoidModalLargerThanScreen:function(){var t=this._dimensionIsPercentage();if(l)t.width||(this._modalDiv.style.maxWidth="90vw"),t.height||(this._modalDiv.style.maxHeight="90vh");else{var e={height:i.viewportHeight(),width:i.viewportWidth()},n=this._getDimensions();r.forEach(["height","width"],Ink.bind(function(i){if(!t[i]){var o=Math.round(.9*e[i]);if(parseFloat(n[i])>o)this._modalDiv.style[i]=o+"px";else{if(isNaN(parseFloat(n[i])))return;this._modalDiv.style[i]=parseFloat(n[i])+"px"}}},this))}},open:function(t){if(this.isOpen())return!1;if(t&&e.stop(t),n.addClassName(this._modalShadow,"ink-shade"),this._modalShadow.style.display=this._modalDiv.style.display="block",this._modalShadow.offsetHeight,n.addClassName(this._modalShadow,"visible"),n.addClassName(this._modalDiv,"visible"),this._contentElement=this._modalDiv,this._shadeElement=this._modalShadow,this._markupMode||this.setContentMarkup(this._options.markup),this._resize(),this._avoidModalLargerThanScreen(),this._reposition(),h?this._resizeContainerFlex():this._resizeContainer(),this._options.responsive){var i=this._dimensionIsPercentage(),o=!(l&&h&&i.height&&i.width&&!this._dimensionIsVariant.height&&!this._dimensionIsVariant.width);
o&&(this._handlers.resize=e.throttle(Ink.bind(this._onResize,this),500),e.observe(window,"resize",this._handlers.resize))}this._options.onShow&&this._options.onShow(this),e.observe(this._shadeElement,"click",this._handlers.click),this._options.closeOnEscape&&e.observe(document,"keydown",this._handlers.keyDown),this._isOpen=!0,d.push(this),n.addClassName(document.documentElement,"ink-modal-open")},isOpen:function(){return this._isOpen},dismiss:function(){if(this._isOpen){if(this._options.onDismiss){var t=this._options.onDismiss(this);if(t===!1)return}if(this._isOpen=!1,this._handlers.resize&&e.stopObserving(window,"resize",this._handlers.resize),this._markupMode?(n.removeClassName(this._modalDiv,"visible"),n.removeClassName(this._modalShadow,"visible"),this._waitForFade(this._modalShadow,Ink.bind(function(){this._modalShadow.style.display="none"},this))):(this._modalShadow.parentNode.removeChild(this._modalShadow),this.destroy()),d=r.remove(d,r.keyValue(this,d),1),0===d.length){var i=document.documentElement;n.removeClassName(i,"ink-modal-open")}}},_waitForFade:function(t,e){if(!a)return e();var i=5,o=function(){+n.getStyle(t,"opacity")>0&&i>0?(i--,setTimeout(o,250)):e()};setTimeout(o,500)},destroy:function(){t.unregisterInstance(this._instanceId)},getContentElement:function(){return this._contentContainer},setContentMarkup:function(t){if(this._markupMode)this._contentContainer.innerHTML=t;else{if(this._modalDiv.innerHTML=[t].join(""),this._contentContainer=o.select(".modal-body",this._modalDiv),!this._contentContainer.length){var e=o.select(".modal-header",this._modalDiv),s=o.select(".modal-footer",this._modalDiv);r.each(e,i.remove),r.each(s,i.remove);var a=document.createElement("div");n.addClassName(a,"modal-body"),a.innerHTML=this._modalDiv.innerHTML,this._modalDiv.innerHTML="";var l=e.concat([a]).concat(s);r.each(l,Ink.bindMethod(this._modalDiv,"appendChild")),this._contentContainer=o.select(".modal-body",this._modalDiv)}this._contentContainer=this._contentContainer[0]}this._contentElement=this._modalDiv,this._resizeContainer()}},t.createUIComponent(s,{elementIsOptional:!0}),s}),Ink.createModule("Ink.UI.Pagination","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}var s=function(t,e,n){var i=document.createElement("a");if(i.setAttribute("href","#"),"number"==typeof e&&i.setAttribute("data-index",e),n&&n.wrapText){var o=document.createElement("span");i.appendChild(o),o.innerHTML=t}else i.innerHTML=t;return i};return r._name="Pagination_1",r._optionDefinition={size:["Integer",null],totalItemCount:["Integer",null],itemsPerPage:["Integer",null],maxSize:["Integer",null],start:["Integer",1],sideButtons:["Boolean",1],firstLabel:["String","First"],lastLabel:["String","Last"],previousLabel:["String","Previous"],nextLabel:["String","Next"],previousPageLabel:["String",null],nextPageLabel:["String",null],onChange:["Function",void 0],hashParameter:["String","page"],parentTag:["String","ul"],childTag:["String","li"],wrapperClass:["String","ink-navigation"],paginationClass:["String","pagination"],activeClass:["String","active"],disabledClass:["String","disabled"],hideClass:["String","hide-all"],previousClass:["String","previous"],previousPageClass:["String","previousPage"],nextClass:["String","next"],nextPageClass:["String","nextPage"],firstClass:["String","first"],lastClass:["String","last"],numberFormatter:["Function",function(t){return t+1}],autoWrap:["Boolean",!1]},r.prototype={_init:function(){this._options.previousPageLabel||(this._options.previousPageLabel=this._options.previousLabel+" "+this._options.maxSize),this._options.nextPageLabel||(this._options.nextPageLabel=this._options.nextLabel+" "+this._options.maxSize),this._handlers={click:Ink.bindEvent(this._onClick,this)},t.isInteger(this._options.totalItemCount)&&t.isInteger(this._options.itemsPerPage)?this._size=this._calculateSize(this._options.totalItemCount,this._options.itemsPerPage):t.isInteger(this._options.size)?this._size=this._options.size:(Ink.error("Ink.UI.Pagination: Please supply a size option or totalItemCount and itemsPerPage options."),this._size=0),this._current=this._options.start-1,this._itemLiEls=[],this._generateMarkup(this._element),this._updateItems(),this._observe()},_observe:function(){e.observeDelegated(this._element,"click","."+this._options.paginationClass+" > "+this._options.childTag,this._handlers.click)},_calculateSize:function(t,e){return Math.ceil(t/e)},_updateItems:function(){var t,e,i,o=this._itemLiEls,r=this._size===o.length;if(r)for(t=0,e=this._size;e>t;++t)n.setClassName(o[t],this._options.activeClass,t===this._current);else{for(t=o.length-1;t>=0;--t)this._ulEl.removeChild(o[t]);for(o=[],t=0,e=this._size;e>t;++t)i=document.createElement(this._options.childTag),i.appendChild(s(this._options.numberFormatter(t,this._size),t)),n.setClassName(i,this._options.activeClass,t===this._current),this._nextEl?this._ulEl.insertBefore(i,this._nextEl):this._ulEl.appendChild(i),o.push(i);this._itemLiEls=o}if(this._options.maxSize){var a=Math.floor(this._current/this._options.maxSize),l=this._options.maxSize*a,h=l+this._options.maxSize-1;for(t=0,e=this._size;e>t;++t)i=o[t],n.setClassName(i,this._options.hideClass,l>t||t>h);this._pageStart=l,this._pageEnd=h,this._page=a,n.setClassName(this._prevPageEl,this._options.disabledClass,!this.hasPreviousPage()),n.setClassName(this._nextPageEl,this._options.disabledClass,!this.hasNextPage()),n.setClassName(this._firstEl,this._options.disabledClass,this.isFirst()),n.setClassName(this._lastEl,this._options.disabledClass,this.isLast())}this._prevEl&&!this._options.autoWrap&&n.setClassName(this._prevEl,this._options.disabledClass,!this.hasPrevious()),this._nextEl&&!this._options.autoWrap&&n.setClassName(this._nextEl,this._options.disabledClass,!this.hasNext())},_generateMarkup:function(t){n.addClassName(t,"ink-navigation");var e=Ink.s("."+this._options.paginationClass,t),i=!1;e?i=!0:(e=document.createElement(this._options.parentTag),n.addClassName(e,this._options.paginationClass));var o=n.hasClassName(e,"chevron"),r=n.hasClassName(e,"dotted"),a=Ink.bind(function(t,i){var o=document.createElement(this._options.childTag),r=s(this._options[t+"Label"],void 0,{wrapText:i&&i.wrapText});return n.addClassName(o,this._options[t+"Class"]),o.appendChild(r),e.appendChild(o),o},this);!r&&this._options.maxSize&&(this._firstEl=a("first"),this._prevPageEl=a("previousPage")),(r&&this._options.sideButtons===!0||!r&&this._options.sideButtons)&&(this._prevEl=a("previous",{wrapText:o}),this._nextEl=a("next",{wrapText:o})),!r&&this._options.maxSize&&(this._nextPageEl=a("nextPage"),this._lastEl=a("last")),i||t.appendChild(e),this._ulEl=e},_onClick:function(t){e.stop(t);var i=e.element(t);if(!n.hasClassName(i,this._options.activeClass)&&!n.hasClassName(i,this._options.disabledClass)){var r=n.hasClassName(i,this._options.previousClass),s=n.hasClassName(i,this._options.nextClass),a=n.hasClassName(i,this._options.previousPageClass),l=n.hasClassName(i,this._options.nextPageClass),h=n.hasClassName(i,this._options.firstClass),u=n.hasClassName(i,this._options.lastClass);if(h)this.setCurrent(0);else if(u)this.setCurrent(this._size-1);else if(a||l)this.setCurrent((a?-1:1)*this._options.maxSize,!0,!!this._options.autoWrap);else if(r||s)this.setCurrent(r?-1:1,!0,!!this._options.autoWrap);else{var c=o.select("[data-index]",i)[0],d=c&&parseInt(c.getAttribute("data-index"),10);this.setCurrent(d)}}},setOnChange:function(t){if(t&&"function"!=typeof t)throw new TypeError("onChange option must be a function!");this._options.onChange=t},setSize:function(e){if(!t.isInteger(e))throw new TypeError("1st argument must be an integer number!");this._size=e,this._updateItems(),this._current=0},setSizeInItems:function(t,e){var n=Math.ceil(t/e);this.setSize(n)},setCurrent:function(e,n,i){if(!t.isInteger(e))throw new TypeError("1st argument must be an integer number!");n&&(e+=this._current),i?(e%=this._size,0>e&&(e+=this._size)):(e>this._size-1&&(e=this._size-1),0>e&&(e=0)),this._current=e,this._updateItems(),this._options.onChange&&this._options.onChange(this,e)},next:function(t){this.setCurrent(1,!0,t)},previous:function(t){this.setCurrent(-1,!0,t)},getSize:function(){return this._size},getCurrent:function(){return this._current},isFirst:function(){return 0===this._current},isLast:function(){return this._current===this._size-1},hasPrevious:function(){return this._current>0},hasNext:function(){return this._current<this._size-1},hasPreviousPage:function(){return this._options.maxSize&&this._current>this._options.maxSize-1},hasNextPage:function(){return this._options.maxSize&&this._size-this._current>=this._options.maxSize+1},destroy:t.destroyComponent},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.ProgressBar","1",["Ink.UI.Common_1","Ink.Dom.Selector_1"],function(t,e){"use strict";function n(){t.BaseUIComponent.apply(this,arguments)}return n._name="ProgressBar_1",n._optionDefinition={startValue:["Number",0],onStart:["Function",function(){}],onEnd:["Function",function(){}]},n.prototype={_init:function(){if(this._value=this._options.startValue,this._elementBar=e.select(".bar",this._element),this._elementBar.length<1)throw new Error("[Ink.UI.ProgressBar] :: Bar element not found");this._elementBar=this._elementBar[0],this.setValue(this._options.startValue)},setValue:function(t){this._options.onStart.call(this,this._value),t=parseInt(t,10),isNaN(t)||0>t?t=0:t>100&&(t=100),this._value=t,this._elementBar.style.width=this._value+"%",this._options.onEnd.call(this,this._value)}},t.createUIComponent(n),n}),Ink.createModule("Ink.UI.SmoothScroller","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Dom.Css_1"],function(t,e,n,i,o){"use strict";var r=window.requestAnimationFrame||function(t){return setTimeout(t,10)},s=window.cancelAnimationFrame||function(t){clearTimeout(t)},a={speed:10,changeHash:!0,margin:0,scroll:function(t,e){var i=Math.round(n.scrollHeight()),o=Math.round(t-(e.margin||0));i+=o>i?Math.ceil((o-i)/e.speed):(o-i)/e.speed,s(a.interval),i!==o&&a.offsetTop!==i?a.interval=r(Ink.bindMethod(a,"scroll",t,e),document.body):a.onDone(e),window.scrollTo(0,i),a.offsetTop=i},init:function(t){e.on(document,"click",t||"a.scrollableLink, a.ink-smooth-scroll",a.onClick)},render:function(){},onClick:function(e){var i=e.currentTarget,r=(location+"").replace(/#.*?$/,""),s=(i.href+"").replace(/#.*?$/,"");if(s===r){var l=i.getAttribute("data-hash")||(i.getAttribute("href")||"").replace(/^.*?#/,"");if(l){e.preventDefault();var h="ul > li.active > "+u,u='a[name="'+l+'"],#'+l,c=Ink.s(u),d=Ink.s(h);if(d=d&&d.parentNode,c){o.hasClassName(i.parentNode,"active")||(d&&o.removeClassName(d,"active"),o.addClassName(i.parentNode,"active"));var p=t.options("SmoothScroller link options",{margin:["Number",a.margin],speed:["Number",a.speed],changeHash:["Boolean",a.changeHash]},{},i);a.hash=l,a.scroll(n.offsetTop(c),p)}}}},onDone:function(t){t.changeHash===!0&&(window.location.hash=a.hash),a.hash=a.offsetTop=null}};return a}),Ink.createModule("Ink.UI.SortableList","1",["Ink.UI.Common_1","Ink.Dom.Css_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}var s="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;return r._name="SortableList_1",r._optionDefinition={placeholderClass:["String","placeholder"],draggedClass:["String","hide-all"],draggingClass:["String","dragging"],dragSelector:["String","> li"],handleSelector:["String",":not(button, button *, a[href], a[href] *)"],moveSelector:["String",!1],swap:["Boolean",!1],cancelMouseOut:["Boolean",!1],onDrop:["Function",function(){}]},r.prototype={_init:function(){this._handlers={down:Ink.bind(this._onDown,this),move:Ink.bind(this._onMove,this),up:Ink.bind(this._onUp,this)},this._isMoving=!1,this._down=s?"touchstart mousedown":"mousedown",this._move=s?"touchmove mousemove":"mousemove",this._up=s?"touchend mouseup":"mouseup",this._observe()},_observe:function(){n.on(this._element,this._down,this._options.dragSelector,this._handlers.down),n.on(this._element,this._move,this._options.dragSelector,this._handlers.move),this._options.cancelMouseOut&&n.on(this._element,"mouseleave",Ink.bind(this.stopMoving,this)),n.on(document.documentElement,this._up,this._handlers.up)},_onDown:function(t){if(!this._isMoving&&!this._placeholder){var e=t.currentTarget;if(this._options.handleSelector){var n=i.findUpwardsBySelector(t.target,this._options.handleSelector);if(!n||!i.isAncestorOf(e,n))return}return this._isMoving=e,this._placeholder=e.cloneNode(!0),this._movePlaceholder(e),this._addMovingClasses(),!1}},_onMove:function(t){var e=t.currentTarget;if("touchmove"===t.type){var n=t.touches[0];e=document.elementFromPoint(n.clientX,n.clientY),e=i.findUpwardsBySelector(e,this._options.dragSelector)}this.validateMove(e),t.preventDefault()},_onUp:function(t){return this._isMoving&&this._placeholder&&t.currentTarget!==this._isMoving&&t.currentTarget!==this._placeholder?(i.insertBefore(this._isMoving,this._placeholder),this.stopMoving(),this._options.onDrop.call(this,{droppedElement:t.currentTarget}),!1):void 0},_addMovingClasses:function(){e.addClassName(this._placeholder,this._options.placeholderClass),e.addClassName(this._isMoving,this._options.draggedClass),e.addClassName(document.documentElement,this._options.draggingClass)},_removeMovingClasses:function(){this._isMoving&&e.removeClassName(this._isMoving,this._options.draggedClass),this._placeholder&&e.removeClassName(this._placeholder,this._options.placeholderClass),e.removeClassName(document.documentElement,this._options.draggingClass)},_movePlaceholder:function(t){var e,n,o,r,s=this._placeholder;s?this._options.swap?(i.insertAfter(s,t),i.insertBefore(t,this._isMoving),i.insertBefore(this._isMoving,s)):(e=i.offset(t),n=i.offset(this._placeholder),o=e[1]>n[1],r=e[0]>n[0],o&&r||!o&&!r?i.insertBefore(s,t):i.insertAfter(s,t),i.insertBefore(this._isMoving,s)):i.insertAfter(s,t)},destroy:t.destroyComponent,stopMoving:function(){this._removeMovingClasses(),i.remove(this._placeholder),this._placeholder=!1,this._isMoving=!1},validateMove:function(t){t&&this._isMoving&&this._placeholder&&t!==this._placeholder&&t!==this._isMoving&&(!this._options.moveSelector||o.matchesSelector(t,this._options.moveSelector)?this._movePlaceholder(t):this.stopMoving())}},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.Spy","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(t){for(var e=0,n=d.length;n>e;e++)if(d[e][0]===t)return e;return null}function s(t,e){var n=r(e);null===n?d.push([e,[t]]):d[n][1].push(t)}function a(){p||(p=!0,e.observe(document,"scroll",e.throttle(l,300)))}function l(){for(var t=0,e=d.length;e>t;t++)h(d[t][0],d[t][1])}function h(t,e){for(var r=u(e),s=o.select("li.active",t),a=0,l=s.length;l>a;a++)n.removeClassName(s[a],"active");if(null!==r){var h='a[href$="#'+(r.name||r.id)+'"]',c=o.select(h,t);for(a=0,l=c.length;l>a;a++)n.addClassName(i.findUpwardsByTag(c[a],"li"),"active")}}function u(t){for(var e,n,i=-1/0,o=0,r=t.length;r>o;o++)n=t[o].getBoundingClientRect(),n.top<=0&&n.top>i&&(i=n.top,e=o);return void 0===e?null:t[e]}function c(){t.BaseUIComponent.apply(this,arguments)}var d=[],p=!1;return c._name="Spy_1",c._optionDefinition={target:["Element",void 0]},c.prototype={_init:function(){s(this._element,this._options.target),a(),l()}},t.createUIComponent(c),c}),Ink.createModule("Ink.UI.Stacker",1,["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e,n){"use strict";function i(){t.BaseUIComponent.apply(this,arguments)}return i._name="Stacker_1",i._optionDefinition={column:["String",".stacker-column"],item:["String",".stacker-item"],customBreakPoints:["Object",null],largeMax:["Number",Number.MAX_VALUE],largeMin:["Number",961],mediumMax:["Number",960],mediumMin:["Number",651],smallMax:["Number",650],smallMin:["Number",0],largeCols:["Integer",3],mediumCols:["Integer",2],smallCols:["Integer",1],isOrdered:["Boolean",!0],onRunCallback:["Function",null],onResizeCallback:["Function",null],onAPIReloadCallback:["Function",null]},i.prototype={_init:function(){this._aList=[],this._curLayout="large",this._runFirstTime=!1,this._getPageItemsToList(),(this._canApplyLayoutChange()||!this._runFirstTime)&&(this._runFirstTime=!0,this._applyLayoutChange(),"function"==typeof this._options.onRunCallback&&this._options.onRunCallback(this._curLayout)),this._addEvents()},addItem:function(t){this._aList.push(t)},reloadItems:function(){this._applyLayoutChange(),"function"==typeof this._options.onAPIReloadCallback&&this._options.onAPIReloadCallback(this._curLayout)},_addEvents:function(){e.observe(window,"resize",Ink.bindEvent(this._onResize,this))},_onResize:function(){this._canApplyLayoutChange()&&(this._removeDomItems(),this._applyLayoutChange(),"function"==typeof this._options.onResizeCallback&&this._options.onResizeCallback(this._curLayout))},_setCurLayout:function(){var t=n.viewportWidth();if(this._options.customBreakpoints&&"object"==typeof this._options.customBreakPoints){for(var e in this._options.customBreakPoints)if(this._options.customBreakPoints.hasOwnProperty(e)&&t>=Number(this._options.customBreakPoints[e].min)&&t<=Number(this._options.customBreakPoints[e].max)&&this._curLayout!==e)return void(this._curLayout=e)}else t<=Number(this._options.largeMax)&&t>=Number(this._options.largeMin)&&"large"!==this._curLayout?this._curLayout="large":t>=Number(this._options.mediumMin)&&t<=Number(this._options.mediumMax)&&"medium"!==this._curLayout?this._curLayout="medium":t>=Number(this._options.smallMin)&&t<=Number(this._options.smallMax)&&"small"!==this._curLayout&&(this._curLayout="small")},_getColumnsToShow:function(){return Number(this._options.customBreakPoints&&"object"==typeof this._options.customBreakPoints?this._options.customBreakPoints[this._curLayout].cols:this._options[this._curLayout+"Cols"])},_canApplyLayoutChange:function(){var t=this._curLayout;return this._setCurLayout(),t!==this._curLayout?!0:!1},_getPageItemsToList:function(){this._aColumn=Ink.ss(this._options.column,this._element);var t=this._aColumn.length,e=0;if(t>0){for(var n=0;n<this._aColumn.length;n++)for(var i=Ink.ss(this._options.item,this._aColumn[n]),o=0;o<i.length;o++)this._options.isOrdered&&(e=n+o*t),this._aList[e]=i[o],this._options.isOrdered||e++,i[o].parentNode.removeChild(i[o]);if(this._aList.length>0&&this._options.isOrdered){for(var r=[],s=0;s<this._aList.length;s++)"undefined"!=typeof this._aList[s]&&r.push(this._aList[s]);this._aList=r}}},_removeDomItems:function(){var t=this._aColumn.length;if(t>0)for(var e=0;t>e;e++)for(var n=Ink.ss(this._options.item,this._aColumn[e]),i=n.length-1;i>=0;i--)n[i].parentNode.removeChild(n[i])},_applyLayoutChange:function(){var t=this._getColumnsToShow(),e=this._aList.length,n=0,i=0;if(t>0)for(;t>i;){if(this._aColumn[i].appendChild(this._aList[n]),n++,i++,n===e)return;i===t&&(i=0)}}},t.createUIComponent(i),i}),Ink.createModule("Ink.UI.Sticky","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Css_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="Sticky_1",o._optionDefinition={offsetBottom:["Integer",0],offsetTop:["Integer",0],topElement:["Element",null],wrapperClass:["String","ink-sticky-wrapper"],stickyClass:["String","ink-sticky-stuck"],inlineDimensions:["Boolean",!0],inlinePosition:["Boolean",!0],bottomElement:["Element",null],activateInLayouts:["String",null]},o.prototype={_init:function(){this._options.activateInLayouts&&(this._options.activateInLayouts=this._options.activateInLayouts.toString()),this._dims=null,this._options.offsetTop=parseInt(this._options.offsetTop,10)||0,this._options.offsetBottom=parseInt(this._options.offsetBottom,10)||0,this._options.topElement&&(this._options.topElement=t.elOrSelector(this._options.topElement,"Top Element")),this._options.bottomElement&&(this._options.bottomElement=t.elOrSelector(this._options.bottomElement,"Sticky bottom Element")),this._wrapper=n.create("div",{className:this._options.wrapperClass}),n.wrap(this._element,this._wrapper);var i=document.addEventListener?document:window;this._onScroll=Ink.bind(e.throttle(this._onScroll,33),this),e.observe(i,"scroll",this._onScroll),e.observe(window,"resize",Ink.bindEvent(e.throttle(this._onResize,100),this)),this._onScroll()},_isDisabledInLayout:function(){if(!this._options.activateInLayouts)return!1;var e=t.currentLayout();return e?-1===this._options.activateInLayouts.indexOf(e):!1},_onScroll:function(){var t=this._getDims(),e=n.scrollHeight(),i=this._isDisabledInLayout()||e<=t.top-this._options.offsetTop||this._options.topElement&&this._options.topElement.getBoundingClientRect().bottom+this._options.offsetTop>0;if(i)return void this._unstick();var o=this._options.offsetTop+t.height+n.scrollHeight(),r=document.body.scrollHeight;this._options.bottomElement&&(r=this._options.bottomElement.getBoundingClientRect().top+n.scrollHeight()),r-=this._options.offsetBottom,this._stickTo(r>o?"screen":"bottom")},_stickTo:function(t){var e=this._element.style,o=this._getDims();if(i.addClassName(this._element,this._options.stickyClass),this._wrapper.style.height=o.height+"px",this._inlineDimensions(o.height+"px",o.width+"px"),this._options.inlinePosition!==!1)if(e.left=o.left+"px","screen"===t)e.bottom=null,e.top=this._options.offsetTop+"px";else if("bottom"===t){var r=this._getBottomOffset(),s=n.scrollHeight()+n.viewportHeight(),a=n.pageHeight()-s;e.bottom=r-a+"px",e.top="auto"}},_unstick:function(){i.removeClassName(this._element,this._options.stickyClass),this._inlineDimensions(null,null),this._options.inlinePosition&&(this._element.style.left=null,this._element.style.top=null,this._element.style.bottom=null),this._wrapper.style.height=null,this._wrapper.style.width=null,this._dims=null},_onResize:function(){this._dims=null,this._onScroll()},_getDims:function(){if(null!==this._dims)return this._dims;var t=this._element.style,e=t.position,i=t.width;t.position="static",t.width=null;var o=n.outerDimensions(this._element),r=this._wrapper.getBoundingClientRect();return this._dims={height:o[1],width:o[0],left:r.left+n.scrollWidth(),top:r.top+n.scrollHeight()},t.position=e,t.width=i,this._dims},_inlineDimensions:function(t,e){this._options.inlineDimensions&&(this._element.style.height=t,this._element.style.width=e)},_getBottomOffset:function(){var t=this._options.offsetBottom;return this._options.bottomElement&&(t+=n.pageHeight()-n.offsetTop(this._options.bottomElement)),t}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Swipe","1",["Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.UI.Common_1"],function(t,e,n){"use strict";function i(){"function"==typeof arguments[1]&&(arguments[1]={onEnd:arguments[1]}),n.BaseUIComponent.apply(this,arguments)}return i._name="Swipe_1",i._optionDefinition={onEnd:["Function",void 0],onStart:["Function",void 0],onMove:["Function",void 0],minDist:["Number",void 0],maxDist:["Number",void 0],minDuration:["Number",void 0],maxDuration:["Number",void 0],axis:["String",void 0],storeGesture:["Boolean",!1],stopEvents:["Boolean",!0]},i.prototype={_supported:"ontouchstart"in document.documentElement,_init:function(){this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)};var e=document.body;t.observe(e,"touchstart",this._handlers.down),(this._options.storeGesture||this._options.onMove)&&t.observe(e,"touchmove",this._handlers.move),t.observe(e,"touchend",this._handlers.up),this._isOn=!1},_isMeOrParent:function(t,e){if(t){do{if(t===e)return!0;t=t.parentNode}while(t);return!1}},_pushGesture:function(t,e){this._options.storeGesture&&(this._gesture.push(t),this._time.push(e))},_onDown:function(e){1===e.changedTouches.length&&this._isMeOrParent(e.target,this._element)&&(this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0],this._isOn=!0,this._target=e.target,this._t0=+new Date,this._p0=[e.pageX,e.pageY],this._options.storeGesture&&(this._gesture=[],this._time=[]),this._pushGesture(this._p0,0),this._options.onStart&&this._options.onStart({event:e,element:this._element,instance:this,position:this._p0,dt:0}))},_onMove:function(e){if(this._isOn&&1===e.changedTouches.length){this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0];var n=+new Date,i=n-this._t0,o=[e.pageX,e.pageY];this._pushGesture(o,i),this._options.onMove&&this._options.onMove({event:e,element:this._element,instance:this,position:o,dt:i})}},_onUp:function(e){if(this._isOn&&1===e.changedTouches.length){this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0],this._isOn=!1;var n=+new Date,i=[e.pageX,e.pageY],o=n-this._t0,r=[i[0]-this._p0[0],i[1]-this._p0[1]],s=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=Math.abs(r[0])>Math.abs(r[1])?"x":"y",l=this._options;l.minDist&&s<l.minDist||l.maxDist&&s>l.maxDist||l.minDuration&&o<l.minDuration||l.maxDuration&&o>l.maxDuration||l.axis&&a!==l.axis||this._options.onEnd&&this._options.onEnd({event:e,element:this._element,instance:this,gesture:this._gesture,time:this._time,axis:a,overallMovement:r,overallTime:o})}}},n.createUIComponent(i),i}),Ink.createModule("Ink.UI.Table","1",["Ink.Util.Url_1","Ink.UI.Pagination_1","Ink.Net.Ajax_1","Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.String_1","Ink.Util.Json_1"],function(t,e,n,i,o,r,s,a,l,h,u){"use strict";function c(t){return!isNaN(t)&&g.test(t)?parseInt(t,10):isNaN(t)?t:parseFloat(t)}function d(t,e){return t===e?0:t>e?1:-1}function p(t,e){var n=c(s.textContent(t)),i=c(s.textContent(e));return typeof n==typeof i?d(n,i):"number"==typeof n?1:-1}function f(t){if("undefined"!=typeof Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function m(){i.BaseUIComponent.apply(this,arguments)}function _(t){return t}var g=/\d/g;return m._name="Table_1",m._optionDefinition={pageSize:["Integer",null],caretUpClass:["String","fa fa-caret-up"],caretDownClass:["String","fa fa-caret-down"],endpoint:["String",null],createEndpointUrl:["Function",null],createEndpointURL:["Function",null],getDataFromEndPoint:["Function",null],getDataFromEndpoint:["Function",null],processJSONRows:["Function",function(t){return"number"==typeof t.length?t:t.rows||null}],processJSONRow:["Function",_],processJSONField:["Function",_],processJSONHeaders:["Function",function(t){return t.fields}],processJSONTotalRows:["Function",function(t){return t.totalRows||t.length}],getSortKey:["Function",null],pagination:["Element",null],allowResetSorting:["Boolean",!1],visibleFields:["String",null],tdClassNames:["Object",{}],paginationOptions:["Object",null]},m.prototype={_validate:function(){if("table"!==this._element.nodeName.toLowerCase())throw new Error("[Ink.UI.Table] :: The element is not a table")},_init:function(){this._options.createEndpointUrl&&(this._options.createEndpointURL=this._options.createEndpointUrl),this._options.getDataFromEndPoint&&(this._options.getDataFromEndpoint=this._options.getDataFromEndpoint),this._markupMode=!(this._options.endpoint||this._options.createEndpointURL),this._options.visibleFields&&(this._options.visibleFields=this._options.visibleFields.toString().split(/[, ]+/g)),this._thead=this._element.tHead||this._element.createTHead(),this._headers=a.select("th",this._thead),this._handlers={thClick:null},this._originalFields=[],this._sortableFields={},this._originalData=this._data=[],this._pagination=null,this._totalRows=0,this._handlers.thClick=o.on(this._element,"click",'thead th[data-sortable="true"]',Ink.bindMethod(this,"_onThClick")),this._markupMode?(this._resetSortOrder(),this._addHeadersClasses(),this._data=a.select("tbody tr",this._element),this._originalData=this._data.slice(0),this._totalRows=this._data.length,this._setPagination()):this._getData()},_addHeadersClasses:function(){for(var t,e,n=0,i=this._headers.length;i>n;n++)t=s.textContent(this._headers[n]),e=this._options.tdClassNames[t],e&&r.addClassName(this._headers[n],e)},_onThClick:function(t){var e=o.element(t),n=void 0!==this._options.pageSize;o.stop(t);var i=l.keyValue(e,this._headers,!0),r=i!==!1&&void 0!==this._sortableFields[i];if(r)if(!this._markupMode&&n)this._invertSortOrder(i,!1);else{"desc"===this._sortableFields[i]&&this._options.allowResetSorting?(this._setSortOrderOfColumn(i,null),this._data=this._originalData.slice(0)):this._invertSortOrder(i,!0);var s=a.select("tbody",this._element)[0];l.each(this._data,function(t){s.appendChild(t)}),this._pagination&&(this._pagination.setCurrent(0),this._paginate(1))}},_invertSortOrder:function(t,e){for(var n="asc"===this._sortableFields[t],i=0,o=this._headers.length;o>i;i++)this._setSortOrderOfColumn(i,null);this._setSortOrderOfColumn(t,!n),e?(this._sort(t),n&&this._data.reverse()):this._getData()},_setSortOrderOfColumn:function(t,e){var n=this._headers[t],i=[""],o="none";e===!0?(i=['<i class="',this._options.caretUpClass,'"></i>'],o="asc"):e===!1&&(i=['<i class="',this._options.caretDownClass,'"></i>'],o="desc"),this._sortableFields[t]=o,n.innerHTML=s.textContent(n)+i.join("")},_paginate:function(t){if(this._pagination){var e=this._options.pageSize,n=(t-1)*e,i=n+e;l.each(this._data,function(t,e){e>=n&&i>e?r.removeClassName(t,"hide-all"):r.addClassName(t,"hide-all")})}},_registerFieldNames:function(t){this._originalFields=[],l.forEach(t,Ink.bind(function(t){this._fieldIsVisible(t)&&this._originalFields.push(t)},this))},_fieldIsVisible:function(t){return!this._options.visibleFields||-1!==this._options.visibleFields.indexOf(t)},_sort:function(t){function e(e){return i.call(o,{columnIndex:t,columnName:n,data:s.textContent(e),element:e})}var n=s.textContent(this._headers[t]),i=this._options.getSortKey;i&&(i="function"==typeof i[n]?i[n]:"function"==typeof i?i:null);var o=this;this._data.sort(function(n,o){var r=Ink.ss("td",n)[t],s=Ink.ss("td",o)[t];return i?d(e(r),e(s)):p(r,s,t)})},_createHeadersFromJson:function(t){if(this._registerFieldNames(f(t)),!this._thead.children.length)for(var e,n=this._thead.insertRow(0),i=0,o=t.length;o>i;i++)this._fieldIsVisible(t[i])&&(e=s.create("th"),e=this._createSingleHeaderFromJson(t[i],e),n.appendChild(e),this._headers.push(e))},_createSingleHeaderFromJson:function(t,e){return t.sortable&&e.setAttribute("data-sortable","true"),t.label&&s.setTextContent(e,t.label),e},_resetSortOrder:function(){for(var t=0,e=this._headers.length;e>t;t++){var n=s.data(this._headers[t]);n.sortable&&"true"===n.sortable.toString()&&(this._sortableFields[t]="none")}},_createRowsFromJSON:function(t){var e=a.select("tbody",this._element)[0];e?s.setHTML(e,""):(e=document.createElement("tbody"),this._element.appendChild(e)),this._data=[];var n;for(var i in t)t.hasOwnProperty(i)&&(n=this._options.processJSONRow(t[i]),this._createSingleRowFromJson(e,n,i));this._originalData=this._data.slice(0)},_createSingleRowFromJson:function(t,e,n){var i=document.createElement("tr");t.appendChild(i);for(var o in e)e.hasOwnProperty(o)&&this._createFieldFromJson(i,e[o],o,n);this._data.push(i)},_createFieldFromJson:function(t,e,n,i){if(this._fieldIsVisible(n)){var o,s=this._options.processJSONField[n]||this._options.processJSONField;o="function"==typeof s?s(e,n,i):e;var a=this._elOrFieldData(o),l=this._options.tdClassNames[n];l&&r.addClassName(a,l),t.appendChild(a)}},_elOrFieldData:function(t){if(i.isDOMElement(t))return t;var e="string"==typeof t,n="number"==typeof t,o=s.create("td");if(e&&/^\s*?</.test(t))s.setHTML(o,t);else{if(!e&&!n)throw new Error("Ink.UI.Table Unknown result from processJSONField: "+t);s.setTextContent(o,t)}return o},setEndpoint:function(t,e){this._markupMode||(this._options.endpoint=t,this._pagination&&this._pagination.setCurrent(e?parseInt(e,10):0))},_setPagination:function(){if(null!=this._options.pageSize){var t=this._options.pagination;if(t instanceof e)return void(this._pagination=t);t||(t=s.create("nav",{className:"ink-navigation",insertAfter:this._element}),s.create("ul",{className:"pagination",insertBottom:t}));var n=Ink.extendObj({totalItemCount:this._totalRows,itemsPerPage:this._options.pageSize,onChange:Ink.bind(function(t,e){this._paginate(e+1)},this)},this._options.paginationOptions||{});this._pagination=new e(t,n),this._paginate(1)}},_getData:function(){var t=this._getSortOrder()||null,e=null;this._options.pageSize&&(e={size:this._options.pageSize,page:this._pagination?this._pagination.getCurrent()+1:1}),this._getDataViaAjax(this._getUrl(t,e))},_getSortOrder:function(){var t;for(t in this._sortableFields)if(this._sortableFields.hasOwnProperty(t)&&"none"!==this._sortableFields[t])break;
return t?{field:this._originalFields[t]||s.textContent(this._headers[t]),order:this._sortableFields[t]}:null},_getUrl:function(e,n){var i=this._options.createEndpointURL||function(e,n,i){return e=t.parseUrl(e),e.query=e.query||{},n&&(e.query.sortOrder=n.order,e.query.sortField=n.field),i&&(e.query.rows_per_page=i.size,e.query.page=i.page),t.format(e)},o=i(this._options.endpoint,e,n);if("string"!=typeof o)throw new TypeError("Ink.UI.Table_1: createEndpointUrl did not return a string!");return o},_getDataViaAjax:function(t){var e=Ink.bind(function(t){this._onAjaxSuccess(t)},this);this._options.getDataFromEndpoint?this._options.getDataFromEndpoint(t,e):new n(t,{method:"GET",contentType:"application/json",sanitizeJSON:!0,onSuccess:Ink.bind(function(t){200===t.status&&e(u.parse(t.responseText))},this)})},_onAjaxSuccess:function(t){var e=null!=this._options.pageSize,n=this._options.processJSONRows(t);if(this._headers=a.select("th",this._thead),0===this._headers.length){var i=this._options.processJSONHeaders(t);if(!i||!i.length||!i[0])throw new Error("Ink.UI.Table: processJSONHeaders option must return an array of objects!");this._createHeadersFromJson(i),this._resetSortOrder(),this._addHeadersClasses()}else this._resetSortOrder();this._createRowsFromJSON(n),this._totalRows=this._rowLength=n.length,e&&(this._totalRows=this._options.processJSONTotalRows(t),this._setPagination())}},i.createUIComponent(m),m}),Ink.createModule("Ink.UI.Tabs","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}return r._name="Tabs_1",r._optionDefinition={preventUrlChange:["Boolean",!1],active:["String",void 0],onBeforeChange:["Function",void 0],onChange:["Function",void 0],menuSelector:["String",".tabs-nav"],contentSelector:["String",".tabs-content"],triggerEventsOnLoad:["Boolean",!0]},r.prototype={_init:function(){return this._menu=o.select(this._options.menuSelector,this._element)[0],this._menu?(this._initializeDom(),e.on(this._menu,"click","a",Ink.bindMethod(this,"_onTabClickedGeneric")),void this._setFirstActive()):void Ink.warn('Ink.UI.Tabs: An element selected by "'+this._options.menuSelector+'" needs to exist inside the element!')},_initializeDom:function(){for(var t=o.select(this._options.contentSelector,this._element),e=0;e<t.length;e++)n.addClassName(t[e],"hide-all")},_setFirstActive:function(){var t=window.location.hash,e=this._findLinkByHref(t)||this._options.active&&this._findLinkByHref(this._options.active)||o.select(".active a",this._menu)[0]||o.select("a",this._menu)[0];e&&(this._firstTime=!0,this._changeTab(e,this._options.triggerEventsOnLoad),this._firstTime=!1)},_changeTab:function(t,e){e&&"undefined"!=typeof this._options.onBeforeChange&&this._options.onBeforeChange(this);var i=t.getAttribute("href"),r=i.substr(i.indexOf("#"));window.location.hash===r||this._options.preventUrlChange||this._firstTime||(window.location.hash=r);for(var s=o.select("> li.active",this._menu),a=0,l=s.length;l>a;a++)s[a]!==t&&n.removeClassName(s[a],"active");return this._activeMenuTab&&(n.removeClassName(this._activeMenuTab,"active"),n.removeClassName(this._activeSection,"active"),n.addClassName(this._activeSection,"hide-all")),this._activeMenuLink=t,this._activeMenuTab=this._activeMenuLink.parentNode,this._activeSection=o.select(r,this._element)[0],this._activeSection?(n.addClassName(this._activeMenuTab,"active"),n.addClassName(this._activeSection,"active"),n.removeClassName(this._activeSection,"hide-all"),void(e&&"undefined"!=typeof this._options.onChange&&this._options.onChange(this))):void(this._activeMenuLink=this._activeMenuTab=this._activeSection=null)},_onTabClickedGeneric:function(t){t.preventDefault();var e=!n.hasClassName(t.currentTarget,"ink-disabled")&&t.currentTarget!==this._activeMenuLink;e&&this._onTabClicked(t.currentTarget)},_onTabClicked:function(t){var e=t.getAttribute("href")||"";e=e.substr(e.indexOf("#")),e&&null!==Ink.i(this._dehashify(e))&&t!==this._activeMenuLink&&this.changeTab(t)},_hashify:function(t){return t?0===t.indexOf("#")?t:"#"+t:""},_dehashify:function(t){return t?(""+t).replace(/^#/,""):""},_findLinkByHref:function(t){if(!t)return null;if(1===t.nodeType){if(i.isAncestorOf(t,this._element))return null;for(var e=o.select("a",this._menu),n=t.getAttribute("id"),r=0,s=e.length;s>r;r++){if(e[r]===t||i.isAncestorOf(t,e[r]))return e[r];if(n&&n===this._dehashify(e[r].hash))return e[r]}return null}return t=this._hashify(t),o.select('a[href$="'+t+'"]',this._menu)[0]||null},changeTab:function(t){t=this._findLinkByHref(t),t&&!n.hasClassName(t,"ink-disabled")&&this._changeTab(t,!0)},disable:function(t){n.addClassName(this._findLinkByHref(t),"ink-disabled")},enable:function(t){n.removeClassName(this._findLinkByHref(t),"ink-disabled")},activeTab:function(){return this._activeSection.getAttribute("id")},activeMenuLink:function(){return this._activeMenuLink},activeSection:function(){return this._activeSection},destroy:t.destroyComponent},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.TagField","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.UI.Droppable_1","Ink.Util.Array_1","Ink.Dom.Selector_1","Ink.UI.Common_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(){a.BaseUIComponent.apply(this,arguments)}var h=13,u=8,c=function(t){return!!t},d=1==="s,".split(/,/g).length,p=function(){var t,e=String.prototype.split,n=void 0===/()??/.exec("")[1];return t=function(t,i,o){if("[object RegExp]"!==Object.prototype.toString.call(i))return e.call(t,i,o);var r,s,a,l,h=[],u=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),c=0,i=new RegExp(i.source,u+"g");for(t+="",n||(r=new RegExp("^"+i.source+"$(?!\\s)",u)),o=void 0===o?-1>>>0:o>>>0;(s=i.exec(t))&&(a=s.index+s[0].length,!(a>c&&(h.push(t.slice(c,s.index)),!n&&s.length>1&&s[0].replace(r,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(s[t]=void 0)}),s.length>1&&s.index<t.length&&Array.prototype.push.apply(h,s.slice(1)),l=s[0].length,c=a,h.length>=o)));)i.lastIndex===s.index&&i.lastIndex++;return c===t.length?(l||!i.test(""))&&h.push(""):h.push(t.slice(c)),h.length>o?h.slice(0,o):h}}();return l._name="TagField_1",l._optionDefinition={tags:["String",[]],tagQuery:["Object",null],tagQueryAsync:["Object",null],allowRepeated:["Boolean",!1],maxTags:["Integer",-1],outSeparator:["String",","],separator:["String",/[,; ]+/g],autoSplit:["Boolean",!0]},l.prototype={_init:function(){var i=this._options;"string"==typeof i.separator&&(i.separator=new RegExp(i.separator,"g")),"string"==typeof i.tags&&(i.tags=this._readInput(i.tags)),n.addClassName(this._element,"hide-all"),this._viewElm=t.create("div",{className:"ink-tagfield",insertAfter:this._element}),this._input=t.create("input",{type:"text",className:"new-tag-input",insertBottom:this._viewElm});var o=[].concat(i.tags,this._tagsFromMarkup(this._element));this._tags=[],r.each(o,Ink.bindMethod(this,"_addTag")),e.observe(this._input,"keyup",Ink.bindEvent(this._onKeyUp,this)),e.observe(this._input,"change",Ink.bindEvent(this._onKeyUp,this)),e.observe(this._input,"keydown",Ink.bindEvent(this._onKeyDown,this)),e.observe(this._input,"blur",Ink.bindEvent(this._onBlur,this)),e.observe(this._viewElm,"click",Ink.bindEvent(this._refocus,this))},destroy:function(){t.remove(this._viewElm),n.removeClassName(this._element,"hide-all")},_tagsFromMarkup:function(e){var n=e.tagName.toLowerCase();if("input"===n)return this._readInput(e.value);if("select"===n)return r.map(e.getElementsByTagName("option"),function(e){return t.textContent(e)});throw new Error("Cannot read tags from a "+n+" tag. Unknown tag")},_tagsToMarkup:function(e,n){var i=n.tagName.toLowerCase();if("input"===i)this._options.separator&&(n.value=e.join(this._options.outSeparator));else{if("select"!==i)throw new Error("TagField: Cannot read tags from a "+i+" tag. Unknown tag");n.innerHTML="",r.each(e,function(e){var i=t.create("option",{selected:"selected"});t.setTextContent(i,e),n.appendChild(i)})}},_addTag:function(n){if(!(-1!==this._options.maxTags&&this._tags.length>=this._options.maxTags)){if(!this._options.allowRepeated&&r.inArray(n,this._tags,n)||!n)return!1;var i=t.create("span",{className:"ink-tag",setTextContent:n+" "}),o=t.create("span",{className:"remove fa fa-times",insertBottom:i});e.observe(o,"click",Ink.bindEvent(this._removeTag,this,null));var s=document.createTextNode(" ");this._tags.push(n),this._viewElm.insertBefore(i,this._input),this._viewElm.insertBefore(s,this._input),this._tagsToMarkup(this._tags,this._element)}},_readInput:function(t){return this._options.separator?r.filter(t.split(this._options.separator),c):[t]},_onKeyUp:function(){if(this._options.autoSplit){var t;if(t=d?p(this._input.value,this._options.separator):this._input.value.split(this._options.separator),!(t.length<=1)){var e=t[t.length-1];t=t.splice(0,t.length-1),t=r.filter(t,c),r.each(t,Ink.bind(this._addTag,this)),this._input.value=e}}},_onKeyDown:function(t){return t.which===h?this._onEnterKeyDown(t):t.which===u?this._onBackspaceKeyDown():void(this._removeConfirm&&this._unsetRemovingVisual(this._tags.length-1))},_onBackspaceKeyDown:function(){this._input.value||(this._removeConfirm?(this._unsetRemovingVisual(this._tags.length-1),this._removeTag(this._tags.length-1),this._removeConfirm=null):this._setRemovingVisual(this._tags.length-1))},_onEnterKeyDown:function(t){var n=this._input.value;n&&(this._addTag(n),this._input.value=""),e.stopDefault(t)},_onBlur:function(){this._addTag(this._input.value),this._input.value=""},_setRemovingVisual:function(t){var i=this._viewElm.children[t];i&&(n.addClassName(i,"tag-deleting"),this._removeRemovingVisualTimeout=setTimeout(Ink.bindMethod(this,"_unsetRemovingVisual",t),4e3),e.observe(this._input,"blur",Ink.bindMethod(this,"_unsetRemovingVisual",t)),this._removeConfirm=!0)},_unsetRemovingVisual:function(t){var e=this._viewElm.children[t];e&&(n.removeClassName(e,"tag-deleting"),clearTimeout(this._removeRemovingVisualTimeout)),this._removeConfirm=null},_removeTag:function(n){var i;if("object"==typeof n){var o=e.element(n).parentNode;i=t.parentIndexOf(this._viewElm,o)}else"number"==typeof n&&(i=n);this._tags=r.remove(this._tags,i,1),t.remove(this._viewElm.children[i]),this._tagsToMarkup(this._tags,this._element)},_refocus:function(t){return this._input.focus(),e.stop(t),!1}},a.createUIComponent(l),l}),Ink.createModule("Ink.UI.Toggle","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}return s._name="Toggle_1",s._optionDefinition={target:["Elements"],triggerEvent:["String","click"],closeOnClick:["Boolean",null],canToggleAnAncestor:["Boolean",!1],isAccordion:["Boolean",!1],initialState:["Boolean",null],classNameOn:["String","show-all"],classNameOff:["String","hide-all"],closeOnInsideClick:["String","a[href]"],onChangeState:["Function",null]},s.prototype={_init:function(){var e,o;if(this._targets=t.elsOrSelector(this._options.target),null===this._options.closeOnClick&&(this._options.closeOnClick=this._options.isAccordion||this._options.canToggleAnAncestor?!1:!0),null===this._options.initialState&&(this._options.initialState=n.hasClassName(this._targets[0],this._options.classNameOn)),"show-all"!==this._options.classNameOn||"hide-all"!==this._options.classNameOff)for(e=0,o=this._targets.length;o>e;e++)n.removeClassName(this._targets[e],"show-all"),n.removeClassName(this._targets[e],"hide-all");if(this._options.isAccordion&&(this._accordionContainer=i.findUpwardsByClass(this._element,"accordion"),this._accordionContainer||Ink.warn('Ink.UI.Toggle_1: This toggle has the isAccordion option set to `true`, but is not a descendant of an element with the class "accordion"! Because of this, it won\'t be able to find other toggles in the same accordion and cooperate with them.')),this._constructing=!0,this._bindEvents(),null!==this._options.initialState)this.setState(this._options.initialState,!0);else{var r="none"!==n.getStyle(this._targets[0],"display");this.setState(r,!0)}for(e=0,o=this._targets.length;o>e;e++)this._targets[e].style.display&&(this._targets[e].style.display="");this._element.setAttribute("data-is-toggle-trigger","true"),this._constructing=!1},_bindEvents:function(){if(this._options.triggerEvent&&e.on(this._element,this._options.triggerEvent,Ink.bind(this._onTriggerEvent,this)),this._options.closeOnClick&&e.observe(document,"click",Ink.bind(this._onOutsideClick,this)),this._options.closeOnInsideClick){var t=this._options.closeOnInsideClick;"true"===t.toString()&&(t="*"),e.observeMulti(this._targets,"click",Ink.bind(function(n){i.findUpwardsBySelector(e.element(n),t)&&this.setState(!1,!0)},this))}},_onTriggerEvent:function(t){var n=e.element(t),o=r.some(this._targets,function(t){return t===n||i.isAncestorOf(t,n)});if(this._options.canToggleAnAncestor||!o){var s=this.getState();this.setState(!s,!0),!s&&this._firstTime&&(this._firstTime=!1),e.stopDefault(t)}},_updateAccordion:function(){if(this._accordionContainer&&this.getState()!==!1)for(var t=o.select("[data-is-toggle-trigger]",this._accordionContainer),e=0;e<t.length;e++){var n=s.getInstance(t[e]);n&&n!==this&&n.getState()===!0&&n.setState(!1,!0)}},_onOutsideClick:function(t){var n,o=e.element(t);if(i.isAncestorOf(document.documentElement,o)){var s=r.some(this._targets,function(t){return i.isAncestorOf(t,o)||t===o});if(this._element!==o&&!i.isAncestorOf(this._element,o)&&!s){if((n=Ink.ss(".ink-shade")).length)for(var a=n.length,l=0;a>l;l++)if(i.isAncestorOf(n[l],o)&&i.isAncestorOf(n[l],this._element))return;this.setState(!1,!0)}}},setState:function(t,e){if(t!==this.getState()||this._constructing){var i,o;if(this._group&&t)for(i=0,o=this._group.length;o>i;i++)this._group[i].getState()===!0&&this._group[i].setState(!1,!0);if(e&&"function"==typeof this._options.onChangeState){var r=this._options.onChangeState.call(this,t,{element:this._element});if(r===!1)return!1}for(i=0,o=this._targets.length;o>i;i++)n.addRemoveClassName(this._targets[i],this._options.classNameOn,t),n.addRemoveClassName(this._targets[i],this._options.classNameOff,!t);n.addRemoveClassName(this._element,"active",t),this._accordionContainer&&this._updateAccordion()}},getState:function(){return n.hasClassName(this._element,"active")}},t.createUIComponent(s),s}),Ink.createModule("Ink.UI.Tooltip","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Dom.Css_1","Ink.Dom.Browser_1"],function(t,e,n,i,o,r){"use strict";function s(t,e){this._init(t,e||{})}function a(t,e){this._init(t,e)}var l,h,u;!function(){for(var t=document.createElement("DIV"),e=["transition","oTransition","msTransition","mozTransition","webkitTransition"],n=0;n<e.length;n++)if("undefined"!=typeof t.style[e[n]+"Duration"]){l=e[n]+"Duration",h=e[n]+"Property",u=e[n]+"TimingFunction";break}}();var c=document.getElementsByTagName("body"),d=c.length?c[0]:document.documentElement;return s.prototype={_init:function(t,e){var n;if(this.options=Ink.extendObj({where:"up",zIndex:1e4,left:10,top:10,spacing:8,forever:0,color:"",timeout:0,delay:0,template:null,templatefield:null,fade:.3,text:""},e||{}),"string"==typeof t)n=i.select(t);else{if("object"!=typeof t)throw"Element expected";n=[t]}this.tooltips=[];for(var o=0,r=n.length;r>o;o++)this.tooltips[o]=new a(this,n[o])},destroy:function(){o.each(this.tooltips,function(t){t._destroy()}),this.tooltips=null,this.options=null}},a.prototype={_oppositeDirections:{left:"right",right:"left",up:"down",down:"up"},_init:function(n,i){e.observe(i,"mouseover",Ink.bindEvent(this._onMouseOver,this)),e.observe(i,"focus",Ink.bindEvent(this._onMouseOver,this)),e.observe(i,"mouseout",Ink.bindEvent(this._onMouseOut,this)),e.observe(i,"blur",Ink.bindEvent(this._onMouseOut,this)),e.observe(i,"mousemove",Ink.bindEvent(this._onMouseMove,this)),this.root=n,this.element=i,this._delayTimeout=null,this.tooltip=null,t.registerInstance(this,this.element)},_makeTooltip:function(t){if(!this._getOpt("text")&&!this._getOpt("html")&&!n.hasAttribute(this.element,"title"))return!1;var i=this._createTooltipElement();this.tooltip&&this._removeTooltip(),this.tooltip=i,this._fadeInTooltipElement(i),this._placeTooltipElement(i,t),e.observe(i,"mouseover",Ink.bindEvent(this._onTooltipMouseOver,this));var o=this._getFloatOpt("timeout");o&&setTimeout(Ink.bind(function(){this.tooltip===i&&this._removeTooltip()},this),1e3*o)},_createTooltipElement:function(){var e,o,s=this._getOpt("template"),a=this._getOpt("templatefield");if(s){var l=document.createElement("DIV");if(l.innerHTML=t.elOrSelector(s,"options.template").outerHTML,e=l.firstChild,a){if(o=i.select(a,e),!o)throw"options.templatefield must be a valid selector within options.template";o=o[0]}else o=e}else e=document.createElement("DIV"),r.addClassName(e,"ink-tooltip"),r.addClassName(e,this._getOpt("color")),o=document.createElement("DIV"),r.addClassName(o,"content"),e.appendChild(o);return this._getOpt("html")?o.innerHTML=this._getOpt("html"):this._getOpt("text")?n.setTextContent(o,this._getOpt("text")):n.setTextContent(o,this.element.getAttribute("title")),e.style.display="block",e.style.position="absolute",e.style.zIndex=this._getIntOpt("zIndex"),e},_fadeInTooltipElement:function(t){var e=this._getFloatOpt("fade");l&&e&&(t.style.opacity="0",t.style[l]=e+"s",t.style[h]="opacity",t.style[u]="ease-in-out",setTimeout(function(){t.style.opacity="1"},0))},_placeTooltipElement:function(t,e){var i=this._getOpt("where");if(null!==e||"mousemove"!==i&&"mousefix"!==i||(i="up"),"mousemove"===i||"mousefix"===i){var o=e;this._setPos(o[0],o[1]),d.appendChild(t)}else if(i.match(/(up|down|left|right)/)){d.appendChild(t);var s=n.offset(this.element),a=s[0],l=s[1],h=n.elementWidth(this.element)/2-n.elementWidth(t)/2,u=n.elementHeight(this.element)/2-n.elementHeight(t)/2,c=this._getIntOpt("spacing"),p=n.elementDimensions(t),f=n.elementDimensions(this.element),m=n.scrollWidth()+n.viewportWidth(),_=n.scrollHeight()+n.viewportHeight();i=this._getWhereValueInsideViewport(i,{left:a-p[0],right:a+p[0],top:l+p[1],bottom:l+p[1]},{right:m,bottom:_}),"up"===i?(l-=p[1],l-=c,a+=h):"down"===i?(l+=f[1],l+=c,a+=h):"left"===i?(a-=p[0],a-=c,l+=u):"right"===i&&(a+=f[0],a+=c,l+=u);var g=null;i.match(/(up|down|left|right)/)&&(g=document.createElement("SPAN"),r.addClassName(g,"arrow"),r.addClassName(g,this._oppositeDirections[i]),t.appendChild(g));var v=a,y=l,b=y+p[1]-_,k=v+p[0]-m,C=0-v,I=0-y;b>0?(g&&(g.style.top=p[1]/2+b+"px"),y-=b):I>0?(g&&(g.style.top=p[1]/2-I+"px"),y+=I):k>0?(g&&(g.style.left=p[0]/2+k+"px"),v-=k):C>0&&(g&&(g.style.left=p[0]/2-C+"px"),v+=C),t.style.left=v+"px",t.style.top=y+"px"}},_getWhereValueInsideViewport:function(t,e,n){return"left"===t&&e.left<0?"right":"right"===t&&e.right>n.right?"left":"up"===t&&e.top<0?"down":"down"===t&&e.bottom>n.bottom?"up":t},_removeTooltip:function(){var t=this.tooltip;if(t){var e=Ink.bind(n.remove,{},t);"mousemove"!==this._getOpt("where")&&l?(t.style.opacity=0,setTimeout(e,1e3*this._getFloatOpt("fade"))):e(),this.tooltip=null}},_getOpt:function(t){var e=n.data(this.element)[n._camelCase("tip-"+t)];if(e)return e;var i=this.root.options[t];return"undefined"!=typeof i?i:void 0},_getIntOpt:function(t){return parseInt(this._getOpt(t),10)},_getFloatOpt:function(t){return parseFloat(this._getOpt(t),10)},_destroy:function(){this.tooltip&&n.remove(this.tooltip),this.root=null,this.element=null,this.tooltip=null},_onMouseOver:function(t){var e;e="mouseover"!==t.type?null:this._getMousePosition(t);var n=this._getFloatOpt("delay");n?this._delayTimeout=setTimeout(Ink.bind(function(){this.tooltip||this._makeTooltip(e),this._delayTimeout=null},this),1e3*n):this._makeTooltip(e)},_onMouseMove:function(t){if("mousemove"===this._getOpt("where")&&this.tooltip){var e=this._getMousePosition(t);this._setPos(e[0],e[1])}},_onMouseOut:function(){this._getIntOpt("forever")||this._removeTooltip(),this._delayTimeout&&(clearTimeout(this._delayTimeout),this._delayTimeout=null)},_onTooltipMouseOver:function(){this.tooltip&&this._removeTooltip()},_setPos:function(t,e){t+=this._getIntOpt("left"),e+=this._getIntOpt("top");var i=this._getPageXY();if(this.tooltip){var o=[n.elementWidth(this.tooltip),n.elementHeight(this.tooltip)],r=this._getScroll();o[0]+t-r[0]>=i[0]-20&&(t=t-o[0]-this._getIntOpt("left")-10),o[1]+e-r[1]>=i[1]-20&&(e=e-o[1]-this._getIntOpt("top")-10),this.tooltip.style.left=t+"px",this.tooltip.style.top=e+"px"}},_getPageXY:function(){var t=0,e=0;return"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(t=document.body.clientWidth,e=document.body.clientHeight),[parseInt(t,10),parseInt(e,10)]},_getScroll:function(){var t=document.documentElement,e=document.body;return t&&(t.scrollLeft||t.scrollTop)?[t.scrollLeft,t.scrollTop]:e?[e.scrollLeft,e.scrollTop]:[0,0]},_getMousePosition:function(t){return[parseInt(e.pointerX(t),10),parseInt(e.pointerY(t),10)]}},s}),Ink.createModule("Ink.UI.TreeView","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}return s._name="TreeView_1",s._optionDefinition={node:["String","li"],children:["String","ul"],parentClass:["String","parent"],openNodeClass:["String","open"],openClass:["String","fa fa-minus-circle"],closedClass:["String","fa fa-plus-circle"],hideClass:["String","hide-all"],iconTag:["String","i"],stopDefault:["Boolean",!0]},s.prototype={_init:function(){this._handlers={click:Ink.bindEvent(this._onClick,this)},e.on(this._element,"click",this._options.node,this._handlers.click),r.each(Ink.ss(this._options.node,this._element),Ink.bind(function(t){if(this.isParent(t)){n.addClassName(t,this._options.parentClass);var e=this.isOpen(t);this._getIcon(t)||i.create(this._options.iconTag,{insertTop:t}),this._setNodeOpen(t,e)}},this))},_getIcon:function(t){return Ink.s("> "+this._options.iconTag,t)},isOpen:function(t){if(!this._getChild(t))throw new Error("not a node!");return"true"===t.getAttribute("data-open")||n.hasClassName(t,this._options.openNodeClass)},isParent:function(t){return n.hasClassName(t,this._options.parentClass)||null!=this._getChild(t)},_setNodeOpen:function(t,e){var i=this._getChild(t);if(i){n.setClassName(i,this._options.hideClass,!e);var o=this._getIcon(t);t.setAttribute("data-open",e);var r=e?this._options.openClass:this._options.closedClass,s=e?this._options.closedClass:this._options.openClass;n.removeClassName(o,s),n.addClassName(o,r),n.setClassName(t,this._options.openNodeClass,e)}else Ink.error("Ink.UI.TreeView: node",t,"is not a node!")},open:function(t){this._setNodeOpen(t,!0)},close:function(t){this._setNodeOpen(t,!1)},toggle:function(t){this.isOpen(t)?this.close(t):this.open(t)},_getChild:function(t){return o.select(this._options.children,t)[0]||null},_onClick:function(t){!this.isParent(t.currentTarget)||o.matchesSelector(t.target,this._options.node)||o.matchesSelector(t.target,this._options.children)||(this._options.stopDefault&&t.preventDefault(),this.toggle(t.currentTarget))}},t.createUIComponent(s),s}),Ink.createModule("Ink.UI.Upload","1",["Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Browser_1","Ink.UI.Common_1"],function(t,e,n,i){"use strict";var o=function(t){this.init(t)};o.prototype={init:function(t){this._options=Ink.extendObj({entry:void 0,maxDepth:10},t||{});try{this._read()}catch(e){Ink.error(e)}},_read:function(){if(!this._options.entry)return void Ink.error("You must specify the entry!");try{this._readDirectories()}catch(t){Ink.error(t)}},_readDirectories:function(){var t=[],e=!1,n=0,i=Ink.bind(function(o){var r=o.createReader();e=!0,r.readEntries(Ink.bind(function(o){if(o.length>0){for(var r=0,s=o.length;s>r;r++)t.push(o[r]),o[r].isDirectory&&(n=this.clearArray(o[r].fullPath.split("/")),n.shift(),n=n.length,n<=this._options.maxDepth&&i(o[r]));this._stopActivityTimeout&&clearTimeout(this._stopActivityTimeout),this._stopActivityTimeout=setTimeout(function(){e=!1},250)}o.length||(e=!1)},this),Ink.bind(function(t){this._options.readError(t,o)},this))},this);i(this._options.entry);var o,r=function(){return e?!1:(clearInterval(o),this._options.readComplete&&"function"==typeof this._options.readComplete&&this._options.readComplete(t),!0)};o=setInterval(Ink.bind(r,this),250)},clearArray:function(t){for(var e=t.length-1;e>=0;e--)("undefined"==typeof t[e]||null===t[e]||""===t[e])&&t.splice(e,1);return t}};var r={lists:[],items:[],create:function(t){var e;return t=String(t),this.lists.push({name:t}),e=this.lists.length-1},getItems:function(t){if(!t)return this.items;for(var e=[],n=0,i=this.items.length;i>n;n++)this.items[n].parentId===t&&e.push(this.items[n]);return e},purge:function(t,e){if("number"!=typeof t||isNaN(Number(t)))return!1;try{for(var n=this.items.length;n>=0;n--)this.items[n]&&t===this.items[n].parentId&&this.remove(this.items[n].parentId,this.items[n].pid);return e||this.lists.splice(t,1),!0}catch(i){return Ink.error("Purge: invalid id"),!1}},add:function(t,e,n){if(!this.lists[t])return!1;"object"!=typeof e&&(e=String(e));var i=parseInt(Math.round(1e5*Math.random())+""+Math.round(1e5*Math.random()),10);return n=n||0,this.items.push({parentId:t,item:e,priority:n||0,pid:i}),i},view:function(t,e){var n=this._searchByPid(t,e);return n===!1?!1:this.items[n]},remove:function(t,e){try{var n=this._searchByPid(t,e);return n===!1?!1:(this.items.splice(n,1),!0)}catch(i){return Ink.error("Remove: invalid id"),!1}},_searchByPid:function(t,e){if(!t&&"boolean"==typeof t||!e)return!1;if(t=parseInt(t,10),e=parseInt(e,10),isNaN(t)||isNaN(e))return!1;for(var n=0,i=this.items.length;i>n;n++)if(this.items[n].parentId===t&&this.items[n].pid===e)return n;return!1}},s=function(t){this.Upload=t,this.init()};s.prototype={init:function(){this._fileButton=this.Upload._options.fileButton,this._dropzone=this.Upload._options.dropzone,this._setDropEvent(),this._setFileButton()},_setDropEvent:function(){var t=this._dropzone;if(t)for(var e=0,n=t.length;n>e;e++)t[e].ondrop=Ink.bindEvent(this.Upload._dropEventHandler,this.Upload),t[e].ondragleave=Ink.bindEvent(this._onDragLeave,this),t[e].ondragend=Ink.bindEvent(this._onDragEndEventHandler,this),t[e].ondragdrop=Ink.bindEvent(this._onDragEndEventHandler,this),t[e].ondragenter=Ink.bindEvent(this._onDragEnterHandler,this),t[e].ondragover=Ink.bindEvent(this._onDragOverHandler,this)},_onDragEnterHandler:function(t){return t&&t.stopPropagation&&t.stopPropagation(),t&&t.preventDefault&&t.preventDefault(),t&&(t.returnValue=!1),this.Upload.publish("DragEnter",t),!1},_onDragOverHandler:function(t){return t?(t.preventDefault(),t.stopPropagation(),t.returnValue=!1,!0):!1},_onDragLeave:function(t){return this.Upload.publish("DragLeave",t)},_onDragEndEventHandler:function(t){return this.Upload.publish("DragEnd",t)},_setFileButton:function(){var e=this._fileButton;e&&t.observeMulti(e,"change",Ink.bindEvent(this._fileChangeHandler,this))},_fileChangeHandler:function(n){var i=t.element(n),o=i.files,r=e.findUpwardsByTag(i,"form");return o&&window.FormData&&"withCredentials"in new XMLHttpRequest?(this.Upload._addFilesToQueue(o),void(i.value="")):(r.parentNode.submit(),!1)}};var a=function(t){this.Queue=r,this.init(t),this._events={}};return a.prototype={init:function(t){if("string"==typeof t&&(t=e.data(i.elOrSelector(t,"1st argument"))),this._options=Ink.extendObj({dropzone:void 0,fileButton:void 0,fileFormName:"Ink_Filelist",endpoint:"",maxFilesize:300<<20,INVALID_FILE_NAME:void 0,extraData:{},useChunks:!1,chunkSize:4194304,minSizeToUseChunks:20971520,endpointChunk:"",endpointChunkCommit:"",foldersEnabled:!1,directoryMaxDepth:10},t||{}),this._queueId=r.create("Ink_UPLOAD"),this._queueRunning=!1,this._folders={},this._options.dropzone&&(this._options.dropzone=i.elsOrSelector(this._options.dropzone,"Ink.UI.Upload - dropzone")),this._options.fileButton&&(this._options.fileButton=i.elsOrSelector(this._options.fileButton,"Ink.UI.Upload - fileButton")),!this._options.dropzone&&!this._options.fileButton)throw new TypeError("Ink.UI.Upload: Specify a fileButton or a Dropzone!");new s(this)},_supportChunks:function(t){return this._options.useChunks&&"Blob"in window&&(new Blob).slice&&t>this._options.minSizeToUseChunks},_dropEventHandler:function(e){t.stop(e),this.publish("DropComplete",e.dataTransfer);var n=e.dataTransfer;if(!n||!n.files||!n.files.length)return!1;if(this._files=n.files,this._files=Array.prototype.slice.call(this._files||[],0),n.items&&n.items[0]&&n.items[0].webkitGetAsEntry){if(!this._options.foldersEnabled)return setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0);for(var i,o=[],r=e.dataTransfer.items.length-1;r>=0;r--)i=e.dataTransfer.items[r].webkitGetAsEntry(),i&&i.isDirectory&&(o.push(i),this._files[r].isDirectory=!0,this._files.splice(r,1));this._addFolderToQueue(o,Ink.bind(function(){setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0)},this))}else setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0);return!0},_addFolderToQueue:function(t,e){var n=[],i={};if(!t||!t.length)return e(),n;var r=function(t){for(var e=[],n=0,i=t.length;i>n;n++)t[n].isFile&&e.push(t[n]);return e},s=function(t,e){var i;return e=e||0,this._files[e]?"fileentry"!==this._files[e].constructor.name.toLowerCase()?s.apply(this,[t,++e]):void this._files[e].file(Ink.bind(function(n){i=this._files[e].fullPath,this._files[e]=n,this._files[e].hasParent=!0,this._files[e].fullPath||(this._files[e].fullPath=i),s.apply(this,[t,++e])},this),Ink.bind(function(){this._files.splice(e,1),s.apply(this,[t,e])},this)):(t(),n)},a=Ink.bind(function(l){return t[l]?void new o({entry:t[l],maxDepth:this._options.directoryMaxDepth,readComplete:Ink.bind(function(e){if(n=n.concat(r(e)),t[l]&&!(t[l].fullPath in this._folders)){this._folders[t[l].fullPath]={items:e,files:n,length:e.length,created:!1,root:!0};for(var o=0,s=e.length;s>o;o++)e[o].isFile||(e[o].fullPath in i?delete i[e[o].fullPath]:this._folders[e[o].fullPath]={created:!1,root:!1});a(++l)}},this),readError:Ink.bind(function(t,e){i[e.fullPath]={},i[e.fullPath].error=t},this)}):(this._files=this._files.concat(n),s.call(this,e),!1)},this);return a(0),n},_addFilesToQueue:function(t){for(var e,i,o,s=0,a=t.length;a>s;s++)e=t[s],e.isDirectory||null!==e&&(e.type||e.size%4096!==0||n.CHROME&&this._options.foldersEnabled)?e.size>this._options.maxFilesize?this.publish("MaxSizeFailure",e,this._options.maxFilesize):(i=parseInt(Math.round(1e5*Math.random())+""+Math.round(1e5*Math.random()),10),o={id:s,data:e,fileID:i,directory:e.isDirectory},r.add(this._queueId,o),this.publish("FileAddedToQueue",o)):this.publish("InvalidFile",e,"size");this._processQueue(!0),this._files=[]},_processQueue:function(t){if(this._queueRunning)return!1;this.running=0;var e,n=1,i=0,o=r.items.length;this._queueRunning=!0,this.interval=setInterval(Ink.bind(function(){if(r.items.length===i&&0===this.running&&(r.purge(this._queueId,!0),this._queueRunning=!1,clearInterval(this.interval),this.publish("QueueEnd",this._queueId,o)),e=r.getItems(this._queueId),this.running<n&&e[i]){if(e[i].canceled)for(var a=i;e[a]&&e[a].canceled;)i++,a++;else s.call(this,e[i].pid,e[i].item.data,e[i].item.fileID,e[i].item.directory,t),this.running++,i++;return!0}return!1},this),100);var s=function(t,e,n,i,o){var r={file:e,fileID:n,cb:Ink.bind(function(){this.running--},this)};o&&(i?r.cb():this._upload(r))};return!0},_upload:function(t){var e=t.file,n=new XMLHttpRequest,i=t.fileID;this.publish("BeforeUpload",e,this._options.extraData,i,n,this._supportChunks(e.size));var o=function(o){t.cb&&t.cb(),this.publish("OnProgress",{length:e.size,lengthComputable:!0,loaded:e.size,total:e.size},e,i),this.publish("EndUpload",e,i,o?{error:!0}:!0),this.publish("InvalidFile",e,"name"),n.abort()};if(this._options.INVALID_FILE_NAME&&this._options.INVALID_FILE_NAME instanceof RegExp&&this._options.INVALID_FILE_NAME.test(t.file.name))return void o.call(this);if(!e.lastModifiedDate&&!Ink.Dom.Browser.OPERA)return void o.call(this,!0);n.upload.onprogress=Ink.bind(this.publish,this,"OnProgress",e,i);var r,s;this._supportChunks(e.size)?e.size<=e.chunk_offset?(r=this._options.endpointChunkCommit,s="POST"):(r=this._options.endpointChunk,e.chunk_upload_id&&(r+="?upload_id="+e.chunk_upload_id),e.chunk_offset&&(r+="&offset="+e.chunk_offset),s="PUT"):(r=this._options.endpoint,s="POST"),n.open(s,r,!0),n.withCredentials=!0,n.setRequestHeader("x-requested-with","XMLHttpRequest"),this._supportChunks(e.size)&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded");
var a,l=new FormData;if("Blob"in window&&"function"==typeof Blob?(a=new Blob([e],{type:e.type}),this._supportChunks(e.size)?(e.chunk_offset=e.chunk_offset||0,a=a.slice(e.chunk_offset,e.chunk_offset+this._options.chunkSize)):l.append(this._options.fileFormName,a,e.name)):l.append(this._options.fileFormName,e),this._supportChunks(e.size))l.append("upload_id",e.chunk_upload_id),l.append("path",e.upload_path);else for(var h in this._options.extraData)this._options.extraData.hasOwnProperty(h)&&l.append(h,this._options.extraData[h]);e.hasParent?this.publish("cbCreateFolder",e.parentID,e.fullPath,this._options.extraData,this._folders,e.rootPath,Ink.bind(function(){n.send(this._supportChunks(e.size)?e.size<=e.chunk_offset?"upload_id="+e.chunk_upload_id+"&path="+e.upload_path+"/"+e.name:a:l)},this)):n.send(this._supportChunks(e.size)?e.size<=e.chunk_offset?"upload_id="+e.chunk_upload_id+"&path="+e.upload_path+"/"+e.name:a:l),n.onload=Ink.bindEvent(function(){if(this._supportChunks(e.size)&&e.size>e.chunk_offset){if(n.response){var o=JSON.parse(n.response),r=e.chunk_offset&&o.offset!==e.chunk_offset+this._options.chunkSize&&e.size!==o.offset;r?(t.cb&&t.cb(),this.publish("ErrorUpload",e,i)):(e.chunk_upload_id=o.upload_id,e.chunk_offset=o.offset,e.chunk_expires=o.expires,this._upload(t))}else t.cb&&t.cb(),this.publish("ErrorUpload",e,i);return n=null}return t.cb&&t.cb(),n.responseText&&n.status<400?this.publish("EndUpload",e,i,n.responseText):this.publish("ErrorUpload",e,i),n=null},this),n.onerror=Ink.bindEvent(function(){t.cb&&t.cb(),this.publish("ErrorUpload",e,i)},this),n.onabort=Ink.bindEvent(function(){t.cb&&t.cb(),this.publish("AbortUpload",e,i,{abortAll:Ink.bind(this.abortAll,this),abortOne:Ink.bind(this.abortOne,this)})},this)},abortAll:function(){return this._queueRunning?(clearInterval(this.interval),this._queueRunning=!1,r.purge(this._queueId,!0),!0):!1},abortOne:function(t,e){for(var n,i=r.getItems(0),o=0,s=i.length;s>o;o++)if(i[o].item.fileID===t)return n={id:i[o].item.fileID,name:i[o].item.data.name,size:i[o].item.data.size,hasParent:i[o].item.data.hasParent},r.remove(0,i[o].pid),e&&e(n),!0;return!1},subscribe:function(t,e){return this._events[t]||(this._events[t]=[]),this._events[t].push(e),this._events[t]},publish:function(t){var e=this._events[t],n=Array.prototype.slice.call(arguments||[],0);if(e)for(var i=0,o=e.length;o>i;i++)try{e[i].apply(this,n.splice(1,n.length))}catch(r){Ink.error(t+": "+r)}}},a}),!function(t,e){"use strict";if(!("Ink"in t)){var n={},i={},o=[],r={},s=[],a={},l=Function.prototype.apply,h=function(t){if("object"!=typeof t)return!1;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};t.Ink={VERSION:"3.1.7",_checkPendingRequireModules:function(){var t,e,n,o,r,a,l=[],h=[];for(t=0,e=s.length;e>t;++t)if(n=s[t]){for(o in n.left)n.left.hasOwnProperty(o)&&(r=i[o],r&&(n.args[n.left[o]]=r,delete n.left[o],--n.remaining));if(n.remaining>0)l.push(n);else{if(a=n.cb,!a)continue;delete n.cb,h.push([a,n.args])}}s=l;for(var u=0;u<h.length;u++)h[u][0].apply(!1,h[u][1]);s.length>0&&setTimeout(function(){Ink._checkPendingRequireModules()},0)},getPath:function(t,e){var i,o,r,s,a=t.split(/[._]/g);for(o=a.length;o>=0;o-=1)if(i=a.slice(0,o+1).join("."),n[i]){r=i;break}return r in n?(s=n[r],/\/$/.test(s)||(s+="/"),o<a.length&&(s+=a.slice(o+1).join("/")+"/"),e||(s+="lib.js"),s):null},setPath:function(t,e){n[t.replace(/_/,".")]=e},loadScript:function(t,n){if(-1===t.indexOf("/")){var i=t;if(t=this.getPath(t),null===t)throw new Error('Could not load script "'+i+'". Path not found in the registry. Did you misspell the name, or forgot to call setPath()?')}var o=e.createElement("script");o.setAttribute("type",n||"text/javascript"),o.setAttribute("src",t),"onerror"in o&&(o.onerror=function(){Ink.error(["Failed to load script from ",t,"."].join(""))});var r=e.head||e.getElementsByTagName("head")[0];return r?r.appendChild(o):void 0},_loadLater:function(t){setTimeout(function(){i[t]||r[t]||a[t]||(r[t]=!0,Ink.loadScript(t))},0)},namespace:function(e,n){if(!e||!e.length)return null;for(var i,o=e.split("."),r=t,s=0,a=o.length;a>s;++s)r[o[s]]=r[o[s]]||{},i=r,r=r[o[s]];return n?[i,o[s-1]]:r},getModule:function(t,e){var n=e?[t,"_",e].join(""):t;return i[n]},createModule:function(e,n,s,l){if("string"!=typeof e)throw new Error("module name must be a string!");if(!("number"==typeof n||"string"==typeof n&&n.length>0))throw new Error("version number missing!");var u=[e,"_",n].join("");a[u]=!0;var c=function(){if(!i[u]){delete r[u],delete r[e];var s=Array.prototype.slice.call(arguments),c=l.apply(t,s);o.push(u),"object"==typeof c?c._version=n:"function"==typeof c&&(c.prototype._version=n,c._version=n);var d,p=0===e.indexOf("Ink.");p&&(d=Ink.namespace(e,!0)),i[u]=c,delete a[u],p&&(d[0][d[1]+"_"+n]=c),i[e]=c,p&&h(d[0][d[1]])&&(d[0][d[1]]=c),this&&Ink._checkPendingRequireModules()}};this.requireModules(s,c)},requireModules:function(t,e){var n,o,a,l,h;if(o=t&&t.length,a={args:new Array(o),left:{},remaining:o,cb:e},"object"!=typeof t||void 0===t.length)throw new Error("Dependency list should be an array!");if("function"!=typeof e)throw new Error("Callback should be a function!");for(n=0;o>n;++n)Ink._moduleRenames[t[n]]?(Ink.warn(t[n]+" was renamed to "+Ink._moduleRenames[t[n]]),l=Ink._moduleRenames[t[n]]):l=t[n],l?(h=i[l],h?(a.args[n]=h,--a.remaining):(r[l]||Ink._loadLater(l),a.left[l]=n)):--a.remaining;a.remaining>0?s.push(a):e.apply(!0,a.args)},_moduleRenames:{"Ink.UI.Aux_1":"Ink.UI.Common_1"},getModulesLoadOrder:function(){return o.slice()},getModuleScripts:function(){var t=this.getModulesLoadOrder();return t.unshift("Ink_1"),t=t.map(function(t){return["<scr",'ipt type="text/javascript" src="',Ink.getModuleURL(t),'"></scr',"ipt>"].join("")}),t.join("\n")},createExt:function(t,e,n,i){return Ink.createModule("Ink.Ext."+t,e,n,i)},bind:function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments),o=n.concat(i);return t.apply(e===!1?this:e,o)}},bindMethod:function(t,e){return Ink.bind.apply(Ink,[t[e],t].concat([].slice.call(arguments,2)))},bindEvent:function(e,n){var i=Array.prototype.slice.call(arguments,2);return function(o){var r=i.slice();return r.unshift(o||t.event),e.apply(n===!1?this:n,r)}},i:function(t){return"string"==typeof t?e.getElementById(t)||null:t},ss:function(t,n){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(t,n||e)},s:function(t,n){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(t,n||e)[0]||null},extendObj:function(t){for(var e=[].slice.call(arguments,1),n=0,i=e.length;i>n;n++)if(e[n])for(var o in e[n])Object.prototype.hasOwnProperty.call(e[n],o)&&(t[o]=e[n][o]);return t},log:function(){var e=t.console;e&&e.log&&l.call(e.log,e,arguments)},warn:function(){var e=t.console;e&&e.warn&&l.call(e.warn,e,arguments)},error:function(){var e=t.console;e&&e.error&&l.call(e.error,e,arguments)}}}}(window,document),Ink.createModule("Ink.Net.Ajax","1",[],function(){"use strict";var Ajax=function(t,e){this.init(t,e)};Ajax.globalOptions={parameters:{},requestHeaders:{}};var xMLHttpRequestWithCredentials="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest;return Ajax.prototype={init:function(t,e){if(!t)throw new Error("new Ink.Net.Ajax: Pass a url as the first argument!");var n=Ink.extendObj({asynchronous:!0,contentType:"application/x-www-form-urlencoded",cors:!1,validateCors:!1,debug:!1,delay:0,evalJS:!0,method:"POST",parameters:null,postBody:"",requestHeaders:null,sanitizeJSON:!1,signRequest:!1,timeout:0,useCredentials:!1,xhrProxy:"",onComplete:null,onCreate:null,onException:null,onFailure:null,onHeaders:null,onInit:null,onSuccess:null,onTimeout:null},Ajax.globalOptions);if(e&&"object"==typeof e){if(n=Ink.extendObj(n,e),"object"==typeof e.parameters)n.parameters=Ink.extendObj(Ink.extendObj({},Ajax.globalOptions.parameters),e.parameters);else if(null!==e.parameters){var i=this.paramsObjToStr(Ajax.globalOptions.parameters);i&&(n.parameters=e.parameters+"&"+i)}n.requestHeaders=Ink.extendObj({},Ajax.globalOptions.requestHeaders),n.requestHeaders=Ink.extendObj(n.requestHeaders,e.requestHeaders)}this.options=n,this.safeCall("onInit"),this.url=t;var o=this._locationFromURL(t);this.isHTTP=this._locationIsHTTP(o),this.isCrossDomain=this._locationIsCrossDomain(o,location),this.requestHasBody=n.method.search(/^get|head$/i)<0,this.options.validateCors===!0&&(this.options.cors=this.isCrossDomain),this.options.cors&&(this.isCrossDomain=!1),this.transport=this.getTransport(),this.request()},_locationFromURL:function(t){var e=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","a"):document.createElement("a");return e.setAttribute("href",t),e},_locationIsHTTP:function(t){return t.href.match(/^https?:/i)?!0:!1},_locationIsCrossDomain:function(t,e){if(e=e||window.location,Ajax.prototype._locationIsHTTP(t)&&"widget:"!==e.protocol&&"object"!=typeof window.widget){var n=t.href.split("//"),i=e.href.split("//");if(1===n.length||1===i.length)return!1;var o=n[0],r=i[0],s=/:|\//,a=n[1].split(s)[0],l=i[1].split(s)[0];return o!==r||a!==l}return!1},getTransport:function(){if(!xMLHttpRequestWithCredentials&&this.options.cors&&"XDomainRequest"in window)return this.usingXDomainReq=!0,new XDomainRequest;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"==typeof ActiveXObject)return null;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){return new ActiveXObject("Microsoft.XMLHTTP")}},setHeaders:function(){if(this.transport)try{var t={Accept:"text/javascript,text/xml,application/xml,application/xhtml+xml,text/html,application/json;q=0.9,text/plain;q=0.8,video/x-mng,image/png,image/jpeg,image/gif;q=0.2,*/*;q=0.1","Accept-Language":navigator.language,"X-Requested-With":"XMLHttpRequest","X-Ink-Version":"3"};if(this.options.cors&&(this.options.signRequest||delete t["X-Requested-With"],delete t["X-Ink-Version"]),this.options.requestHeaders&&"object"==typeof this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&(t[e]=this.options.requestHeaders[e]);this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005&&(t.Connection="close");for(var n in t)t.hasOwnProperty(n)&&this.transport.setRequestHeader(n,t[n])}catch(i){}},paramsObjToStr:function(t){var e,n,i,o,r=[];if("object"!=typeof t)return t;for(i in t)if(t.hasOwnProperty(i))if(o=t[i],"[object Array]"!==Object.prototype.toString.call(o)||isNaN(o.length))r=r.concat([encodeURIComponent(i),"=",encodeURIComponent(o),"&"]);else for(e=0,n=o.length;n>e;e++)r=r.concat([encodeURIComponent(i),"[]","=",encodeURIComponent(o[e]),"&"]);return r.length>0&&r.pop(),r.join("")},setParams:function(){var t=null,e=this.options.parameters;t="object"==typeof e?this.paramsObjToStr(e):""+e,t&&(this.url=this.url.indexOf("?")>-1?this.url.split("#")[0]+"&"+t:this.url.split("#")[0]+"?"+t)},getHeader:function(t){if(this.usingXDomainReq&&"Content-Type"===t)return this.transport.contentType;try{return this.transport.getResponseHeader(t)}catch(e){return null}},getAllHeaders:function(){try{return this.transport.getAllResponseHeaders()}catch(t){return null}},getResponse:function(){var t=this.transport,e={headerJSON:null,responseJSON:null,getHeader:this.getHeader,getAllHeaders:this.getAllHeaders,request:this,transport:t,timeTaken:new Date-this.startTime,requestedUrl:this.url};e.readyState=t.readyState;try{e.responseText=t.responseText}catch(n){}try{e.responseXML=t.responseXML}catch(n){}try{e.status=t.status}catch(n){e.status=0}try{e.statusText=t.statusText}catch(n){e.statusText=""}return e},abort:function(){if(this.transport){clearTimeout(this.delayTimeout),clearTimeout(this.stoTimeout),this._aborted=!0;try{this.transport.abort()}catch(t){}this.finish()}},runStateChange:function(){if(!this._aborted){var t=this.transport.readyState;if(3===t)this.isHTTP&&this.safeCall("onHeaders");else if(4===t||this.usingXDomainReq){if(this.options.asynchronous&&this.options.delay&&this.startTime+this.options.delay>(new Date).getTime())return void(this.delayTimeout=setTimeout(Ink.bind(this.runStateChange,this),this.options.delay+this.startTime-(new Date).getTime()));var e,n=this.transport.responseText,i=this.getResponse(),o=this.transport.status;this.isHTTP&&!this.options.asynchronous&&this.safeCall("onHeaders"),clearTimeout(this.stoTimeout),0===o?this.isHTTP?this.safeCall("onException",new Error("Ink.Net.Ajax: network error! (HTTP status 0)")):o=n?200:404:304===o&&(o=200);var r=this.usingXDomainReq||o>=200&&300>o,s=this.getHeader("Content-Type")||"";if(this.options.evalJS&&(s.indexOf("application/json")>=0||"force"===this.options.evalJS))try{e=this.evalJSON(n,this.sanitizeJSON),e&&(n=i.responseJSON=e)}catch(a){r&&this.safeCall("onException",a)}if(this.usingXDomainReq&&-1!==s.indexOf("xml")&&"DOMParser"in window){var l;switch(s){case"application/xml":case"application/xhtml+xml":case"image/svg+xml":l=s;break;default:l="text/xml"}var h=(new DOMParser).parseFromString(this.transport.responseText,l);this.transport.responseXML=h,i.responseXML=h}null!=this.transport.responseXML&&null==i.responseJSON&&""!==this.transport.responseXML.xml&&(n=this.transport.responseXML),(o||this.usingXDomainReq)&&(r?this.safeCall("onSuccess",i,n):this.safeCall("onFailure",i,n),this.safeCall("on"+o,i,n)),this.finish(i,n)}}},finish:function(t,e){if(t&&this.safeCall("onComplete",t,e),clearTimeout(this.stoTimeout),this.transport){try{this.transport.onreadystatechange=null}catch(n){}"function"==typeof this.transport.destroy&&this.transport.destroy(),this.transport=null}},safeCall:function(t){var e=arguments[1]instanceof Error?arguments[1]:null;if("function"==typeof this.options[t])try{this.options[t].apply(this,[].slice.call(arguments,1))}catch(n){Ink.error("Ink.Net.Ajax: an error was raised while executing "+t+".",n)}else e&&Ink.error("Ink.Net.Ajax: "+e)},setRequestHeader:function(t,e){this.options.requestHeaders||(this.options.requestHeaders={}),this.options.requestHeaders[t]=e},request:function(){if(this.transport){var t=null;this.requestHasBody?(null!==this.options.postBody&&""!==this.options.postBody?(t=this.options.postBody,this.setParams()):null!==this.options.parameters&&""!==this.options.parameters&&(t=this.options.parameters),"object"!=typeof t||t.nodeType?"object"!=typeof t&&null!==t&&(t=""+t):t=this.paramsObjToStr(t),this.options.contentType&&this.setRequestHeader("Content-Type",this.options.contentType)):this.setParams();var e=this.url,n=this.options.method,i=this.isCrossDomain;i&&this.options.xhrProxy&&(this.setRequestHeader("X-Url",e),e=this.options.xhrProxy+encodeURIComponent(e),i=!1);try{this.transport.open(n,e,this.options.asynchronous)}catch(o){return this.safeCall("onException",o),this.finish(this.getResponse(),null)}this.setHeaders(),this.safeCall("onCreate"),this.options.timeout&&!isNaN(this.options.timeout)&&(this.stoTimeout=setTimeout(Ink.bind(function(){this.options.onTimeout&&(this.safeCall("onTimeout"),this.abort())},this),1e3*this.options.timeout)),this.options.useCredentials&&!this.usingXDomainReq&&(this.transport.withCredentials=!0),this.options.asynchronous&&!this.usingXDomainReq?this.transport.onreadystatechange=Ink.bind(this.runStateChange,this):this.usingXDomainReq&&(this.transport.onload=Ink.bind(this.runStateChange,this));try{if(i)return void Ink.error("Ink.Net.Ajax: You are attempting to request a URL which is cross-domain from this one. To do this, you *must* enable the `cors` option!");this.startTime=(new Date).getTime(),this.transport.send(t)}catch(o){return this.safeCall("onException",o),this.finish(this.getResponse(),null)}this.options.asynchronous||this.runStateChange()}},isJSON:function(t){return"string"==typeof t&&t?(t=t.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(t)):!1},evalJSON:function(strJSON,sanitize){if(strJSON&&(!sanitize||this.isJSON(strJSON)))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("Ink.Net.Ajax: Bad JSON string. "+e)}return null}},Ajax.load=function(t,e){var n=Ajax.prototype._locationIsCrossDomain(window.location,Ajax.prototype._locationFromURL(t));return new Ajax(t,{method:"GET",cors:n,onSuccess:function(t){e(t.responseJSON||t.responseText,t)}})},Ajax.ping=function(t,e){var n=Ajax.prototype._locationIsCrossDomain(window.location,Ajax.prototype._locationFromURL(t));return new Ajax(t,{method:"HEAD",cors:n,onSuccess:function(t){"function"==typeof e&&e(t)}})},Ajax}),Ink.createModule("Ink.Net.JsonP","1",[],function(){"use strict";var t=function(t,e){this.init(t,e)};return t.prototype={init:function(t,e){if(this.options=Ink.extendObj({onSuccess:void 0,onFailure:void 0,failureObj:{},timeout:10,params:{},callbackParam:"jsoncallback",internalCallback:"_cb",randVar:!1},e||{}),this.randVar=this.options.randVar!==!1?this.options.randVar:parseInt(1e5*Math.random(),10),this.options.internalCallback+=this.randVar,this.uri=t,"function"==typeof this.options.onComplete&&(this.options.onSuccess=this.options.onComplete),"string"!=typeof this.uri)throw new Error("Ink.Net.JsonP: Please define an URI");if("function"!=typeof this.options.onSuccess)throw new Error("Ink.Net.JsonP: please define a callback function on option onSuccess!");Ink.Net.JsonP[this.options.internalCallback]=Ink.bind(function(){this.options.onSuccess(arguments[0]),this._cleanUp()},this),this.timeout=setTimeout(Ink.bind(function(){this.abort(),"function"==typeof this.options.onFailure&&this.options.onFailure(this.options.failureObj)},this),1e3*this.options.timeout),this._addScriptTag()},abort:function(){Ink.Net.JsonP[this.options.internalCallback]=Ink.bindMethod(this,"_cleanUp")},_addParamsToGet:function(t,e){var n,i,o,r=-1!==t.indexOf("?"),s=[t];for(i in e)e.hasOwnProperty(i)&&(r?n="&":(n="?",r=!0),o=e[i],"number"==typeof o||o||(o=""),s=s.concat([n,i,"=",encodeURIComponent(o)]));return s.join("")},_getScriptContainer:function(){return document.body||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement},_addScriptTag:function(){this.options.params[this.options.callbackParam]="Ink.Net.JsonP."+this.options.internalCallback,this.options.params.rnd_seed=this.randVar,this.uri=this._addParamsToGet(this.uri,this.options.params),this._scriptEl=document.createElement("script"),this._scriptEl.type="text/javascript",this._scriptEl.src=this.uri;var t=this._getScriptContainer();t.appendChild(this._scriptEl)},_cleanUp:function(){this.timeout&&window.clearTimeout(this.timeout),delete this.options.onSuccess,delete this.options.onFailure,delete Ink.Net.JsonP[this.options.internalCallback],this._removeScriptTag()},_removeScriptTag:function(){this._scriptEl&&(this._scriptEl.parentNode.removeChild(this._scriptEl),delete this._scriptEl)}},t}),Ink.createModule("Ink.Dom.Browser","1",[],function(){"use strict";var t={IE:!1,GECKO:!1,OPERA:!1,SAFARI:!1,KONQUEROR:!1,CHROME:!1,model:!1,version:!1,userAgent:!1,cssPrefix:!1,domPrefix:!1,init:function(){this.detectBrowser(),this.setDimensions(),this.setReferrer()},setDimensions:function(){var t=0,e=0;"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(t=document.body.clientWidth,e=document.body.clientHeight),this.windowWidth=t,this.windowHeight=e},setReferrer:function(){this.referrer=document.referrer&&document.referrer.length?window.escape(document.referrer):!1},detectBrowser:function(){this._sniffUserAgent(navigator.userAgent)},_sniffUserAgent:function(t){if(this.userAgent=t,t=t.toLowerCase(),/applewebkit\//.test(t))if(this.cssPrefix="-webkit-",this.domPrefix="Webkit",/(chrome|crios)\//.test(t))this.CHROME=!0,this.model="chrome",this.version=t.replace(/(.*)chrome\/([^\s]+)(.*)/,"$2");else{this.SAFARI=!0,this.model="safari";var e=/version\/([^) ]+)/;this.version=e.test(t)?t.match(e)[1]:t.replace(/(.*)applewebkit\/([^\s]+)(.*)/,"$2")}else if(/opera/.test(t))this.OPERA=!0,this.model="opera",this.version=t.replace(/(.*)opera.([^\s$]+)(.*)/,"$2"),this.cssPrefix="-o-",this.domPrefix="O";else if(/konqueror/.test(t))this.KONQUEROR=!0,this.model="konqueror",this.version=t.replace(/(.*)konqueror\/([^;]+);(.*)/,"$2"),this.cssPrefix="-khtml-",this.domPrefix="Khtml";else if(/(msie|trident)/i.test(t))this.IE=!0,this.model="ie",this.version=/rv:((?:\d|\.)+)/.test(t)?t.match(/rv:((?:\d|\.)+)/)[1]:t.replace(/(.*)\smsie\s([^;]+);(.*)/,"$2"),this.cssPrefix="-ms-",this.domPrefix="ms";else if(/gecko/.test(t)){this.cssPrefix="-moz-",this.domPrefix="Moz",this.GECKO=!0;var n=/(camino|chimera|epiphany|minefield|firefox|firebird|phoenix|galeon|iceweasel|k\-meleon|seamonkey|netscape|songbird|sylera)/;if(n.test(t))this.model=t.match(n)[1],this.version=t.replace(new RegExp("(.*)"+this.model+"/([^;\\s$]+)(.*)"),"$2");else{this.model="mozilla";var i=/(.*)rv:([^)]+)(.*)/;i.test(t)&&(this.version=t.replace(i,"$2"))}}},debug:function(){var t="known browsers: (ie, gecko, opera, safari, konqueror) \n";t+=[this.IE,this.GECKO,this.OPERA,this.SAFARI,this.KONQUEROR]+"\n",t+="cssPrefix -> "+this.cssPrefix+"\n",t+="domPrefix -> "+this.domPrefix+"\n",t+="model -> "+this.model+"\n",t+="version -> "+this.version+"\n",t+="\n",t+="original UA -> "+this.userAgent,alert(t)}};return t.init(),t}),Ink.createModule("Ink.Dom.Css",1,[],function(){"use strict";var t="defaultView"in document&&"getComputedStyle"in document.defaultView?document.defaultView.getComputedStyle:window.getComputedStyle,e={addRemoveClassName:function(t,e,n){return n?this.addClassName(t,e):void this.removeClassName(t,e)},addClassName:function(t,n){if(t=Ink.i(t),!t||!n)return null;n=(""+n).split(/[, ]+/);for(var i=0,o=n.length;o>i;i++)n[i].replace(/^\s+|\s+$/g,"")&&("undefined"!=typeof t.classList?t.classList.add(n[i]):e.hasClassName(t,n[i])||(t.className+=(t.className?" ":"")+n[i]))},removeClassName:function(t,e){if(t=Ink.i(t),!t||!e)return null;e=(""+e).split(/[, ]+/);var n=0,i=e.length;if("undefined"!=typeof t.classList)for(;i>n;n++)t.classList.remove(e[n]);else{for(var o,r=t.className||"";i>n;n++)o=new RegExp("(^|\\s+)"+e[n]+"(\\s+|$)"),r=r.replace(o," ");t.className=r.replace(/^\s+/,"").replace(/\s+$/,"")}},setClassName:function(t,e,n){this.addRemoveClassName(t,e,n||!1)},hasClassName:function(t,e,n){if(t=Ink.i(t),!t||!e)return!1;e=(""+e).split(/[, ]+/);for(var i,o,r=0,s=e.length;s>r;r++){if("undefined"!=typeof t.classList)i=t.classList.contains(e[r]);else{var a=t.className;a===e[r]?i=!0:(o=new RegExp("(^|\\s)"+e[r]+"(\\s|$)"),i=o.test(a))}if(i&&!n)return!0;if(!i&&n)return!1}return n?!0:!1},blinkClass:function(t,n,i,o){t=Ink.i(t),e.addRemoveClassName(t,n,!o),setTimeout(function(){e.addRemoveClassName(t,n,o)},Number(i)||100)},toggleClassName:function(t,n,i){return t&&n?"undefined"!=typeof i?e.addRemoveClassName(t,n,i):void("undefined"==typeof t.classList||/[, ]/.test(n)?e.hasClassName(t,n)?e.removeClassName(t,n):e.addClassName(t,n):(t=Ink.i(t),null!==t&&t.classList.toggle(n))):!1},setOpacity:function(t,e){if(t=Ink.i(t),null!==t){var n=1;isNaN(Number(e))||(n=0>=e?0:1>=e?e:100>=e?e/100:1),"undefined"!=typeof t.style.opacity?t.style.opacity=n:t.style.filter="alpha(opacity:"+(100*n|0)+")"}},_camelCase:function(t){return t?t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}):t},getStyle:function(e,n){if(e=Ink.i(e),null!==e&&e.style){n="float"===n?"cssFloat":this._camelCase(n);var i=e.style[n];if(!t||i&&"auto"!==i)!i&&e.currentStyle&&(i=e.currentStyle[n],"auto"!==i||"width"!==n&&"height"!==n||(i=e["offset"+n.charAt(0).toUpperCase()+n.slice(1)]+"px"));else{var o=t(e,null);i=o?o[n]:null}if("opacity"===n)return i?parseFloat(i,10):1;if("borderTopWidth"===n||"borderBottomWidth"===n||"borderRightWidth"===n||"borderLeftWidth"===n){if("thin"===i)return"1px";if("medium"===i)return"3px";if("thick"===i)return"5px"}return"auto"===i?null:i}},setStyle:function(t,e){if(t=Ink.i(t),null!==t)if("string"==typeof e)t.style.cssText+="; "+e,-1!==e.indexOf("opacity")&&this.setOpacity(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]);else for(var n in e)e.hasOwnProperty(n)&&("opacity"===n?this.setOpacity(t,e[n]):"float"===n||"cssFloat"===n?"undefined"==typeof t.style.styleFloat?t.style.cssFloat=e[n]:t.style.styleFloat=e[n]:t.style[n]=e[n])},show:function(t,e){t=Ink.i(t),null!==t&&(t.style.display=e||"")},hide:function(t){t=Ink.i(t),null!==t&&(t.style.display="none")},showHide:function(t,e){t=Ink.i(t),t&&(t.style.display=e?"":"none")},toggle:function(t,e){t=Ink.i(t),null!==t&&("undefined"!=typeof e?e===!0?this.show(t):this.hide(t):"none"===this.getStyle(t,"display").toLowerCase()?this.show(t):this.hide(t))},_getRefTag:function(t){if(t.firstElementChild)return t.firstElementChild;for(var e=t.firstChild;e;e=e.nextSibling)if(1===e.nodeType)return e;return null},appendStyleTag:function(t,e,n){n=Ink.extendObj({type:"text/css",force:!1},n||{});var i,o,r=document.getElementsByTagName("style"),s=!1,a=!0;for(i=0,o=r.length;o>i;i++)s=r[i].innerHTML,s.indexOf(t)>=0&&(a=!1);if(a){var l=document.createElement("style"),h=document.getElementsByTagName("head")[0],u=!1,c="";l.type=n.type,c+=t+" {",c+=e,c+="} ","undefined"!=typeof l.styleSheet?l.styleSheet.cssText=c:l.appendChild(document.createTextNode(c)),n.force?h.appendChild(l):(u=this._getRefTag(h),u&&h.insertBefore(l,u))}},appendStylesheet:function(t,e){e=Ink.extendObj({media:"screen",type:"text/css",force:!1},e||{});var n,i=document.createElement("link"),o=document.getElementsByTagName("head")[0];i.media=e.media,i.type=e.type,i.href=t,i.rel="Stylesheet",e.force?o.appendChild(i):(n=this._getRefTag(o),n&&o.insertBefore(i,n))},_loadingCSSFiles:{},_loadedCSSFiles:{},appendStylesheetCb:function(t,e){if(!t)return e(t);if(this._loadedCSSFiles[t])return e(t);var n=this._loadingCSSFiles[t];if(n)return n.push(e);this._loadingCSSFiles[t]=[e];var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t;var o=document.getElementsByTagName("head")[0];o.appendChild(i);var r=document.createElement("img");r.onerror=Ink.bindEvent(function(t,e){var n=e;this._loadedCSSFiles[n]=!0;for(var i=this._loadingCSSFiles[n],o=0,r=i.length;r>o;++o)i[o](n);delete this._loadingCSSFiles[n]},this,t),r.src=t},decToHex:function(t){var e=function(t){return 1===t.length&&(t="0"+t),t=t.toUpperCase()};if("object"==typeof t){var n=e(parseInt(t.r,10).toString(16)),i=e(parseInt(t.g,10).toString(16)),o=e(parseInt(t.b,10).toString(16));return n+i+o}t+="";var r=t.match(/\((\d+),\s?(\d+),\s?(\d+)\)/);return null!==r?e(parseInt(r[1],10).toString(16))+e(parseInt(r[2],10).toString(16))+e(parseInt(r[3],10).toString(16)):e(parseInt(t,10).toString(16))},hexToDec:function(t){return 0===t.indexOf("#")&&(t=t.substr(1)),6===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16)}:3===t.length?{r:parseInt(t.charAt(0)+t.charAt(0),16),g:parseInt(t.charAt(1)+t.charAt(1),16),b:parseInt(t.charAt(2)+t.charAt(2),16)}:t.length<=2?parseInt(t,16):void 0},getPropertyFromStylesheet:function(t,e){var n=this.getRuleFromStylesheet(t);return n?n.style[e]:null},getPropertyFromStylesheet2:function(t,e){for(var n,i=this.getRulesFromStylesheet(t),o=0,r=i.length;r>o;o++)if(n=i[o].style[e],null!==n&&void 0!==n)return n;return null},getRuleFromStylesheet:function(t){var e,n,i,o,r,s=document.styleSheets;if(!s)return null;for(var a=0,l=document.styleSheets.length;l>a;++a){if(e=document.styleSheets[a],n=e.rules?e.rules:e.cssRules,!n)return null;for(i=0,o=n.length;o>i;++i)if(r=n[i],r.selectorText&&r.selectorText===t)return r}return null},getRulesFromStylesheet:function(t){var e,n,i,o,r,s=[],a=document.styleSheets;if(!a)return s;for(var l=0,h=document.styleSheets.length;h>l;++l){if(e=document.styleSheets[l],n=e.rules?e.rules:e.cssRules,!n)return null;for(i=0,o=n.length;o>i;++i)r=n[i],r.selectorText&&r.selectorText===t&&s.push(r)}return s},getPropertiesFromRule:function(t){var e,n,i,o=this.getRuleFromStylesheet(t),r={};o=o.style.cssText;var s,a,l,h,u=o.split(";");for(n=0,i=u.length;i>n;++n)" "===u[n].charAt(0)&&(u[n]=u[n].substring(1)),s=u[n].split(":"),e=this._camelCase(s[0].toLowerCase()),a=s[1],a&&(a=a.substring(1),"padding"===e||"margin"===e||"borderWidth"===e?("borderWidth"===e?(l="border",h="Width"):(l=e,h=""),-1!==a.indexOf(" ")?(a=a.split(" "),r[l+"Top"+h]=a[0],r[l+"Bottom"+h]=a[0],r[l+"Left"+h]=a[1],r[l+"Right"+h]=a[1]):(r[l+"Top"+h]=a,r[l+"Bottom"+h]=a,r[l+"Left"+h]=a,r[l+"Right"+h]=a)):"borderRadius"===e?-1!==a.indexOf(" ")?(a=a.split(" "),r.borderTopLeftRadius=a[0],r.borderBottomRightRadius=a[0],r.borderTopRightRadius=a[1],r.borderBottomLeftRadius=a[1]):(r.borderTopLeftRadius=a,r.borderTopRightRadius=a,r.borderBottomLeftRadius=a,r.borderBottomRightRadius=a):r[e]=a);return r},changeFontSize:function(t,e,n,i,o){var r=this;Ink.requireModules(["Ink.Dom.Selector_1"],function(s){var a;if("string"!=typeof t?a="1st argument must be a CSS selector rule.":"number"!=typeof e?a="2nd argument must be a number.":void 0!==n&&"+"!==n&&"*"!==n?a='3rd argument must be one of "+", "*".':void 0!==i&&("number"!=typeof i||0>=i)?a="4th argument must be a positive number.":void 0!==o&&("number"!=typeof o||o>o)&&(a="5th argument must be a positive number greater than minValue."),a)throw new TypeError(a);var l,h,u=s.select(t);void 0===i&&(i=1),n="*"===n?function(t,e){return t*e}:function(t,e){return t+e};for(var c=0,d=u.length;d>c;++c)h=u[c],l=parseFloat(r.getStyle(h,"fontSize")),l=n(l,e),i>l||"number"==typeof o&&l>o||(h.style.fontSize=l+"px")})}};return e}),Ink.createModule("Ink.Dom.Element",1,[],function(){"use strict";function t(t){var e={};try{e=t.getBoundingClientRect()}catch(n){e={top:t.offsetTop,left:t.offsetLeft}}return e}var e="function"==typeof document.createRange&&"function"==typeof window.Range.prototype.createContextualFragment,n="Ink.Dom.Element tbody: "+Math.random(),i=function(){var t=document.createElement("div");return t.innerHTML="<table>",0!==t.getElementsByTagName("tbody").length}(),o={isDOMElement:function(t){return null!==t&&"object"==typeof t&&"nodeType"in t&&1===t.nodeType},get:function(t){return"undefined"!=typeof t?"string"==typeof t?document.getElementById(t):t:null},create:function(t,e){var n=document.createElement(t);if(e)for(var i in e)e.hasOwnProperty(i)&&(i in o?o[i](n,e[i]):"className"===i||"class"===i?n.className=e.className||e["class"]:n.setAttribute(i,e[i]));return n},remove:function(t){t=Ink.i(t);var e;t&&(e=t.parentNode)&&e.removeChild(t)},scrollTo:function(t){if(t=o.get(t)){if(t.scrollIntoView)return t.scrollIntoView();var e={},n=0,i=0;do n+=t.offsetTop||0,i+=t.offsetLeft||0,t=t.offsetParent;while(t);e={x:i,y:n},window.scrollTo(e.x,e.y)}},offsetTop:function(t){return o.offset(t)[1]},offsetLeft:function(t){return o.offset(t)[0]},positionedOffset:function(t){var e=0,n=0;t=o.get(t);do if(e+=t.offsetTop||0,n+=t.offsetLeft||0,t=t.offsetParent){if("body"===t.tagName.toLowerCase())break;var i=t.style.position;if(!i&&t.currentStyle&&(i=t.currentStyle.position),(!i||"auto"===i)&&"undefined"!=typeof getComputedStyle){var r=getComputedStyle(t,null);i=r?r.position:null}if("relative"===i||"absolute"===i)break}while(t);return[n,e]},offset:function(e){e=Ink.i(e);var n=[0,0],i=e.ownerDocument,o=i.documentElement,r=t(e),s=i.body,a=o.clientTop||s.clientTop||0,l=o.clientLeft||s.clientLeft||0,h=i.pageYOffset||o.scrollTop||s.scrollTop,u=i.pageXOffset||o.scrollLeft||s.scrollLeft,c=r.top+h-a,d=r.left+u-l;return n=[d,c]},scroll:function(t){return t=t?Ink.i(t):document.body,[window.pageXOffset?window.pageXOffset:t.scrollLeft,window.pageYOffset?window.pageYOffset:t.scrollTop]},_getPropPx:function(t,e){var n,i,o=t.getPropertyValue?t.getPropertyValue(e):t[e];return o?(i=o.indexOf("px"),n=-1===i?0:parseFloat(o,10)):n=0,n},offset2:function(t){return o.offset(t)},hasAttribute:function(t,e){return t=Ink.i(t),t.hasAttribute?t.hasAttribute(e):!!t.getAttribute(e)},insertAfter:function(t,e){(e=o.get(e))&&(null!==e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t))},insertBefore:function(t,e){(e=o.get(e))&&e.parentNode.insertBefore(t,e)},insertTop:function(t,e){(e=o.get(e))&&(e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t))},insertBottom:function(t,e){e=Ink.i(e),e.appendChild(t)},textContent:function(t){t=Ink.i(t);var e,n,i,r;switch(t&&t.nodeType){case 9:return o.textContent(t.documentElement||t.body&&t.body.parentNode||t.body);case 1:if(e="textContent"in t?t.textContent:t.innerText,"undefined"!=typeof e)return e;
case 11:if(e=t.textContent,"undefined"!=typeof e)return e;if(t.firstChild===t.lastChild)return o.textContent(t.firstChild);for(e=[],i=t.childNodes,n=0,r=i.length;r>n;++n)e.push(o.textContent(i[n]));return e.join("");case 3:case 4:return t.nodeValue}return""},setTextContent:function(t,e){switch(t=Ink.i(t),t&&t.nodeType){case 1:if("innerText"in t){t.innerText=e;break}case 11:if("textContent"in t){t.textContent=e;break}case 9:for(;t.firstChild;)t.removeChild(t.firstChild);if(""!==e){var n=t.ownerDocument||t;t.appendChild(n.createTextNode(e))}break;case 3:case 4:t.nodeValue=e}},isLink:function(t){var e=t&&1===t.nodeType&&(/^a|area$/i.test(t.tagName)||t.hasAttributeNS&&t.hasAttributeNS("http://www.w3.org/1999/xlink","href"));return!!e},isAncestorOf:function(t,e){if(!e||!t)return!1;if(e.compareDocumentPosition)return 0!==(16&t.compareDocumentPosition(e));for(;e=e.parentNode;)if(e===t)return!0;return!1},descendantOf:function(t,e){return t!==e&&o.isAncestorOf(t,e)},firstElementChild:function(t){if(!t)return null;if("firstElementChild"in t)return t.firstElementChild;for(var e=t.firstChild;e&&1!==e.nodeType;)e=e.nextSibling;return e},lastElementChild:function(t){if(!t)return null;if("lastElementChild"in t)return t.lastElementChild;for(var e=t.lastChild;e&&1!==e.nodeType;)e=e.previousSibling;return e},nextElementSibling:function(t){var e=null;if(!t)return e;if("nextElementSibling"in t)return t.nextElementSibling;for(e=t.nextSibling;e&&1!==e.nodeType;)e=e.nextSibling;return e},previousElementSibling:function(t){var e=null;if(!t)return e;if("previousElementSibling"in t)return t.previousElementSibling;for(e=t.previousSibling;e&&1!==e.nodeType;)e=e.previousSibling;return e},elementWidth:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.offsetWidth},elementHeight:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.offsetHeight},elementLeft:function(t){return o.offsetLeft(t)},elementTop:function(t){return o.offsetTop(t)},elementDimensions:function(t){return t=Ink.i(t),[t.offsetWidth,t.offsetHeight]},outerDimensions:function(e){var n=t(e),i=Ink.getModule("Ink.Dom.Css_1"),o=Ink.bindMethod(i,"getStyle",e);return[n.right-n.left+parseFloat(o("marginLeft")||0)+parseFloat(o("marginRight")||0),n.bottom-n.top+parseFloat(o("marginTop")||0)+parseFloat(o("marginBottom")||0)]},inViewport:function(e,n){var i=t(Ink.i(e));return"boolean"==typeof n&&(n={partial:n,margin:0}),n=Ink.extendObj({partial:!1,margin:0},n||{}),n.partial?i.bottom+n.margin>0&&i.left-n.margin<o.viewportWidth()&&i.top-n.margin<o.viewportHeight()&&i.right+n.margin>0:i.top+n.margin>0&&i.right-n.margin<o.viewportWidth()&&i.bottom-n.margin<o.viewportHeight()&&i.left+n.margin>0},isHidden:function(t){var e=t.offsetWidth,n=t.offsetHeight,i="tr"===t.tagName.toLowerCase(),o=Ink.getModule("Ink.Dom.Css_1");return 0!==e||0!==n||i?0===e||0===n||i?"none"===o.getStyle(t,"display").toLowerCase():!1:!0},isVisible:function(t){return!this.isHidden(t)},clonePosition:function(t,e){var n=o.offset(e);return t.style.left=n[0]+"px",t.style.top=n[1]+"px",t},ellipsizeText:function(t){(t=Ink.i(t))&&(t.style.overflow="hidden",t.style.whiteSpace="nowrap",t.style.textOverflow="ellipsis")},findUpwardsHaving:function(t,e){for(;t&&1===t.nodeType;){if(e(t))return t;t=t.parentNode}return!1},findUpwardsByClass:function(t,e){var n=new RegExp("(^|\\s)"+e+"(\\s|$)"),i=function(t){var e=t.className;return e&&n.test(e)};return o.findUpwardsHaving(t,i)},findUpwardsByTag:function(t,e){e=e.toUpperCase();var n=function(t){return t.nodeName&&t.nodeName.toUpperCase()===e};return o.findUpwardsHaving(t,n)},findUpwardsById:function(t,e){var n=function(t){return t.id===e};return o.findUpwardsHaving(t,n)},findUpwardsBySelector:function(t,e){var n=Ink.getModule("Ink.Dom.Selector","1");if(!n)throw new Error("This method requires Ink.Dom.Selector");var i=function(t){return n.matchesSelector(t,e)};return o.findUpwardsHaving(t,i)},getChildrenText:function(t,e){var n,i,r,s=t.childNodes,a=s.length,l="";if(!t)return l;for(i=0;a>i;++i)n=s[i],n&&3===n.nodeType&&(r=o._trimString(String(n.data)),r.length>0?(l+=r,e&&t.removeChild(n)):t.removeChild(n));return l},_trimString:function(t){return String.prototype.trim?t.trim():t.replace(/^\s*/,"").replace(/\s*$/,"")},getSelectValues:function(t){for(var e=Ink.i(t),n=[],i=0;i<e.options.length;++i)n.push(e.options[i].value);return n},_normalizeData:function(t){for(var e,n=[],i=0,o=t.length;o>i;++i)e=t[i],e instanceof Array?1===e.length&&e.push(e[0]):e=[e,e],n.push(e);return n},fillSelect:function(t,e,n,i){var r=Ink.i(t);if(r){r.innerHTML="";var s,a;n||(a=document.createElement("option"),a.setAttribute("value",""),r.appendChild(a)),e=o._normalizeData(e);for(var l=0,h=e.length;h>l;++l)s=e[l],a=document.createElement("option"),a.setAttribute("value",s[0]),s.length>2&&a.setAttribute("extra",s[2]),a.appendChild(document.createTextNode(s[1])),s[0]===i&&a.setAttribute("selected","selected"),r.appendChild(a)}},fillRadios:function(t,e,n,i,r,s){t=Ink.i(t);var a=document.createElement("span");o.insertAfter(a,t),n=o._normalizeData(n);var l,h;i||(h=document.createElement("input"),h.setAttribute("type","radio"),h.setAttribute("name",e),h.setAttribute("value",""),a.appendChild(h),s&&a.appendChild(document.createElement(s)));for(var u=0;u<n.length;++u)l=n[u],h=document.createElement("input"),h.setAttribute("type","radio"),h.setAttribute("name",e),h.setAttribute("value",l[0]),a.appendChild(h),a.appendChild(document.createTextNode(l[1])),s&&a.appendChild(document.createElement(s)),l[0]===r&&(h.checked=!0);return a},fillChecks:function(t,e,n,i,r){t=Ink.i(t);var s=document.createElement("span");o.insertAfter(s,t),n=o._normalizeData(n),"]"!==e.substring(e.length-1)&&(e+="[]");for(var a,l,h=0;h<n.length;++h)a=n[h],l=document.createElement("input"),l.setAttribute("type","checkbox"),l.setAttribute("name",e),l.setAttribute("value",a[0]),s.appendChild(l),s.appendChild(document.createTextNode(a[1])),r&&s.appendChild(document.createElement(r)),a[0]===i&&(l.checked=!0);return s},parentIndexOf:function(t,e){if(e||(e=t,t=t.parentNode),!t)return!1;for(var n=0,i=t.children.length;i>n;++n)if(t.children[n]===e)return n;return!1},nextSiblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=o.parentIndexOf(t.parentNode,t),r=++i,s=n.length;s>r;r++)e.push(n[r]);return e}return[]},previousSiblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=o.parentIndexOf(t.parentNode,t),r=0,s=i;s>r;r++)e.push(n[r]);return e}return[]},siblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=0,o=n.length;o>i;i++)t!==n[i]&&e.push(n[i]);return e}return[]},childElementCount:function(t){return t=Ink.i(t),"childElementCount"in t?t.childElementCount:t?o.siblings(t).length+1:0},_wrapElements:{TABLE:function(t,e){return t.innerHTML=i?"<table>"+e+"<tbody><tr><td>"+n+"</tr></td></tbody></table>":"<table>"+e+"</table>",t.firstChild},TBODY:function(t,e){return t.innerHTML="<table><tbody>"+e+"</tbody></table>",t.firstChild.getElementsByTagName("tbody")[0]},THEAD:function(t,e){return t.innerHTML="<table><thead>"+e+"</thead><tbody></tbody></table>",t.firstChild.getElementsByTagName("thead")[0]},TFOOT:function(t,e){return t.innerHTML="<table><tfoot>"+e+"</tfoot><tbody></tbody></table>",t.firstChild.getElementsByTagName("tfoot")[0]},TR:function(t,e){return t.innerHTML="<table><tbody><tr>"+e+"</tr></tbody></table>",t.firstChild.firstChild.firstChild}},_getWrapper:function(t,e){var r=t.nodeName&&t.nodeName.toUpperCase(),s=document.createElement("div"),a=o._wrapElements[r];if(!a)return s.innerHTML=e,s;if(s=a(s,e),i&&"TABLE"===r)for(var l=s.getElementsByTagName("td"),h=0,u=l.length;u>h;h++)if(l[h].innerHTML===n){var c=l[h].parentNode.parentNode;c.parentNode.removeChild(c)}return s},appendHTML:function(t,e){if(t=Ink.i(t),null!==t)for(var n=o._getWrapper(t,e);n.firstChild;)t.appendChild(n.firstChild)},prependHTML:function(t,e){if(t=Ink.i(t),null!==t)for(var n=o._getWrapper(t,e);n.lastChild;)t.insertBefore(n.lastChild,t.firstChild)},setHTML:function(t,e){if(t=Ink.i(t),null!==t)try{t.innerHTML=e}catch(n){o.clear(t),o.appendHTML(t,e)}},wrap:function(t,e){t=Ink.i(t),e=Ink.i(e);var n=t.nextSibling,i=t.parentNode;return e.appendChild(t),null!==n?i.insertBefore(e,n):i.appendChild(e),e},unwrap:function(t,e){t=Ink.i(t);var n;n="string"==typeof e?o.findUpwardsBySelector(t,e):"object"==typeof e&&e.tagName?o.findUpwardsHaving(t,function(t){return t===e}):t.parentNode,n&&n.parentNode&&o.insertBefore(t,n)},replace:function(t,e){t=Ink.i(t),null!==t&&t.parentNode.replaceChild(e,t)},removeTextNodeChildren:function(t){if(t=Ink.i(t),null!==t){var e,n,i=t;for(t=t.firstChild;t;)n=3===t.nodeType,e=t,t=t.nextSibling,n&&i.removeChild(e)}},htmlToFragment:e?function(t){var e;return"string"!=typeof t?document.createDocumentFragment():(e=document.createRange(),e.selectNode(document.body),e.createContextualFragment(t))}:function(t){var e,n,i=document.createDocumentFragment();if("string"!=typeof t)return i;for(e=document.createElement("div"),e.innerHTML=t;n=e.firstChild;)i.appendChild(n);return i},_camelCase:function(t){return t?t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}):t},data:function(t){var e;if("object"!=typeof t&&"string"!=typeof t)throw"[Ink.Dom.Element.data] :: Invalid selector defined";if("object"==typeof t)e=t;else{var n=Ink.getModule("Ink.Dom.Selector",1);if(!n)throw"[Ink.Dom.Element.data] :: this method requires Ink.Dom.Selector - v1";if(e=n.select(t),e.length<=0)throw"[Ink.Dom.Element.data] :: Can't find any element with the specified selector";e=e[0]}var i,r,s,a={},l=e.attributes||[];if(l)for(var h=0,u=l.length;u>h;++h)i=l[h],r=i.name,s=i.value,r&&0===r.indexOf("data-")&&(a[o._camelCase(r.replace("data-",""))]=s);return a},clear:function(t,e){for(;e=t.lastChild;)t.removeChild(e)},moveCursorTo:function(t,e){if(t=Ink.i(t),null!==t)if(t.setSelectionRange)t.setSelectionRange(e,e);else{var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}},pageWidth:function(){var t;t=window.innerWidth&&window.scrollMaxX?window.innerWidth+window.scrollMaxX:document.body.scrollWidth>document.body.offsetWidth?document.body.scrollWidth:document.body.offsetWidth;var e;return window.self.innerWidth?e=document.documentElement.clientWidth?document.documentElement.clientWidth:window.self.innerWidth:document.documentElement&&document.documentElement.clientWidth?e=document.documentElement.clientWidth:document.body&&(e=document.body.clientWidth),e>t?t:e},pageHeight:function(){var t;t=window.innerHeight&&window.scrollMaxY?window.innerHeight+window.scrollMaxY:document.body.scrollHeight>document.body.offsetHeight?document.body.scrollHeight:document.body.offsetHeight;var e;return window.self.innerHeight?e=window.self.innerHeight:document.documentElement&&document.documentElement.clientHeight?e=document.documentElement.clientHeight:document.body&&(e=document.body.clientHeight),e>t?e:t},viewportWidth:function(){return"undefined"!=typeof window.innerWidth?window.innerWidth:document.documentElement&&"undefined"!=typeof document.documentElement.offsetWidth?document.documentElement.offsetWidth:void 0},viewportHeight:function(){return"undefined"!=typeof window.innerHeight?window.innerHeight:document.documentElement&&"undefined"!=typeof document.documentElement.offsetHeight?document.documentElement.offsetHeight:void 0},scrollWidth:function(){return"undefined"!=typeof window.self.pageXOffset?window.self.pageXOffset:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft},scrollHeight:function(){return"undefined"!=typeof window.self.pageYOffset?window.self.pageYOffset:"undefined"!=typeof document.body&&"undefined"!=typeof document.body.scrollTop&&"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollTop?document.body.scrollTop||document.documentElement.scrollTop:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}};return o}),Ink.createModule("Ink.Dom.Event",1,[],function(){var t=function(t,e,n){return n()}("bean",this,function(t,e){t=t||"bean",e=e||this;var n,i=window,o=e[t],r=/[^\.]*(?=\..*)\.|.*/,s=/\..*/,a="addEventListener",l="removeEventListener",h=document||{},u=h.documentElement||{},c=u[a],d=c?a:"attachEvent",p={},f=Array.prototype.slice,m=function(t,e){return t.split(e||" ")},_=function(t){return"string"==typeof t},g=function(t){return"function"==typeof t},v="click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll ",y="show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinputreadystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ",b=function(t,e,n){for(n=0;n<e.length;n++)e[n]&&(t[e[n]]=1);return t}({},m(v+(c?y:""))),k=function(){var t="compareDocumentPosition"in u?function(t,e){return e.compareDocumentPosition&&16===(16&e.compareDocumentPosition(t))}:"contains"in u?function(t,e){return e=9===e.nodeType||e===window?u:e,e!==t&&e.contains(t)}:function(t,e){for(;t=t.parentNode;)if(t===e)return 1;return 0},e=function(e){var n=e.relatedTarget;return n?n!==this&&"xul"!==n.prefix&&!/document/.test(this.toString())&&!t(n,this):null==n};return{mouseenter:{base:"mouseover",condition:e},mouseleave:{base:"mouseout",condition:e},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),C=function(){var t=m("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName path"),e=t.concat(m("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement movementX movementY region")),n=e.concat(m("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),o=t.concat(m("char charCode key keyCode keyIdentifier keyLocation location isComposing code")),r=t.concat(m("data")),s=t.concat(m("touches targetTouches changedTouches scale rotation")),a=t.concat(m("data origin source")),l=t.concat(m("state")),c=/over|out/,d=[{reg:/key/i,fix:function(t,e){return e.keyCode=t.keyCode||t.which,o}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(t,n,i){return n.rightClick=3===t.which||2===t.button,n.pos={x:0,y:0},t.pageX||t.pageY?(n.clientX=t.pageX,n.clientY=t.pageY):(t.clientX||t.clientY)&&(n.clientX=t.clientX+h.body.scrollLeft+u.scrollLeft,n.clientY=t.clientY+h.body.scrollTop+u.scrollTop),c.test(i)&&(n.relatedTarget=t.relatedTarget||t[("mouseover"==i?"from":"to")+"Element"]),e}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return n}},{reg:/^text/i,fix:function(){return r}},{reg:/^touch|^gesture/i,fix:function(){return s}},{reg:/^message$/i,fix:function(){return a}},{reg:/^popstate$/i,fix:function(){return l}},{reg:/.*/,fix:function(){return t}}],p={},f=function(t,e,n){if(arguments.length&&(t=t||((e.ownerDocument||e.document||e).parentWindow||i).event,this.originalEvent=t,this.isNative=n,this.isBean=!0,t)){var o,r,s,a,l,h=t.type,u=t.target||t.srcElement;if(this.target=u&&3===u.nodeType?u.parentNode:u,n){if(l=p[h],!l)for(o=0,r=d.length;r>o;o++)if(d[o].reg.test(h)){p[h]=l=d[o].fix;break}for(a=l(t,this,h),o=a.length;o--;)!((s=a[o])in this)&&s in t&&(this[s]=t[s])}}};return f.prototype.preventDefault=function(){if(this.originalEvent.preventDefault)this.originalEvent.preventDefault();else try{this.originalEvent.returnValue=!1}catch(t){}},f.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},f.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},f.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},f.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},f.prototype.clone=function(t){var e=new f(this,this.element,this.isNative);return e.currentTarget=t,e},f}(),I=function(t,e){return c||e||t!==h&&t!==i?t:u},w=function(){var t=function(t,e,n,i){var o=function(n,o){return e.apply(t,i?f.call(o,n?0:1).concat(i):o)},r=function(n,i){return e.__beanDel?e.__beanDel.ft(n.target,t):i},s=n?function(t){var e=r(t,this);return n.apply(e,arguments)?(t&&(t.currentTarget=e),o(t,arguments)):void 0}:function(t){return e.__beanDel&&(t=t.clone(r(t))),o(t,arguments)};return s.__beanDel=e.__beanDel,s},e=function(e,n,i,o,r,s,a){var l,h=k[n];"unload"==n&&(i=T(N,e,n,i,o)),h&&(h.condition&&(i=t(e,i,h.condition,s)),n=h.base||n),this.isNative=l=b[n]&&!!e[d],this.customType=!c&&!l&&n,this.element=e,this.type=n,this.original=o,this.namespaces=r,this.eventType=c||l?n:"propertychange",this.target=I(e,l),this[d]=!!this.target[d],this.root=a,this.handler=t(e,i,null,s)};return e.prototype.inNamespaces=function(t){var e,n,i=0;if(!t)return!0;if(!this.namespaces)return!1;for(e=t.length;e--;)for(n=this.namespaces.length;n--;)t[e]==this.namespaces[n]&&i++;return t.length===i},e.prototype.matches=function(t,e,n){return!(this.element!==t||e&&this.original!==e||n&&this.handler!==n)},e}(),E=function(){var t={},e=function(n,i,o,r,s,a){var l=s?"r":"$";if(i&&"*"!=i){var h,u=0,c=t[l+i],d="*"==n;if(!c)return;for(h=c.length;h>u;u++)if((d||c[u].matches(n,o,r))&&!a(c[u],c,u,i))return}else for(var p in t)p.charAt(0)==l&&e(n,p.substr(1),o,r,s,a)},n=function(e,n,i,o){var r,s=t[(o?"r":"$")+n];if(s)for(r=s.length;r--;)if(!s[r].root&&s[r].matches(e,i,null))return!0;return!1},i=function(t,n,i,o){var r=[];return e(t,n,i,null,o,function(t){return r.push(t)}),r},o=function(e){var n=!e.root&&!this.has(e.element,e.type,null,!1),i=(e.root?"r":"$")+e.type;return(t[i]||(t[i]=[])).push(e),n},r=function(n){e(n.element,n.type,null,n.handler,n.root,function(e,n,i){return n.splice(i,1),e.removed=!0,0===n.length&&delete t[(e.root?"r":"$")+e.type],!1})},s=function(){var e,n=[];for(e in t)"$"==e.charAt(0)&&(n=n.concat(t[e]));return n};return{has:n,get:i,put:o,del:r,entries:s}}(),S=function(t){n=arguments.length?t:h.querySelectorAll?function(t,e){return e.querySelectorAll(t)}:function(){throw new Error("Bean: No selector engine installed")}},x=function(t,e){if(c||!e||!t||t.propertyName=="_on"+e){var n=E.get(this,e||t.type,null,!1),i=n.length,o=0;for(t=new C(t,this,!0),e&&(t.type=e);i>o&&!t.isImmediatePropagationStopped();o++)n[o].removed||n[o].handler.call(this,t)}},D=c?function(t,e,n){t[n?a:l](e,x,!1)}:function(t,e,n,i){var o;n?(E.put(o=new w(t,i||e,function(e){x.call(t,e,i)},x,null,null,!0)),i&&null==t["_on"+i]&&(t["_on"+i]=0),o.target.attachEvent("on"+o.eventType,o.handler)):(o=E.get(t,i||e,x,!0)[0],o&&(o.target.detachEvent("on"+o.eventType,o.handler),E.del(o)))},T=function(t,e,n,i,o){return function(){i.apply(this,arguments),t(e,n,o)}},N=function(t,e,n,i){var o,r,a=e&&e.replace(s,""),l=E.get(t,a,null,!1),h={};for(o=0,r=l.length;r>o;o++)n&&l[o].original!==n||!l[o].inNamespaces(i)||(E.del(l[o]),!h[l[o].eventType]&&l[o][d]&&(h[l[o].eventType]={t:l[o].eventType,c:l[o].type}));for(o in h)h.hasOwnProperty(o)&&(E.has(t,h[o].t,null,!1)||D(t,h[o].t,!1,h[o].c))},O=function(t,e){var i=function(e,i){for(var o,r=_(t)?n(t,i):t;e&&e!==i;e=e.parentNode)for(o=r.length;o--;)if(r[o]===e)return e},o=function(t){var n=i(t.target,this);n&&e.apply(n,arguments)};return o.__beanDel={ft:i,selector:t},o},M=c?function(t,e,n){var o=h.createEvent(t?"HTMLEvents":"UIEvents");o[t?"initEvent":"initUIEvent"](e,!0,!0,i,1),n.dispatchEvent(o)}:function(t,e,n){n=I(n,t),t?n.fireEvent("on"+e,h.createEventObject()):n["_on"+e]++},A=function(t,e,n){var i,o,a,l,h=_(e);if(h&&e.indexOf(" ")>0){for(e=m(e),l=e.length;l--;)A(t,e[l],n);return t}if(o=h&&e.replace(s,""),o&&k[o]&&(o=k[o].base),!e||h)(a=h&&e.replace(r,""))&&(a=m(a,".")),N(t,o,n,a);else if(g(e))N(t,null,e);else for(i in e)e.hasOwnProperty(i)&&A(t,i,e[i]);return t},P=function(t,e,i,o){var a,l,h,u,c,_,v;if(void 0!==i||"object"!=typeof e){for(g(i)?(c=f.call(arguments,3),o=a=i):(a=o,c=f.call(arguments,4),o=O(i,a,n)),h=m(e),this===p&&(o=T(A,t,e,o,a)),u=h.length;u--;)v=E.put(_=new w(t,h[u].replace(s,""),o,a,m(h[u].replace(r,""),"."),c,!1)),_[d]&&v&&D(t,_.eventType,!0,_.customType);return t}for(l in e)e.hasOwnProperty(l)&&P.call(this,t,l,e[l])},L=function(t,e,n,i){return P.apply(null,_(n)?[t,n,e,i].concat(arguments.length>3?f.call(arguments,5):[]):f.call(arguments))},U=function(){return P.apply(p,arguments)},F=function(t,e,n){var i,o,a,l,h,u=m(e);for(i=u.length;i--;)if(e=u[i].replace(s,""),(l=u[i].replace(r,""))&&(l=m(l,".")),l||n||!t[d])for(h=E.get(t,e,null,!1),n=[!1].concat(n),o=0,a=h.length;a>o;o++)h[o].inNamespaces(l)&&h[o].handler.apply(t,n);else M(b[e],e,t);return t},B=function(t,e,n){for(var i,o,r=E.get(e,n,null,!1),s=r.length,a=0;s>a;a++)r[a].original&&(i=[t,r[a].type],(o=r[a].handler.__beanDel)&&i.push(o.selector),i.push(r[a].original),P.apply(null,i));return t},R={on:P,add:L,one:U,off:A,remove:A,clone:B,fire:F,Event:C,setSelectorEngine:S,noConflict:function(){return e[t]=o,this}};if(i.attachEvent){var H=function(){var t,e=E.entries();for(t in e)e[t].type&&"unload"!==e[t].type&&A(e[t].element,e[t].type);i.detachEvent("onunload",H),i.CollectGarbage&&i.CollectGarbage()};i.attachEvent("onunload",H)}return S(Ink.ss),R}),e={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_SPACE:32,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,throttle:function(t,e,n){function i(s){var a=+new Date,l=a-r;if(n.preventDefault&&s&&"function"==typeof s.preventDefault&&s.preventDefault(),l>=e)return r=a,t.apply("bind"in n?n.bind:this,[].slice.call(arguments));var h=this,u=[].slice.call(arguments);o&&clearTimeout(o),o=setTimeout(function(){return o=null,i.apply(h,u)},e-l)}e=e||0,n=n||{};var o,r=0;return i},element:function(t){var e=t.delegationTarget||t.target||"mouseout"===t.type&&t.fromElement||"mouseleave"===t.type&&t.fromElement||"mouseover"===t.type&&t.toElement||"mouseenter"===t.type&&t.toElement||t.srcElement||null;return!e||3!==e.nodeType&&4!==e.nodeType?e:e.parentNode},relatedTarget:function(t){var e=t.relatedTarget||"mouseout"===t.type&&t.toElement||"mouseleave"===t.type&&t.toElement||"mouseover"===t.type&&t.fromElement||"mouseenter"===t.type&&t.fromElement||null;return!e||3!==e.nodeType&&4!==e.nodeType?e:e.parentNode},findElement:function(t,e,n){for(var i=this.element(t);;){if(i.nodeName.toLowerCase()===e.toLowerCase())return i;if(i=i.parentNode,!i)return n?!1:document;if(!i.parentNode)return n?!1:document}},observe:function(t,e,n,i){return t=Ink.i(t),t?(t.addEventListener?t.addEventListener(e,n,!!i):t.attachEvent("on"+e,n=Ink.bind(n,t)),n):void 0},observeOnce:function(t,n,i,o){var r=function(){return e.stopObserving(t,n,s),i.apply(this,arguments)},s=e.observe(t,n,r,o);return s},observeMulti:function(t,e,n,i){if("string"==typeof t?t=Ink.ss(t):t&&1===t.nodeType&&(t=[t]),!t[0])return!1;for(var o=0,r=t.length;r>o;o++)this.observe(t[o],e,n,i);return n},observeDelegated:function(t,n,i,o){return e.observe(t,n,function(n){var r=e.element(n);if(r&&r!==t)for(var s=r;s!==t&&s!==document&&s;){if(Ink.Dom.Selector_1.matchesSelector(s,i))return n.delegationTarget=s,o(n);s=s.parentNode}})},stopObserving:function(t,e,n,i){t=Ink.i(t),t&&(t.removeEventListener?t.removeEventListener(e,n,!!i):t.detachEvent("on"+e,n))},stop:function(t){null!==t.cancelBubble&&(t.cancelBubble=!0),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),window.attachEvent&&(t.returnValue=!1),null!==t.cancel&&(t.cancel=!0)},stopPropagation:function(t){null!==t.cancelBubble&&(t.cancelBubble=!0),t.stopPropagation&&t.stopPropagation()},stopDefault:function(t){t.preventDefault&&t.preventDefault(),window.attachEvent&&(t.returnValue=!1),null!==t.cancel&&(t.cancel=!0)},pointer:function(t){return{x:this.pointerX(t),y:this.pointerY(t)}},pointerX:function(t){return t.touches&&t.touches[0]&&t.touches[0].pageX||t.pageX||t.clientX},pointerY:function(t){return t.touches&&t.touches[0]&&t.touches[0].pageY||t.pageY||t.clientY},isLeftClick:function(t){if(window.addEventListener){if(0===t.button)return!0;if("touchend"===t.type&&null===t.button)return!0}else if(1===t.button)return!0;return!1},isRightClick:function(t){return 2===t.button},isMiddleClick:function(t){return window.addEventListener?1===t.button:4===t.button},getCharFromKeyboardEvent:function(t,e){var n=t.keyCode,i=String.fromCharCode(n),o=t.shiftKey;if(n>=65&&90>=n)return"boolean"==typeof e&&(o=e),o?i:i.toLowerCase();if(n>=96&&105>=n)return String.fromCharCode(48+(n-96));switch(n){case 109:case 189:return"-";case 107:case 187:return"+"}return i},debug:function(){}};return Ink.extendObj(e,t)}),Ink.createModule("Ink.Dom.FormSerialize",1,["Ink.Util.Array_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n){"use strict";function i(n){return null!=n&&!e.isDOMElement(n)&&(t.isArray(n)||"string"!=typeof n&&"number"==typeof n.length)}function o(t){return i(t)?t:[t]}var r={serialize:function(e,n){n=n||{};var i={},o={},s=this.asPairs(e,{elements:!0,emptyArray:o,outputUnchecked:n.outputUnchecked});return null==s?s:(t.forEach(s,function(t){var e=/\[\]$/.test(t[0]),n=t[0].replace(/\[\]$/,""),s=t[1],a=t[2];s===o?i[n]=[]:r._resultsInArray(a)||e?n in i?(i[n]instanceof Array||(i[n]=[i[n]]),i[n].push(s)):i[n]=e?[s]:s:i[n]=s}),i)},asPairs:function(e,i){function o(t,e,n){a.push(i.elements?[t,e,n]:[t,e])}function s(e){var r=e.nodeName.toLowerCase(),s=(e.type+"").toLowerCase();if("select"===r&&e.multiple){var a=!1;t.forEach(n.select("option:checked",e),function(t){o(e.name,t.value,e),a=!0}),!a&&"emptyArray"in i&&o(e.name,i.emptyArray,e)}else"input"!==r||"checkbox"!==s&&"radio"!==s||!i.outputUnchecked?o(e.name,e.value,e):o(e.name,null,e)}var a=[];if(i=i||{},e=Ink.i(e)){for(var l=t.filter(e.elements,function(t){return r._isSerialized(t,i)}),h=0,u=l.length;u>h;h++)s(l[h]);return a}return null},fillIn:function(t,e){if(!(t=Ink.i(t)))return null;var n;if("object"!=typeof e||i(e)){if(!i(e))return null;n=e}else n=r._objToPairs(e);return r._fillInPairs(t,n)},_objToPairs:function(t){var e,n=[];for(var i in t)if(t.hasOwnProperty(i)){e=o(t[i]);for(var r=0,s=e.length;s>r;r++)n.push([i,e[r]]);0===s&&n.push([i,[]])}return n},_fillInPairs:function(e,n){n=t.groupBy(n,{key:function(t){return t[0].replace(/\[\]$/,"")},adjacentGroups:!0}),n=t.map(n,function(e){var n=t.reduce(e,function(t,e){return[null,t[1].concat([e[1]])]},[null,[]])[1];return[e[0][0],n]});for(var i,s,a,l=0,h=n.length;h>l;l++){if(i=n[l][0],i in e)s=e[i];else{if(!(i+"[]"in e))continue;s=e[i+"[]"],i+="[]"}s=o(s),a=n[l][1],r._fillInOne(i,s,a)}},_fillInOne:function(t,n,i){var o=n[0],s=o.nodeName.toLowerCase(),a=o.getAttribute("type");a=a&&a.toLowerCase();var l="select"===s&&e.hasAttribute(o,"multiple");if("checkbox"===a||"radio"===a)r._fillInBoolean(n,i,"checked");else if(l)r._fillInBoolean(n[0].options,i,"selected");else{n.length!==i.length&&Ink.warn("Form had "+n.length+' inputs named "'+t+'", but received '+i.length+" values.");for(var h=0,u=Math.min(n.length,i.length);u>h;h+=1)n[h].value=i[h]}},_fillInBoolean:function(e,n,i){t.forEach(e,function(e){var o=t.inArray(e.value,n);e[i]=o})},_resultsInArray:function(t){var n=t.getAttribute("type"),i=t.nodeName.toLowerCase();return"checkbox"===n||"select"===i&&e.hasAttribute(t,"multiple")},_isSerialized:function(t,n){if(n=n||{},!e.isDOMElement(t))return!1;if(!e.hasAttribute(t,"name"))return!1;var i=t.nodeName.toLowerCase();return i&&"fieldset"!==i?"checkbox"===t.type||"radio"===t.type?n.outputUnchecked?!0:!!t.checked:!0:!1}};return r}),Ink.createModule("Ink.Dom.Loaded",1,[],function(){"use strict";var t={_contexts:[],run:function(t,e){e||(e=t,t=window);for(var n,i=0,o=this._contexts.length;o>i;i++)if(this._contexts[i][0]===t){n=this._contexts[i][1];break}n||(n={cbQueue:[],win:t,doc:t.document,root:t.document.documentElement,done:!1,top:!0},n.handlers={checkState:Ink.bindEvent(this._checkState,this,n),poll:Ink.bind(this._poll,this,n)},this._contexts.push([t,n]));var r=n.doc.addEventListener;n.add=r?"addEventListener":"attachEvent",n.rem=r?"removeEventListener":"detachEvent",n.pre=r?"":"on",n.det=r?"DOMContentLoaded":"onreadystatechange",n.wet=n.pre+"load";var s=n.handlers.checkState,a=/complete|loaded/.test(n.doc.readyState)&&"about:blank"!==n.win.location.toString();if(a)setTimeout(Ink.bind(function(){e.call(n.win,"lazy")},this),0);else{n.cbQueue.push(e),n.doc[n.add](n.det,s),n.win[n.add](n.wet,s);var l=1;try{l=n.win.frameElement}catch(h){}if(!r&&n.root&&n.root.doScroll){try{n.top=!l}catch(h){}n.top&&this._poll(n)}}},_checkState:function(t,e){if(t&&("readystatechange"!==t.type||/complete|loaded/.test(e.doc.readyState))){var n="load"===t.type?e.win:e.doc;n[e.rem](e.pre+t.type,e.handlers.checkState,!1),this._ready(e)}},_poll:function(t){try{t.root.doScroll("left")}catch(e){return setTimeout(t.handlers.poll,50)}this._ready(t)},_ready:function(t){if(!t.done){t.done=!0;for(var e=0;e<t.cbQueue.length;++e)t.cbQueue[e].call(t.win);t.cbQueue=[]}}};return t}),Ink.createModule("Ink.Dom.Selector",1,[],function(){"use strict";function t(t){return fe.test(t+"")}function e(){var t,e=[];return t=function(n,i){return e.push(n+=" ")>C.cacheLength&&delete t[e.shift()],t[n]=i}}function n(t){return t[F]=!0,t}function i(t){var e=N.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e=null}}function o(t,e,n,i){var o,r,s,a,l,c,d,p,f,m;if((e?e.ownerDocument||e:B)!==N&&T(e),e=e||N,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(M&&!i){if(o=me.exec(t))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&U(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((s=o[3])&&R.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(s)),n}if(R.qsa&&!A.test(t)){if(d=!0,p=F,f=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=h(t),(d=e.getAttribute("id"))?p=d.replace(ve,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+u(c[l]);f=pe.test(t)&&e.parentNode||e,m=c.join(",")}if(m)try{return Q.apply(n,f.querySelectorAll(m)),n}catch(_){}finally{d||e.removeAttribute("id")}}}return v(t.replace(ae,"$1"),e,n,i)}function r(t,e){var n=e&&t,i=n&&(~e.sourceIndex||J)-(~t.sourceIndex||J);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function a(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function l(t){return n(function(e){return e=+e,n(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function h(t,e){var n,i,r,s,a,l,h,u=q[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],h=C.preFilter;a;){(!n||(i=le.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),l.push(r=[])),n=!1,(i=he.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(ae," ")}),a=a.slice(n.length));for(s in C.filter)!(i=de[s].exec(a))||h[s]&&!(i=h[s](i))||(n=i.shift(),r.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?o.error(t):q(t,l).slice(0)}function u(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function c(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=j++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,s){var a,l,h,u=H+" "+r;if(s){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(h=e[F]||(e[F]={}),(l=h[i])&&l[0]===u){if((a=l[1])===!0||a===k)return a===!0}else if(l=h[i]=[u],l[1]=t(e,n,s)||k,l[1]===!0)return!0}}function d(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;
return!0}:t[0]}function p(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,h=null!=e;l>a;a++)(r=t[a])&&(!n||n(r,i,o))&&(s.push(r),h&&e.push(a));return s}function f(t,e,i,o,r,s){return o&&!o[F]&&(o=f(o)),r&&!r[F]&&(r=f(r,s)),n(function(n,s,a,l){var h,u,c,d=[],f=[],m=s.length,_=n||g(e||"*",a.nodeType?[a]:a,[]),v=!t||!n&&e?_:p(_,d,t,a,l),y=i?r||(n?t:m||o)?[]:s:v;if(i&&i(v,y,a,l),o)for(h=p(y,f),o(h,[],a,l),u=h.length;u--;)(c=h[u])&&(y[f[u]]=!(v[f[u]]=c));if(n){if(r||t){if(r){for(h=[],u=y.length;u--;)(c=y[u])&&h.push(v[u]=c);r(null,y=[],h,l)}for(u=y.length;u--;)(c=y[u])&&(h=r?te.call(n,c):d[u])>-1&&(n[h]=!(s[h]=c))}}else y=p(y===s?y.splice(m,y.length):y),r?r(null,s,y,l):Q.apply(s,y)})}function m(t){for(var e,n,i,o=t.length,r=C.relative[t[0].type],s=r||C.relative[" "],a=r?1:0,l=c(function(t){return t===e},s,!0),h=c(function(t){return te.call(e,t)>-1},s,!0),p=[function(t,n,i){return!r&&(i||n!==S)||((e=n).nodeType?l(t,n,i):h(t,n,i))}];o>a;a++)if(n=C.relative[t[a].type])p=[c(d(p),n)];else{if(n=C.filter[t[a].type].apply(null,t[a].matches),n[F]){for(i=++a;o>i&&!C.relative[t[i].type];i++);return f(a>1&&d(p),a>1&&u(t.slice(0,a-1)).replace(ae,"$1"),n,i>a&&m(t.slice(a,i)),o>i&&m(t=t.slice(i)),o>i&&u(t))}p.push(n)}return d(p)}function _(t,e){var i=0,r=e.length>0,s=t.length>0,a=function(n,a,l,h,u){var c,d,f,m=[],_=0,g="0",v=n&&[],y=null!=u,b=S,I=n||s&&C.find.TAG("*",u&&a.parentNode||a),w=H+=null==b?1:Math.random()||.1;for(y&&(S=a!==N&&a,k=i);null!=(c=I[g]);g++){if(s&&c){for(d=0;f=t[d++];)if(f(c,a,l)){h.push(c);break}y&&(H=w,k=++i)}r&&((c=!f&&c)&&_--,n&&v.push(c))}if(_+=g,r&&g!==_){for(d=0;f=e[d++];)f(v,m,a,l);if(n){if(_>0)for(;g--;)v[g]||m[g]||(m[g]=G.call(h));m=p(m)}Q.apply(h,m),y&&!n&&m.length>0&&_+e.length>1&&o.uniqueSort(h)}return y&&(H=w,S=b),v};return r?n(a):a}function g(t,e,n){for(var i=0,r=e.length;r>i;i++)o(t,e[i],n);return n}function v(t,e,n,i){var o,r,s,a,l,c=h(t);if(!i&&1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===e.nodeType&&M&&C.relative[r[1].type]){if(e=(C.find.ID(s.matches[0].replace(be,ke),e)||[])[0],!e)return n;t=t.slice(r.shift().value.length)}for(o=de.needsContext.test(t)?0:r.length;o--&&(s=r[o],!C.relative[a=s.type]);)if((l=C.find[a])&&(i=l(s.matches[0].replace(be,ke),pe.test(r[0].type)&&e.parentNode||e))){if(r.splice(o,1),t=i.length&&u(r),!t)return Q.apply(n,i),n;break}}return E(t,c)(i,e,!M,n,pe.test(t)),n}function y(){}var b,k,C,I,w,E,S,x,D,T,N,O,M,A,P,L,U,F="sizzle"+-new Date,B=window.document,R={},H=0,j=0,z=e(),q=e(),V=e(),W=!1,$=function(){return 0},Y="undefined",J=1<<31,X=[],G=X.pop,K=X.push,Q=X.push,Z=X.slice,te=X.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ee="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=ne.replace("w","w#"),oe="([*^$|!~]?=)",re="\\["+ee+"*("+ne+")"+ee+"*(?:"+oe+ee+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ie+")|)|)"+ee+"*\\]",se=":("+ne+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+re.replace(3,8)+")*)|.*)\\)|)",ae=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),le=new RegExp("^"+ee+"*,"+ee+"*"),he=new RegExp("^"+ee+"*([\\x20\\t\\r\\n\\f>+~])"+ee+"*"),ue=new RegExp(se),ce=new RegExp("^"+ie+"$"),de={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),NAME:new RegExp("^\\[name=['\"]?("+ne+")['\"]?\\]"),TAG:new RegExp("^("+ne.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},pe=/[\x20\t\r\n\f]*[+~]/,fe=/^[^{]+\{\s*\[native code/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/'|\\/g,ye=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,be=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,ke=function(t,e){var n="0x"+e-65536;return n!==n?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Q.apply(X=Z.call(B.childNodes),B.childNodes),X[B.childNodes.length].nodeType}catch(Ce){Q={apply:X.length?function(t,e){K.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=o.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},T=o.setDocument=function(e){var n=e?e.ownerDocument||e:B;return n!==N&&9===n.nodeType&&n.documentElement?(N=n,O=n.documentElement,M=!w(n),R.getElementsByTagName=i(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),R.attributes=i(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),R.getElementsByClassName=i(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",t.getElementsByClassName&&t.getElementsByClassName("e").length?(t.lastChild.className="e",2===t.getElementsByClassName("e").length):!1}),R.getByName=i(function(t){t.id=F+0,t.appendChild(N.createElement("a")).setAttribute("name",F),t.appendChild(N.createElement("i")).setAttribute("name",F),O.appendChild(t);var e=n.getElementsByName&&n.getElementsByName(F).length===2+n.getElementsByName(F+0).length;return O.removeChild(t),e}),R.sortDetached=i(function(t){return t.compareDocumentPosition&&1&t.compareDocumentPosition(N.createElement("div"))}),C.attrHandle=i(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==Y&&"#"===t.firstChild.getAttribute("href")})?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},R.getByName?(C.find.ID=function(t,e){if(typeof e.getElementById!==Y&&M){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(t){var e=t.replace(be,ke);return function(t){return t.getAttribute("id")===e}}):(C.find.ID=function(t,e){if(typeof e.getElementById!==Y&&M){var n=e.getElementById(t);return n?n.id===t||typeof n.getAttributeNode!==Y&&n.getAttributeNode("id").value===t?[n]:void 0:[]}},C.filter.ID=function(t){var e=t.replace(be,ke);return function(t){var n=typeof t.getAttributeNode!==Y&&t.getAttributeNode("id");return n&&n.value===e}}),C.find.TAG=R.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==Y?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},C.find.NAME=R.getByName&&function(t,e){return typeof e.getElementsByName!==Y?e.getElementsByName(name):void 0},C.find.CLASS=R.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==Y&&M?e.getElementsByClassName(t):void 0},P=[],A=[":focus"],(R.qsa=t(n.querySelectorAll))&&(i(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||A.push("\\["+ee+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||A.push(":checked")}),i(function(t){t.innerHTML="<input type='hidden' i=''/>",t.querySelectorAll("[i^='']").length&&A.push("[*^$]="+ee+"*(?:\"\"|'')"),t.querySelectorAll(":enabled").length||A.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),A.push(",.*:")})),(R.matchesSelector=t(L=O.matchesSelector||O.mozMatchesSelector||O.webkitMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&i(function(t){R.disconnectedMatch=L.call(t,"div"),L.call(t,"[s!='']:x"),P.push("!=",se)}),A=new RegExp(A.join("|")),P=P.length&&new RegExp(P.join("|")),U=t(O.contains)||O.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},$=O.compareDocumentPosition?function(t,e){if(t===e)return W=!0,0;var i=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return i?1&i||x&&e.compareDocumentPosition(t)===i?t===n||U(B,t)?-1:e===n||U(B,e)?1:D?te.call(D,t)-te.call(D,e):0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var i,o=0,s=t.parentNode,a=e.parentNode,l=[t],h=[e];if(t===e)return W=!0,0;if(!s||!a)return t===n?-1:e===n?1:s?-1:a?1:0;if(s===a)return r(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)h.unshift(i);for(;l[o]===h[o];)o++;return o?r(l[o],h[o]):l[o]===B?-1:h[o]===B?1:0},N):N},o.matches=function(t,e){return o(t,null,null,e)},o.matchesSelector=function(t,e){if((t.ownerDocument||t)!==N&&T(t),e=e.replace(ye,"='$1']"),R.matchesSelector&&M&&(!P||!P.test(e))&&!A.test(e))try{var n=L.call(t,e);if(n||R.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(i){}return o(e,N,null,[t]).length>0},o.contains=function(t,e){return(t.ownerDocument||t)!==N&&T(t),U(t,e)},o.attr=function(t,e){var n;return(t.ownerDocument||t)!==N&&T(t),M&&(e=e.toLowerCase()),(n=C.attrHandle[e])?n(t):!M||R.attributes?t.getAttribute(e):((n=t.getAttributeNode(e))||t.getAttribute(e))&&t[e]===!0?e:n&&n.specified?n.value:null},o.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},o.uniqueSort=function(t){var e,n=[],i=0,o=0;if(W=!R.detectDuplicates,x=!R.sortDetached,D=!R.sortStable&&t.slice(0),t.sort($),W){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return t},I=o.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=I(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i];i++)n+=I(e);return n},C=o.selectors={cacheLength:50,createPseudo:n,match:de,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(be,ke),t[3]=(t[4]||t[5]||"").replace(be,ke),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||o.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&o.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return de.CHILD.test(t[0])?null:(t[4]?t[2]=t[4]:n&&ue.test(n)&&(e=h(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(be,ke).toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+ee+")"+t+"("+ee+"|$)"))&&z(t,function(t){return e.test(t.className||typeof t.getAttribute!==Y&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=o.attr(i,t);return null==r?"!="===e:e?(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r+" ").indexOf(n)>-1:"|="===e?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var h,u,c,d,p,f,m=r!==s?"nextSibling":"previousSibling",_=e.parentNode,g=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(_){if(r){for(;m;){for(c=e;c=c[m];)if(a?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?_.firstChild:_.lastChild],s&&v){for(u=_[F]||(_[F]={}),h=u[t]||[],p=h[0]===H&&h[1],d=h[0]===H&&h[2],c=p&&_.childNodes[p];c=++p&&c&&c[m]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){u[t]=[H,p,d];break}}else if(v&&(h=(e[F]||(e[F]={}))[t])&&h[0]===H)d=h[1];else for(;(c=++p&&c&&c[m]||(d=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==g:1!==c.nodeType)||!++d||(v&&((c[F]||(c[F]={}))[t]=[H,d]),c!==e)););return d-=o,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,e){var i,r=C.pseudos[t]||C.setFilters[t.toLowerCase()]||o.error("unsupported pseudo: "+t);return r[F]?r(e):r.length>1?(i=[t,t,"",e],C.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,n){for(var i,o=r(t,e),s=o.length;s--;)i=te.call(t,o[s]),t[i]=!(n[i]=o[s])}):function(t){return r(t,0,i)}):r}},pseudos:{not:n(function(t){var e=[],i=[],o=E(t.replace(ae,"$1"));return o[F]?n(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,n,r){return e[0]=t,o(e,null,r,i),!i.pop()}}),has:n(function(t){return function(e){return o(t,e).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||I(e)).indexOf(t)>-1}}),lang:n(function(t){return ce.test(t||"")||o.error("unsupported lang: "+t),t=t.replace(be,ke).toLowerCase(),function(e){var n;do if(n=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(t){var e=window.location&&window.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===O},focus:function(t){return t===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return _e.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[0>n?n+e:n]}),even:l(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:l(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}};for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})C.pseudos[b]=a(b);return E=o.compile=function(t,e){var n,i=[],o=[],r=V[t+" "];if(!r){for(e||(e=h(t)),n=e.length;n--;)r=m(e[n]),r[F]?i.push(r):o.push(r);r=V(t,_(o,i))}return r},C.pseudos.nth=C.pseudos.eq,y.prototype=C.filters=C.pseudos,C.setFilters=new y,R.sortStable=F.split("").sort($).join("")===F,T(),[0,0].sort($),R.detectDuplicates=W,{select:o,matches:o.matches,matchesSelector:o.matchesSelector}}),Ink.createModule("Ink.UI.Animate",1,["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(t,e,n){"use strict";function i(){t.BaseUIComponent.apply(this,arguments)}var o=function(t){return"animationName"in t.style?"animation":"webkitAnimationName"in t.style?"webkitAnimation":null}(document.createElement("div")),r={animation:"animationend",webkitAnimation:"webkitAnimationEnd"}[o];return i._name="Animate_1",i._optionDefinition={trigger:["Element",null],duration:["String","slow"],animation:["String"],removeClass:["Boolean",!0],onEnd:["Function",function(){}]},i.prototype._init=function(){isNaN(parseInt(this._options.duration,10))||(this._options.duration=parseInt(this._options.duration,10)),this._options.trigger?e.observe(this._options.trigger,"click",Ink.bind(function(){this.animate()},this)):this.animate()},i.prototype.animate=function(){i.animate(this._element,this._options.animation,this._options)},Ink.extendObj(i,{_animationPrefix:o,animationSupported:!!o,animationEndEventName:r,animate:function(e,s,a){function l(t){t.target===e&&t.animationName===s&&(a.onEnd&&a.onEnd(t),a.removeClass&&n.removeClassName(e,s),"string"==typeof a.duration&&n.removeClassName(e,a.duration),e.removeEventListener(r,l,!1))}return e=t.elOrSelector(e),"number"==typeof a||"string"==typeof a?a={duration:a}:a||(a={}),"function"==typeof arguments[3]&&(a.onEnd=arguments[3]),"number"!=typeof a.duration&&"string"!=typeof a.duration&&(a.duration=400),i.animationSupported?("number"==typeof a.duration?e.style[o+"Duration"]=a.duration+"ms":"string"==typeof a.duration&&n.addClassName(e,a.duration),n.addClassName(e,["animated",s]),void e.addEventListener(r,l,!1)):void(a.onEnd&&setTimeout(function(){a.onEnd(null)},0))}}),t.createUIComponent(i),i}),Ink.createModule("Ink.UI.Carousel","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.UI.Pagination_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";function s(t,e,n){return Math.min(n,Math.max(e,t))}function a(){t.BaseUIComponent.apply(this,arguments)}function l(t,e){t.style.transitionProperty=t.style.oTransitionProperty=t.style.msTransitionProperty=t.style.mozTransitionProperty=t.style.webkitTransitionProperty=e}var h=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/30)};return a._name="Carousel_1",a._optionDefinition={autoAdvance:["Integer",0],axis:["String","x"],initialPage:["Integer",0],spaceAfterLastSlide:["Boolean",!0],keyboardSupport:["Boolean",!1],pagination:["String",null],onChange:["Function",null],onInit:["Function",function(){}],swipe:["Boolean",!0]},a.prototype={_init:function(){this._handlers={paginationChange:Ink.bindMethod(this,"_onPaginationChange"),windowResize:e.throttle(Ink.bindMethod(this,"refit"),200)},e.observe(window,"resize",this._handlers.windowResize),this._isY="y"===this._options.axis;var t=Ink.s("ul.stage",this._element);t.style.width="100%",this._ulEl=t,i.removeTextNodeChildren(t),null==this._options.pagination&&(this._currentPage=this._options.initialPage),this.refit(),this._isY&&(this._ulEl.style.whiteSpace="normal"),this._options.swipe&&(e.observe(this._element,"touchstart",Ink.bindMethod(this,"_onTouchStart")),e.observe(this._element,"touchmove",Ink.bindMethod(this,"_onTouchMove")),e.observe(this._element,"touchend",Ink.bindMethod(this,"_onTouchEnd"))),this._setUpPagination(),this._setUpAutoAdvance(),this._options.onInit.call(this,this)},refit:function(){var t=this._isY,e=function(e,n){return e?n?i.outerDimensions(e)[t?0:1]:i.outerDimensions(e)[t?1:0]:0};this._liEls=Ink.ss("li.slide",this._ulEl);var n=this._liEls.length,o=this._ulEl.getBoundingClientRect();this._ctnLength=t?o.bottom-o.top:o.right-o.left,this._elLength=e(this._liEls[0]),this._slidesPerPage=Math.floor(this._ctnLength/this._elLength)||1,isFinite(this._slidesPerPage)||(this._slidesPerPage=1);var r=Math.ceil(n/this._slidesPerPage),a=this._numPages!==r;this._numPages=r,this._deltaLength=this._slidesPerPage*this._elLength,this._IE7(),this._pagination&&a&&this._pagination.setSize(this._numPages),this.setPage(s(this.getPage(),0,this._numPages-1))},_setUpPagination:function(){this._options.pagination?(t.isDOMElement(this._options.pagination)||"string"==typeof this._options.pagination?this._pagination=new o(this._options.pagination,{size:this._numPages,onChange:this._handlers.paginationChange}):(this._pagination=this._options.pagination,this._pagination.setOnChange(this._handlers.paginationChange),this._pagination.setSize(this._numPages)),this._pagination.setCurrent(this._options.initialPage||0)):this._currentPage=this._options.initialPage||0},_setUpAutoAdvance:function(){this._options.autoAdvance&&this.autoAdvance(this._options.autoAdvance)},autoAdvance:function(t){function e(){n.nextPage(!0),n._autoAdvanceSto=setTimeout(e,t)}if(!this._autoAdvanceSto){var n=this;this._autoAdvanceSto=setTimeout(e,t)}},stopAutoAdvance:function(){this._autoAdvanceSto&&(clearTimeout(this._autoAdvanceSto),this._autoAdvanceSto=null)},_IE7:function(){if(r.IE&&""+r.version.split(".")[0]=="7")for(var t=Ink.ss("li.slide",this._ulEl),e=function(e,i){t[n].style[e]=i},n=0,i=t.length;i>n;n++)e("position","absolute"),e(this._isY?"top":"left",n*this._elLength+"px")},_onTouchStart:function(t){if(!(t.touches.length>1)){this._swipeData={x:e.pointerX(t),y:e.pointerY(t)};var n=this._ulEl.getBoundingClientRect();this._swipeData.firstUlPos=n[this._isY?"top":"left"],this._swipeData.inUlX=this._swipeData.x-n.left,this._swipeData.inUlY=this._swipeData.y-n.top,l(this._ulEl,"none"),this._touchMoveIsFirstTouchMove=!0}},_onTouchMove:function(t){if(!(t.touches.length>1)){var n=e.pointerX(t),i=e.pointerY(t),o=this._swipeData.y-i,r=this._swipeData.x-n;if(this._touchMoveIsFirstTouchMove){var s=Math.abs(o),a=Math.abs(r);this._touchMoveIsFirstTouchMove=void 0,this._scrolling=this._isY?a>s:s>a,this._scrolling||this._onAnimationFrame()}!this._scrolling&&this._swipeData&&(e.stopDefault(t),this._swipeData.pointerDelta=this._isY?o:r,this._swipeData.pointerPos=this._isY?i:n)}},_onAnimationFrame:function(){var t=this._swipeData;if(t&&!this._scrolling&&!this._touchMoveIsFirstTouchMove){var e,n=this._element.getBoundingClientRect();e=this._isY?t.pointerPos-t.inUlY-n.top:t.pointerPos-t.inUlX-n.left,this._ulEl.style[this._isY?"top":"left"]=e+"px",h(Ink.bindMethod(this,"_onAnimationFrame"))}},_onTouchEnd:function(t){if(this._swipeData&&this._swipeData.pointerPos&&!this._scrolling&&!this._touchMoveIsFirstTouchMove){var n=.1,i=this._swipeData.pointerDelta,o=this.getPage(),r=i/this._elLength/this._slidesPerPage;Math.abs(r)>n&&(o+=Math[0>i?"floor":"ceil"](r)),o=s(o,0,this._numPages-1),isNaN(o)||this.setPage(o),e.stopDefault(t)}l(this._ulEl,null),this._swipeData=null,this._touchMoveIsFirstTouchMove=void 0,this._scrolling=void 0},_onPaginationChange:function(t){this._setPage(t.getCurrent())},getPage:function(){return this._pagination?this._pagination.getCurrent():this._currentPage||0},getPagination:function(){return this._pagination||null},setPage:function(t,e){return e&&(t%=this._numPages,0>t&&(t=this._numPages-t)),t=s(t,0,this._numPages-1),t===this._currentPage?void(this._swipeData&&this._setPage(t)):void(this._pagination?this._pagination.setCurrent(t):this._setPage(t))},_setPage:function(t){var e=t*this._deltaLength,n=t===this._numPages-1;if(!this._options.spaceAfterLastSlide&&n&&t>0){var i=this._liEls.length-t*this._slidesPerPage;i<this._slidesPerPage&&(e=(t-1)*this._deltaLength+i*this._elLength)}this._ulEl.style[this._isY?"top":"left"]=["-",e/this._ctnLength*100,"%"].join(""),this._options.onChange&&this._options.onChange.call(this,t),this._currentPage=t},nextPage:function(t){this.setPage(this.getPage()+1,t)},previousPage:function(t){this.setPage(this.getPage()-1,t)},getSlidesPerPage:function(){return this._slidesPerPage},getTotalPages:function(){return this._numPages},getStageElm:function(){return this._ulEl},getSlidesList:function(){return this._liEls},getTotalSlides:function(){return this.getSlidesList().length}},t.createUIComponent(a),a}),Ink.createModule("Ink.UI.Close","1",["Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e){"use strict";function n(){t.observe(document.body,"click",function(n){var i=t.element(n);if(i=e.findUpwardsByClass(i,"ink-close")||e.findUpwardsByClass(i,"ink-dismiss")){var o=e.findUpwardsByClass(i,"ink-alert")||e.findUpwardsByClass(i,"ink-alert-block")||i;o&&(t.stop(n),e.remove(o))}})}return n._name="Close_1",n}),Ink.createModule("Ink.UI.Common","1",["Ink.Dom.Element_1","Ink.Net.Ajax_1","Ink.Dom.Css_1","Ink.Dom.Selector_1","Ink.Util.Url_1"],function(t,e,n,i,o){"use strict";function r(){this&&this!==window&&"function"==typeof this.constructor&&Ink.warn("You called a method on an incorrectly instantiated "+this.constructor._name+" component. Check the warnings above to see what went wrong.")}function s(t,e){for(var n in t)if(t.hasOwnProperty(n)){if("constructor"===n)continue;"function"==typeof e[n]&&(e[n]=r)}}function a(t,e){var n=this.constructor,i=n._name;if(!this||this===window)throw new Error('Use "new InkComponent()" instead of "InkComponent()"');if(this&&!(this instanceof a))throw new Error("You forgot to call Ink.UI.Common.createUIComponent() on this module!");if(!t&&!n._componentOptions.elementIsOptional)return void Ink.error(new Error(i+': You need to pass an element or a selector as the first argument to "new '+i+'()"'));this._element=f.elsOrSelector(t,i+': An element with the selector "'+t+'" was not found!')[0],this._element||n._componentOptions.elementIsOptional||(o=!1,Ink.error(new Error(t+' does not match an element on the page. You need to pass a valid selector to "new '+i+'".'))),this._options=f.options(i,n._optionDefinition,e,this._element);var o=a._validateInstance(this)===!0;if(o&&"function"==typeof this._init)try{this._init.apply(this,arguments)}catch(r){o=!1,Ink.error(r)}o?this._element&&f.registerInstance(this):a._stubInstance(this,n,i)}var l={},h=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},u="WeakMap"in window,c=u?new WeakMap:null,d=[],p={get:function(t){return u?c.get(t):d[t.getAttribute("__InkInstance")]},set:function(t,e){u?c.set(t,e):t.setAttribute("__InkInstance",d.push(e)-1)}},f={Layouts:{TINY:"tiny",SMALL:"small",MEDIUM:"medium",LARGE:"large",XLARGE:"xlarge"},isDOMElement:t.isDOMElement,isInteger:function(t){return"number"==typeof t&&t%1===0},elOrSelector:function(t,e){if(!f.isDOMElement(t)){var n=i.select(t);return 0===n.length?(Ink.warn(e+" must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself."),null):n[0]}return t},elsOrSelector:function(t,e,n){var o;if("string"==typeof t?o=i.select(t):f.isDOMElement(t)?o=[t]:t&&"object"==typeof t&&"number"==typeof t.length&&(o=t),o&&o.length)return o;if(n)throw new TypeError(e+" must either be a DOM Element, an Array of elements, or a selector expression!\nThe script element must also be after the DOM Element itself.");return[]},options:function(e,n,i,o){function r(t){return a=n[t][0],u=a.toLowerCase(),c=2===n[t].length?n[t][1]:l,a||g("Ink.UI.Common.options: Always specify a type!"),u in f._coerce_funcs||g("Ink.UI.Common.options: "+n[t][0]+" is not a valid type. Use one of "+h(f._coerce_funcs).join(", ")),(!n[t].length||n[t].length>2)&&g('the "defaults" argument must be an object mapping option names to [typestring, optional] arrays.'),s=t in p?f._coerce_from_string(u,p[t],t,e):l,s!==l?f._options_validate(s,u)?s:(v("("+t+" option) Invalid "+u+" "+_(s)),c):t in i?i[t]:c!==l?c:void g("Option "+t+" is required!")}"string"!=typeof e&&(o=i,i=n,n=e,e=""),i=i||{};var s,a,u,c,d={},p=o?t.data(o):{},m=function(t){return e&&(t=e+': "'+(""+t).replace(/"/,'\\"')+'"'),t},_=function(t){return'"'+(""+t).replace(/"/,'\\"')+'"'},g=function(t){throw new Error(m(t))},v=function(t){Ink.error(m(t)+". Ignoring option.")};for(var y in n)n.hasOwnProperty(y)&&(d[y]=r(y));return d},_coerce_from_string:function(t,e,n,i){return t in f._coerce_funcs?f._coerce_funcs[t](e,n,i):e},_options_validate:function(t,e){return e in f._options_validate_types?f._options_validate_types[e].call(f,t):!1},_coerce_funcs:function(){var t={element:function(t){return f.elOrSelector(t,"")},elements:function(t){return f.elsOrSelector(t,"",!1)},object:function(t){return t},number:function(t){return parseFloat(t)},"boolean":function(t){return!("false"===t||""===t||null===t)},string:function(t){return t},"function":function(t,e,n){return Ink.error(n+': You cannot specify the option "'+e+"\" through data-attributes because it's a function"),l}};return t["float"]=t.integer=t.number,t}(),_options_validate_types:function(){var t={string:function(t){return"string"==typeof t},number:function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)},integer:function(t){return t===Math.round(t)},element:function(t){return f.isDOMElement(t)},elements:function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&t.length},"boolean":function(t){return"boolean"==typeof t},object:function(){return!0}};return t["float"]=t.number,t}(),clone:function(t){try{return JSON.parse(JSON.stringify(t))}catch(e){throw new Error("Given object cannot have loops!")}},childIndex:t.parentIndexOf,ajaxJSON:function(t,n,i){new e(t,{evalJS:"force",method:"POST",parameters:n,onSuccess:function(t){try{if(t=t.responseJSON,"ok"!==t.status)throw"server error: "+t.message;i(null,t)}catch(e){i(e)}},onFailure:function(){i("communication failure")}})},currentLayout:function(){var t,e,o,r,s,a=i.select("#ink-layout-detector")[0];if(!a){a=document.createElement("div"),a.id="ink-layout-detector";for(o in f.Layouts)f.Layouts.hasOwnProperty(o)&&(r=f.Layouts[o],s=document.createElement("div"),s.className="show-"+r+" hide-all",s.setAttribute("data-ink-layout",r),a.appendChild(s));document.body.appendChild(a)}for(t=0,e=a.children.length;e>t;++t)if(s=a.children[t],"block"===n.getStyle(s,"display"))return s.getAttribute("data-ink-layout");return"large"},hashSet:function(t){if("object"!=typeof t)throw new TypeError("o should be an object!");var e=o.getAnchorString();e=Ink.extendObj(e,t),window.location.hash=o.genQueryString("",e).substring(1)},cleanChildren:function(e){if(!f.isDOMElement(e))throw new Error("Please provide a valid DOMElement");t.clear(e)},storeIdAndClasses:function(t,e){if(!f.isDOMElement(t))throw"Please provide a valid Element as first parameter";var n=t.id;n&&(e._id=n);var i=t.className;i&&(e._classes=i)},restoreIdAndClasses:function(t,e){if(!f.isDOMElement(t))throw"Please provide a valid Element as first parameter";e._id&&t.id!==e._id&&(t.id=e._id),e._classes&&-1===t.className.indexOf(e._classes)&&(t.className?t.className+=" "+e._classes:t.className=e._classes),e._instanceId&&!t.getAttribute("data-instance")&&t.setAttribute("data-instance",e._instanceId)},_warnDoubleInstantiation:function(t,e){function n(t){return(t.constructor&&t.constructor._name||t._name||"").replace(/_.*?$/,"")}var i=f.getInstance(t);if(""!==n(e)&&i){var o=n(e);if(o){for(var r=0,s=i.length;s>r;r++)if(o===n(i[r]))return Ink.warn("Creating more than one "+o+"for the same element.","(Was creating a "+o+" on:",t,")."),!1;return!0}}},registerInstance:function(t,e){if(t){if(e||(e=t._element),!f.isDOMElement(e))throw new TypeError("Ink.UI.Common.registerInstance: The element passed in is not a DOM element!");if(f._warnDoubleInstantiation(e,t)===!1)return!1;var n=p.get(e);return n||(n=[],p.set(e,n)),n.push(t),!0}},unregisterInstance:function(t){if(t&&t._element)for(var e=p.get(t._element),n=0,i=e.length;i>n;n++)e[n]===t&&e.splice(n,1)},getInstance:function(t,e){var n=t;if(t=f.elOrSelector(t),!f.isDOMElement(t))return Ink.warn("Ink.UI.Common: getInstance called on non-element ("+n+")"),[];var i=p.get(t);if(i||(i=[]),"function"!=typeof e)return i;for(var o=0,r=i.length;r>o;o++)if(i[o]instanceof e)return i[o];return null},getInstanceFromSelector:function(t){return f.getInstance(t)},getInstanceIds:function(){if(d.length>0)return d;var t=[];for(var e in c)c.hasOwnProperty(e)&&t.push(e);return t},getInstances:function(){if(d.length>0)return d;var t=[];for(var e in c)c.hasOwnProperty(e)&&t.push(c[e]);return t},destroyComponent:function(){f.unregisterInstance(this),this._element.parentNode.removeChild(this._element)}};return a._validateInstance=function(t){var e;if("function"!=typeof t._validate)return!0;try{e=t._validate()}catch(n){e=n}return e instanceof Error?(t._validationError=e,!1):!0},a._stubInstance=function(t,e,n){s(e.prototype,t),s(a.prototype,t),Ink.warn(n+" was not correctly created. "+(t._validationError||""))},a.getInstance=function(t){return t=f.elOrSelector(t),f.getInstance(t,this)},Ink.extendObj(a.prototype,{getOption:function(t){return!this.constructor||t in this.constructor._optionDefinition?this._options[t]:void Ink.error('"'+t+'" is not an option for '+this.constructor._name)},setOption:function(t,e){return!this.constructor||t in this.constructor._optionDefinition?void(this._options[t]=e):void Ink.error('"'+t+" is not an option for "+this.constructor._name)},getElement:function(){return this._element}}),f.BaseUIComponent=a,f.createUIComponent=function(t,e){function n(t,e){if(!t)throw new Error("Ink.UI_1.createUIComponent: "+e)}function i(e,i,o){var r=t[e];n("undefined"!=typeof r,t+" doesn't have a \""+e+'" property. '+o),n(i&&typeof r===i,"typeof "+t+"."+e+' is not "'+i+'". '+o)}t._componentOptions=e||{},n("function"==typeof t,"constructor argument is not a function!"),i("_name","string","This property is used for error messages. Set it to the full module path and version (Ink.My.Module_1)."),i("_optionDefinition","object","This property contains the option names, types and defaults. See Ink.UI.Common.options() for reference.");var o=t.prototype;t.prototype="function"==typeof Object.create?Object.create(a.prototype):function(){function t(){}return t.prototype=a.prototype,new t}(),Ink.extendObj(t.prototype,o),t.prototype.constructor=t,Ink.extendObj(t,a)
},f}),Ink.createModule("Ink.UI.DatePicker","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.Date_1","Ink.Util.I18n_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(t,e,n){return t>n&&(t=n),e>t&&(t=e),t}function h(t){var e=t.split("-");return c(+e[0],+e[1]-1,+e[2])}function u(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function c(t,e,n){return{_year:t,_month:e,_day:n}}function d(t){return{_year:t.getFullYear(),_month:t.getMonth(),_day:t.getDate()}}function p(t){return 10*Math.floor(t/10)}function f(){t.BaseUIComponent.apply(this,arguments)}var m=new a({pt_PT:{"datepicker.clean":"Limpar","datepicker.close":"Fechar","datepicker.format":"dd-mm-yyyy","datepicker.of":" de ","datepicker.next_button":"\xbb","datepicker.prev_button":"\xab","datepicker.months":{1:"Janeiro",2:"Fevereiro",3:"Mar\xe7o",4:"Abril",5:"Maio",6:"Junho",7:"Julho",8:"Agosto",9:"Setembro",10:"Outubro",11:"Novembro",12:"Dezembro"},"datepicker.week_days":{0:"Domingo",1:"Segunda-feira",2:"Ter\xe7a-feira",3:"Quarta-feira",4:"Quinta-feira",5:"Sexta-feira",6:"S\xe1bado"}},en_US:{"datepicker.clean":"Clear","datepicker.close":"Close","datepicker.format":"dd-mm-yyyy","datepicker.of":" of ","datepicker.next_button":"\xbb","datepicker.prev_button":"\xab","datepicker.months":{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},"datepicker.week_days":{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}}},"en_US");return f._name="DatePicker_1",f._optionDefinition={autoOpen:["Boolean",!1],pickerField:["Element",null],containerElement:["Element",null],cssClass:["String","ink-calendar bottom"],dateRange:["String",null],displayInSelect:["Boolean",!1],dayField:["Element",null],monthField:["Element",null],yearField:["Element",null],format:["String","yyyy-mm-dd"],onFocus:["Boolean",!0],onMonthSelected:["Function",null],onSetDate:["Function",null],onYearSelected:["Function",null],position:["String","right"],showClean:["Boolean",!0],showClose:["Boolean",!0],shy:["Boolean",!0],startDate:["String",null],startWeekDay:["Number",1],validDayFn:["Function",null],validMonthFn:["Function",null],validYearFn:["Function",null],nextValidDateFn:["Function",null],prevValidDateFn:["Function",null],yearRange:["String",null],lang:["String",null],month:["Object",null],wDay:["Object",null],nextLinkText:["String",null],prevLinkText:["String",null],ofText:["String",null],cleanText:["String",null],closeText:["String",null]},f.prototype={_init:function(){this.i18n=m.clone(),this._options.lang&&this.i18n.lang(this._options.lang);var t=this._options.lang||m.lang(),e={};e[t]={},this._options.month&&(e[t]["datepicker.months"]=this._options.month),this._options.wDay&&(e[t]["datepicker.week_days"]=this._options.wDay),this._options.nextLinkText&&(e[t]["datepicker.next_button"]=this._options.nextLinkText),this._options.prevLinkText&&(e[t]["datepicker.prev_button"]=this._options.prevLinkText),this._options.ofText&&(e[t]["datepicker.of"]=this._options.ofText),this._options.cleanText&&(e[t]["datepicker.clean"]=this._options.cleanText),this._options.closeText&&(e[t]["datepicker.close"]=this._options.closeText),u(e[t]).length&&this.i18n.append(e),this._options.format=this._dateParsers[this._options.format]||this._options.format,this._hoverPicker=!1,this._picker=this._options.pickerField||null,this._setMinMax(this._options.dateRange||this._options.yearRange),this.setDate(this._options.startDate?this._options.startDate:this._element&&this._element.value?this._element.value:new Date),(this._options.startWeekDay<0||this._options.startWeekDay>6)&&(Ink.warn('Ink.UI.DatePicker_1: option "startWeekDay" must be between 0 (sunday) and 6 (saturday)'),this._options.startWeekDay=l(this._options.startWeekDay,0,6)),Ink.extendObj(this._options,this._lang||{}),this._render(),this._listenToContainerObjectEvents()},_validate:function(){if(this._options.displayInSelect&&!(this._options.dayField&&this._options.monthField&&this._options.yearField))throw new Error("Ink.UI.DatePicker: displayInSelect option enabled.Please specify dayField, monthField and yearField selectors.")},_render:function(){this._containerObject=document.createElement("div"),this._containerObject.className=this._options.cssClass+" ink-datepicker-calendar hide-all",this._renderSuperTopBar();var e=document.createElement("div");e.className="ink-calendar-top",this._monthDescContainer=document.createElement("div"),this._monthDescContainer.className="ink-calendar-month_desc",this._monthPrev=document.createElement("div"),this._monthPrev.className="ink-calendar-prev",this._monthPrev.appendChild(i.create("a",{href:"#prev",className:"change_month_prev",setHTML:this.i18n.text("datepicker.prev_button")})),this._monthNext=document.createElement("div"),this._monthNext.className="ink-calendar-next",this._monthNext.appendChild(i.create("a",{href:"#next",className:"change_month_next",setHTML:this.i18n.text("datepicker.next_button")})),e.appendChild(this._monthPrev),e.appendChild(this._monthDescContainer),e.appendChild(this._monthNext),this._monthContainer=document.createElement("div"),this._monthContainer.className="ink-calendar-month",this._containerObject.appendChild(e),this._containerObject.appendChild(this._monthContainer),this._monthSelector=this._renderMonthSelector(),this._containerObject.appendChild(this._monthSelector),this._yearSelector=document.createElement("ul"),this._yearSelector.className="ink-calendar-year-selector",this._containerObject.appendChild(this._yearSelector),(!this._options.onFocus||this._options.displayInSelect)&&(this._picker=this._options.pickerField?t.elOrSelector(this._options.pickerField,"pickerField"):i.create("a",{href:"#open_cal",setHTML:"open",insertBottom:this._element.parentNode,className:"ink-datepicker-picker-field"})),this._appendDatePickerToDom(),this._renderMonth(),this._monthChanger=i.create("a",{href:"#monthchanger",className:"ink-calendar-link-month",setTextContent:this.i18n.getKey("datepicker.months")[this._month+1]}),this._ofText=i.create("span",{className:"ink-calendar-of-text",setTextContent:this.i18n.text("datepicker.of")}),this._yearChanger=i.create("a",{href:"#yearchanger",className:"ink-calendar-link-year",setTextContent:this._year}),this._monthDescContainer.appendChild(this._monthChanger),this._monthDescContainer.appendChild(this._ofText),this._monthDescContainer.appendChild(this._yearChanger),this._options.inline?this.show():this._addOpenCloseEvents(),this._addDateChangeHandlersToInputs()},_addDateChangeHandlersToInputs:function(){var t=this._element;this._options.displayInSelect&&(t=[this._options.dayField,this._options.monthField,this._options.yearField]),e.observeMulti(t,"change",Ink.bindEvent(function(){this._updateDate(),this._showDefaultView(),this.setDate(),this._inline||this._hoverPicker||this._hide(!0)},this))},show:function(){this._updateDate(),this._renderMonth(),n.removeClassName(this._containerObject,"hide-all")},_addOpenCloseEvents:function(){var t=this._picker||this._element;e.observe(t,"click",Ink.bindEvent(function(t){e.stop(t),this.show()},this)),this._options.autoOpen&&this.show(),this._options.displayInSelect||e.observe(t,"blur",Ink.bindEvent(function(){this._hoverPicker||this._hide(!0)},this)),this._options.shy&&e.observe(document,"click",Ink.bindEvent(function(t){for(var n=e.element(t),o=[this._options.dayField,this._options.monthField,this._options.yearField,this._picker,this._element],r=0,s=o.length;s>r;r++)if(o[r]&&i.descendantOf(o[r],n))return;this._hide(!0)},this))},_renderMonthSelector:function(){var t=document.createElement("ul");t.className="ink-calendar-month-selector";for(var e=document.createElement("ul"),n=1;12>=n;n++)e.appendChild(this._renderMonthButton(n)),n%4===0&&(t.appendChild(e),e=document.createElement("ul"));return t},_renderMonthButton:function(t){var e=document.createElement("li");return e.appendChild(i.create("a",{"data-cal-month":t,setTextContent:this.i18n.getKey("datepicker.months")[t].substring(0,3)})),e},_appendDatePickerToDom:function(){if(this._options.containerElement){var e=t.elOrSelector(this._options.containerElement);e.appendChild(this._containerObject)}var n=o.matchesSelector(this._element.parentNode,".ink-form .control-group .control, .ink-form .control-group .control > *");n?(this._wrapper=this._element.parentNode,this._wrapperIsControl=!0):(this._wrapper=i.create("div",{className:"ink-datepicker-wrapper"}),i.wrap(this._element,this._wrapper)),i.insertAfter(this._containerObject,this._element)},_renderSuperTopBar:function(){this._options.showClose&&this._options.showClean&&(this._superTopBar=document.createElement("div"),this._superTopBar.className="ink-calendar-top-options",this._options.showClean&&this._superTopBar.appendChild(i.create("a",{className:"clean",setHTML:this.i18n.text("datepicker.clean")})),this._options.showClose&&this._superTopBar.appendChild(i.create("a",{className:"close",setHTML:this.i18n.text("datepicker.close")})),this._containerObject.appendChild(this._superTopBar))},_listenToContainerObjectEvents:function(){e.observe(this._containerObject,"mouseover",Ink.bindEvent(function(t){e.stop(t),this._hoverPicker=!0},this)),e.observe(this._containerObject,"mouseout",Ink.bindEvent(function(t){e.stop(t),this._hoverPicker=!1},this)),e.observe(this._containerObject,"click",Ink.bindEvent(this._onClick,this))},_onClick:function(t){var i=e.element(t);return n.hasClassName(i,"ink-calendar-off")?(e.stopDefault(t),null):(e.stop(t),this._onRelativeChangerClick(i),this._onAbsoluteChangerClick(i),n.hasClassName(i,"ink-calendar-link-month")?this._showMonthSelector():n.hasClassName(i,"ink-calendar-link-year")?this._showYearSelector():n.hasClassName(i,"clean")?this._clean():n.hasClassName(i,"close")&&this._hide(!1),void this._updateDescription())},_onRelativeChangerClick:function(t){var e={change_year_next:1,change_year_prev:-1},n={change_month_next:1,change_month_prev:-1};t.className in n?this._updateCal(n[t.className]):t.className in e&&this._showYearSelector(e[t.className])},_onAbsoluteChangerClick:function(t){var e=i.data(t);Number(e.calDay)?(this.setDate(new Date(this._year,this._month,e.calDay)),this._options.shy?this._hide():this._updateCal()):Number(e.calMonth)?(this._month=Number(e.calMonth)-1,this._showDefaultView(),this._updateCal()):Number(e.calYear)&&this._changeYear(Number(e.calYear))},_changeYear:function(t){t=+t,isNaN(t)||(this._year=t,"function"==typeof this._options.onYearSelected&&this._options.onYearSelected(this,{year:this._year}),this._showMonthSelector())},_clean:function(){this._options.displayInSelect?(this._options.yearField.selectedIndex=0,this._options.monthField.selectedIndex=0,this._options.dayField.selectedIndex=0):this._element.value=""},_hide:function(t){t=void 0===t?!0:t,(t===!1||t&&this._options.shy)&&n.addClassName(this._containerObject,"hide-all")},_setMinMax:function(t){function e(){n._min=i,n._max=o}var n=this,i={_year:-Number.MAX_VALUE,_month:0,_day:1},o={_year:Number.MAX_VALUE,_month:11,_day:31};if(!t)return e();var s=t.split(":"),a=/^(\d{4})((\-)(\d{1,2})((\-)(\d{1,2}))?)?$/;r.each([{name:"_min",date:s[0],noLim:i},{name:"_max",date:s[1],noLim:o}],Ink.bind(function(t){var e=t.noLim;if("NOW"===t.date.toUpperCase()){var n=new Date;e=d(n)}else"EVER"===t.date.toUpperCase()?e=t.noLim:a.test(t.date)&&(e=h(t.date),e._month=l(e._month,0,11),e._day=l(e._day,1,this._daysInMonth(e._year,e._month+1)));this[t.name]=e},this));var u=-1!==this._dateCmp(this._max,this._min);u||e()},_fitDateToRange:function(t){return this._isValidDate(t)||(t=d(new Date)),-1===this._dateCmp(t,this._min)?Ink.extendObj({},this._min):1===this._dateCmp(t,this._max)?Ink.extendObj({},this._max):Ink.extendObj({},t)},_dateWithinRange:function(t){return arguments.length||(t=this),!this._dateAboveMax(t)&&!this._dateBelowMin(t)},_dateAboveMax:function(t){return 1===this._dateCmp(t,this._max)},_dateBelowMin:function(t){return-1===this._dateCmp(t,this._min)},_dateCmp:function(t,e){return this._dateCmpUntil(t,e,"_day")},_dateCmpUntil:function(t,e,n){var i=["_year","_month","_day"],o=-1;do{if(o++,t[i[o]]>e[i[o]])return 1;if(t[i[o]]<e[i[o]])return-1}while(i[o]!==n&&void 0!==t[i[o+1]]&&void 0!==e[i[o+1]]);return 0},_showDefaultView:function(){this._yearSelector.style.display="none",this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._getPrevMonth()||(this._monthPrev.childNodes[0].className="action_inactive"),this._getNextMonth()||(this._monthNext.childNodes[0].className="action_inactive"),this._monthContainer.style.display="block"},_updateDate:function(){var t;!this._options.displayInSelect&&this._element.value?t=this._parseDate(this._element.value):this._options.displayInSelect&&(t={_year:this._options.yearField[this._options.yearField.selectedIndex].value,_month:this._options.monthField[this._options.monthField.selectedIndex].value-1,_day:this._options.dayField[this._options.dayField.selectedIndex].value}),t&&(t=this._fitDateToRange(t),this._year=t._year,this._month=t._month,this._day=t._day),this._setDate(),this._updateDescription(),this._renderMonth()},_updateDescription:function(){i.setTextContent(this._monthChanger,this.i18n.getKey("datepicker.months")[this._month+1]),i.setTextContent(this._ofText,this.i18n.text("datepicker.of")),i.setTextContent(this._yearChanger,this._year)},_showYearSelector:function(t){this._incrementViewingYear(t);var e=this._year-this._year%10,n=e-1;i.setHTML(this._yearSelector,"");var o=i.create("ul");if(this._yearSelector.appendChild(o),n>this._min._year){var r=i.create("li");r.appendChild(i.create("a",{href:"#year_prev",className:"change_year_prev",setHTML:this.i18n.text("datepicker.prev_button")})),o.appendChild(r)}else o.appendChild(i.create("li",{setHTML:"&nbsp;"}));for(var s=1;11>s;s++)s%4===0&&(o=i.create("ul"),this._yearSelector.appendChild(o)),n=e+s-1,o.appendChild(this._getYearButton(n));if(n<this._max._year){var a=i.create("li");a.appendChild(i.create("a",{href:"#year_next",className:"change_year_next",setHTML:this.i18n.text("datepicker.next_button")})),o.appendChild(a)}else o.appendChild(i.create("li",{setHTML:"&nbsp;"}));this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._monthSelector.style.display="none",this._monthContainer.style.display="none",this._yearSelector.style.display="block"},_incrementViewingYear:function(t){if(t){var e=+this._year+10*t;e-=e%10,e>this._max._year||e+9<this._min._year||(this._year=+this._year+10*t)}},_getYearButton:function(t){var e="";this._acceptableYear({_year:t})?t===this._year&&(e="ink-calendar-on"):e="ink-calendar-off";var n=i.create("li");return n.appendChild(i.create("a",{href:"#","data-cal-year":t,className:e,setTextContent:t})),n},_showMonthSelector:function(){this._yearSelector.style.display="none",this._monthContainer.style.display="none",this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._addMonthClassNames(),this._monthSelector.style.display="block"},_parseDate:function(t){var e=s.set(this._options.format,t);return e?d(e):null},_isValidDate:function(t){var e=/^\d{4}$/,n=/^\d{1,2}$/;return e.test(t._year)&&n.test(t._month)&&n.test(t._day)&&+t._month+1>=1&&+t._month+1<=12&&+t._day>=1&&+t._day<=this._daysInMonth(t._year,t._month+1)},_isDate:function(t,e){try{if("undefined"==typeof t)return!1;var n=s.set(t,e);if(n&&this._isValidDate(d(n)))return!0}catch(i){}return!1},_acceptableDay:function(t){return this._acceptableDateComponent(t,"validDayFn")},_acceptableMonth:function(t){return this._acceptableDateComponent(t,"validMonthFn")},_acceptableYear:function(t){return this._acceptableDateComponent(t,"validYearFn")},_acceptableDateComponent:function(t,e){return this._options[e]?this._callUserCallbackBool(this._options[e],t):this._dateWithinRange(t)},_writeDateInFormat:function(){return s.get(this._options.format,this.getDate())},setDate:function(t){if(t&&"function"==typeof t.getDate&&(t=[t.getFullYear(),t.getMonth()+1,t.getDate()].join("-")),/\d{4}-\d{1,2}-\d{1,2}/.test(t)){var e=t.split("-");this._year=+e[0],this._month=+e[1]-1,this._day=+e[2]}this._setDate()},getDate:function(){if(!this._day)throw"Ink.UI.DatePicker: Still picking a date. Cannot getDate now!";return new Date(this._year,this._month,this._day)},_setDate:function(t){if(t){var e=i.data(t);this._day=+e.calDay||this._day,this._options.onSetDate&&this._options.onSetDate(this,{date:this.getDate()})}var n=this._fitDateToRange(this);this._year=n._year,this._month=n._month,this._day=n._day,this._options.displayInSelect?(this._options.dayField.value=this._day,this._options.monthField.value=this._month+1,this._options.yearField.value=this._year):this._element.value=this._writeDateInFormat()},_updateCal:function(t){"function"==typeof this._options.onMonthSelected&&this._options.onMonthSelected(this,{year:this._year,month:this._month}),t&&null===this._updateMonth(t)||this._renderMonth()},_daysInMonth:function(t,e){var n={2:t%400===0||t%4===0&&t%100!==0?29:28,4:30,6:30,9:30,11:30};return n[e]||31},_updateMonth:function(t){var e;return t>0?e=this._getNextMonth():0>t&&(e=this._getPrevMonth()),e?(this._year=e._year,this._month=e._month,void(this._day=e._day)):null},_getNextMonth:function(t){return this._tryLeap(t,"Month","next",function(t){return t._month+=1,t._month>11&&(t._month=0,t._year+=1),t})},_getPrevMonth:function(t){return this._tryLeap(t,"Month","prev",function(t){return t._month-=1,t._month<0&&(t._month=11,t._year-=1),t})},_getPrevYear:function(t){return this._tryLeap(t,"Year","prev",function(t){return t._year-=1,t})},_getNextYear:function(t){return this._tryLeap(t,"Year","next",function(t){return t._year+=1,t})},_tryLeap:function(t,e,n,i){t=t||{_year:this._year,_month:this._month,_day:this._day};var o="prev"===n?"_min":"_max",r=this[o];if(0===this._dateCmpUntil(t,r,e))return null;var s=this._options[n+"ValidDateFn"];if(s)return this._callUserCallbackDate(s,t);t=i(t);var a=this._daysInMonth(t._year,t._month+1);return t._day>a&&(t._day=a),t=this._fitDateToRange(t),this["_acceptable"+e](t)?t:null},_getNextDecade:function(t){t=t||{_year:this._year,_month:this._month,_day:this._day};var e=this._getCurrentDecade(t);return e+10>this._max._year?null:e+10},_getPrevDecade:function(t){t=t||{_year:this._year,_month:this._month,_day:this._day};var e=this._getCurrentDecade(t);return p(e-10)<p(this._min._year)?null:e-10},_getCurrentDecade:function(t){return t=t?t._year||t:this._year,p(this._year)},_callUserCallbackBase:function(t,e){return t.call(this,e._year,e._month+1,e._day)},_callUserCallbackBool:function(t,e){return!!this._callUserCallbackBase(t,e)},_callUserCallbackDate:function(t,e){var n=this._callUserCallbackBase(t,e);return n?d(n):null},_dateParsers:{"yyyy-mm-dd":"Y-m-d","yyyy/mm/dd":"Y/m/d","yy-mm-dd":"y-m-d","yy/mm/dd":"y/m/d","dd-mm-yyyy":"d-m-Y","dd/mm/yyyy":"d/m/Y","dd-mm-yy":"d-m-y","dd/mm/yy":"d/m/y","mm/dd/yyyy":"m/d/Y","mm-dd-yyyy":"m-d-Y"},_renderMonth:function(){var t=this._month,e=this._year;this._showDefaultView(),i.setHTML(this._monthContainer,""),this._monthContainer.appendChild(this._getMonthCalendarHeader(this._options.startWeekDay)),this._monthContainer.appendChild(this._getDayButtons(e,t))},_getFirstDayIndex:function(t,e){var n=new Date(t,e,1).getDay(),i=this._options.startWeekDay||0,o=n-i;return o%=7,0>o&&(o+=7),o},_getDayButtons:function(t,e){var n=this._daysInMonth(t,e+1),o=document.createDocumentFragment(),r=i.create("ul");o.appendChild(r);for(var s=this._getFirstDayIndex(t,e),a=0;s>a;a++)r.appendChild(i.create("li",{className:"ink-calendar-empty",setHTML:"&nbsp;"}));for(var l=1;n>=l;l++)(l-1+s)%7===0&&(r=i.create("ul"),o.appendChild(r)),r.appendChild(this._getDayButton(t,e,l));return o},_getDayButton:function(t,e,n){var o={},r=c(t,e,n);this._acceptableDay(r)?(o["data-cal-day"]=n,this._day&&0===this._dateCmp(r,this)&&(o.className="ink-calendar-on")):o.className="ink-calendar-off",o.setTextContent=n;var s=i.create("li");return s.appendChild(i.create("a",o)),s},_getMonthCalendarHeader:function(t){for(var e,n=i.create("ul",{className:"ink-calendar-header"}),o=0;7>o;o++)e=(t+o)%7,n.appendChild(i.create("li",{setTextContent:this.i18n.getKey("datepicker.week_days")[e].substring(0,1)}));return n},_addMonthClassNames:function(t){r.forEach((t||this._monthSelector).getElementsByTagName("a"),Ink.bindMethod(this,"_addMonthButtonClassNames"))},_addMonthButtonClassNames:function(t){var e=i.data(t);if(!e.calMonth)throw"not a calendar month button!";var o=+e.calMonth-1;if(o===this._month)n.addClassName(t,"ink-calendar-on"),n.removeClassName(t,"ink-calendar-off");else{n.removeClassName(t,"ink-calendar-on");var r=!this._acceptableMonth({_year:this._year,_month:o});n.addRemoveClassName(t,"ink-calendar-off",r)}},setI18n:function(t){t.clone&&(t=t.clone()),this.i18n=t},getI18n:function(){return this.i18n||m},setLanguage:function(t){this.i18n||this.setI18n(m),this.i18n.lang(t)},getLanguage:function(){return this.i18n?this.i18n.lang():m.lang()},showMonth:function(){this._renderMonth()},isMonthRendered:function(){var t=o.select(".ink-calendar-header",this._containerObject)[0];return"none"!==n.getStyle(t.parentNode,"display")&&"none"!==n.getStyle(t.parentNode.parentNode,"display")},destroy:function(){i.unwrap(this._element),i.remove(this._wrapper),i.remove(this._containerObject),t.unregisterInstance.call(this)}},t.createUIComponent(f),f}),Ink.createModule("Ink.UI.DragDrop",1,["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.UI.Common_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";function s(t){t.exceptFor.style.display="none";var e=document.elementFromPoint(t.x,t.y);return t.exceptFor.style.display="",e}function a(){o.BaseUIComponent.apply(this,arguments)}return a._name="DragDrop_1",a._optionDefinition={dragItem:["String",".drag-item"],dragHandle:["String",".drag-handle"],dropZone:["String",".drop-zone"],ignoreDrag:["String",".drag-ignore"],draggedCloneClass:["String","drag-cloned-item"],placeholderClass:["String","drag-placeholder-item"],onDrag:["Function",null],onDrop:["Function",null]},a.prototype={_init:function(){this._dragActive=!1,this._draggedElm=null,this._clonedElm=null,this._placeholderElm=null,this._originalDrop=null,this._mouseDelta=[0,0],this._addEvents()},_addEvents:function(){e.on(this._element,"mousedown touchstart",Ink.bindEvent(this._onMouseDown,this))},_onMouseDown:function(n){var i=e.element(n),o=t.findUpwardsBySelector(i,this._options.dragItem),r=t.findUpwardsBySelector(i,this._options.ignoreDrag);if(o&&!r){e.stopDefault(n);var s=Ink.s(this._options.dragHandle,o);s&&t.findUpwardsBySelector(i,this._options.dragHandle)?this._dragActive=!0:s||(this._dragActive=!0),this._dragActive&&this._startDrag(n,o)}},_startDrag:function(i,o){this._clonedElm=o.cloneNode(!0),this._placeholderElm=o.cloneNode(!1),n.addClassName(this._clonedElm,this._options.draggedCloneClass),this._clonedElm.removeAttribute("id"),n.addClassName(this._placeholderElm,this._options.placeholderClass),this._placeholderElm.removeAttribute("id");var r=o.getBoundingClientRect(),s=[r.right-r.left,r.bottom-r.top];this._clonedElm.style.width=s[0]+"px",this._clonedElm.style.height=s[1]+"px",this._placeholderElm.style.width=s[0]+"px",this._placeholderElm.style.height=s[1]+"px",this._placeholderElm.style.visibility="hidden",this._clonedElm.style.position="fixed",this._clonedElm.style.zIndex="1000",this._clonedElm.style.left=r.left+"px",this._clonedElm.style.top=r.top+"px";var a=e.pointer(i),l=t.offset(o);this._mouseDelta=[a.x-l[0],a.y-l[1]],this._clonedElm.style.opacity="0.6",o.parentNode.insertBefore(this._clonedElm,o),this._draggedElm=o,o.parentNode.insertBefore(this._placeholderElm,o),n.addClassName(o,"hide-all");var h="function"==typeof this._options.onDrag,u="function"==typeof this._options.onDrop;if(h||u){var c={dragItem:this._draggedElm,dropZone:this.getDropZone(this._draggedElm)};h&&this._options.onDrag.call(this,c),u&&(this._originalDrop=c.dropZone)}var d=e.throttle(this._onMouseMove,50,{preventDefault:!0,bind:this});e.on(document,"mousemove.inkdraggable touchmove.inkdraggable",d),e.on(document,"mouseup.inkdraggable touchend.inkdraggable",Ink.bindEvent(this._onMouseUp,this))},_onMouseMove:function(n){if(this._dragActive){var i=e.pointer(n),o=t.scrollWidth(),r=t.scrollHeight();this._clonedElm.style.left=i.x-this._mouseDelta[0]-o+"px",this._clonedElm.style.top=i.y-this._mouseDelta[1]-r+"px";var a=s({x:i.x-o,y:i.y-r,exceptFor:this._clonedElm}),l=this.getDropZone(a),h=l&&(t.isAncestorOf(this._element,l)||this._element===l);if(l&&h){var u=t.findUpwardsBySelector(a,this._options.dragItem);u&&this.isDragItem(u)?this._insertPlaceholder(u):this._dropZoneIsEmpty(l)&&l.appendChild(this._placeholderElm)}}},isDragItem:function(t){return r.matchesSelector(t,this._options.dragItem)&&t!==this._draggedElm&&t!==this._placeholderElm&&t!==this._clonedElm},_dropZoneIsEmpty:function(t){var e=Ink.ss(this._options.dragItem,t);return!i.some(e,Ink.bindMethod(this,"isDragItem"))},_onMouseUp:function(){this._dragActive&&(t.insertBefore(this._draggedElm,this._placeholderElm),t.remove(this._placeholderElm),t.remove(this._clonedElm),n.removeClassName(this._draggedElm,"hide-all"),e.off(document,".inkdraggable"),this._dragActive=!1,"function"==typeof this._options.onDrop&&this._options.onDrop.call(this,{origin:this._originalDrop,dragItem:this._draggedElm,dropZone:this.getDropZone(this._draggedElm)}),this._placeholderElm=null,this._clonedElm=null,this._draggedElm=null,this._originalDrop=null)},getDropZone:function(e){var n=t.findUpwardsBySelector(e,this._options.dropZone)||this._element;return t.isAncestorOf(this._element,n)||n===this._element?n:null},getDraggedElement:function(){return this.dragActive?this._draggedElm:null},_insertPlaceholder:function(e){var n=!0;i.inArray(this._placeholderElm,t.previousSiblings(e))||(n=!1),n?t.insertAfter(this._placeholderElm,e):t.insertBefore(this._placeholderElm,e)},destroy:function(){this._dragActive&&e.off(document,".inkdraggable"),o.destroyComponent.call(this)}},o.createUIComponent(a),a}),Ink.createModule("Ink.UI.Draggable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1","Ink.UI.Common_1"],function(t,e,n,i,o,r){"use strict";function s(t,e,n){return t=Math.min(t,n),t=Math.max(t,e)}function a(){r.BaseUIComponent.apply(this,arguments)}var l=0,h=1;return a._name="Draggable_1",a._optionDefinition={constraint:["String",!1],constraintElm:["Element",!1],top:["Number",!1],right:["Number",!1],bottom:["Number",!1],left:["Number",!1],handle:["Element",!1],revert:["Boolean",!1],cursor:["String","move"],zIndex:["Number",9999],fps:["Number",0],droppableProxy:["Element",!1],mouseAnchor:["String",void 0],dragClass:["String","drag"],skipChildren:["Boolean",!0],onStart:["Function",!1],onEnd:["Function",!1],onDrag:["Function",!1],onChange:["Function",!1]},a.prototype={_init:function(){var t=this._options;this.constraintElm=t.constraintElm&&r.elOrSelector(t.constraintElm),this.handle=!1,this.elmStartPosition=!1,this.active=!1,this.dragged=!1,this.prevCoords=!1,this.placeholder=!1,this.position=!1,this.zindex=!1,this.firstDrag=!0,t.fps&&(this.deltaMs=1e3/t.fps,this.lastRunAt=0),this.handlers={},this.handlers.start=Ink.bindEvent(this._onStart,this),this.handlers.dragFacade=Ink.bindEvent(this._onDragFacade,this),this.handlers.drag=Ink.bindEvent(this._onDrag,this),this.handlers.end=Ink.bindEvent(this._onEnd,this),this.handlers.selectStart=function(t){return e.stop(t),!1},this.handle=this._options.handle?r.elOrSelector(this._options.handle):this._element,this.handle.style.cursor=t.cursor,e.observe(this.handle,"touchstart",this.handlers.start),e.observe(this.handle,"mousedown",this.handlers.start),i.IE&&e.observe(this._element,"selectstart",this.handlers.selectStart)},destroy:function(){e.stopObserving(this.handle,"touchstart",this.handlers.start),e.stopObserving(this.handle,"mousedown",this.handlers.start),i.IE&&e.stopObserving(this._element,"selectstart",this.handlers.selectStart)},_getCoords:function(e){var n=[t.scrollWidth(),t.scrollHeight()];return{x:(e.touches?e.touches[0].clientX:e.clientX)+n[l],y:(e.touches?e.touches[0].clientY:e.clientY)+n[h]}},_cloneStyle:function(e,i){i.className=e.className,i.style.borderWidth="0",i.style.padding="0",i.style.position="absolute",i.style.width=t.elementWidth(e)+"px",i.style.height=t.elementHeight(e)+"px",i.style.left=t.elementLeft(e)+"px",i.style.top=t.elementTop(e)+"px",i.style.cssFloat=n.getStyle(e,"float"),i.style.display=n.getStyle(e,"display")},_onStart:function(i){if(!this.active&&e.isLeftClick(i)||"undefined"==typeof i.button){var o=e.element(i);if(this._options.skipChildren&&o!==this.handle)return;e.stop(i),n.addClassName(this._element,this._options.dragClass),this.elmStartPosition=[t.elementLeft(this._element),t.elementTop(this._element)];var r=[parseInt(n.getStyle(this._element,"left"),10),parseInt(n.getStyle(this._element,"top"),10)],s=t.elementDimensions(this._element);this.originalPosition=[r[l]?r[l]:null,r[h]?r[h]:null],this.delta=this._getCoords(i),this.active=!0,this.position=n.getStyle(this._element,"position"),this.zindex=n.getStyle(this._element,"zIndex");var a=document.createElement("div");if(a.style.position=this.position,a.style.width=s[l]+"px",a.style.height=s[h]+"px",a.style.marginTop=n.getStyle(this._element,"margin-top"),a.style.marginBottom=n.getStyle(this._element,"margin-bottom"),a.style.marginLeft=n.getStyle(this._element,"margin-left"),a.style.marginRight=n.getStyle(this._element,"margin-right"),a.style.borderWidth="0",a.style.padding="0",a.style.cssFloat=n.getStyle(this._element,"float"),a.style.display=n.getStyle(this._element,"display"),a.style.visibility="hidden",this.delta2=[this.delta.x-this.elmStartPosition[l],this.delta.y-this.elmStartPosition[h]],this._options.mouseAnchor){var u=this._options.mouseAnchor.split(" "),c=[s[l],s[h]];"left"===u[0]?c[l]=0:"center"===u[0]&&(c[l]=parseInt(c[l]/2,10)),"top"===u[1]?c[h]=0:"center"===u[1]&&(c[h]=parseInt(c[h]/2,10)),this.applyDelta=[this.delta2[l]-c[l],this.delta2[h]-c[h]]}var d=this._options.fps?"dragFacade":"drag";if(this.placeholder=a,this._options.onStart&&this._options.onStart(this._element,i),this._options.droppableProxy){this.proxy=document.createElement("div"),s=[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight];var p=this.proxy.style;p.width=s[l]+"px",p.height=s[h]+"px",p.position="fixed",p.left="0",p.top="0",p.zIndex=this._options.zIndex+1,p.backgroundColor="#FF0000",n.setOpacity(this.proxy,0);for(var f=document.body.firstChild;f&&1!==f.nodeType;)f=f.nextSibling;document.body.insertBefore(this.proxy,f),e.observe(this.proxy,"mousemove",this.handlers[d]),e.observe(this.proxy,"touchmove",this.handlers[d])}else e.observe(document,"mousemove",this.handlers[d]);return this._element.style.position="absolute",this._element.style.zIndex=this._options.zIndex,this._element.parentNode.insertBefore(this.placeholder,this._element),this._onDrag(i),e.observe(document,"mouseup",this.handlers.end),e.observe(document,"touchend",this.handlers.end),!1}},_onDragFacade:function(t){var e=+new Date;(!this.lastRunAt||e>this.lastRunAt+this.deltaMs)&&(this.lastRunAt=e,this._onDrag(t))},_onDrag:function(n){if(this.active){e.stop(n),this.dragged=!0;var i=this._getCoords(n),o=i.x,r=i.y,a=this._options,u=!1,c=!1;if(this.prevCoords&&o!==this.prevCoords.x||r!==this.prevCoords.y){a.onDrag&&a.onDrag(this._element,n),this.prevCoords=i,u=this.elmStartPosition[l]+o-this.delta.x,c=this.elmStartPosition[h]+r-this.delta.y;var d=t.elementDimensions(this._element);if(this.constraintElm){var p=t.offset(this.constraintElm),f=t.elementDimensions(this.constraintElm),m=p[h]+(a.top||0),_=p[h]+f[h]-(a.bottom||0),g=p[l]+(a.left||0),v=p[l]+f[l]-(a.right||0);c=s(c,m,_-d[h]),u=s(u,g,v-d[l])}else if(a.constraint){var y=a.right===!1?t.pageWidth()-d[l]:a.right,b=a.left===!1?0:a.left,k=a.top===!1?0:a.top,C=a.bottom===!1?t.pageHeight()-d[h]:a.bottom;("horizontal"===a.constraint||"both"===a.constraint)&&(u=s(u,b,y)),("vertical"===a.constraint||"both"===a.constraint)&&(c=s(c,k,C))}var I=Ink.getModule("Ink.UI.Droppable_1");if(this.firstDrag&&(I&&I.updateAll(),this.firstDrag=!1),u&&(this._element.style.left=u+"px"),c&&(this._element.style.top=c+"px"),I){var w=this._options.mouseAnchor?{x:o-this.applyDelta[l],y:r-this.applyDelta[h]}:i;I.action(w,"drag",n,this._element)}a.onChange&&a.onChange(this)}}},_onEnd:function(i){if(e.stopObserving(document,"mousemove",this.handlers.drag),e.stopObserving(document,"touchmove",this.handlers.drag),this._options.fps&&this._onDrag(i),n.removeClassName(this._element,this._options.dragClass),this.active&&this.dragged){this._options.droppableProxy&&document.body.removeChild(this.proxy),this.pt&&(t.remove(this.pt),this.pt=void 0),this.placeholder&&t.remove(this.placeholder),this._options.revert&&(this._element.style.position=this.position,this._element.style.zIndex=null!==this.zindex?this.zindex:"auto",this._element.style.left=this.originalPosition[l]?this.originalPosition[l]+"px":"",this._element.style.top=this.originalPosition[h]?this.originalPosition[h]+"px":""),this._options.onEnd&&this._options.onEnd(this._element,i);
var o=Ink.getModule("Ink.UI.Droppable_1");o&&o.action(this._getCoords(i),"drop",i,this._element),this.position=!1,this.zindex=!1,this.firstDrag=!0}this.active=!1,this.dragged=!1}},r.createUIComponent(a),a}),Ink.createModule("Ink.UI.Drawer","1",["Ink.UI.Common_1","Ink.Dom.Loaded_1","Ink.Dom.Selector_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(t,e,n,i,o,r){"use strict";function s(t){if(document.addEventListener){d&&a();var e=!1;d=function(n){return"mousedown"===n.type||"mouseup"===n.type?void(e="mousedown"===n.type):void(e||t(n.target))},document.addEventListener("focus",d,!0),document.addEventListener("mousedown",d,!0),document.addEventListener("mouseup",d,!0)}}function a(){document.addEventListener&&d&&(document.removeEventListener("focus",d,!0),document.removeEventListener("mousedown",d,!0),document.removeEventListener("mouseup",d,!0),d=null)}function l(t){for(var e=Ink.ss("[tabindex]",t),n=null,i=null,o=0;o<e.length;o++){var r=+e[o].tabIndex;r||e.splice(o,1),(null===n||n>r)&&(n=r,i=e[o])}if(i)return i.focus(),!0;var s=Ink.s(c,t);return s?(s.focus(),!0):!1}function h(t){return'Ink.UI.Drawer_1: Could not find the "'+t+'" element on this page. Please make sure it exists.'}function u(e,n){t.isDOMElement(e)||(n=e),t.BaseUIComponent.apply(this,[document.body,n])}var c=['[tabindex]:not([tabindex="-1"])',"input","select","textarea","button","object","a[href]","area"].join(","),d=null,p=function(t){var e={WebkitTransitionProperty:"webkitTransitionEnd",transitionProperty:"transitionend"};for(var n in e)if(e.hasOwnProperty(n)&&void 0!==t.style[n])return{styleProp:n,eventName:e[n]};return!1}(document.createElement("div"));return u.transitionSupport=p,u._name="Drawer_1",u._optionDefinition={parentSelector:["String",".ink-drawer"],leftDrawer:["String",".left-drawer"],leftTrigger:["String",".left-drawer-trigger"],rightDrawer:["String",".right-drawer"],rightTrigger:["String",".right-drawer-trigger"],contentDrawer:["String",".content-drawer"],mode:["String","push"],sides:["String","both"]},u.prototype={_init:function(){function t(t){t.drawer&&t.triggers.length?e=!0:n=h(t.drawer?t.drawerOption:t.triggerOption)}if(this._contentDrawers=Ink.ss(this._options.contentDrawer),this._leftDrawer=Ink.s(this._options.leftDrawer),this._leftTriggers=Ink.ss(this._options.leftTrigger),this._rightDrawer=Ink.s(this._options.rightDrawer),this._rightTriggers=Ink.ss(this._options.rightTrigger),r.addClassName(document.body,"ink-drawer"),0===this._contentDrawers.length)throw new Error('Ink.UI.Drawer_1: Could not find any "'+this._options.contentDrawer+'" elements on this page. Please make sure you have at least one.');switch(this._options.sides){case"both":this._triggers=this._options.leftTrigger+", "+this._options.rightTrigger+", "+this._options.contentDrawer;break;case"left":this._triggers=this._options.leftTrigger+", "+this._options.contentDrawer;break;case"right":this._triggers=this._options.rightTrigger+", "+this._options.contentDrawer}var e=!1,n=null;("left"===this._options.sides||"both"===this._options.sides)&&t({name:"left",drawer:this._leftDrawer,drawerOption:this._options.leftDrawer,triggers:this._leftTriggers,triggerOption:this._options.leftTrigger}),("right"===this._options.sides||"both"===this._options.sides)&&t({name:"right",drawer:this._rightDrawer,drawerOption:this._options.rightDrawer,triggers:this._rightTriggers,triggerOption:this._options.rightTrigger}),e||Ink.warn(n),this._isOpen=!1,this._direction=void 0,this._handlers={click:Ink.bindEvent(this._onClick,this),afterTransition:Ink.bindEvent(this._afterTransition,this)},this._addEvents()},_onClick:function(t){var e=i.findUpwardsBySelector(t.currentTarget,this._options.leftTrigger)?"left":i.findUpwardsBySelector(t.currentTarget,this._options.rightTrigger)?"right":null;if(e)return void this._onTriggerClicked(t,e);if(this._isOpen){var n=i.findUpwardsBySelector(t.currentTarget,this._options.contentDrawer),o=i.isLink(t.target);(n||o)&&this.close(),n&&t.preventDefault()}},_onTriggerClicked:function(t,e){this._isOpen?this.close():this.open(e),t.preventDefault()},_afterTransition:function(){this._isOpen||r.removeClassName(this._getRecentDrawer(),"show")},_addEvents:function(){o.on(document.body,"click",this._triggers+', a[href*="#"]',this._handlers.click)},_getRecentDrawer:function(){return"left"===this._direction?this._leftDrawer:"right"===this._direction?this._rightDrawer:null},open:function(t){this._isOpen=!0,this._direction=t;var e=this._getRecentDrawer();r.addClassName(e,"show"),setTimeout(Ink.bind(function(){r.addClassName(document.body,[this._options.mode,t])},this),0),p&&this._transitionWillOccur(e)&&o.one(e,p.eventName,function(){r.removeClassName(e,"show");+e.offsetWidth;r.addClassName(e,"show")});var n=document.activeElement,h=l(e);s(Ink.bind(function(t){var o=i.isAncestorOf(e,t);o||(this.close(),a(),h&&n&&n.focus())},this))},_transitionWillOccur:function(t){return!(!p||!r.getStyle(t,p.styleProp))},close:function(){if(this._isOpen!==!1){var t=this._getRecentDrawer();if(t){a(),this._isOpen=!1;var e=null;p&&(e=this._transitionWillOccur(this._getRecentDrawer())),r.removeClassName(document.body,[this._options.mode,this._direction]),e?o.one(document.body,p.eventName,this._handlers.afterTransition):this._handlers.afterTransition()}}}},t.createUIComponent(u),u}),Ink.createModule("Ink.UI.Dropdown","1",["Ink.UI.Common_1","Ink.UI.Toggle_1","Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="Dropdown_1",o._optionDefinition={target:["Element"],hoverOpen:["Number",null],dismissOnInsideClick:["Boolean",!1],dismissOnOutsideClick:["Boolean",!0],dismissAfter:["Number",null],onInsideClick:["Function",null],onOutsideClick:["Function",null],onOpen:["Function",null],onDismiss:["Function",null]},o.prototype={_init:function(){this._toggle=new e(this._element,{target:this._options.target,closeOnInsideClick:null,closeOnClick:!1,onChangeState:Ink.bind(function(t){return this._openOrDismiss(t,!0,!0)},this)}),n.observeMulti([this._options.target,this._element],"mouseout",Ink.bindMethod(this,"_onMouseOut")),n.observeMulti([this._options.target,this._element],"mouseover",Ink.bindMethod(this,"_onMouseOver")),n.observe(this._options.target,"click",Ink.bindMethod(this,"_onInsideClick")),n.observe(document,"click",Ink.bindMethod(this,"_onOutsideClick"))},_onMouseOver:function(){"number"==typeof this._options.hoverOpen&&this._toggle.getState()===!1&&(clearTimeout(this._openTimeout),this._openTimeout=setTimeout(Ink.bindMethod(this,"open",!0),1e3*this._options.hoverOpen)),"number"==typeof this._options.dismissAfter&&clearTimeout(this._dismissTimeout)},_onMouseOut:function(){"number"==typeof this._options.dismissAfter&&this._toggle.getState()===!0&&(clearTimeout(this._dismissTimeout),this._dismissTimeout=setTimeout(Ink.bindMethod(this,"dismiss",!0),1e3*this._options.dismissAfter)),"number"==typeof this._options.hoverOpen&&clearTimeout(this._openTimeout)},_onInsideClick:function(t){var e=this._handlerCall("onInsideClick",n.element(t));e!==!1&&this._options.dismissOnInsideClick&&this.dismiss(!0)},_onOutsideClick:function(t){var e=n.element(t),o=i.findUpwardsHaving(e,Ink.bind(function(t){return t===this._element},this)),r=i.findUpwardsHaving(e,Ink.bind(function(t){return t===this._options.target},this));if(!o&&!r){var s=this._handlerCall("onOutsideClick",e);if(s===!1)return;this._options.dismissOnOutsideClick&&this.dismiss(!0)}},dismiss:function(t){this._openOrDismiss(!1,t,arguments[1])},open:function(t){this._openOrDismiss(!0,t,arguments[1])},_openOrDismiss:function(t,e,n){if(!this._toggle||this._toggle.getState()!==t){if(e&&this._handlerCall(t?"onOpen":"onDismiss")===!1)return!1;n||this._toggle.setState(t),clearTimeout(this._dismissTimeout),clearTimeout(this._openTimeout)}},_handlerCall:function(t){return this._options[t]?this._options[t].call(this,[].slice.call(arguments,1)):void 0}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Droppable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.UI.Common_1","Ink.Util.Array_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";var s=function(t){return function(e){return n.addClassName(t,e)}},a=function(t){return function(e){return n.removeClassName(t,e)}},l={debug:!1,_droppables:[],_draggables:[],add:function(e,n){function o(t){t.style.position="inherit"}e=i.elOrSelector(e,"Droppable.add target element");var r=Ink.extendObj({hoverClass:n.hoverclass||!1,accept:!1,onHover:!1,onDrop:!1,onDropOut:!1},n||{},t.data(e));"string"==typeof r.hoverClass&&(r.hoverClass=r.hoverClass.split(/\s+/));var s,a=this,l={move:function(t,e){o(t),e.appendChild(t)},copy:function(t,e){o(t),e.appendChild(t.cloneNode(!0))},revert:function(t){a._findDraggable(t).originalParent.appendChild(t),o(t)}};if("string"==typeof r.onHover&&(s=r.onHover,r.onHover=l[s],void 0===r.onHover))throw new Error("Unknown hover event handler: "+s);if("string"==typeof r.onDrop&&(s=r.onDrop,r.onDrop=l[s],void 0===r.onDrop))throw new Error("Unknown drop event handler: "+s);if("string"==typeof r.onDropOut&&(s=r.onDropOut,r.onDropOut=l[s],void 0===r.onDropOut))throw new Error("Unknown dropOut event handler: "+s);var h={element:e,data:{},options:r};this._droppables.push(h),this._update(h)},_findData:function(t){for(var e=this._droppables,n=0,i=e.length;i>n;n++)if(e[n].element===t)return e[n]},_findDraggable:function(t){for(var e=this._draggables,n=0,i=e.length;i>n;n++)if(e[n].element===t)return e[n]},updateAll:function(){o.each(this._droppables,l._update)},update:function(t){this._update(this._findData(t))},_update:function(e){var n=e.data,i=e.element;n.left=t.offsetLeft(i),n.top=t.offsetTop(i),n.right=n.left+t.elementWidth(i),n.bottom=n.top+t.elementHeight(i)},remove:function(t){t=i.elOrSelector(t);for(var e=this._droppables.length,n=0;e>n;n++)if(this._droppables[n].element===t){this._droppables.splice(n,1);break}return e!==this._droppables.length},action:function(t,e,n,i){o.each(this._droppables,Ink.bind(function(l){var h=l.data,u=l.options,c=l.element;(!u.accept||r.matches(u.accept,[i]).length)&&("drag"!==e||this._findDraggable(i)||this._draggables.push({element:i,originalParent:i.parentNode}),t.x>=h.left&&t.x<=h.right&&t.y>=h.top&&t.y<=h.bottom?"drag"===e?(u.hoverClass&&o.each(u.hoverClass,s(c)),u.onHover&&u.onHover(i,c)):"drop"===e&&(u.hoverClass&&o.each(u.hoverClass,a(c)),u.onDrop&&u.onDrop(i,c,n)):"drag"===e&&u.hoverClass?o.each(u.hoverClass,a(c)):"drop"===e&&u.onDropOut&&u.onDropOut(i,c,n))},this))}};return l}),Ink.createModule("Ink.UI.FormValidator","1",["Ink.Dom.Element_1","Ink.Dom.Css_1","Ink.Util.Validator_1","Ink.Dom.Selector_1"],function(t,e,n,i){"use strict";function o(t){if(!t.name)return[];if(!t.form)return i.select('[name="'+t.name+'"]');var e=t.form[t.name];return e?("undefined"==typeof e.length&&(e=[e]),e):function(){for(var e=[],n=Ink.ss("*",t.form),i=0;i<n.length;i++)n[i].name===t.name&&e.push(n[i]);return e}()}var r={version:"1",_flagMap:{"ink-fv-required":{msg:"Required field"},"ink-fv-email":{msg:"Invalid e-mail address"},"ink-fv-url":{msg:"Invalid URL"},"ink-fv-number":{msg:"Invalid number"},"ink-fv-phone_pt":{msg:"Invalid phone number"},"ink-fv-phone_cv":{msg:"Invalid phone number"},"ink-fv-phone_mz":{msg:"Invalid phone number"},"ink-fv-phone_ao":{msg:"Invalid phone number"},"ink-fv-date":{msg:"Invalid date"},"ink-fv-confirm":{msg:"Confirmation does not match"},"ink-fv-custom":{msg:""}},elements:{},confirmElms:{},hasConfirm:{},_errorClassName:"tip error",_errorValidationClassName:"validaton",_errorTypeWarningClassName:"warning",_errorTypeErrorClassName:"error",validate:function(t,e){if(this._free(),e=Ink.extendObj({onSuccess:!1,onError:!1,customFlag:!1,confirmGroup:[]},e||{}),"string"==typeof t&&(t=document.getElementById(t)),null===t)return!1;this.element=t,("undefined"==typeof this.element.id||null===this.element.id||""===this.element.id)&&(this.element.id="ink-fv_randomid_"+Math.round(99999*Math.random())),this.custom=e.customFlag,this.confirmGroup=e.confirmGroup;var n=this._validateElements();return n.length>0?(e.onError?e.onError(n):this._showError(t,n),!1):(e.onError||this._clearError(t),this._clearCache(),e.onSuccess&&e.onSuccess(),!0)},reset:function(){this._clearError(),this._clearCache()},_free:function(){this.element=null,this.custom=!1,this.confirmGroup=!1},_clearCache:function(){this.element=null,this.elements=[],this.custom=!1,this.confirmGroup=!1},_getElements:function(){var t=this.elements[this.element.id]=[];this.confirmElms[this.element.id]=[];for(var n=i.select(":input",this.element),o=!1,r=0,s=n.length;s>r;r++){o=n[r];var a=(o.getAttribute("type")+"").toLowerCase();if("radio"===a||"checkbox"===a){if(0===t.length||o.getAttribute("type")!==t[t.length-1].getAttribute("type")&&o.getAttribute("name")!==t[t.length-1].getAttribute("name"))for(var l in this._flagMap)if(e.hasClassName(o,l)){t.push(o);break}}else{for(var h in this._flagMap)if(e.hasClassName(o,h)&&"ink-fv-confirm"!==h){t.push(o);break}e.hasClassName(o,"ink-fv-confirm")&&(this.confirmElms[this.element.id].push(o),this.hasConfirm[this.element.id]=!0)}}},_validateElements:function(){var t;this._getElements(),this.hasConfirm[this.element.id]===!0&&(t=this._makeConfirmGroups());for(var n,i=[],o=!1,r=!1,s=0,a=this.elements[this.element.id].length;a>s;s++)if(n=!1,o=this.elements[this.element.id][s],!o.disabled)for(var l in this._flagMap)if(e.hasClassName(o,l))if("ink-fv-custom"!==l&&"ink-fv-confirm"!==l)this._isValid(o,l)||(n?i[i.length-1].errors.push(l):(i.push({elm:o,errors:[l]}),n=!0));else if("ink-fv-confirm"!==l)r=this._isCustomValid(o),r.length>0&&i.push({elm:o,errors:[l],custom:r});else if("ink-fv-confirm"===l)continue;return i=this._validateConfirmGroups(t,i)},_validateConfirmGroups:function(t,e){var n=!1;for(var i in t)t.hasOwnProperty(i)&&(n=t[i],2===n.length&&n[0].value!==n[1].value&&e.push({elm:n[1],errors:["ink-fv-confirm"]}));return e},_makeConfirmGroups:function(){var t;if(this.confirmGroup&&this.confirmGroup.length>0){t={};for(var n=!1,i=!1,o=0,r=this.confirmElms[this.element.id].length;r>o;o++){n=this.confirmElms[this.element.id][o];for(var s=0,a=this.confirmGroup.length;a>s;s++)i=this.confirmGroup[s],e.hasClassName(n,i)&&("undefined"==typeof t[i]?t[i]=[n]:t[i].push(n))}return t}return 2===this.confirmElms[this.element.id].length&&(t={"ink-fv-confirm":[this.confirmElms[this.element.id][0],this.confirmElms[this.element.id][1]]}),t},_isCustomValid:function(t){for(var n=[],i=!1,o=0,r=this.custom.length;r>o;o++)i=this.custom[o],e.hasClassName(t,i.flag)&&(i.callback(t,i.msg)||n.push({flag:i.flag,msg:i.msg}));return n},_isValid:function(t,i){var r=t.nodeName.toLowerCase(),s=(t.getAttribute("type")||"").toLowerCase(),a=this._trim(t.value);if("ink-fv-required"!==i&&"checkbox"!==s&&"radio"!==s&&""===a)return!e.hasClassName(t,"ink-fv-required");switch(i){case"ink-fv-required":if("select"===r)return t.selectedIndex>0?!0:!1;if("checkbox"!==s&&"radio"!==s)return""!==a;if("checkbox"===s||"radio"===s){for(var l=o(t),h=0,u=l.length;u>h;h++)if(l[h].checked===!0)return!0;return!1}return!1;case"ink-fv-email":return n.mail(t.value);case"ink-fv-url":return n.url(t.value);case"ink-fv-number":return!isNaN(Number(t.value))&&isFinite(Number(t.value));case"ink-fv-phone_pt":return n.isPTPhone(t.value);case"ink-fv-phone_cv":return n.isCVPhone(t.value);case"ink-fv-phone_ao":return n.isAOPhone(t.value);case"ink-fv-phone_mz":return n.isMZPhone(t.value);case"ink-fv-date":var c=Ink.getModule("Ink.Dom.Element",1),d=c.data(t),p="yyyy-mm-dd";if(e.hasClassName(t,"ink-datepicker")&&"format"in d?p=d.format:"validFormat"in d&&(p=d.validFormat),!(p in n._dateParsers)){var f=[];for(var m in n._dateParsers)n._dateParsers.hasOwnProperty(m)&&f.push(m);throw new Error("The attribute data-valid-format must be one of the following values: "+f.join(", "))}return n.isDate(p,t.value);case"ink-fv-custom":}return!1},_showError:function(t,e){this._clearError(t);for(var n=!1,i=0,o=e.length;o>i;i++)n=e[i].elm,n&&this._showAnErrorOnElement(n,e[i])},_showAnErrorOnElement:function(n,i){var o=t.findUpwardsByClass(n,"control-group"),r=t.findUpwardsByClass(n,"control"),s=[this._errorClassName,this._errorTypeClassName].join(" "),a=t.create("p",{className:s});a.innerHTML="ink-fv-custom"!==i.errors[0]?this._flagMap[i.errors[0]].msg:i.custom[0].msg;var l=r||o;l?l.appendChild(a):t.insertAfter(a,n),r&&("ink-fv-required"===i.errors[0]?e.addClassName(o,"validation error"):e.addClassName(o,"validation warning"))},_clearError:function(n){for(var i,o,r=n.getElementsByTagName("p"),s=r.length-1;s>=0;s--)i=r[s],e.hasClassName(i,this._errorClassName)&&(o=t.findUpwardsBySelector(i,".control-group"),o&&e.removeClassName(o,["validation","error","warning"]),e.hasClassName(i,this._errorClassName,!0)&&t.remove(i));var a=n.getElementsByTagName("ul");for(s=a.length-1;s>=0;s--)i=a[s],e.hasClassName(i,"control-group")&&e.removeClassName(i,"validation error")},_trim:function(t){return"string"==typeof t?t.replace(/^\s+|\s+$|\n+$/g,""):void 0}};return r}),Ink.createModule("Ink.UI.FormValidator","2",["Ink.UI.Common_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.Util.I18n_1","Ink.Util.Validator_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(t){switch(t.nodeName.toLowerCase()){case"select":return Ink.s("option:selected",t).value;case"textarea":return t.value;case"input":if(!("type"in t))return t.value;if("radio"===t.type||"checkbox"===t.type){if(t.checked)return t.value}else if("file"!==t.type)return t.value;return;default:return t.innerHTML}}function h(){t.BaseUIComponent.apply(this,arguments)}function u(){t.BaseUIComponent.apply(this,arguments)}var c={required:function(t){return"undefined"!=typeof t&&!/^\s*$/.test(t)},min_length:function(t,e){return"string"==typeof t&&t.length>=parseInt(e,10)},max_length:function(t,e){return"string"==typeof t&&t.length<=parseInt(e,10)},exact_length:function(t,e){return"string"==typeof t&&t.length===parseInt(e,10)},email:function(t){return"string"==typeof t&&a.mail(t)},url:function(t,e){return e=e||!1,"string"==typeof t&&a.url(t,e)},ip:function(t,e){return"string"!=typeof t?!1:a.isIP(t,e)},phone:function(t,e){if("string"!=typeof t)return!1;var n=e?e.toUpperCase():"";return a["is"+n+"Phone"](t)},credit_card:function(t,e){return"string"!=typeof t?!1:a.isCreditCard(t,e||"default")},date:function(t,e){return"string"==typeof t&&a.isDate(e,t)},alpha:function(t,e){return a.ascii(t,{singleLineWhitespace:e})},text:function(t,e,n){return a.unicode(t,{singleLineWhitespace:e,unicodePunctuation:n})},latin:function(t,e,n){return"string"!=typeof t?!1:a.latin1(t,{latin1Punctuation:e,singleLineWhitespace:n})},alpha_numeric:function(t){return a.ascii(t,{numbers:!0})},alpha_dash:function(t){return a.ascii(t,{dash:!0,underscore:!0})},digit:function(t){return"string"==typeof t&&/^[0-9]{1}$/.test(t)},integer:function(t,e){return a.number(t,{negative:!e,decimalPlaces:0})},decimal:function(t,e,n,i){return a.number(t,{decimalSep:e||".",decimalPlaces:+n||null,maxDigits:+i})},numeric:function(t,e,n,i){return e=e||".",-1!==t.indexOf(e)?c.decimal(t,e,n,i):c.integer(t)},range:function(t,e,n,i){return t=+t,e=+e,n=+n,isNaN(t)||isNaN(e)||isNaN(n)?!1:e>t||t>n?!1:i?(t-e)%i===0:!0},color:function(t){return a.isColor(t)},matches:function(t,e){var n=this.getFormElements()[e];if(!n){for(var i=Ink.ss("input, select, textarea, .control-group",this._options.form._element),o=0;o<i.length;o++)if((i[o].name||i[o].id)===e)return l(i[o])===t;return!1}n=n[0];var r=n.getValue();return n._rules.required&&""===r?!1:t===r},ean:function(t){return a.isEAN(t.replace(/[^\d]/g,""),"ean-13")}},d=new s({en_US:{"formvalidator.required":"Filling {field} is mandatory","formvalidator.min_length":"The {field} must have a minimum size of {param1} characters","formvalidator.max_length":"The {field} must have a maximum size of {param1} characters","formvalidator.exact_length":"The {field} must have an exact size of {param1} characters","formvalidator.email":"The {field} must have a valid e-mail address","formvalidator.url":"The {field} must have a valid URL","formvalidator.ip":"The {field} does not contain a valid {param1} IP address","formvalidator.phone":"The {field} does not contain a valid {param1} phone number","formvalidator.credit_card":"The {field} does not contain a valid {param1} credit card","formvalidator.date":"The {field} should contain a date in the {param1} format","formvalidator.alpha":"The {field} should only contain letters","formvalidator.text":"The {field} should only contain alphabetic characters","formvalidator.latin":"The {field} should only contain alphabetic characters","formvalidator.alpha_numeric":"The {field} should only contain letters or numbers","formvalidator.alpha_dash":"The {field} should only contain letters or dashes","formvalidator.digit":"The {field} should only contain a digit","formvalidator.integer":"The {field} should only contain an integer","formvalidator.decimal":"The {field} should contain a valid decimal number","formvalidator.numeric":"The {field} should contain a number","formvalidator.range":"The {field} should contain a number between {param1} and {param2}","formvalidator.color":"The {field} should contain a valid color","formvalidator.matches":"The {field} should match the field {param1}"},pt_PT:{"formvalidator.required":"Preencher {field} \xe9 obrigat\xf3rio","formvalidator.min_length":"{field} deve ter no m\xednimo {param1} caracteres","formvalidator.max_length":"{field} tem um tamanho m\xe1ximo de {param1} caracteres","formvalidator.exact_length":"{field} devia ter exactamente {param1} caracteres","formvalidator.email":"{field} deve ser um e-mail v\xe1lido","formvalidator.url":"O {field} deve ser um URL v\xe1lido","formvalidator.ip":"{field} n\xe3o tem um endere\xe7o IP {param1} v\xe1lido","formvalidator.phone":"{field} deve ser preenchido com um n\xfamero de telefone {param1} v\xe1lido.","formvalidator.credit_card":"{field} n\xe3o tem um cart\xe3o de cr\xe9dito {param1} v\xe1lido","formvalidator.date":"{field} deve conter uma data no formato {param1}","formvalidator.alpha":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.text":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.latin":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.alpha_numeric":"{field} deve conter apenas letras e n\xfameros","formvalidator.alpha_dash":"{field} deve conter apenas letras e tra\xe7os","formvalidator.digit":"{field} destina-se a ser preenchido com apenas um d\xedgito","formvalidator.integer":"{field} deve conter um n\xfamero inteiro","formvalidator.decimal":"{field} deve conter um n\xfamero v\xe1lido","formvalidator.numeric":"{field} deve conter um n\xfamero v\xe1lido","formvalidator.range":"{field} deve conter um n\xfamero entre {param1} e {param2}","formvalidator.color":"{field} deve conter uma cor v\xe1lida","formvalidator.matches":"{field} deve corresponder ao campo {param1}"}},"en_US");return h._name="FormElement_1",h._optionDefinition={label:["String",null],rules:["String",null],error:["String",null],form:["Object"]},h.prototype={_init:function(){this._errors={},this._rules={},this._value=null,null===this._options.label&&(this._options.label=this._getLabel())},_getLabel:function(){var t=e.findUpwardsBySelector(this._element,".control-group label");return t?e.textContent(t):this._element.name||this._element.id||""},_parseRules:function(t){this._rules={},t=t.split("|");var e,n,i,o,r=t.length;if(r>0)for(e=0;r>e;e++)if(n=t[e])if(-1!==(o=n.indexOf("["))){i=n.substr(o+1),i=i.split("]"),i=i[0],i=i.split(",");for(var s=0,a=i.length;a>s;s++)i[s]="true"===i[s]?!0:"false"===i[s]?!1:i[s];i.splice(0,0,this.getValue()),n=n.substr(0,o),this._rules[n]=i}else this._rules[n]=[this.getValue()]},_addError:function(t){for(var e=this._rules[t]||[],n={field:this._options.label,value:this.getValue()},i=1;i<e.length;i++)n["param"+i]=e[i];var o,r="formvalidator."+t;this._options.error?o=this._options.error:(o=d.text(r,n),o===r&&(o="[Validation message not found for rule ]"+t)),this._errors[t]=o},getValue:function(){return l(this._element)},getErrors:function(){return this._errors},getElement:function(){return this._element},getFormElements:function(){return this._options.form._formElements},validate:function(){this._errors={},this._parseRules(this._options.rules);var t=""!==this.getValue()||"required"in this._rules||"matches"in this._rules;if(t)for(var e in this._rules)if(this._rules.hasOwnProperty(e)){if("function"!=typeof c[e])return Ink.warn('Rule "'+e+'" not found. Used in element:',this._element),this._addError(null),!1;if(c[e].apply(this,this._rules[e])===!1)return this._addError(e),!1}return!0}},t.createUIComponent(h),u._name="FormValidator_1",u._optionDefinition={eventTrigger:["String","submit"],neverSubmit:["Boolean",!1],searchFor:["String","input, select, textarea, .control-group"],beforeValidation:["Function",void 0],onError:["Function",void 0],onSuccess:["Function",void 0]},u.setRule=function(t,e,n){if(c[t]=n,d.getKey("formvalidator."+t)!==e){var i={};i["formvalidator."+t]=e;var o={};o[d.lang()]=i,d.append(o)}},u.getI18n=function(){return d},u.setI18n=function(t){d=t},u.appendI18n=function(){d.append.apply(d,[].slice.call(arguments))},u.setLanguage=function(t){d.lang(t)},u.getRules=function(){return c},u.prototype={_init:function(){this._rootElement=this._element,this._formElements={},this._errorMessages=[],this._markedErrorElements=[],"string"==typeof this._options.eventTrigger&&n.observe(this._rootElement,this._options.eventTrigger,Ink.bindEvent(this.validate,this))},getElements:function(){this._formElements||(this._formElements={});for(var t=i.select(this._options.searchFor,this._rootElement),n=0;n<t.length;n+=1){var o=t[n],r=e.data(o);if("rules"in r){var s,a={form:this};"name"in o&&o.name?s=o.name:"id"in o&&o.id?s=o.id:(s="element_"+Math.floor(100*Math.random()),o.id=s),s in this._formElements||(this._formElements[s]=[]);var l=this._getOrCreateFormElementInstance(s,o,a);l&&this._formElements[s].push(l)}}return this._formElements},_getOrCreateFormElementInstance:function(t,e,n){for(var i=0;i<this._formElements[t].length;i++)if(this._formElements[t][i].getElement()===e)return null;return new h(e,n)},setI18n:function(t){t.clone&&(t=t.clone()),this.i18n=t},getI18n:function(){return this.i18n||d},setLanguage:function(t){this.i18n||this.setI18n(d),this.i18n.lang(t)},getLanguage:function(){return this.i18n?this.i18n.lang():d.lang()},validate:function(t){this._options.neverSubmit&&t&&n.stopDefault(t),"function"==typeof this._options.beforeValidation&&this._options.beforeValidation(),r.each(this._markedErrorElements,function(t){o.removeClassName(t,["validation","error"])}),r.each(this._errorMessages,e.remove),this.getElements();var i=[];for(var s in this._formElements)if(this._formElements.hasOwnProperty(s))for(var a=0;a<this._formElements[s].length;a+=1)this._formElements[s][a].validate()||i.push(this._formElements[s][a]);return 0===i.length?("function"==typeof this._options.onSuccess&&this._options.onSuccess(),!0):(t&&n.stopDefault(t),"function"==typeof this._options.onError&&this._options.onError(i),this._errorMessages=[],this._markedErrorElements=[],r.each(i,Ink.bind(function(t){var n,i;o.hasClassName(t.getElement(),"control-group")?(n=t.getElement(),i=Ink.s(".control",t.getElement())):(n=e.findUpwardsByClass(t.getElement(),"control-group"),i=e.findUpwardsByClass(t.getElement(),"control")),n&&(o.addClassName(n,["validation","error"]),this._markedErrorElements.push(n));var r=document.createElement("p");o.addClassName(r,"tip"),i||n?(i||n).appendChild(r):e.insertAfter(r,t.getElement());var s=t.getErrors(),a=[];for(var l in s)s.hasOwnProperty(l)&&a.push(s[l]);r.innerHTML=a.join("<br/>"),this._errorMessages.push(r)},this)),!1)}},t.createUIComponent(u),u.FormElement=h,u.validationFunctions=c,u}),Ink.createModule("Ink.UI.ImageQuery","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Util.Array_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="ImageQuery_1",o._optionDefinition={src:["String"],retina:["String",void 0],queries:["Object"],onLoad:["Function",null]},o.prototype={_init:function(){var t;if(-1!==(t=this._element.src.lastIndexOf("?"))){var n=this._element.src.substr(t);this._filename=this._element.src.replace(n,"").split("/").pop()+n}else this._filename=this._element.src.split("/").pop();this._options.queries||(this._options.queries=[]),this._options.queries=i.sortMulti(this._options.queries,"width").reverse(),"function"==typeof this._options.onLoad&&e.observe(this._element,"load",Ink.bindEvent(this._onLoad,this)),this._onResize(),e.observe(window,"resize",e.throttle(Ink.bindMethod(this,"_onResize"),400))},_onResize:function(){if(this._options.queries.length){var t=this._findCurrentQuery();this._element.src=this.getQuerySrc(t)}},_findCurrentQuery:function(){for(var t=n.viewportWidth(),e=this._options.queries,i=e.length-1,o=0;i>o;o+=1)if(e[o].width<=t)return e[o];return e[i]},getQuerySrc:function(t){var e=t.src||this._options.src;if(window.devicePixelRatio>1&&void 0!==this._options.retina&&(e=t.retina||this._options.retina),t.file=this._filename,"function"==typeof e&&(e=e.apply(this,[this._element,t]),"string"!=typeof e))throw'[ImageQuery] :: "src" callback does not return a string';return e=e.replace(/{:(.*?)}/g,function(e,n){return t[n]}),delete t.file,e},_onLoad:function(){this._options.onLoad.call(this)}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.LazyLoad","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Css_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="LazyLoad_1",o._optionDefinition={item:["String",".lazyload-item"],placeholder:["String",null],loadedClass:["String",null],source:["String","data-src"],destination:["String","src"],delay:["Number",100],delta:["Number",0],image:["Boolean",!0],scrollElement:["Element",window],touchEvents:["Boolean",!0],onInsideViewport:["Function",!1],onAfterAttributeChange:["Function",!1],autoInit:["Boolean",!0]},o.prototype={_init:function(){this._aData=[],this._hasEvents=!1,this._options.autoInit&&this._activate()},_activate:function(){this._getData(),this._hasEvents||this._addEvents(),this._onScrollThrottled()},_getData:function(){for(var t=Ink.ss(this._options.item,this._element),e=null,i=0,o=t.length;o>i;i++)null==this._options.placeholder||n.hasAttribute(t[i],this._options.destination)||t[i].setAttribute(this._options.destination,this._options.placeholder),e=t[i].getAttribute(this._options.source),null===e&&this._options.image||this._aData.push({elm:t[i],original:e})},_addEvents:function(){this._onScrollThrottled=e.throttle(Ink.bindEvent(this._onScroll,this),this._options.delay),"ontouchmove"in document.documentElement&&this._options.touchEvents&&e.observe(document.documentElement,"touchmove",this._onScrollThrottled),e.observe(this._options.scrollElement,"scroll",this._onScrollThrottled),this._hasEvents=!0},_removeEvents:function(){"ontouchmove"in document.documentElement&&this._options.touchEvents&&e.stopObserving(document.documentElement,"touchmove",this._onScrollThrottled),e.stopObserving(this._options.scrollElement,"scroll",this._onScrollThrottled),this._hasEvents=!1},_onScroll:function(){for(var t,e=0;e<this._aData.length;e++)t=this._aData[e],n.inViewport(t.elm,{partial:!0,margin:this._options.delta})&&(this._elInViewport(t),this._aData.splice(e,1),e-=1);0===this._aData.length&&this._removeEvents()},_elInViewport:function(t){this._userCallback("onInsideViewport",{element:t.elm}),this._options.image&&(t.elm.setAttribute(this._options.destination,t.original),this._options.loadedClass&&i.addClassName(t.elm,this._options.loadedClass),t.elm.removeAttribute(this._options.source)),this._userCallback("onAfterAttributeChange",{element:t.elm})},_userCallback:function(t){"function"==typeof this._options[t]&&this._options[t].apply(this,[].slice.call(arguments,1))},reload:function(){this._activate()},destroy:function(){this._hasEvents&&this._removeEvents(),t.destroyComponent.call(this)}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Modal","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}var a=function(t){return t.style.opacity="invalid","invalid"!==t.style.opacity}(i.create("div",{style:"opacity: 1"})),l=function(t){return"10vh"===t.style.height&&"10vw"===t.style.width}(i.create("div",{style:"height:10vh;width:10vw"})),h=function(t){return""!==t.style.display}(i.create("div",{style:"display: flex"})),u=function(t){t=t.replace(/^\s+|\s+$/g,"");
var e=-1!==t.indexOf("%"),n=-1!==t.indexOf("px");return e||n?!e&&n?t:!n&&e?t:t+"px":t+"%"},c=function(t,e){for(var n,i=t.split(/\s+/g),o=0;o<i.length;o++){var r=i[o].split("-"),s=r[0].replace(/^\s+|\s+$/g,"");if(s===e)return u(r[1]);"all"===s&&(n=u(r[1]))}return n},d=[];return s._name="Modal_1",s._optionDefinition={width:["String","90%"],height:["String","90%"],shadeClass:["String",void 0],modalClass:["String",void 0],trigger:["String",void 0],triggerEvent:["String","click"],autoDisplay:["Boolean",!0],markup:["String",void 0],onShow:["Function",void 0],onDismiss:["Function",void 0],closeOnClick:["Boolean",!1],closeOnEscape:["Boolean",!0],responsive:["Boolean",!0]},s.prototype={_init:function(){if(this._handlers={click:Ink.bindEvent(this._onShadeClick,this),keyDown:Ink.bindEvent(this._onKeyDown,this),resize:null},this._dimensionIsVariant={width:-1!==(""+this._options.width).indexOf(" "),height:-1!==(""+this._options.height).indexOf(" ")},this._isOpen=!1,this._markupMode=this._element?n.hasClassName(this._element,"ink-modal"):!1,this._markupMode){if(this._modalDiv=this._element,this._modalShadow=this._modalDiv.parentNode,this._contentContainer=o.select(".modal-body",this._modalDiv)[0],!this._contentContainer)throw new Error('Ink.UI.Modal: Missing div with class "modal-body"');this._options.markup=this._contentContainer.innerHTML}else this._modalShadow=i.create("div",{className:"ink-shade"}),this._modalDiv=i.create("div",{className:"ink-modal ink-space"}),this._element&&(this._options.markup=this._element.innerHTML),this._modalShadow.appendChild(this._modalDiv),document.body.appendChild(this._modalShadow);if(this._markupMode||this.setContentMarkup(this._options.markup),"string"==typeof this._options.shadeClass&&n.addClassName(this._modalShadow,this._options.shadeClass),"string"==typeof this._options.modalClass&&n.addClassName(this._modalDiv,this._options.modalClass),this._options.trigger){var r=t.elsOrSelector(this._options.trigger,"");e.observeMulti(r,this._options.triggerEvent,Ink.bindEvent(this.open,this))}else this._options.autoDisplay&&this.open()},_dimensionIsPercentage:function(){var t=this._getDimensions();return{width:-1!==(""+t.width).indexOf("%"),height:-1!==(""+t.height).indexOf("%")}},_getDimensions:function(e){e=e||{};var n,o={width:this._options.width,height:this._options.height};if((this._dimensionIsVariant.width||this._dimensionIsVariant.height)&&(n=t.currentLayout()),this._dimensionIsVariant.width&&(o.width=c(o.width,n)),this._dimensionIsVariant.height&&(o.height=c(o.height,n)),e.dynamic){var r=this._dimensionIsPercentage();if(!r.width){var s=.9*i.viewportWidth();parseFloat(o.width)>=s&&(o.width=s+"px")}if(!r.height){var a=.9*i.viewportHeight();parseFloat(o.height)>=a&&(o.height=a+"px")}}return o},_reposition:function(){var t,e=this._dimensionIsPercentage(),n=this._getDimensions();l&&e.height?this._modalDiv.style.marginTop=-parseFloat(n.height)/2+"vh":l?(t=parseFloat(n.height)>.9*i.viewportHeight(),(t!==this._heightWasLargerThan90Percent||!t||this._dimensionIsVariant.height)&&(this._heightWasLargerThan90Percent=t,t?(this._modalDiv.style.marginTop="0",this._modalDiv.style.top="5vh"):(this._modalDiv.style.marginTop=-parseFloat(n.height)/2+"px",this._modalDiv.style.top=""))):this._modalDiv.style.marginTop=-i.elementHeight(this._modalDiv)/2+"px",l&&e.width?this._modalDiv.style.marginLeft=-parseFloat(n.width)/2+"vw":l?(t=parseFloat(n.width)>.9*i.viewportWidth(),(t!==this._widthWasLargerThan90Percent||!t||this._dimensionIsVariant.width)&&(this._widthWasLargerThan90Percent=t,t?(this._modalDiv.style.marginLeft="0",this._modalDiv.style.left="5vw"):(this._modalDiv.style.marginLeft=-parseFloat(n.width)/2+"px",this._modalDiv.style.left=""))):this._modalDiv.style.marginLeft=-i.elementWidth(this._modalDiv)/2+"px"},_onResize:function(){var t=this._dimensionIsVariant.height||this._dimensionIsVariant.width,e=this._dimensionIsPercentage(),n=!e.height||!e.width;t&&this._resize(),(!l||t)&&this._avoidModalLargerThanScreen(),(!l||n||t)&&this._reposition(),h||this._resizeContainer()},_onShadeClick:function(t){var r=e.element(t);if(r===this._modalShadow&&this._options.closeOnClick)this.dismiss();else if(n.hasClassName(r,"ink-close")||n.hasClassName(r,"ink-dismiss")||i.findUpwardsBySelector(r,".ink-close,.ink-dismiss")||this._options.closeOnClick&&(!i.descendantOf(this._shadeElement,r)||r===this._shadeElement)){for(var s=o.select(".ink-alert",this._shadeElement),a=s.length,l=0;a>l;l++)if(i.descendantOf(s[l],r))return;this.dismiss(),this._isOpen||e.stop(t)}},_onKeyDown:function(t){27===t.keyCode&&this._isOpen&&this._options.closeOnEscape&&d[d.length-1]===this&&(this.dismiss(),this._isOpen||e.stop(t))},_resize:function(){var t=this._getDimensions();this._modalDiv.style.width=t.width,this._modalDiv.style.height=t.height},_resizeContainer:function(){var t=i.elementHeight(this._modalDiv);this._modalHeader=o.select(".modal-header",this._modalDiv)[0],this._modalHeader&&(t-=i.elementHeight(this._modalHeader)),this._modalFooter=o.select(".modal-footer",this._modalDiv)[0],this._modalFooter&&(t-=i.elementHeight(this._modalFooter)),this._contentContainer.style.height=t+"px",this._markupMode},_resizeContainerFlex:function(){this._contentContainer.style.flex="1",this._modalDiv.style.display="flex",this._modalDiv.style.flexDirection="column"},_avoidModalLargerThanScreen:function(){var t=this._dimensionIsPercentage();if(l)t.width||(this._modalDiv.style.maxWidth="90vw"),t.height||(this._modalDiv.style.maxHeight="90vh");else{var e={height:i.viewportHeight(),width:i.viewportWidth()},n=this._getDimensions();r.forEach(["height","width"],Ink.bind(function(i){if(!t[i]){var o=Math.round(.9*e[i]);if(parseFloat(n[i])>o)this._modalDiv.style[i]=o+"px";else{if(isNaN(parseFloat(n[i])))return;this._modalDiv.style[i]=parseFloat(n[i])+"px"}}},this))}},open:function(t){if(this.isOpen())return!1;if(t&&e.stop(t),n.addClassName(this._modalShadow,"ink-shade"),this._modalShadow.style.display=this._modalDiv.style.display="block",this._modalShadow.offsetHeight,n.addClassName(this._modalShadow,"visible"),n.addClassName(this._modalDiv,"visible"),this._contentElement=this._modalDiv,this._shadeElement=this._modalShadow,this._markupMode||this.setContentMarkup(this._options.markup),this._resize(),this._avoidModalLargerThanScreen(),this._reposition(),h?this._resizeContainerFlex():this._resizeContainer(),this._options.responsive){var i=this._dimensionIsPercentage(),o=!(l&&h&&i.height&&i.width&&!this._dimensionIsVariant.height&&!this._dimensionIsVariant.width);o&&(this._handlers.resize=e.throttle(Ink.bind(this._onResize,this),500),e.observe(window,"resize",this._handlers.resize))}this._options.onShow&&this._options.onShow(this),e.observe(this._shadeElement,"click",this._handlers.click),this._options.closeOnEscape&&e.observe(document,"keydown",this._handlers.keyDown),this._isOpen=!0,d.push(this),n.addClassName(document.documentElement,"ink-modal-open")},isOpen:function(){return this._isOpen},dismiss:function(){if(this._isOpen){if(this._options.onDismiss){var t=this._options.onDismiss(this);if(t===!1)return}if(this._isOpen=!1,this._handlers.resize&&e.stopObserving(window,"resize",this._handlers.resize),this._markupMode?(n.removeClassName(this._modalDiv,"visible"),n.removeClassName(this._modalShadow,"visible"),this._waitForFade(this._modalShadow,Ink.bind(function(){this._modalShadow.style.display="none"},this))):(this._modalShadow.parentNode.removeChild(this._modalShadow),this.destroy()),d=r.remove(d,r.keyValue(this,d),1),0===d.length){var i=document.documentElement;n.removeClassName(i,"ink-modal-open")}}},_waitForFade:function(t,e){if(!a)return e();var i=5,o=function(){+n.getStyle(t,"opacity")>0&&i>0?(i--,setTimeout(o,250)):e()};setTimeout(o,500)},destroy:function(){t.unregisterInstance(this._instanceId)},getContentElement:function(){return this._contentContainer},setContentMarkup:function(t){if(this._markupMode)this._contentContainer.innerHTML=t;else{if(this._modalDiv.innerHTML=[t].join(""),this._contentContainer=o.select(".modal-body",this._modalDiv),!this._contentContainer.length){var e=o.select(".modal-header",this._modalDiv),s=o.select(".modal-footer",this._modalDiv);r.each(e,i.remove),r.each(s,i.remove);var a=document.createElement("div");n.addClassName(a,"modal-body"),a.innerHTML=this._modalDiv.innerHTML,this._modalDiv.innerHTML="";var l=e.concat([a]).concat(s);r.each(l,Ink.bindMethod(this._modalDiv,"appendChild")),this._contentContainer=o.select(".modal-body",this._modalDiv)}this._contentContainer=this._contentContainer[0]}this._contentElement=this._modalDiv,this._resizeContainer()}},t.createUIComponent(s,{elementIsOptional:!0}),s}),Ink.createModule("Ink.UI.Pagination","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}var s=function(t,e,n){var i=document.createElement("a");if(i.setAttribute("href","#"),"number"==typeof e&&i.setAttribute("data-index",e),n&&n.wrapText){var o=document.createElement("span");i.appendChild(o),o.innerHTML=t}else i.innerHTML=t;return i};return r._name="Pagination_1",r._optionDefinition={size:["Integer",null],totalItemCount:["Integer",null],itemsPerPage:["Integer",null],maxSize:["Integer",null],start:["Integer",1],sideButtons:["Boolean",1],firstLabel:["String","First"],lastLabel:["String","Last"],previousLabel:["String","Previous"],nextLabel:["String","Next"],previousPageLabel:["String",null],nextPageLabel:["String",null],onChange:["Function",void 0],hashParameter:["String","page"],parentTag:["String","ul"],childTag:["String","li"],wrapperClass:["String","ink-navigation"],paginationClass:["String","pagination"],activeClass:["String","active"],disabledClass:["String","disabled"],hideClass:["String","hide-all"],previousClass:["String","previous"],previousPageClass:["String","previousPage"],nextClass:["String","next"],nextPageClass:["String","nextPage"],firstClass:["String","first"],lastClass:["String","last"],numberFormatter:["Function",function(t){return t+1}],autoWrap:["Boolean",!1]},r.prototype={_init:function(){this._options.previousPageLabel||(this._options.previousPageLabel=this._options.previousLabel+" "+this._options.maxSize),this._options.nextPageLabel||(this._options.nextPageLabel=this._options.nextLabel+" "+this._options.maxSize),this._handlers={click:Ink.bindEvent(this._onClick,this)},t.isInteger(this._options.totalItemCount)&&t.isInteger(this._options.itemsPerPage)?this._size=this._calculateSize(this._options.totalItemCount,this._options.itemsPerPage):t.isInteger(this._options.size)?this._size=this._options.size:(Ink.error("Ink.UI.Pagination: Please supply a size option or totalItemCount and itemsPerPage options."),this._size=0),this._current=this._options.start-1,this._itemLiEls=[],this._generateMarkup(this._element),this._updateItems(),this._observe()},_observe:function(){e.observeDelegated(this._element,"click","."+this._options.paginationClass+" > "+this._options.childTag,this._handlers.click)},_calculateSize:function(t,e){return Math.ceil(t/e)},_updateItems:function(){var t,e,i,o=this._itemLiEls,r=this._size===o.length;if(r)for(t=0,e=this._size;e>t;++t)n.setClassName(o[t],this._options.activeClass,t===this._current);else{for(t=o.length-1;t>=0;--t)this._ulEl.removeChild(o[t]);for(o=[],t=0,e=this._size;e>t;++t)i=document.createElement(this._options.childTag),i.appendChild(s(this._options.numberFormatter(t,this._size),t)),n.setClassName(i,this._options.activeClass,t===this._current),this._nextEl?this._ulEl.insertBefore(i,this._nextEl):this._ulEl.appendChild(i),o.push(i);this._itemLiEls=o}if(this._options.maxSize){var a=Math.floor(this._current/this._options.maxSize),l=this._options.maxSize*a,h=l+this._options.maxSize-1;for(t=0,e=this._size;e>t;++t)i=o[t],n.setClassName(i,this._options.hideClass,l>t||t>h);this._pageStart=l,this._pageEnd=h,this._page=a,n.setClassName(this._prevPageEl,this._options.disabledClass,!this.hasPreviousPage()),n.setClassName(this._nextPageEl,this._options.disabledClass,!this.hasNextPage()),n.setClassName(this._firstEl,this._options.disabledClass,this.isFirst()),n.setClassName(this._lastEl,this._options.disabledClass,this.isLast())}this._prevEl&&!this._options.autoWrap&&n.setClassName(this._prevEl,this._options.disabledClass,!this.hasPrevious()),this._nextEl&&!this._options.autoWrap&&n.setClassName(this._nextEl,this._options.disabledClass,!this.hasNext())},_generateMarkup:function(t){n.addClassName(t,"ink-navigation");var e=Ink.s("."+this._options.paginationClass,t),i=!1;e?i=!0:(e=document.createElement(this._options.parentTag),n.addClassName(e,this._options.paginationClass));var o=n.hasClassName(e,"chevron"),r=n.hasClassName(e,"dotted"),a=Ink.bind(function(t,i){var o=document.createElement(this._options.childTag),r=s(this._options[t+"Label"],void 0,{wrapText:i&&i.wrapText});return n.addClassName(o,this._options[t+"Class"]),o.appendChild(r),e.appendChild(o),o},this);!r&&this._options.maxSize&&(this._firstEl=a("first"),this._prevPageEl=a("previousPage")),(r&&this._options.sideButtons===!0||!r&&this._options.sideButtons)&&(this._prevEl=a("previous",{wrapText:o}),this._nextEl=a("next",{wrapText:o})),!r&&this._options.maxSize&&(this._nextPageEl=a("nextPage"),this._lastEl=a("last")),i||t.appendChild(e),this._ulEl=e},_onClick:function(t){e.stop(t);var i=e.element(t);if(!n.hasClassName(i,this._options.activeClass)&&!n.hasClassName(i,this._options.disabledClass)){var r=n.hasClassName(i,this._options.previousClass),s=n.hasClassName(i,this._options.nextClass),a=n.hasClassName(i,this._options.previousPageClass),l=n.hasClassName(i,this._options.nextPageClass),h=n.hasClassName(i,this._options.firstClass),u=n.hasClassName(i,this._options.lastClass);if(h)this.setCurrent(0);else if(u)this.setCurrent(this._size-1);else if(a||l)this.setCurrent((a?-1:1)*this._options.maxSize,!0,!!this._options.autoWrap);else if(r||s)this.setCurrent(r?-1:1,!0,!!this._options.autoWrap);else{var c=o.select("[data-index]",i)[0],d=c&&parseInt(c.getAttribute("data-index"),10);this.setCurrent(d)}}},setOnChange:function(t){if(t&&"function"!=typeof t)throw new TypeError("onChange option must be a function!");this._options.onChange=t},setSize:function(e){if(!t.isInteger(e))throw new TypeError("1st argument must be an integer number!");this._size=e,this._updateItems(),this._current=0},setSizeInItems:function(t,e){var n=Math.ceil(t/e);this.setSize(n)},setCurrent:function(e,n,i){if(!t.isInteger(e))throw new TypeError("1st argument must be an integer number!");n&&(e+=this._current),i?(e%=this._size,0>e&&(e+=this._size)):(e>this._size-1&&(e=this._size-1),0>e&&(e=0)),this._current=e,this._updateItems(),this._options.onChange&&this._options.onChange(this,e)},next:function(t){this.setCurrent(1,!0,t)},previous:function(t){this.setCurrent(-1,!0,t)},getSize:function(){return this._size},getCurrent:function(){return this._current},isFirst:function(){return 0===this._current},isLast:function(){return this._current===this._size-1},hasPrevious:function(){return this._current>0},hasNext:function(){return this._current<this._size-1},hasPreviousPage:function(){return this._options.maxSize&&this._current>this._options.maxSize-1},hasNextPage:function(){return this._options.maxSize&&this._size-this._current>=this._options.maxSize+1},destroy:t.destroyComponent},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.ProgressBar","1",["Ink.UI.Common_1","Ink.Dom.Selector_1"],function(t,e){"use strict";function n(){t.BaseUIComponent.apply(this,arguments)}return n._name="ProgressBar_1",n._optionDefinition={startValue:["Number",0],onStart:["Function",function(){}],onEnd:["Function",function(){}]},n.prototype={_init:function(){if(this._value=this._options.startValue,this._elementBar=e.select(".bar",this._element),this._elementBar.length<1)throw new Error("[Ink.UI.ProgressBar] :: Bar element not found");this._elementBar=this._elementBar[0],this.setValue(this._options.startValue)},setValue:function(t){this._options.onStart.call(this,this._value),t=parseInt(t,10),isNaN(t)||0>t?t=0:t>100&&(t=100),this._value=t,this._elementBar.style.width=this._value+"%",this._options.onEnd.call(this,this._value)}},t.createUIComponent(n),n}),Ink.createModule("Ink.UI.SmoothScroller","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Dom.Css_1"],function(t,e,n,i,o){"use strict";var r=window.requestAnimationFrame||function(t){return setTimeout(t,10)},s=window.cancelAnimationFrame||function(t){clearTimeout(t)},a={speed:10,changeHash:!0,margin:0,scroll:function(t,e){var i=Math.round(n.scrollHeight()),o=Math.round(t-(e.margin||0));i+=o>i?Math.ceil((o-i)/e.speed):(o-i)/e.speed,s(a.interval),i!==o&&a.offsetTop!==i?a.interval=r(Ink.bindMethod(a,"scroll",t,e),document.body):a.onDone(e),window.scrollTo(0,i),a.offsetTop=i},init:function(t){e.on(document,"click",t||"a.scrollableLink, a.ink-smooth-scroll",a.onClick)},render:function(){},onClick:function(e){var i=e.currentTarget,r=(location+"").replace(/#.*?$/,""),s=(i.href+"").replace(/#.*?$/,"");if(s===r){var l=i.getAttribute("data-hash")||(i.getAttribute("href")||"").replace(/^.*?#/,"");if(l){e.preventDefault();var h="ul > li.active > "+u,u='a[name="'+l+'"],#'+l,c=Ink.s(u),d=Ink.s(h);if(d=d&&d.parentNode,c){o.hasClassName(i.parentNode,"active")||(d&&o.removeClassName(d,"active"),o.addClassName(i.parentNode,"active"));var p=t.options("SmoothScroller link options",{margin:["Number",a.margin],speed:["Number",a.speed],changeHash:["Boolean",a.changeHash]},{},i);a.hash=l,a.scroll(n.offsetTop(c),p)}}}},onDone:function(t){t.changeHash===!0&&(window.location.hash=a.hash),a.hash=a.offsetTop=null}};return a}),Ink.createModule("Ink.UI.SortableList","1",["Ink.UI.Common_1","Ink.Dom.Css_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}var s="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;return r._name="SortableList_1",r._optionDefinition={placeholderClass:["String","placeholder"],draggedClass:["String","hide-all"],draggingClass:["String","dragging"],dragSelector:["String","> li"],handleSelector:["String",":not(button, button *, a[href], a[href] *)"],moveSelector:["String",!1],swap:["Boolean",!1],cancelMouseOut:["Boolean",!1],onDrop:["Function",function(){}]},r.prototype={_init:function(){this._handlers={down:Ink.bind(this._onDown,this),move:Ink.bind(this._onMove,this),up:Ink.bind(this._onUp,this)},this._isMoving=!1,this._down=s?"touchstart mousedown":"mousedown",this._move=s?"touchmove mousemove":"mousemove",this._up=s?"touchend mouseup":"mouseup",this._observe()},_observe:function(){n.on(this._element,this._down,this._options.dragSelector,this._handlers.down),n.on(this._element,this._move,this._options.dragSelector,this._handlers.move),this._options.cancelMouseOut&&n.on(this._element,"mouseleave",Ink.bind(this.stopMoving,this)),n.on(document.documentElement,this._up,this._handlers.up)},_onDown:function(t){if(!this._isMoving&&!this._placeholder){var e=t.currentTarget;if(this._options.handleSelector){var n=i.findUpwardsBySelector(t.target,this._options.handleSelector);if(!n||!i.isAncestorOf(e,n))return}return this._isMoving=e,this._placeholder=e.cloneNode(!0),this._movePlaceholder(e),this._addMovingClasses(),!1}},_onMove:function(t){var e=t.currentTarget;if("touchmove"===t.type){var n=t.touches[0];e=document.elementFromPoint(n.clientX,n.clientY),e=i.findUpwardsBySelector(e,this._options.dragSelector)}this.validateMove(e),t.preventDefault()},_onUp:function(t){return this._isMoving&&this._placeholder&&t.currentTarget!==this._isMoving&&t.currentTarget!==this._placeholder?(i.insertBefore(this._isMoving,this._placeholder),this.stopMoving(),this._options.onDrop.call(this,{droppedElement:t.currentTarget}),!1):void 0},_addMovingClasses:function(){e.addClassName(this._placeholder,this._options.placeholderClass),e.addClassName(this._isMoving,this._options.draggedClass),e.addClassName(document.documentElement,this._options.draggingClass)},_removeMovingClasses:function(){this._isMoving&&e.removeClassName(this._isMoving,this._options.draggedClass),this._placeholder&&e.removeClassName(this._placeholder,this._options.placeholderClass),e.removeClassName(document.documentElement,this._options.draggingClass)},_movePlaceholder:function(t){var e,n,o,r,s=this._placeholder;s?this._options.swap?(i.insertAfter(s,t),i.insertBefore(t,this._isMoving),i.insertBefore(this._isMoving,s)):(e=i.offset(t),n=i.offset(this._placeholder),o=e[1]>n[1],r=e[0]>n[0],o&&r||!o&&!r?i.insertBefore(s,t):i.insertAfter(s,t),i.insertBefore(this._isMoving,s)):i.insertAfter(s,t)},destroy:t.destroyComponent,stopMoving:function(){this._removeMovingClasses(),i.remove(this._placeholder),this._placeholder=!1,this._isMoving=!1},validateMove:function(t){t&&this._isMoving&&this._placeholder&&t!==this._placeholder&&t!==this._isMoving&&(!this._options.moveSelector||o.matchesSelector(t,this._options.moveSelector)?this._movePlaceholder(t):this.stopMoving())}},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.Spy","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(t){for(var e=0,n=d.length;n>e;e++)if(d[e][0]===t)return e;return null}function s(t,e){var n=r(e);null===n?d.push([e,[t]]):d[n][1].push(t)}function a(){p||(p=!0,e.observe(document,"scroll",e.throttle(l,300)))}function l(){for(var t=0,e=d.length;e>t;t++)h(d[t][0],d[t][1])}function h(t,e){for(var r=u(e),s=o.select("li.active",t),a=0,l=s.length;l>a;a++)n.removeClassName(s[a],"active");if(null!==r){var h='a[href$="#'+(r.name||r.id)+'"]',c=o.select(h,t);for(a=0,l=c.length;l>a;a++)n.addClassName(i.findUpwardsByTag(c[a],"li"),"active")}}function u(t){for(var e,n,i=-1/0,o=0,r=t.length;r>o;o++)n=t[o].getBoundingClientRect(),n.top<=0&&n.top>i&&(i=n.top,e=o);return void 0===e?null:t[e]}function c(){t.BaseUIComponent.apply(this,arguments)}var d=[],p=!1;return c._name="Spy_1",c._optionDefinition={target:["Element",void 0]},c.prototype={_init:function(){s(this._element,this._options.target),a(),l()}},t.createUIComponent(c),c}),Ink.createModule("Ink.UI.Stacker",1,["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e,n){"use strict";function i(){t.BaseUIComponent.apply(this,arguments)}return i._name="Stacker_1",i._optionDefinition={column:["String",".stacker-column"],item:["String",".stacker-item"],customBreakPoints:["Object",null],largeMax:["Number",Number.MAX_VALUE],largeMin:["Number",961],mediumMax:["Number",960],mediumMin:["Number",651],smallMax:["Number",650],smallMin:["Number",0],largeCols:["Integer",3],mediumCols:["Integer",2],smallCols:["Integer",1],isOrdered:["Boolean",!0],onRunCallback:["Function",null],onResizeCallback:["Function",null],onAPIReloadCallback:["Function",null]},i.prototype={_init:function(){this._aList=[],this._curLayout="large",this._runFirstTime=!1,this._getPageItemsToList(),(this._canApplyLayoutChange()||!this._runFirstTime)&&(this._runFirstTime=!0,this._applyLayoutChange(),"function"==typeof this._options.onRunCallback&&this._options.onRunCallback(this._curLayout)),this._addEvents()},addItem:function(t){this._aList.push(t)},reloadItems:function(){this._applyLayoutChange(),"function"==typeof this._options.onAPIReloadCallback&&this._options.onAPIReloadCallback(this._curLayout)},_addEvents:function(){e.observe(window,"resize",Ink.bindEvent(this._onResize,this))},_onResize:function(){this._canApplyLayoutChange()&&(this._removeDomItems(),this._applyLayoutChange(),"function"==typeof this._options.onResizeCallback&&this._options.onResizeCallback(this._curLayout))},_setCurLayout:function(){var t=n.viewportWidth();if(this._options.customBreakpoints&&"object"==typeof this._options.customBreakPoints){for(var e in this._options.customBreakPoints)if(this._options.customBreakPoints.hasOwnProperty(e)&&t>=Number(this._options.customBreakPoints[e].min)&&t<=Number(this._options.customBreakPoints[e].max)&&this._curLayout!==e)return void(this._curLayout=e)}else t<=Number(this._options.largeMax)&&t>=Number(this._options.largeMin)&&"large"!==this._curLayout?this._curLayout="large":t>=Number(this._options.mediumMin)&&t<=Number(this._options.mediumMax)&&"medium"!==this._curLayout?this._curLayout="medium":t>=Number(this._options.smallMin)&&t<=Number(this._options.smallMax)&&"small"!==this._curLayout&&(this._curLayout="small")},_getColumnsToShow:function(){return Number(this._options.customBreakPoints&&"object"==typeof this._options.customBreakPoints?this._options.customBreakPoints[this._curLayout].cols:this._options[this._curLayout+"Cols"])},_canApplyLayoutChange:function(){var t=this._curLayout;return this._setCurLayout(),t!==this._curLayout?!0:!1},_getPageItemsToList:function(){this._aColumn=Ink.ss(this._options.column,this._element);var t=this._aColumn.length,e=0;if(t>0){for(var n=0;n<this._aColumn.length;n++)for(var i=Ink.ss(this._options.item,this._aColumn[n]),o=0;o<i.length;o++)this._options.isOrdered&&(e=n+o*t),this._aList[e]=i[o],this._options.isOrdered||e++,i[o].parentNode.removeChild(i[o]);if(this._aList.length>0&&this._options.isOrdered){for(var r=[],s=0;s<this._aList.length;s++)"undefined"!=typeof this._aList[s]&&r.push(this._aList[s]);this._aList=r}}},_removeDomItems:function(){var t=this._aColumn.length;if(t>0)for(var e=0;t>e;e++)for(var n=Ink.ss(this._options.item,this._aColumn[e]),i=n.length-1;i>=0;i--)n[i].parentNode.removeChild(n[i])},_applyLayoutChange:function(){var t=this._getColumnsToShow(),e=this._aList.length,n=0,i=0;if(t>0)for(;t>i;){if(this._aColumn[i].appendChild(this._aList[n]),n++,i++,n===e)return;i===t&&(i=0)}}},t.createUIComponent(i),i}),Ink.createModule("Ink.UI.Sticky","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Css_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="Sticky_1",o._optionDefinition={offsetBottom:["Integer",0],offsetTop:["Integer",0],topElement:["Element",null],wrapperClass:["String","ink-sticky-wrapper"],stickyClass:["String","ink-sticky-stuck"],inlineDimensions:["Boolean",!0],inlinePosition:["Boolean",!0],bottomElement:["Element",null],activateInLayouts:["String",null]},o.prototype={_init:function(){this._options.activateInLayouts&&(this._options.activateInLayouts=this._options.activateInLayouts.toString()),this._dims=null,this._options.offsetTop=parseInt(this._options.offsetTop,10)||0,this._options.offsetBottom=parseInt(this._options.offsetBottom,10)||0,this._options.topElement&&(this._options.topElement=t.elOrSelector(this._options.topElement,"Top Element")),this._options.bottomElement&&(this._options.bottomElement=t.elOrSelector(this._options.bottomElement,"Sticky bottom Element")),this._wrapper=n.create("div",{className:this._options.wrapperClass}),n.wrap(this._element,this._wrapper);var i=document.addEventListener?document:window;this._onScroll=Ink.bind(e.throttle(this._onScroll,33),this),e.observe(i,"scroll",this._onScroll),e.observe(window,"resize",Ink.bindEvent(e.throttle(this._onResize,100),this)),this._onScroll()},_isDisabledInLayout:function(){if(!this._options.activateInLayouts)return!1;var e=t.currentLayout();return e?-1===this._options.activateInLayouts.indexOf(e):!1},_onScroll:function(){var t=this._getDims(),e=n.scrollHeight(),i=this._isDisabledInLayout()||e<=t.top-this._options.offsetTop||this._options.topElement&&this._options.topElement.getBoundingClientRect().bottom+this._options.offsetTop>0;if(i)return void this._unstick();var o=this._options.offsetTop+t.height+n.scrollHeight(),r=document.body.scrollHeight;this._options.bottomElement&&(r=this._options.bottomElement.getBoundingClientRect().top+n.scrollHeight()),r-=this._options.offsetBottom,this._stickTo(r>o?"screen":"bottom")},_stickTo:function(t){var e=this._element.style,o=this._getDims();if(i.addClassName(this._element,this._options.stickyClass),this._wrapper.style.height=o.height+"px",this._inlineDimensions(o.height+"px",o.width+"px"),this._options.inlinePosition!==!1)if(e.left=o.left+"px","screen"===t)e.bottom=null,e.top=this._options.offsetTop+"px";else if("bottom"===t){var r=this._getBottomOffset(),s=n.scrollHeight()+n.viewportHeight(),a=n.pageHeight()-s;e.bottom=r-a+"px",e.top="auto"}},_unstick:function(){i.removeClassName(this._element,this._options.stickyClass),this._inlineDimensions(null,null),this._options.inlinePosition&&(this._element.style.left=null,this._element.style.top=null,this._element.style.bottom=null),this._wrapper.style.height=null,this._wrapper.style.width=null,this._dims=null},_onResize:function(){this._dims=null,this._onScroll()},_getDims:function(){if(null!==this._dims)return this._dims;var t=this._element.style,e=t.position,i=t.width;t.position="static",t.width=null;var o=n.outerDimensions(this._element),r=this._wrapper.getBoundingClientRect();return this._dims={height:o[1],width:o[0],left:r.left+n.scrollWidth(),top:r.top+n.scrollHeight()},t.position=e,t.width=i,this._dims},_inlineDimensions:function(t,e){this._options.inlineDimensions&&(this._element.style.height=t,this._element.style.width=e)},_getBottomOffset:function(){var t=this._options.offsetBottom;return this._options.bottomElement&&(t+=n.pageHeight()-n.offsetTop(this._options.bottomElement)),t}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Swipe","1",["Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.UI.Common_1"],function(t,e,n){"use strict";function i(){"function"==typeof arguments[1]&&(arguments[1]={onEnd:arguments[1]}),n.BaseUIComponent.apply(this,arguments)}return i._name="Swipe_1",i._optionDefinition={onEnd:["Function",void 0],onStart:["Function",void 0],onMove:["Function",void 0],minDist:["Number",void 0],maxDist:["Number",void 0],minDuration:["Number",void 0],maxDuration:["Number",void 0],axis:["String",void 0],storeGesture:["Boolean",!1],stopEvents:["Boolean",!0]},i.prototype={_supported:"ontouchstart"in document.documentElement,_init:function(){this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)};var e=document.body;t.observe(e,"touchstart",this._handlers.down),(this._options.storeGesture||this._options.onMove)&&t.observe(e,"touchmove",this._handlers.move),t.observe(e,"touchend",this._handlers.up),this._isOn=!1},_isMeOrParent:function(t,e){if(t){do{if(t===e)return!0;t=t.parentNode}while(t);return!1}},_pushGesture:function(t,e){this._options.storeGesture&&(this._gesture.push(t),this._time.push(e))},_onDown:function(e){1===e.changedTouches.length&&this._isMeOrParent(e.target,this._element)&&(this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0],this._isOn=!0,this._target=e.target,this._t0=+new Date,this._p0=[e.pageX,e.pageY],this._options.storeGesture&&(this._gesture=[],this._time=[]),this._pushGesture(this._p0,0),this._options.onStart&&this._options.onStart({event:e,element:this._element,instance:this,position:this._p0,dt:0}))},_onMove:function(e){if(this._isOn&&1===e.changedTouches.length){this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0];var n=+new Date,i=n-this._t0,o=[e.pageX,e.pageY];this._pushGesture(o,i),this._options.onMove&&this._options.onMove({event:e,element:this._element,instance:this,position:o,dt:i})}},_onUp:function(e){if(this._isOn&&1===e.changedTouches.length){this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0],this._isOn=!1;var n=+new Date,i=[e.pageX,e.pageY],o=n-this._t0,r=[i[0]-this._p0[0],i[1]-this._p0[1]],s=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=Math.abs(r[0])>Math.abs(r[1])?"x":"y",l=this._options;l.minDist&&s<l.minDist||l.maxDist&&s>l.maxDist||l.minDuration&&o<l.minDuration||l.maxDuration&&o>l.maxDuration||l.axis&&a!==l.axis||this._options.onEnd&&this._options.onEnd({event:e,element:this._element,instance:this,gesture:this._gesture,time:this._time,axis:a,overallMovement:r,overallTime:o})}}},n.createUIComponent(i),i}),Ink.createModule("Ink.UI.Table","1",["Ink.Util.Url_1","Ink.UI.Pagination_1","Ink.Net.Ajax_1","Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.String_1","Ink.Util.Json_1"],function(t,e,n,i,o,r,s,a,l,h,u){"use strict";function c(t){return!isNaN(t)&&g.test(t)?parseInt(t,10):isNaN(t)?t:parseFloat(t)}function d(t,e){return t===e?0:t>e?1:-1}function p(t,e){var n=c(s.textContent(t)),i=c(s.textContent(e));return typeof n==typeof i?d(n,i):"number"==typeof n?1:-1}function f(t){if("undefined"!=typeof Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function m(){i.BaseUIComponent.apply(this,arguments)}function _(t){return t}var g=/\d/g;return m._name="Table_1",m._optionDefinition={pageSize:["Integer",null],caretUpClass:["String","fa fa-caret-up"],caretDownClass:["String","fa fa-caret-down"],endpoint:["String",null],createEndpointUrl:["Function",null],createEndpointURL:["Function",null],getDataFromEndPoint:["Function",null],getDataFromEndpoint:["Function",null],processJSONRows:["Function",function(t){return"number"==typeof t.length?t:t.rows||null
}],processJSONRow:["Function",_],processJSONField:["Function",_],processJSONHeaders:["Function",function(t){return t.fields}],processJSONTotalRows:["Function",function(t){return t.totalRows||t.length}],getSortKey:["Function",null],pagination:["Element",null],allowResetSorting:["Boolean",!1],visibleFields:["String",null],tdClassNames:["Object",{}],paginationOptions:["Object",null]},m.prototype={_validate:function(){if("table"!==this._element.nodeName.toLowerCase())throw new Error("[Ink.UI.Table] :: The element is not a table")},_init:function(){this._options.createEndpointUrl&&(this._options.createEndpointURL=this._options.createEndpointUrl),this._options.getDataFromEndPoint&&(this._options.getDataFromEndpoint=this._options.getDataFromEndpoint),this._markupMode=!(this._options.endpoint||this._options.createEndpointURL),this._options.visibleFields&&(this._options.visibleFields=this._options.visibleFields.toString().split(/[, ]+/g)),this._thead=this._element.tHead||this._element.createTHead(),this._headers=a.select("th",this._thead),this._handlers={thClick:null},this._originalFields=[],this._sortableFields={},this._originalData=this._data=[],this._pagination=null,this._totalRows=0,this._handlers.thClick=o.on(this._element,"click",'thead th[data-sortable="true"]',Ink.bindMethod(this,"_onThClick")),this._markupMode?(this._resetSortOrder(),this._addHeadersClasses(),this._data=a.select("tbody tr",this._element),this._originalData=this._data.slice(0),this._totalRows=this._data.length,this._setPagination()):this._getData()},_addHeadersClasses:function(){for(var t,e,n=0,i=this._headers.length;i>n;n++)t=s.textContent(this._headers[n]),e=this._options.tdClassNames[t],e&&r.addClassName(this._headers[n],e)},_onThClick:function(t){var e=o.element(t),n=void 0!==this._options.pageSize;o.stop(t);var i=l.keyValue(e,this._headers,!0),r=i!==!1&&void 0!==this._sortableFields[i];if(r)if(!this._markupMode&&n)this._invertSortOrder(i,!1);else{"desc"===this._sortableFields[i]&&this._options.allowResetSorting?(this._setSortOrderOfColumn(i,null),this._data=this._originalData.slice(0)):this._invertSortOrder(i,!0);var s=a.select("tbody",this._element)[0];l.each(this._data,function(t){s.appendChild(t)}),this._pagination&&(this._pagination.setCurrent(0),this._paginate(1))}},_invertSortOrder:function(t,e){for(var n="asc"===this._sortableFields[t],i=0,o=this._headers.length;o>i;i++)this._setSortOrderOfColumn(i,null);this._setSortOrderOfColumn(t,!n),e?(this._sort(t),n&&this._data.reverse()):this._getData()},_setSortOrderOfColumn:function(t,e){var n=this._headers[t],i=[""],o="none";e===!0?(i=['<i class="',this._options.caretUpClass,'"></i>'],o="asc"):e===!1&&(i=['<i class="',this._options.caretDownClass,'"></i>'],o="desc"),this._sortableFields[t]=o,n.innerHTML=s.textContent(n)+i.join("")},_paginate:function(t){if(this._pagination){var e=this._options.pageSize,n=(t-1)*e,i=n+e;l.each(this._data,function(t,e){e>=n&&i>e?r.removeClassName(t,"hide-all"):r.addClassName(t,"hide-all")})}},_registerFieldNames:function(t){this._originalFields=[],l.forEach(t,Ink.bind(function(t){this._fieldIsVisible(t)&&this._originalFields.push(t)},this))},_fieldIsVisible:function(t){return!this._options.visibleFields||-1!==this._options.visibleFields.indexOf(t)},_sort:function(t){function e(e){return i.call(o,{columnIndex:t,columnName:n,data:s.textContent(e),element:e})}var n=s.textContent(this._headers[t]),i=this._options.getSortKey;i&&(i="function"==typeof i[n]?i[n]:"function"==typeof i?i:null);var o=this;this._data.sort(function(n,o){var r=Ink.ss("td",n)[t],s=Ink.ss("td",o)[t];return i?d(e(r),e(s)):p(r,s,t)})},_createHeadersFromJson:function(t){if(this._registerFieldNames(f(t)),!this._thead.children.length)for(var e,n=this._thead.insertRow(0),i=0,o=t.length;o>i;i++)this._fieldIsVisible(t[i])&&(e=s.create("th"),e=this._createSingleHeaderFromJson(t[i],e),n.appendChild(e),this._headers.push(e))},_createSingleHeaderFromJson:function(t,e){return t.sortable&&e.setAttribute("data-sortable","true"),t.label&&s.setTextContent(e,t.label),e},_resetSortOrder:function(){for(var t=0,e=this._headers.length;e>t;t++){var n=s.data(this._headers[t]);n.sortable&&"true"===n.sortable.toString()&&(this._sortableFields[t]="none")}},_createRowsFromJSON:function(t){var e=a.select("tbody",this._element)[0];e?s.setHTML(e,""):(e=document.createElement("tbody"),this._element.appendChild(e)),this._data=[];var n;for(var i in t)t.hasOwnProperty(i)&&(n=this._options.processJSONRow(t[i]),this._createSingleRowFromJson(e,n,i));this._originalData=this._data.slice(0)},_createSingleRowFromJson:function(t,e,n){var i=document.createElement("tr");t.appendChild(i);for(var o in e)e.hasOwnProperty(o)&&this._createFieldFromJson(i,e[o],o,n);this._data.push(i)},_createFieldFromJson:function(t,e,n,i){if(this._fieldIsVisible(n)){var o,s=this._options.processJSONField[n]||this._options.processJSONField;o="function"==typeof s?s(e,n,i):e;var a=this._elOrFieldData(o),l=this._options.tdClassNames[n];l&&r.addClassName(a,l),t.appendChild(a)}},_elOrFieldData:function(t){if(i.isDOMElement(t))return t;var e="string"==typeof t,n="number"==typeof t,o=s.create("td");if(e&&/^\s*?</.test(t))s.setHTML(o,t);else{if(!e&&!n)throw new Error("Ink.UI.Table Unknown result from processJSONField: "+t);s.setTextContent(o,t)}return o},setEndpoint:function(t,e){this._markupMode||(this._options.endpoint=t,this._pagination&&this._pagination.setCurrent(e?parseInt(e,10):0))},_setPagination:function(){if(null!=this._options.pageSize){var t=this._options.pagination;if(t instanceof e)return void(this._pagination=t);t||(t=s.create("nav",{className:"ink-navigation",insertAfter:this._element}),s.create("ul",{className:"pagination",insertBottom:t}));var n=Ink.extendObj({totalItemCount:this._totalRows,itemsPerPage:this._options.pageSize,onChange:Ink.bind(function(t,e){this._paginate(e+1)},this)},this._options.paginationOptions||{});this._pagination=new e(t,n),this._paginate(1)}},_getData:function(){var t=this._getSortOrder()||null,e=null;this._options.pageSize&&(e={size:this._options.pageSize,page:this._pagination?this._pagination.getCurrent()+1:1}),this._getDataViaAjax(this._getUrl(t,e))},_getSortOrder:function(){var t;for(t in this._sortableFields)if(this._sortableFields.hasOwnProperty(t)&&"none"!==this._sortableFields[t])break;return t?{field:this._originalFields[t]||s.textContent(this._headers[t]),order:this._sortableFields[t]}:null},_getUrl:function(e,n){var i=this._options.createEndpointURL||function(e,n,i){return e=t.parseUrl(e),e.query=e.query||{},n&&(e.query.sortOrder=n.order,e.query.sortField=n.field),i&&(e.query.rows_per_page=i.size,e.query.page=i.page),t.format(e)},o=i(this._options.endpoint,e,n);if("string"!=typeof o)throw new TypeError("Ink.UI.Table_1: createEndpointUrl did not return a string!");return o},_getDataViaAjax:function(t){var e=Ink.bind(function(t){this._onAjaxSuccess(t)},this);this._options.getDataFromEndpoint?this._options.getDataFromEndpoint(t,e):new n(t,{method:"GET",contentType:"application/json",sanitizeJSON:!0,onSuccess:Ink.bind(function(t){200===t.status&&e(u.parse(t.responseText))},this)})},_onAjaxSuccess:function(t){var e=null!=this._options.pageSize,n=this._options.processJSONRows(t);if(this._headers=a.select("th",this._thead),0===this._headers.length){var i=this._options.processJSONHeaders(t);if(!i||!i.length||!i[0])throw new Error("Ink.UI.Table: processJSONHeaders option must return an array of objects!");this._createHeadersFromJson(i),this._resetSortOrder(),this._addHeadersClasses()}else this._resetSortOrder();this._createRowsFromJSON(n),this._totalRows=this._rowLength=n.length,e&&(this._totalRows=this._options.processJSONTotalRows(t),this._setPagination())}},i.createUIComponent(m),m}),Ink.createModule("Ink.UI.Tabs","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}return r._name="Tabs_1",r._optionDefinition={preventUrlChange:["Boolean",!1],active:["String",void 0],onBeforeChange:["Function",void 0],onChange:["Function",void 0],menuSelector:["String",".tabs-nav"],contentSelector:["String",".tabs-content"],triggerEventsOnLoad:["Boolean",!0]},r.prototype={_init:function(){return this._menu=o.select(this._options.menuSelector,this._element)[0],this._menu?(this._initializeDom(),e.on(this._menu,"click","a",Ink.bindMethod(this,"_onTabClickedGeneric")),void this._setFirstActive()):void Ink.warn('Ink.UI.Tabs: An element selected by "'+this._options.menuSelector+'" needs to exist inside the element!')},_initializeDom:function(){for(var t=o.select(this._options.contentSelector,this._element),e=0;e<t.length;e++)n.addClassName(t[e],"hide-all")},_setFirstActive:function(){var t=window.location.hash,e=this._findLinkByHref(t)||this._options.active&&this._findLinkByHref(this._options.active)||o.select(".active a",this._menu)[0]||o.select("a",this._menu)[0];e&&(this._firstTime=!0,this._changeTab(e,this._options.triggerEventsOnLoad),this._firstTime=!1)},_changeTab:function(t,e){e&&"undefined"!=typeof this._options.onBeforeChange&&this._options.onBeforeChange(this);var i=t.getAttribute("href"),r=i.substr(i.indexOf("#"));window.location.hash===r||this._options.preventUrlChange||this._firstTime||(window.location.hash=r);for(var s=o.select("> li.active",this._menu),a=0,l=s.length;l>a;a++)s[a]!==t&&n.removeClassName(s[a],"active");return this._activeMenuTab&&(n.removeClassName(this._activeMenuTab,"active"),n.removeClassName(this._activeSection,"active"),n.addClassName(this._activeSection,"hide-all")),this._activeMenuLink=t,this._activeMenuTab=this._activeMenuLink.parentNode,this._activeSection=o.select(r,this._element)[0],this._activeSection?(n.addClassName(this._activeMenuTab,"active"),n.addClassName(this._activeSection,"active"),n.removeClassName(this._activeSection,"hide-all"),void(e&&"undefined"!=typeof this._options.onChange&&this._options.onChange(this))):void(this._activeMenuLink=this._activeMenuTab=this._activeSection=null)},_onTabClickedGeneric:function(t){t.preventDefault();var e=!n.hasClassName(t.currentTarget,"ink-disabled")&&t.currentTarget!==this._activeMenuLink;e&&this._onTabClicked(t.currentTarget)},_onTabClicked:function(t){var e=t.getAttribute("href")||"";e=e.substr(e.indexOf("#")),e&&null!==Ink.i(this._dehashify(e))&&t!==this._activeMenuLink&&this.changeTab(t)},_hashify:function(t){return t?0===t.indexOf("#")?t:"#"+t:""},_dehashify:function(t){return t?(""+t).replace(/^#/,""):""},_findLinkByHref:function(t){if(!t)return null;if(1===t.nodeType){if(i.isAncestorOf(t,this._element))return null;for(var e=o.select("a",this._menu),n=t.getAttribute("id"),r=0,s=e.length;s>r;r++){if(e[r]===t||i.isAncestorOf(t,e[r]))return e[r];if(n&&n===this._dehashify(e[r].hash))return e[r]}return null}return t=this._hashify(t),o.select('a[href$="'+t+'"]',this._menu)[0]||null},changeTab:function(t){t=this._findLinkByHref(t),t&&!n.hasClassName(t,"ink-disabled")&&this._changeTab(t,!0)},disable:function(t){n.addClassName(this._findLinkByHref(t),"ink-disabled")},enable:function(t){n.removeClassName(this._findLinkByHref(t),"ink-disabled")},activeTab:function(){return this._activeSection.getAttribute("id")},activeMenuLink:function(){return this._activeMenuLink},activeSection:function(){return this._activeSection},destroy:t.destroyComponent},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.TagField","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.UI.Droppable_1","Ink.Util.Array_1","Ink.Dom.Selector_1","Ink.UI.Common_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(){a.BaseUIComponent.apply(this,arguments)}var h=13,u=8,c=function(t){return!!t},d=1==="s,".split(/,/g).length,p=function(){var t,e=String.prototype.split,n=void 0===/()??/.exec("")[1];return t=function(t,i,o){if("[object RegExp]"!==Object.prototype.toString.call(i))return e.call(t,i,o);var r,s,a,l,h=[],u=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),c=0,i=new RegExp(i.source,u+"g");for(t+="",n||(r=new RegExp("^"+i.source+"$(?!\\s)",u)),o=void 0===o?-1>>>0:o>>>0;(s=i.exec(t))&&(a=s.index+s[0].length,!(a>c&&(h.push(t.slice(c,s.index)),!n&&s.length>1&&s[0].replace(r,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(s[t]=void 0)}),s.length>1&&s.index<t.length&&Array.prototype.push.apply(h,s.slice(1)),l=s[0].length,c=a,h.length>=o)));)i.lastIndex===s.index&&i.lastIndex++;return c===t.length?(l||!i.test(""))&&h.push(""):h.push(t.slice(c)),h.length>o?h.slice(0,o):h}}();return l._name="TagField_1",l._optionDefinition={tags:["String",[]],tagQuery:["Object",null],tagQueryAsync:["Object",null],allowRepeated:["Boolean",!1],maxTags:["Integer",-1],outSeparator:["String",","],separator:["String",/[,; ]+/g],autoSplit:["Boolean",!0]},l.prototype={_init:function(){var i=this._options;"string"==typeof i.separator&&(i.separator=new RegExp(i.separator,"g")),"string"==typeof i.tags&&(i.tags=this._readInput(i.tags)),n.addClassName(this._element,"hide-all"),this._viewElm=t.create("div",{className:"ink-tagfield",insertAfter:this._element}),this._input=t.create("input",{type:"text",className:"new-tag-input",insertBottom:this._viewElm});var o=[].concat(i.tags,this._tagsFromMarkup(this._element));this._tags=[],r.each(o,Ink.bindMethod(this,"_addTag")),e.observe(this._input,"keyup",Ink.bindEvent(this._onKeyUp,this)),e.observe(this._input,"change",Ink.bindEvent(this._onKeyUp,this)),e.observe(this._input,"keydown",Ink.bindEvent(this._onKeyDown,this)),e.observe(this._input,"blur",Ink.bindEvent(this._onBlur,this)),e.observe(this._viewElm,"click",Ink.bindEvent(this._refocus,this))},destroy:function(){t.remove(this._viewElm),n.removeClassName(this._element,"hide-all")},_tagsFromMarkup:function(e){var n=e.tagName.toLowerCase();if("input"===n)return this._readInput(e.value);if("select"===n)return r.map(e.getElementsByTagName("option"),function(e){return t.textContent(e)});throw new Error("Cannot read tags from a "+n+" tag. Unknown tag")},_tagsToMarkup:function(e,n){var i=n.tagName.toLowerCase();if("input"===i)this._options.separator&&(n.value=e.join(this._options.outSeparator));else{if("select"!==i)throw new Error("TagField: Cannot read tags from a "+i+" tag. Unknown tag");n.innerHTML="",r.each(e,function(e){var i=t.create("option",{selected:"selected"});t.setTextContent(i,e),n.appendChild(i)})}},_addTag:function(n){if(!(-1!==this._options.maxTags&&this._tags.length>=this._options.maxTags)){if(!this._options.allowRepeated&&r.inArray(n,this._tags,n)||!n)return!1;var i=t.create("span",{className:"ink-tag",setTextContent:n+" "}),o=t.create("span",{className:"remove fa fa-times",insertBottom:i});e.observe(o,"click",Ink.bindEvent(this._removeTag,this,null));var s=document.createTextNode(" ");this._tags.push(n),this._viewElm.insertBefore(i,this._input),this._viewElm.insertBefore(s,this._input),this._tagsToMarkup(this._tags,this._element)}},_readInput:function(t){return this._options.separator?r.filter(t.split(this._options.separator),c):[t]},_onKeyUp:function(){if(this._options.autoSplit){var t;if(t=d?p(this._input.value,this._options.separator):this._input.value.split(this._options.separator),!(t.length<=1)){var e=t[t.length-1];t=t.splice(0,t.length-1),t=r.filter(t,c),r.each(t,Ink.bind(this._addTag,this)),this._input.value=e}}},_onKeyDown:function(t){return t.which===h?this._onEnterKeyDown(t):t.which===u?this._onBackspaceKeyDown():void(this._removeConfirm&&this._unsetRemovingVisual(this._tags.length-1))},_onBackspaceKeyDown:function(){this._input.value||(this._removeConfirm?(this._unsetRemovingVisual(this._tags.length-1),this._removeTag(this._tags.length-1),this._removeConfirm=null):this._setRemovingVisual(this._tags.length-1))},_onEnterKeyDown:function(t){var n=this._input.value;n&&(this._addTag(n),this._input.value=""),e.stopDefault(t)},_onBlur:function(){this._addTag(this._input.value),this._input.value=""},_setRemovingVisual:function(t){var i=this._viewElm.children[t];i&&(n.addClassName(i,"tag-deleting"),this._removeRemovingVisualTimeout=setTimeout(Ink.bindMethod(this,"_unsetRemovingVisual",t),4e3),e.observe(this._input,"blur",Ink.bindMethod(this,"_unsetRemovingVisual",t)),this._removeConfirm=!0)},_unsetRemovingVisual:function(t){var e=this._viewElm.children[t];e&&(n.removeClassName(e,"tag-deleting"),clearTimeout(this._removeRemovingVisualTimeout)),this._removeConfirm=null},_removeTag:function(n){var i;if("object"==typeof n){var o=e.element(n).parentNode;i=t.parentIndexOf(this._viewElm,o)}else"number"==typeof n&&(i=n);this._tags=r.remove(this._tags,i,1),t.remove(this._viewElm.children[i]),this._tagsToMarkup(this._tags,this._element)},_refocus:function(t){return this._input.focus(),e.stop(t),!1}},a.createUIComponent(l),l}),Ink.createModule("Ink.UI.Toggle","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}return s._name="Toggle_1",s._optionDefinition={target:["Elements"],triggerEvent:["String","click"],closeOnClick:["Boolean",null],canToggleAnAncestor:["Boolean",!1],isAccordion:["Boolean",!1],initialState:["Boolean",null],classNameOn:["String","show-all"],classNameOff:["String","hide-all"],closeOnInsideClick:["String","a[href]"],onChangeState:["Function",null]},s.prototype={_init:function(){var e,o;if(this._targets=t.elsOrSelector(this._options.target),null===this._options.closeOnClick&&(this._options.closeOnClick=this._options.isAccordion||this._options.canToggleAnAncestor?!1:!0),null===this._options.initialState&&(this._options.initialState=n.hasClassName(this._targets[0],this._options.classNameOn)),"show-all"!==this._options.classNameOn||"hide-all"!==this._options.classNameOff)for(e=0,o=this._targets.length;o>e;e++)n.removeClassName(this._targets[e],"show-all"),n.removeClassName(this._targets[e],"hide-all");if(this._options.isAccordion&&(this._accordionContainer=i.findUpwardsByClass(this._element,"accordion"),this._accordionContainer||Ink.warn('Ink.UI.Toggle_1: This toggle has the isAccordion option set to `true`, but is not a descendant of an element with the class "accordion"! Because of this, it won\'t be able to find other toggles in the same accordion and cooperate with them.')),this._constructing=!0,this._bindEvents(),null!==this._options.initialState)this.setState(this._options.initialState,!0);else{var r="none"!==n.getStyle(this._targets[0],"display");this.setState(r,!0)}for(e=0,o=this._targets.length;o>e;e++)this._targets[e].style.display&&(this._targets[e].style.display="");this._element.setAttribute("data-is-toggle-trigger","true"),this._constructing=!1},_bindEvents:function(){if(this._options.triggerEvent&&e.on(this._element,this._options.triggerEvent,Ink.bind(this._onTriggerEvent,this)),this._options.closeOnClick&&e.observe(document,"click",Ink.bind(this._onOutsideClick,this)),this._options.closeOnInsideClick){var t=this._options.closeOnInsideClick;"true"===t.toString()&&(t="*"),e.observeMulti(this._targets,"click",Ink.bind(function(n){i.findUpwardsBySelector(e.element(n),t)&&this.setState(!1,!0)},this))}},_onTriggerEvent:function(t){var n=e.element(t),o=r.some(this._targets,function(t){return t===n||i.isAncestorOf(t,n)});if(this._options.canToggleAnAncestor||!o){var s=this.getState();this.setState(!s,!0),!s&&this._firstTime&&(this._firstTime=!1),e.stopDefault(t)}},_updateAccordion:function(){if(this._accordionContainer&&this.getState()!==!1)for(var t=o.select("[data-is-toggle-trigger]",this._accordionContainer),e=0;e<t.length;e++){var n=s.getInstance(t[e]);n&&n!==this&&n.getState()===!0&&n.setState(!1,!0)}},_onOutsideClick:function(t){var n,o=e.element(t);if(i.isAncestorOf(document.documentElement,o)){var s=r.some(this._targets,function(t){return i.isAncestorOf(t,o)||t===o});if(this._element!==o&&!i.isAncestorOf(this._element,o)&&!s){if((n=Ink.ss(".ink-shade")).length)for(var a=n.length,l=0;a>l;l++)if(i.isAncestorOf(n[l],o)&&i.isAncestorOf(n[l],this._element))return;this.setState(!1,!0)}}},setState:function(t,e){if(t!==this.getState()||this._constructing){var i,o;if(this._group&&t)for(i=0,o=this._group.length;o>i;i++)this._group[i].getState()===!0&&this._group[i].setState(!1,!0);if(e&&"function"==typeof this._options.onChangeState){var r=this._options.onChangeState.call(this,t,{element:this._element});if(r===!1)return!1}for(i=0,o=this._targets.length;o>i;i++)n.addRemoveClassName(this._targets[i],this._options.classNameOn,t),n.addRemoveClassName(this._targets[i],this._options.classNameOff,!t);n.addRemoveClassName(this._element,"active",t),this._accordionContainer&&this._updateAccordion()}},getState:function(){return n.hasClassName(this._element,"active")}},t.createUIComponent(s),s}),Ink.createModule("Ink.UI.Tooltip","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Dom.Css_1","Ink.Dom.Browser_1"],function(t,e,n,i,o,r){"use strict";function s(t,e){this._init(t,e||{})}function a(t,e){this._init(t,e)}var l,h,u;!function(){for(var t=document.createElement("DIV"),e=["transition","oTransition","msTransition","mozTransition","webkitTransition"],n=0;n<e.length;n++)if("undefined"!=typeof t.style[e[n]+"Duration"]){l=e[n]+"Duration",h=e[n]+"Property",u=e[n]+"TimingFunction";break}}();var c=document.getElementsByTagName("body"),d=c.length?c[0]:document.documentElement;return s.prototype={_init:function(t,e){var n;if(this.options=Ink.extendObj({where:"up",zIndex:1e4,left:10,top:10,spacing:8,forever:0,color:"",timeout:0,delay:0,template:null,templatefield:null,fade:.3,text:""},e||{}),"string"==typeof t)n=i.select(t);else{if("object"!=typeof t)throw"Element expected";n=[t]}this.tooltips=[];for(var o=0,r=n.length;r>o;o++)this.tooltips[o]=new a(this,n[o])},destroy:function(){o.each(this.tooltips,function(t){t._destroy()}),this.tooltips=null,this.options=null}},a.prototype={_oppositeDirections:{left:"right",right:"left",up:"down",down:"up"},_init:function(n,i){e.observe(i,"mouseover",Ink.bindEvent(this._onMouseOver,this)),e.observe(i,"focus",Ink.bindEvent(this._onMouseOver,this)),e.observe(i,"mouseout",Ink.bindEvent(this._onMouseOut,this)),e.observe(i,"blur",Ink.bindEvent(this._onMouseOut,this)),e.observe(i,"mousemove",Ink.bindEvent(this._onMouseMove,this)),this.root=n,this.element=i,this._delayTimeout=null,this.tooltip=null,t.registerInstance(this,this.element)},_makeTooltip:function(t){if(!this._getOpt("text")&&!this._getOpt("html")&&!n.hasAttribute(this.element,"title"))return!1;var i=this._createTooltipElement();this.tooltip&&this._removeTooltip(),this.tooltip=i,this._fadeInTooltipElement(i),this._placeTooltipElement(i,t),e.observe(i,"mouseover",Ink.bindEvent(this._onTooltipMouseOver,this));var o=this._getFloatOpt("timeout");o&&setTimeout(Ink.bind(function(){this.tooltip===i&&this._removeTooltip()},this),1e3*o)},_createTooltipElement:function(){var e,o,s=this._getOpt("template"),a=this._getOpt("templatefield");if(s){var l=document.createElement("DIV");if(l.innerHTML=t.elOrSelector(s,"options.template").outerHTML,e=l.firstChild,a){if(o=i.select(a,e),!o)throw"options.templatefield must be a valid selector within options.template";o=o[0]}else o=e}else e=document.createElement("DIV"),r.addClassName(e,"ink-tooltip"),r.addClassName(e,this._getOpt("color")),o=document.createElement("DIV"),r.addClassName(o,"content"),e.appendChild(o);return this._getOpt("html")?o.innerHTML=this._getOpt("html"):this._getOpt("text")?n.setTextContent(o,this._getOpt("text")):n.setTextContent(o,this.element.getAttribute("title")),e.style.display="block",e.style.position="absolute",e.style.zIndex=this._getIntOpt("zIndex"),e},_fadeInTooltipElement:function(t){var e=this._getFloatOpt("fade");l&&e&&(t.style.opacity="0",t.style[l]=e+"s",t.style[h]="opacity",t.style[u]="ease-in-out",setTimeout(function(){t.style.opacity="1"},0))},_placeTooltipElement:function(t,e){var i=this._getOpt("where");if(null!==e||"mousemove"!==i&&"mousefix"!==i||(i="up"),"mousemove"===i||"mousefix"===i){var o=e;this._setPos(o[0],o[1]),d.appendChild(t)}else if(i.match(/(up|down|left|right)/)){d.appendChild(t);var s=n.offset(this.element),a=s[0],l=s[1],h=n.elementWidth(this.element)/2-n.elementWidth(t)/2,u=n.elementHeight(this.element)/2-n.elementHeight(t)/2,c=this._getIntOpt("spacing"),p=n.elementDimensions(t),f=n.elementDimensions(this.element),m=n.scrollWidth()+n.viewportWidth(),_=n.scrollHeight()+n.viewportHeight();i=this._getWhereValueInsideViewport(i,{left:a-p[0],right:a+p[0],top:l+p[1],bottom:l+p[1]},{right:m,bottom:_}),"up"===i?(l-=p[1],l-=c,a+=h):"down"===i?(l+=f[1],l+=c,a+=h):"left"===i?(a-=p[0],a-=c,l+=u):"right"===i&&(a+=f[0],a+=c,l+=u);var g=null;i.match(/(up|down|left|right)/)&&(g=document.createElement("SPAN"),r.addClassName(g,"arrow"),r.addClassName(g,this._oppositeDirections[i]),t.appendChild(g));var v=a,y=l,b=y+p[1]-_,k=v+p[0]-m,C=0-v,I=0-y;b>0?(g&&(g.style.top=p[1]/2+b+"px"),y-=b):I>0?(g&&(g.style.top=p[1]/2-I+"px"),y+=I):k>0?(g&&(g.style.left=p[0]/2+k+"px"),v-=k):C>0&&(g&&(g.style.left=p[0]/2-C+"px"),v+=C),t.style.left=v+"px",t.style.top=y+"px"}},_getWhereValueInsideViewport:function(t,e,n){return"left"===t&&e.left<0?"right":"right"===t&&e.right>n.right?"left":"up"===t&&e.top<0?"down":"down"===t&&e.bottom>n.bottom?"up":t},_removeTooltip:function(){var t=this.tooltip;if(t){var e=Ink.bind(n.remove,{},t);"mousemove"!==this._getOpt("where")&&l?(t.style.opacity=0,setTimeout(e,1e3*this._getFloatOpt("fade"))):e(),this.tooltip=null}},_getOpt:function(t){var e=n.data(this.element)[n._camelCase("tip-"+t)];if(e)return e;var i=this.root.options[t];return"undefined"!=typeof i?i:void 0},_getIntOpt:function(t){return parseInt(this._getOpt(t),10)},_getFloatOpt:function(t){return parseFloat(this._getOpt(t),10)},_destroy:function(){this.tooltip&&n.remove(this.tooltip),this.root=null,this.element=null,this.tooltip=null},_onMouseOver:function(t){var e;e="mouseover"!==t.type?null:this._getMousePosition(t);var n=this._getFloatOpt("delay");n?this._delayTimeout=setTimeout(Ink.bind(function(){this.tooltip||this._makeTooltip(e),this._delayTimeout=null},this),1e3*n):this._makeTooltip(e)},_onMouseMove:function(t){if("mousemove"===this._getOpt("where")&&this.tooltip){var e=this._getMousePosition(t);this._setPos(e[0],e[1])}},_onMouseOut:function(){this._getIntOpt("forever")||this._removeTooltip(),this._delayTimeout&&(clearTimeout(this._delayTimeout),this._delayTimeout=null)},_onTooltipMouseOver:function(){this.tooltip&&this._removeTooltip()},_setPos:function(t,e){t+=this._getIntOpt("left"),e+=this._getIntOpt("top");var i=this._getPageXY();if(this.tooltip){var o=[n.elementWidth(this.tooltip),n.elementHeight(this.tooltip)],r=this._getScroll();o[0]+t-r[0]>=i[0]-20&&(t=t-o[0]-this._getIntOpt("left")-10),o[1]+e-r[1]>=i[1]-20&&(e=e-o[1]-this._getIntOpt("top")-10),this.tooltip.style.left=t+"px",this.tooltip.style.top=e+"px"}},_getPageXY:function(){var t=0,e=0;return"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(t=document.body.clientWidth,e=document.body.clientHeight),[parseInt(t,10),parseInt(e,10)]},_getScroll:function(){var t=document.documentElement,e=document.body;return t&&(t.scrollLeft||t.scrollTop)?[t.scrollLeft,t.scrollTop]:e?[e.scrollLeft,e.scrollTop]:[0,0]},_getMousePosition:function(t){return[parseInt(e.pointerX(t),10),parseInt(e.pointerY(t),10)]}},s}),Ink.createModule("Ink.UI.TreeView","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}return s._name="TreeView_1",s._optionDefinition={node:["String","li"],children:["String","ul"],parentClass:["String","parent"],openNodeClass:["String","open"],openClass:["String","fa fa-minus-circle"],closedClass:["String","fa fa-plus-circle"],hideClass:["String","hide-all"],iconTag:["String","i"],stopDefault:["Boolean",!0]},s.prototype={_init:function(){this._handlers={click:Ink.bindEvent(this._onClick,this)},e.on(this._element,"click",this._options.node,this._handlers.click),r.each(Ink.ss(this._options.node,this._element),Ink.bind(function(t){if(this.isParent(t)){n.addClassName(t,this._options.parentClass);var e=this.isOpen(t);this._getIcon(t)||i.create(this._options.iconTag,{insertTop:t}),this._setNodeOpen(t,e)}},this))},_getIcon:function(t){return Ink.s("> "+this._options.iconTag,t)},isOpen:function(t){if(!this._getChild(t))throw new Error("not a node!");return"true"===t.getAttribute("data-open")||n.hasClassName(t,this._options.openNodeClass)},isParent:function(t){return n.hasClassName(t,this._options.parentClass)||null!=this._getChild(t)},_setNodeOpen:function(t,e){var i=this._getChild(t);if(i){n.setClassName(i,this._options.hideClass,!e);var o=this._getIcon(t);t.setAttribute("data-open",e);var r=e?this._options.openClass:this._options.closedClass,s=e?this._options.closedClass:this._options.openClass;n.removeClassName(o,s),n.addClassName(o,r),n.setClassName(t,this._options.openNodeClass,e)}else Ink.error("Ink.UI.TreeView: node",t,"is not a node!")},open:function(t){this._setNodeOpen(t,!0)},close:function(t){this._setNodeOpen(t,!1)},toggle:function(t){this.isOpen(t)?this.close(t):this.open(t)},_getChild:function(t){return o.select(this._options.children,t)[0]||null},_onClick:function(t){!this.isParent(t.currentTarget)||o.matchesSelector(t.target,this._options.node)||o.matchesSelector(t.target,this._options.children)||(this._options.stopDefault&&t.preventDefault(),this.toggle(t.currentTarget))}},t.createUIComponent(s),s}),Ink.createModule("Ink.UI.Upload","1",["Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Browser_1","Ink.UI.Common_1"],function(t,e,n,i){"use strict";var o=function(t){this.init(t)};o.prototype={init:function(t){this._options=Ink.extendObj({entry:void 0,maxDepth:10},t||{});try{this._read()}catch(e){Ink.error(e)}},_read:function(){if(!this._options.entry)return void Ink.error("You must specify the entry!");try{this._readDirectories()}catch(t){Ink.error(t)}},_readDirectories:function(){var t=[],e=!1,n=0,i=Ink.bind(function(o){var r=o.createReader();e=!0,r.readEntries(Ink.bind(function(o){if(o.length>0){for(var r=0,s=o.length;s>r;r++)t.push(o[r]),o[r].isDirectory&&(n=this.clearArray(o[r].fullPath.split("/")),n.shift(),n=n.length,n<=this._options.maxDepth&&i(o[r]));this._stopActivityTimeout&&clearTimeout(this._stopActivityTimeout),this._stopActivityTimeout=setTimeout(function(){e=!1},250)}o.length||(e=!1)},this),Ink.bind(function(t){this._options.readError(t,o)},this))},this);i(this._options.entry);var o,r=function(){return e?!1:(clearInterval(o),this._options.readComplete&&"function"==typeof this._options.readComplete&&this._options.readComplete(t),!0)};o=setInterval(Ink.bind(r,this),250)},clearArray:function(t){for(var e=t.length-1;e>=0;e--)("undefined"==typeof t[e]||null===t[e]||""===t[e])&&t.splice(e,1);return t}};var r={lists:[],items:[],create:function(t){var e;return t=String(t),this.lists.push({name:t}),e=this.lists.length-1},getItems:function(t){if(!t)return this.items;for(var e=[],n=0,i=this.items.length;i>n;n++)this.items[n].parentId===t&&e.push(this.items[n]);return e},purge:function(t,e){if("number"!=typeof t||isNaN(Number(t)))return!1;try{for(var n=this.items.length;n>=0;n--)this.items[n]&&t===this.items[n].parentId&&this.remove(this.items[n].parentId,this.items[n].pid);return e||this.lists.splice(t,1),!0}catch(i){return Ink.error("Purge: invalid id"),!1}},add:function(t,e,n){if(!this.lists[t])return!1;"object"!=typeof e&&(e=String(e));var i=parseInt(Math.round(1e5*Math.random())+""+Math.round(1e5*Math.random()),10);return n=n||0,this.items.push({parentId:t,item:e,priority:n||0,pid:i}),i},view:function(t,e){var n=this._searchByPid(t,e);return n===!1?!1:this.items[n]},remove:function(t,e){try{var n=this._searchByPid(t,e);return n===!1?!1:(this.items.splice(n,1),!0)}catch(i){return Ink.error("Remove: invalid id"),!1}},_searchByPid:function(t,e){if(!t&&"boolean"==typeof t||!e)return!1;if(t=parseInt(t,10),e=parseInt(e,10),isNaN(t)||isNaN(e))return!1;for(var n=0,i=this.items.length;i>n;n++)if(this.items[n].parentId===t&&this.items[n].pid===e)return n;return!1}},s=function(t){this.Upload=t,this.init()};s.prototype={init:function(){this._fileButton=this.Upload._options.fileButton,this._dropzone=this.Upload._options.dropzone,this._setDropEvent(),this._setFileButton()},_setDropEvent:function(){var t=this._dropzone;if(t)for(var e=0,n=t.length;n>e;e++)t[e].ondrop=Ink.bindEvent(this.Upload._dropEventHandler,this.Upload),t[e].ondragleave=Ink.bindEvent(this._onDragLeave,this),t[e].ondragend=Ink.bindEvent(this._onDragEndEventHandler,this),t[e].ondragdrop=Ink.bindEvent(this._onDragEndEventHandler,this),t[e].ondragenter=Ink.bindEvent(this._onDragEnterHandler,this),t[e].ondragover=Ink.bindEvent(this._onDragOverHandler,this)
},_onDragEnterHandler:function(t){return t&&t.stopPropagation&&t.stopPropagation(),t&&t.preventDefault&&t.preventDefault(),t&&(t.returnValue=!1),this.Upload.publish("DragEnter",t),!1},_onDragOverHandler:function(t){return t?(t.preventDefault(),t.stopPropagation(),t.returnValue=!1,!0):!1},_onDragLeave:function(t){return this.Upload.publish("DragLeave",t)},_onDragEndEventHandler:function(t){return this.Upload.publish("DragEnd",t)},_setFileButton:function(){var e=this._fileButton;e&&t.observeMulti(e,"change",Ink.bindEvent(this._fileChangeHandler,this))},_fileChangeHandler:function(n){var i=t.element(n),o=i.files,r=e.findUpwardsByTag(i,"form");return o&&window.FormData&&"withCredentials"in new XMLHttpRequest?(this.Upload._addFilesToQueue(o),void(i.value="")):(r.parentNode.submit(),!1)}};var a=function(t){this.Queue=r,this.init(t),this._events={}};return a.prototype={init:function(t){if("string"==typeof t&&(t=e.data(i.elOrSelector(t,"1st argument"))),this._options=Ink.extendObj({dropzone:void 0,fileButton:void 0,fileFormName:"Ink_Filelist",endpoint:"",maxFilesize:300<<20,INVALID_FILE_NAME:void 0,extraData:{},useChunks:!1,chunkSize:4194304,minSizeToUseChunks:20971520,endpointChunk:"",endpointChunkCommit:"",foldersEnabled:!1,directoryMaxDepth:10},t||{}),this._queueId=r.create("Ink_UPLOAD"),this._queueRunning=!1,this._folders={},this._options.dropzone&&(this._options.dropzone=i.elsOrSelector(this._options.dropzone,"Ink.UI.Upload - dropzone")),this._options.fileButton&&(this._options.fileButton=i.elsOrSelector(this._options.fileButton,"Ink.UI.Upload - fileButton")),!this._options.dropzone&&!this._options.fileButton)throw new TypeError("Ink.UI.Upload: Specify a fileButton or a Dropzone!");new s(this)},_supportChunks:function(t){return this._options.useChunks&&"Blob"in window&&(new Blob).slice&&t>this._options.minSizeToUseChunks},_dropEventHandler:function(e){t.stop(e),this.publish("DropComplete",e.dataTransfer);var n=e.dataTransfer;if(!n||!n.files||!n.files.length)return!1;if(this._files=n.files,this._files=Array.prototype.slice.call(this._files||[],0),n.items&&n.items[0]&&n.items[0].webkitGetAsEntry){if(!this._options.foldersEnabled)return setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0);for(var i,o=[],r=e.dataTransfer.items.length-1;r>=0;r--)i=e.dataTransfer.items[r].webkitGetAsEntry(),i&&i.isDirectory&&(o.push(i),this._files[r].isDirectory=!0,this._files.splice(r,1));this._addFolderToQueue(o,Ink.bind(function(){setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0)},this))}else setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0);return!0},_addFolderToQueue:function(t,e){var n=[],i={};if(!t||!t.length)return e(),n;var r=function(t){for(var e=[],n=0,i=t.length;i>n;n++)t[n].isFile&&e.push(t[n]);return e},s=function(t,e){var i;return e=e||0,this._files[e]?"fileentry"!==this._files[e].constructor.name.toLowerCase()?s.apply(this,[t,++e]):void this._files[e].file(Ink.bind(function(n){i=this._files[e].fullPath,this._files[e]=n,this._files[e].hasParent=!0,this._files[e].fullPath||(this._files[e].fullPath=i),s.apply(this,[t,++e])},this),Ink.bind(function(){this._files.splice(e,1),s.apply(this,[t,e])},this)):(t(),n)},a=Ink.bind(function(l){return t[l]?void new o({entry:t[l],maxDepth:this._options.directoryMaxDepth,readComplete:Ink.bind(function(e){if(n=n.concat(r(e)),t[l]&&!(t[l].fullPath in this._folders)){this._folders[t[l].fullPath]={items:e,files:n,length:e.length,created:!1,root:!0};for(var o=0,s=e.length;s>o;o++)e[o].isFile||(e[o].fullPath in i?delete i[e[o].fullPath]:this._folders[e[o].fullPath]={created:!1,root:!1});a(++l)}},this),readError:Ink.bind(function(t,e){i[e.fullPath]={},i[e.fullPath].error=t},this)}):(this._files=this._files.concat(n),s.call(this,e),!1)},this);return a(0),n},_addFilesToQueue:function(t){for(var e,i,o,s=0,a=t.length;a>s;s++)e=t[s],e.isDirectory||null!==e&&(e.type||e.size%4096!==0||n.CHROME&&this._options.foldersEnabled)?e.size>this._options.maxFilesize?this.publish("MaxSizeFailure",e,this._options.maxFilesize):(i=parseInt(Math.round(1e5*Math.random())+""+Math.round(1e5*Math.random()),10),o={id:s,data:e,fileID:i,directory:e.isDirectory},r.add(this._queueId,o),this.publish("FileAddedToQueue",o)):this.publish("InvalidFile",e,"size");this._processQueue(!0),this._files=[]},_processQueue:function(t){if(this._queueRunning)return!1;this.running=0;var e,n=1,i=0,o=r.items.length;this._queueRunning=!0,this.interval=setInterval(Ink.bind(function(){if(r.items.length===i&&0===this.running&&(r.purge(this._queueId,!0),this._queueRunning=!1,clearInterval(this.interval),this.publish("QueueEnd",this._queueId,o)),e=r.getItems(this._queueId),this.running<n&&e[i]){if(e[i].canceled)for(var a=i;e[a]&&e[a].canceled;)i++,a++;else s.call(this,e[i].pid,e[i].item.data,e[i].item.fileID,e[i].item.directory,t),this.running++,i++;return!0}return!1},this),100);var s=function(t,e,n,i,o){var r={file:e,fileID:n,cb:Ink.bind(function(){this.running--},this)};o&&(i?r.cb():this._upload(r))};return!0},_upload:function(t){var e=t.file,n=new XMLHttpRequest,i=t.fileID;this.publish("BeforeUpload",e,this._options.extraData,i,n,this._supportChunks(e.size));var o=function(o){t.cb&&t.cb(),this.publish("OnProgress",{length:e.size,lengthComputable:!0,loaded:e.size,total:e.size},e,i),this.publish("EndUpload",e,i,o?{error:!0}:!0),this.publish("InvalidFile",e,"name"),n.abort()};if(this._options.INVALID_FILE_NAME&&this._options.INVALID_FILE_NAME instanceof RegExp&&this._options.INVALID_FILE_NAME.test(t.file.name))return void o.call(this);if(!e.lastModifiedDate&&!Ink.Dom.Browser.OPERA)return void o.call(this,!0);n.upload.onprogress=Ink.bind(this.publish,this,"OnProgress",e,i);var r,s;this._supportChunks(e.size)?e.size<=e.chunk_offset?(r=this._options.endpointChunkCommit,s="POST"):(r=this._options.endpointChunk,e.chunk_upload_id&&(r+="?upload_id="+e.chunk_upload_id),e.chunk_offset&&(r+="&offset="+e.chunk_offset),s="PUT"):(r=this._options.endpoint,s="POST"),n.open(s,r,!0),n.withCredentials=!0,n.setRequestHeader("x-requested-with","XMLHttpRequest"),this._supportChunks(e.size)&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var a,l=new FormData;if("Blob"in window&&"function"==typeof Blob?(a=new Blob([e],{type:e.type}),this._supportChunks(e.size)?(e.chunk_offset=e.chunk_offset||0,a=a.slice(e.chunk_offset,e.chunk_offset+this._options.chunkSize)):l.append(this._options.fileFormName,a,e.name)):l.append(this._options.fileFormName,e),this._supportChunks(e.size))l.append("upload_id",e.chunk_upload_id),l.append("path",e.upload_path);else for(var h in this._options.extraData)this._options.extraData.hasOwnProperty(h)&&l.append(h,this._options.extraData[h]);e.hasParent?this.publish("cbCreateFolder",e.parentID,e.fullPath,this._options.extraData,this._folders,e.rootPath,Ink.bind(function(){n.send(this._supportChunks(e.size)?e.size<=e.chunk_offset?"upload_id="+e.chunk_upload_id+"&path="+e.upload_path+"/"+e.name:a:l)},this)):n.send(this._supportChunks(e.size)?e.size<=e.chunk_offset?"upload_id="+e.chunk_upload_id+"&path="+e.upload_path+"/"+e.name:a:l),n.onload=Ink.bindEvent(function(){if(this._supportChunks(e.size)&&e.size>e.chunk_offset){if(n.response){var o=JSON.parse(n.response),r=e.chunk_offset&&o.offset!==e.chunk_offset+this._options.chunkSize&&e.size!==o.offset;r?(t.cb&&t.cb(),this.publish("ErrorUpload",e,i)):(e.chunk_upload_id=o.upload_id,e.chunk_offset=o.offset,e.chunk_expires=o.expires,this._upload(t))}else t.cb&&t.cb(),this.publish("ErrorUpload",e,i);return n=null}return t.cb&&t.cb(),n.responseText&&n.status<400?this.publish("EndUpload",e,i,n.responseText):this.publish("ErrorUpload",e,i),n=null},this),n.onerror=Ink.bindEvent(function(){t.cb&&t.cb(),this.publish("ErrorUpload",e,i)},this),n.onabort=Ink.bindEvent(function(){t.cb&&t.cb(),this.publish("AbortUpload",e,i,{abortAll:Ink.bind(this.abortAll,this),abortOne:Ink.bind(this.abortOne,this)})},this)},abortAll:function(){return this._queueRunning?(clearInterval(this.interval),this._queueRunning=!1,r.purge(this._queueId,!0),!0):!1},abortOne:function(t,e){for(var n,i=r.getItems(0),o=0,s=i.length;s>o;o++)if(i[o].item.fileID===t)return n={id:i[o].item.fileID,name:i[o].item.data.name,size:i[o].item.data.size,hasParent:i[o].item.data.hasParent},r.remove(0,i[o].pid),e&&e(n),!0;return!1},subscribe:function(t,e){return this._events[t]||(this._events[t]=[]),this._events[t].push(e),this._events[t]},publish:function(t){var e=this._events[t],n=Array.prototype.slice.call(arguments||[],0);if(e)for(var i=0,o=e.length;o>i;i++)try{e[i].apply(this,n.splice(1,n.length))}catch(r){Ink.error(t+": "+r)}}},a}),Ink.createModule("Ink.Util.Array","1",[],function(){"use strict";var t=Array.prototype,e={isArray:Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},groupBy:function(t,n){function i(t){return"function"==typeof n.key?n.key(t):"string"==typeof n.key?t[n.key]:t}function o(t){var e=n.pairs?[t,[]]:[];return a.push(e),s.push(t),e}n=n||{};for(var r,s=[],a=[],l=0,h=t.length;h>l;l++){r=i(t[l]);var u;u=n.adjacentGroups?s[s.length-1]===r?a[a.length-1]:o(r):a[e.keyValue(r,s,!0)]||o(r),n.pairs?u[1].push(t[l]):u.push(t[l])}return a},reduce:function(e,n,i){if(t.reduce)return t.reduce.apply(e,t.slice.call(arguments,1));var o,r=Object(e),s=r.length>>>0,a=0;if(arguments.length>=3)o=i;else{for(;s>a&&!(a in r);)a++;if(a>=s)throw new TypeError("Reduce of empty array with no initial value");o=r[a++]}for(;s>a;a++)a in r&&(o=n(o,r[a],a,r));return o},inArray:function(t,e){if("object"==typeof e)for(var n=0,i=e.length;i>n;++n)if(e[n]===t)return!0;return!1},sortMulti:function(t,e){if("undefined"==typeof t||t.constructor!==Array)return!1;if("string"!=typeof e)return t.sort();if(t.length>0){if("undefined"==typeof t[0][e])return!1;t.sort(function(t,n){var i=t[e],o=n[e];return o>i?-1:i>o?1:0})}return t},keyValue:function(t,e,n){if("undefined"!=typeof t&&"object"==typeof e&&this.inArray(t,e)){for(var i=[],o=0,r=e.length;r>o;++o)if(e[o]===t){if("undefined"!=typeof n&&n===!0)return o;i.push(o)}return i}return!1},shuffle:function(t){if("undefined"!=typeof t&&t.constructor!==Array)return!1;for(var e=t.length,n=!1,i=!1;e--;)i=Math.floor(Math.random()*(e+1)),n=t[e],t[e]=t[i],t[i]=n;return t},forEach:function(e,n,i){if(t.forEach)return t.forEach.call(e,n,i);for(var o=0,r=e.length>>>0;r>o;o++)n.call(i,e[o],o,e)},each:function(){e.forEach.apply(e,t.slice.call(arguments))},map:function(e,n,i){if(t.map)return t.map.call(e,n,i);for(var o=new Array(s),r=0,s=e.length>>>0;s>r;r++)o[r]=n.call(i,e[r],r,e);return o},filter:function(e,n,i){if(t.filter)return t.filter.call(e,n,i);for(var o=[],r=null,s=0,a=e.length;a>s;s++)r=e[s],n.call(i,r,s,e)&&o.push(r);return o},some:function(t,e,n){if(null===t)throw new TypeError("First argument is invalid.");var i=Object(t),o=i.length>>>0;if("function"!=typeof e)throw new TypeError("Second argument must be a function.");for(var r=0;o>r;r++)if(r in i&&e.call(n,i[r],r,i))return!0;return!1},intersect:function(t,e){if(!t||!e||t instanceof Array==0||e instanceof Array==0)return[];for(var n=[],i=0,o=t.length;o>i;++i)for(var r=0,s=e.length;s>r;++r)t[i]===e[r]&&n.push(t[i]);return n},convert:function(e){return t.slice.call(e||[],0)},unique:function(t){if(!Array.prototype.lastIndexOf){var n=[];return e.forEach(e.convert(t),function(t){e.inArray(t,n)||n.push(t)}),n}return e.filter(e.convert(t),function(t,e,n){return n.lastIndexOf(t)===e})},range:function(t,e,n){n||(n=1);var i,o=[];if(n>0)for(i=t;e>i;i+=n)o.push(i);else for(i=t;i>e;i+=n)o.push(i);return o},insert:function(t,e,n){t.splice(e,0,n)},remove:function(t,e,n){for(var i=[],o=0,r=t.length;r>o;o++)o>=e&&e+n>o||i.push(t[o]);return i}};return e}),Ink.createModule("Ink.Util.BinPack","1",[],function(){"use strict";var t=function(t,e){this.init(t,e)};t.prototype={init:function(t,e){this.root={x:0,y:0,w:t,h:e}},fit:function(t){var e,n,i;for(e=0;e<t.length;++e)i=t[e],(n=this.findNode(this.root,i.w,i.h))&&(i.fit=this.splitNode(n,i.w,i.h))},findNode:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.w&&n<=t.h?t:null},splitNode:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,w:t.w,h:t.h-n},t.right={x:t.x+e,y:t.y,w:t.w-e,h:n},t}};var e=function(){};e.prototype={fit:function(t){var e,n,i,o=t.length,r=o>0?t[0].w:0,s=o>0?t[0].h:0;for(this.root={x:0,y:0,w:r,h:s},e=0;o>e;e++)i=t[e],i.fit=(n=this.findNode(this.root,i.w,i.h))?this.splitNode(n,i.w,i.h):this.growNode(i.w,i.h)},findNode:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.w&&n<=t.h?t:null},splitNode:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,w:t.w,h:t.h-n},t.right={x:t.x+e,y:t.y,w:t.w-e,h:n},t},growNode:function(t,e){var n=t<=this.root.w,i=e<=this.root.h,o=i&&this.root.h>=this.root.w+t,r=n&&this.root.w>=this.root.h+e;return o?this.growRight(t,e):r?this.growDown(t,e):i?this.growRight(t,e):n?this.growDown(t,e):null},growRight:function(t,e){this.root={used:!0,x:0,y:0,w:this.root.w+t,h:this.root.h,down:this.root,right:{x:this.root.w,y:0,w:t,h:this.root.h}};var n;return(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null},growDown:function(t,e){this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+e,down:{x:0,y:this.root.h,w:this.root.w,h:e},right:this.root};var n;return(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null}};var n={random:function(){return Math.random()-.5},w:function(t,e){return e.w-t.w},h:function(t,e){return e.h-t.h},a:function(t,e){return e.area-t.area},max:function(t,e){return Math.max(e.w,e.h)-Math.max(t.w,t.h)},min:function(t,e){return Math.min(e.w,e.h)-Math.min(t.w,t.h)},height:function(t,e){return n.msort(t,e,["h","w"])},width:function(t,e){return n.msort(t,e,["w","h"])},area:function(t,e){return n.msort(t,e,["a","h","w"])},maxside:function(t,e){return n.msort(t,e,["max","min","h","w"])},msort:function(t,e,i){var o,r;for(r=0;r<i.length;++r)if(o=n[i[r]](t,e),0!==o)return o;return 0}},i=function(){return[this.w," x ",this.h].join("")},o={binPack:function(o){var r,s,a;for(r=0,s=o.blocks.length;s>r;++r)a=o.blocks[r],"area"in a||(a.area=a.w*a.h);var l=o.dimensions?new t(o.dimensions[0],o.dimensions[1]):new e;o.sorter||(o.sorter="maxside"),o.blocks.sort(n[o.sorter]),l.fit(o.blocks);var h=[l.root.w,l.root.h],u=[],c=[];for(r=0,s=o.blocks.length;s>r;++r)a=o.blocks[r],a.fit?u.push(a):(a.toString=i,c.push(a));var d=h[0]*h[1],p=0;for(r=0,s=u.length;s>r;++r)a=u[r],p+=a.area;return{dimensions:h,filled:p/d,blocks:o.blocks,fitted:u,unfitted:c}}};return o}),Ink.createModule("Ink.Util.Cookie","1",[],function(){"use strict";var t={get:function(t){var e=document.cookie||!1,n={};if(e){e=e.replace(new RegExp("; ","g"),";");var i=e.split(";"),o=[];if(i.length>0)for(var r=0;r<i.length;r++)o=i[r].split("="),2===o.length&&(n[o[0]]=decodeURIComponent(o[1]));if(t)return"undefined"!=typeof n[t]?n[t]:null}return n},set:function(t,e,n,i,o,r){var s;if(!t||e===!1||"undefined"==typeof t||"undefined"==typeof e)return!1;s=t+"="+encodeURIComponent(e);var a=!1,l=!1,h=!1,u=!1;if(n&&"undefined"!=typeof n&&!isNaN(n)){var c=new Date,d=parseInt(Number(c.valueOf()),10)+1e3*Number(parseInt(n,10)),p=new Date(d),f=p.toGMTString(),m=new RegExp("([^\\s]+)(\\s\\d\\d)\\s(\\w\\w\\w)\\s(.*)");f=f.replace(m,"$1$2-$3-$4"),a="expires="+f}else a="undefined"==typeof n||isNaN(n)||0!==Number(parseInt(n,10))?"expires=Thu, 01-Jan-2037 00:00:01 GMT":"";l=i&&"undefined"!=typeof i?"path="+i:"path=/",o?h="domain="+o:/\./.test(window.location.hostname)&&(h="domain="+window.location.hostname),u=r&&"undefined"!=typeof r?r:!1,document.cookie=s+"; "+a+"; "+l+(h?"; "+h:"")+"; "+u},remove:function(t,e,n){var i=-1;this.set(t,"deleted",i,e,n)}};return t}),Ink.createModule("Ink.Util.Date","1",[],function(){"use strict";var t={_months:function(t){var e=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return e[t]},_iMonth:function(t){return Number(t)?+t-1:{janeiro:0,jan:0,fevereiro:1,fev:1,"mar\xe7o":2,mar:2,abril:3,abr:3,maio:4,mai:4,junho:5,jun:5,julho:6,jul:6,agosto:7,ago:7,setembro:8,set:8,outubro:9,out:9,novembro:10,nov:10,dezembro:11,dez:11}[t.toLowerCase()]},_wDays:function(t){var e=["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"];return e[t]},_iWeek:function(t){return Number(t)?+t||7:{segunda:1,seg:1,"ter\xe7a":2,ter:2,quarta:3,qua:3,quinta:4,qui:4,sexta:5,sex:5,"s\xe1bado":6,"s\xe1b":6,domingo:7,dom:7}[t.toLowerCase()]},_daysInMonth:function(t,e){var n;return n=1===t||3===t||5===t||7===t||8===t||10===t||12===t?31:4===t||6===t||9===t||11===t?30:e%400===0||e%4===0&&e%100!==0?29:28},get:function(t,e){("undefined"==typeof t||""===t)&&(t="Y-m-d");var n,i=t.split(""),o=new Array(i.length),r="\\";n="undefined"==typeof e?new Date:new Date("number"==typeof e?1e3*e:e);for(var s,a,l,h=0;h<i.length;h++)switch(i[h]){case r:o[h]=i[h+1],h++;break;case"d":var u=n.getDate();o[h]=String(u).length>1?u:"0"+u;break;case"D":o[h]=this._wDays(n.getDay()).substring(0,3);break;case"j":o[h]=n.getDate();break;case"l":o[h]=this._wDays(n.getDay());break;case"N":o[h]=n.getDay()||7;break;case"S":var c=n.getDate(),d=["st","nd","rd"],p="";o[h]=c>=11&&13>=c?"th":(p=d[String(c).substr(-1)-1])?p:"th";break;case"w":o[h]=n.getDay();break;case"z":s=Date.UTC(n.getFullYear(),0,0),a=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),o[h]=Math.floor((a-s)/864e5);break;case"W":var f=new Date(n.getFullYear(),0,1);s=f.getDay()||7;var m=Math.floor((n-f)/864e5+1);o[h]=Math.ceil((m-(8-s))/7)+1;break;case"F":o[h]=this._months(n.getMonth());break;case"m":var _=String(n.getMonth()+1);o[h]=_.length>1?_:"0"+_;break;case"M":o[h]=this._months(n.getMonth()).substring(0,3);break;case"n":o[h]=n.getMonth()+1;break;case"t":o[h]=this._daysInMonth(n.getMonth()+1,n.getYear());break;case"L":var g=n.getFullYear();o[h]=g%4?!1:g%100?!0:g%400?!1:!0;break;case"o":throw'"o" not implemented!';case"Y":o[h]=n.getFullYear();break;case"y":o[h]=String(n.getFullYear()).substring(2);break;case"a":o[h]=n.getHours()<12?"am":"pm";break;case"A":o[h]=n.getHours<12?"AM":"PM";break;case"B":throw'"B" not implemented!';case"g":l=n.getHours(),o[h]=12>=l?l:l-12;break;case"G":o[h]=String(n.getHours());break;case"h":l=String(n.getHours()),l=12>=l?l:l-12,o[h]=l.length>1?l:"0"+l;break;case"H":l=String(n.getHours()),o[h]=l.length>1?l:"0"+l;break;case"i":var v=String(n.getMinutes());o[h]=v.length>1?v:"0"+v;break;case"s":var y=String(n.getSeconds());o[h]=y.length>1?y:"0"+y;break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":s=new Date(n.getFullYear(),0,1),o[h]=n.getTimezoneOffset()!==s.getTimezoneOffset()?1:0;break;case"O":var b=n.getTimezoneOffset(),k=b%60;l=String((b-k)/60*-1),"-"!==l.charAt(0)&&(l="+"+l),l=3===l.length?l:l.replace(/([+\-])(\d)/,"$10$2"),o[h]=l+k+"0";break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":o[h]=60*n.getTimezoneOffset();break;case"c":throw'"c" not implemented!';case"r":var C=this._wDays(n.getDay()).substr(0,3),I=this._months(n.getMonth()).substr(0,3);o[h]=C+", "+n.getDate()+" "+I+this.get(" Y H:i:s O",n);break;case"U":o[h]=Math.floor(n.getTime()/1e3);break;default:o[h]=i[h]}return o.join("")},set:function(t,e){if("undefined"!=typeof e){("undefined"==typeof t||""===t)&&(t="Y-m-d");for(var n,i=t.split(""),o=new Array(i.length),r="\\",s={year:void 0,month:void 0,day:void 0,dayY:void 0,dayW:void 0,week:void 0,hour:void 0,hourD:void 0,min:void 0,sec:void 0,msec:void 0,ampm:void 0,diffM:void 0,diffH:void 0,date:void 0},a=0,l=0;l<i.length;l++)switch(i[l]){case r:o[l]=i[l+1],l++;break;case"d":o[l]="(\\d{2})",s.day={original:l,match:a++};break;case"j":o[l]="(\\d{1,2})",s.day={original:l,match:a++};break;case"D":o[l]="([\\w\xe1]{3})",s.dayW={original:l,match:a++};break;case"l":o[l]="([\\w\xe1]{5,7})",s.dayW={original:l,match:a++};break;case"N":o[l]="(\\d)",s.dayW={original:l,match:a++};break;case"w":o[l]="(\\d)",s.dayW={original:l,match:a++};break;case"S":o[l]="\\w{2}";break;case"z":o[l]="(\\d{1,3})",s.dayY={original:l,match:a++};break;case"W":o[l]="(\\d{1,2})",s.week={original:l,match:a++};break;case"F":o[l]="([\\w\xe7]{4,9})",s.month={original:l,match:a++};break;case"M":o[l]="(\\w{3})",s.month={original:l,match:a++};break;case"m":o[l]="(\\d{2})",s.month={original:l,match:a++};break;case"n":o[l]="(\\d{1,2})",s.month={original:l,match:a++};break;case"t":o[l]="\\d{2}";break;case"L":o[l]="\\w{4,5}";break;case"o":throw'"o" not implemented!';case"Y":o[l]="(\\d{4})",s.year={original:l,match:a++};break;case"y":o[l]="(\\d{2})",("undefined"==typeof s.year||"Y"!==i[s.year.original])&&(s.year={original:l,match:a++});break;case"a":o[l]="(am|pm)",s.ampm={original:l,match:a++};break;case"A":o[l]="(AM|PM)",s.ampm={original:l,match:a++};break;case"B":throw'"B" not implemented!';case"g":o[l]="(\\d{1,2})",s.hourD={original:l,match:a++};break;case"G":o[l]="(\\d{1,2})",s.hour={original:l,match:a++};break;case"h":o[l]="(\\d{2})",s.hourD={original:l,match:a++};break;case"H":o[l]="(\\d{2})",s.hour={original:l,match:a++};break;case"i":o[l]="(\\d{2})",s.min={original:l,match:a++};break;case"s":o[l]="(\\d{2})",s.sec={original:l,match:a++};break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":o[l]="\\d";break;case"O":o[l]="([-+]\\d{4})",s.diffH={original:l,match:a++};break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":o[l]="(\\-?\\d{1,5})",s.diffM={original:l,match:a++};break;case"c":throw'"c" not implemented!';case"r":o[l]="([\\w\xe1]{3}, \\d{1,2} \\w{3} \\d{4} \\d{2}:\\d{2}:\\d{2} [+\\-]\\d{4})",s.date={original:l,match:a++};break;case"U":o[l]="(\\d{1,13})",s.date={original:l,match:a++};break;default:o[l]=i[l]}var h=new RegExp(o.join(""));try{if(n=e.match(h),!n)return}catch(u){return}var c,d,p="undefined"!=typeof s.date,f="undefined"!=typeof s.year,m="undefined"!=typeof s.dayY,_="undefined"!=typeof s.day,g="undefined"!=typeof s.month,v=g&&_,y=!g&&_,b="undefined"!=typeof s.dayW,k="undefined"!=typeof s.week,C=k&&b,I=!k&&b,w=m||v||!f&&y||C||!f&&I,E=!(f||m||_||g||b||k),S="undefined"!=typeof s.hourD&&"undefined"!=typeof s.ampm,x="undefined"!=typeof s.hour,D=S||x,T="undefined"!=typeof s.min,N="undefined"!=typeof s.sec,O="undefined"!=typeof s.msec,M=!E||D,A=M||T,P="undefined"!=typeof s.diffM,L="undefined"!=typeof s.diffH;if(p){if("U"===i[s.date.original])return new Date(1e3*+n[s.date.match+1]);var U=n[s.date.match+1].match(/\w{3}, (\d{1,2}) (\w{3}) (\d{4}) (\d{2}):(\d{2}):(\d{2}) ([+\-]\d{4})/);return c=+U[4]+ +U[7].slice(0,3),d=+U[5]+(U[7].slice(0,1)+U[7].slice(3))/100*60,new Date(U[3],this._iMonth(U[2]),U[1],c,d,U[6])}var F,B,R,H,j,z,q=new Date;if(w||E){if(w){if(f){var V=q.getFullYear()-50+"";F=n[s.year.match+1],"y"===i[s.year.original]&&(F=+V.slice(0,2)+(F>=V.slice(2)?0:1)+F)}else F=q.getFullYear();if(m)B=0,R=n[s.dayY.match+1];else if(_)B=g?this._iMonth(n[s.month.match+1]):q.getMonth(),R=n[s.day.match+1];else{B=0;var W;W=k?n[s.week.match+1]:this.get("W",q),R=7*(W-2)+(8-(new Date(F,0,1).getDay()||7))+this._iWeek(n[s.week.match+1])}if(0===B&&R>31){var $=new Date(F,B,R);B=$.getMonth(),R=$.getDate()}}else F=q.getFullYear(),B=q.getMonth(),R=q.getDate();return c=S?+n[s.hourD.match+1]+("pm"===n[s.ampm.match+1]?12:0):x?n[s.hour.match+1]:E?q.getHours():"00",d=T?n[s.min.match+1]:M?"00":q.getMinutes(),H=N?n[s.sec.match+1]:A?"00":q.getSeconds(),j=O?n[s.msec.match+1]:"000",z=L?n[s.diffH.match+1]:P?String(-1*n[s.diffM.match+1]/60*100).replace(/^(\d)/,"+$1").replace(/(^[\-+])(\d{3}$)/,"$10$2"):"+0000",new Date(F,B,R,c,d,H)}}}};return t}),Ink.createModule("Ink.Util.Dumper","1",[],function(){"use strict";var t={_tab:"\xa0\xa0\xa0\xa0",_formatParam:function(t){var e="";switch(typeof t){case"string":e="(string) "+t;break;case"number":e="(number) "+t;break;case"boolean":e="(boolean) "+t;break;case"object":e=null!==t?t.constructor===Array?"Array \n{\n"+this._outputFormat(t,0)+"\n}":"Object \n{\n"+this._outputFormat(t,0)+"\n}":"null";break;default:e=!1}return e},_getTabs:function(t){for(var e="",n=0;t>n;n++)e+=this._tab;return e},_outputFormat:function(t,e){var n="",i=!1;for(var o in t)if(null!==t[o])if("object"!=typeof t[o]||t[o].constructor!==Array&&t[o].constructor!==Object){if(t[o].constructor===Function)continue;n=n+this._tab+this._getTabs(e)+"["+o+"] => "+t[o]+"\n"}else t[o].constructor===Array?i="Array":t[o].constructor===Object&&(i="Object"),n+=this._tab+this._getTabs(e)+"["+o+"] => <b>"+i+"</b>\n",n+=this._tab+this._getTabs(e)+"{\n",n+=this._outputFormat(t[o],e+1)+this._tab+this._getTabs(e)+"}\n";else n=n+this._tab+this._getTabs(e)+"["+o+"] => null \n";return n},printDump:function(t,e){if(e&&"undefined"!=typeof e)if("string"==typeof e)document.getElementById(e).innerHTML="<pre>"+this._formatParam(t)+"</pre>";else{if("object"!=typeof e)throw"TARGET must be an element or an element ID";e.innerHTML="<pre>"+this._formatParam(t)+"</pre>"}else document.write("<pre>"+this._formatParam(t)+"</pre>")},returnDump:function(t){return this._formatParam(t)},alertDump:function(t){window.alert(this._formatParam(t).replace(/(<b>)(Array|Object)(<\/b>)/g,"$2"))},windowDump:function(t){var e="dumperwindow_"+1e4*Math.random(),n=window.open("",e,"width=400,height=300,left=50,top=50,status,menubar,scrollbars,resizable");n.document.open(),n.document.write("<pre>"+this._formatParam(t)+"</pre>"),n.document.close(),n.focus()}};return t}),Ink.createModule("Ink.Util.I18n","1",[],function(){"use strict";var t=/\{(?:(\{.*?})|(?:%s:)?(\d+)|(?:%s)?|([\w-]+))}/g,e=function(t,e){return"function"==typeof t?t.apply(this,e):"undefined"!=typeof t?t:""},n=function(t,e,i){return this instanceof n?void this.reset().lang(e).testMode(i).append(t||{},e):new n(t,e,i)};return n.prototype={reset:function(){return this._dicts=[],this._dict={},this._testMode=!1,this._lang=this._gLang,this},clone:function(){for(var t=new n,e=0,i=this._dicts.length;i>e;e++)t.append(this._dicts[e]);return t.testMode(this.testMode()),t.lang(this.lang()),t},append:function(t){return this._dicts.push(t),this._dict=Ink.extendObj(this._dict,t[this._lang]),this},lang:function(t){if(!arguments.length)return this._lang;if(t&&this._lang!==t){this._lang=t,this._dict={};for(var e=0,n=this._dicts.length;n>e;e++)this._dict=Ink.extendObj(this._dict,this._dicts[e][t]||{})}return this},testMode:function(t){return arguments.length?(void 0!==t&&(this._testMode=!!t),this):!!this._testMode},getKey:function(t){var e,i=this._gLang,o=this._lang;return t in this._dict?e=this._dict[t]:(n.langGlobal(o),e=this._gDict[t],n.langGlobal(i)),e},text:function(n){if("string"==typeof n){var i=Array.prototype.slice.call(arguments,1),o=0,r="object"==typeof i[0],s=this.getKey(n);return void 0===s&&(s=this._testMode?"["+n+"]":n),"number"==typeof s&&(s+=""),"string"==typeof s?s=s.replace(t,function(t,n,s,a){var l=n?n:s?i[s-(r?0:1)]:a?i[0][a]||"":i[o++ +(r?1:0)];return e(l,[o].concat(i))}):"function"==typeof s?s.apply(this,i):s instanceof Array?e(s[i[0]],i):"object"==typeof s?e(s[i[0]],i):""}},ntext:function(t,e,n){var i,o=Array.prototype.slice.apply(arguments);if(2===o.length&&"number"==typeof e){if(i=this.getKey(t),!(i instanceof Array))return"";o.splice(0,1),i=i[1===e?0:1]}else o.splice(0,2),i=1===n?t:e;return this.text.apply(this,[i].concat(o))},ordinal:function(t){if(void 0===t)return"";var n=+t.toString().slice(-1),i=this.getKey("_ordinals");if(void 0===i)return"";if("string"==typeof i)return i;var o;return"function"==typeof i&&(o=i(t,n),"string"==typeof o)?o:"exceptions"in i&&(o="function"==typeof i.exceptions?i.exceptions(t,n):t in i.exceptions?e(i.exceptions[t],[t,n]):void 0,"string"==typeof o)?o:"byLastDigit"in i&&(o="function"==typeof i.byLastDigit?i.byLastDigit(n,t):n in i.byLastDigit?e(i.byLastDigit[n],[n,t]):void 0,"string"==typeof o)?o:"default"in i&&(o=e(i["default"],[t,n]),"string"==typeof o)?o:""},alias:function(){var t=Ink.bind(n.prototype.text,this);return t.ntext=Ink.bind(n.prototype.ntext,this),t.append=Ink.bind(n.prototype.append,this),t.ordinal=Ink.bind(n.prototype.ordinal,this),t.testMode=Ink.bind(n.prototype.testMode,this),t}},n.reset=function(){n.prototype._gDicts=[],n.prototype._gDict={},n.prototype._gLang="pt_PT"},n.reset(),n.appendGlobal=function(t,e){if(e){if(!(e in t)){var i={};i[e]=t,t=i}e!==n.prototype._gLang&&n.langGlobal(e)}n.prototype._gDicts.push(t),Ink.extendObj(n.prototype._gDict,t[n.prototype._gLang])},n.langGlobal=function(t){if(!arguments.length)return n.prototype._gLang;if(t&&n.prototype._gLang!==t){n.prototype._gLang=t,n.prototype._gDict={};for(var e=0,i=n.prototype._gDicts.length;i>e;e++)Ink.extendObj(n.prototype._gDict,n.prototype._gDicts[e][t]||{})}},n}),Ink.createModule("Ink.Util.Json","1",[],function(){"use strict";function twoDigits(t){var e=""+t;return 1===e.length?"0"+e:e}var function_call=Function.prototype.call,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,dateToISOString=Date.prototype.toISOString?Ink.bind(function_call,Date.prototype.toISOString):function(t){return t.getUTCFullYear()+"-"+twoDigits(t.getUTCMonth()+1)+"-"+twoDigits(t.getUTCDate())+"T"+twoDigits(t.getUTCHours())+":"+twoDigits(t.getUTCMinutes())+":"+twoDigits(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},InkJson={_nativeJSON:window.JSON||null,_convertToUnicode:!1,_escape:function(t){var e={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)&&(t=t.replace(/([\x00-\x1f\\"])/g,function(t,n){var i=e[n];return i?i:(i=n.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})),t},_toUnicode:function(t){if(this._convertToUnicode){for(var e="",n=!1,i=!1,o=0,r=t.length;r>o;){if(n=t.charCodeAt(o),n>=32&&126>=n||8===n||9===n||10===n||12===n||13===n||32===n||34===n||47===n||58===n||92===n)i=34===n||92===n||47===n?"\\"+t.charAt(o):8===n?"\\b":9===n?"\\t":10===n?"\\n":12===n?"\\f":13===n?"\\r":t.charAt(o);else if(this._convertToUnicode){for(i=t.charCodeAt(o).toString(16)+"".toUpperCase();i.length<4;)i="0"+i;i="\\u"+i}else i=t.charAt(o);e+=i,o++}return e}return this._escape(t)},_stringifyValue:function(t){if("string"==typeof t)return'"'+this._toUnicode(t)+'"';if("number"!=typeof t||!isNaN(t)&&isFinite(t)){if("undefined"==typeof t||null===t)return"null";if("function"==typeof t.toJSON){var e=t.toJSON();return"string"==typeof e?'"'+this._escape(e)+'"':this._escape(e.toString())}if("number"==typeof t||"boolean"==typeof t)return""+t;if("function"==typeof t)return"null";if(t.constructor===Date)return'"'+this._escape(dateToISOString(t))+'"';if(t.constructor===Array){for(var n="",i=0,o=t.length;o>i;i++)i>0&&(n+=","),n+=this._stringifyValue(t[i]);return"["+n+"]"}var r="";for(var s in t)({}).hasOwnProperty.call(t,s)&&(""!==r&&(r+=","),r+='"'+this._escape(s)+'": '+this._stringifyValue(t[s]));return"{"+r+"}"}return"null"},stringify:function(t,e){return this._convertToUnicode=!!e,!this._convertToUnicode&&this._nativeJSON?this._nativeJSON.stringify(t):this._stringifyValue(t)},parse:function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}};return InkJson}),Ink.createModule("Ink.Util.String","1",[],function(){"use strict";var InkUtilString={_chars:["&","\xe0","\xe1","\xe2","\xe3","\xe4","\xe5","\xe6","\xe7","\xe8","\xe9","\xea","\xeb","\xec","\xed","\xee","\xef","\xf0","\xf1","\xf2","\xf3","\xf4","\xf5","\xf6","\xf8","\xf9","\xfa","\xfb","\xfc","\xfd","\xfe","\xff","\xc0","\xc1","\xc2","\xc3","\xc4","\xc5","\xc6","\xc7","\xc8","\xc9","\xca","\xcb","\xcc","\xcd","\xce","\xcf","\xd0","\xd1","\xd2","\xd3","\xd4","\xd5","\xd6","\xd8","\xd9","\xda","\xdb","\xdc","\xdd","\xde","\u20ac",'"',"\xdf","<",">","\xa2","\xa3","\xa4","\xa5","\xa6","\xa7","\xa8","\xa9","\xaa","\xab","\xac","\xad","\xae","\xaf","\xb0","\xb1","\xb2","\xb3","\xb4","\xb5","\xb6","\xb7","\xb8","\xb9","\xba","\xbb","\xbc","\xbd","\xbe"],_entities:["amp","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","euro","quot","szlig","lt","gt","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34"],_accentedChars:["\xe0","\xe1","\xe2","\xe3","\xe4","\xe5","\xe8","\xe9","\xea","\xeb","\xec","\xed","\xee","\xef","\xf2","\xf3","\xf4","\xf5","\xf6","\xf9","\xfa","\xfb","\xfc","\xe7","\xf1","\xc0","\xc1","\xc2","\xc3","\xc4","\xc5","\xc8","\xc9","\xca","\xcb","\xcc","\xcd","\xce","\xcf","\xd2","\xd3","\xd4","\xd5","\xd6","\xd9","\xda","\xdb","\xdc","\xc7","\xd1"],_accentedRemovedChars:["a","a","a","a","a","a","e","e","e","e","i","i","i","i","o","o","o","o","o","u","u","u","u","c","n","A","A","A","A","A","A","E","E","E","E","I","I","I","I","O","O","O","O","O","U","U","U","U","C","N"],_htmlUnsafeChars:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},ucFirst:function(t,e){var n=e?/(^|\s)(\w)(\S{2,})/:/(^|\s)(\w)(\S{2,})/g;
return t?String(t).replace(n,function(t,e,n,i){return e+n.toUpperCase()+i.toLowerCase()}):t},trim:function(t){return"string"==typeof t?t.replace(/^\s+|\s+$|\n+$/g,""):t},stripTags:function(t,e){if(e&&"string"==typeof e){for(var n=InkUtilString.trim(e).split(","),i=[],o=!1,r=0;r<n.length;r++)""!==InkUtilString.trim(n[r])&&(o=InkUtilString.trim(n[r].replace(/(<|\>)/g,"").replace(/\s/,"")),i.push("(<"+o+"\\s[^>]+>|<(\\s|\\/)?(\\s|\\/)?"+o+">)"));for(var s=i.join("|"),a=new RegExp(s,"i"),l=t.match(new RegExp("<[^>]*>","g")),h=0;h<l.length;h++)l[h].match(a)||(t=t.replace(new RegExp(l[h],"gm"),""));return t}return t.replace(/<[^\>]+\>/g,"")},htmlEntitiesEncode:function(t){if(t&&t.replace)for(var e=!1,n=0;n<InkUtilString._chars.length;n++)e=new RegExp(InkUtilString._chars[n],"gm"),t=t.replace(e,"&"+InkUtilString._entities[n]+";");return t},htmlEntitiesDecode:function(t){if(t&&t.replace){for(var e=!1,n=0;n<InkUtilString._entities.length;n++)e=new RegExp("&"+InkUtilString._entities[n]+";","gm"),t=t.replace(e,InkUtilString._chars[n]);t=t.replace(/&#[^;]+;?/g,function(t){return String.fromCharCode("x"===t.charAt(2)?parseInt(t.substring(3),16):parseInt(t.substring(2),10))})}return t},utf8Encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e+=String.fromCharCode(i):i>127&&2048>i?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e},shortString:function(t,e){for(var n=t.split(" "),i="",o=0;o<n.length;o++){if((i+n[o]+" ").length>=e){i+="&hellip;";break}i+=n[o]+" "}return i},truncateString:function(t,e){return t.length-1>e?t.substr(0,e-1)+"\u2026":t},utf8Decode:function(t){for(var e="",n=0,i=0,o=0,r=0;n<t.length;)i=t.charCodeAt(n),128>i?(e+=String.fromCharCode(i),n++):i>191&&224>i?(o=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&o),n+=2):(o=t.charCodeAt(n+1),r=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&r),n+=3);return e},removeAccentedChars:function(t){for(var e=t,n=!1,i=0;i<InkUtilString._accentedChars.length;i++)n=new RegExp(InkUtilString._accentedChars[i],"gm"),e=e.replace(n,""+InkUtilString._accentedRemovedChars[i]);return e},substrCount:function(t,e){return t?t.split(e).length-1:0},evalJSON:function(strJSON,sanitize){if("undefined"==typeof sanitize||null===sanitize||InkUtilString.isJSON(strJSON))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("ERROR: Bad JSON string...")}},isJSON:function(t){return t=t.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(t)},htmlEscapeUnsafe:function(t){var e=InkUtilString._htmlUnsafeChars;return null!==t?String(t).replace(/[<>&'"]/g,function(t){return e[t]}):t},normalizeWhitespace:function(t){return null!==t?InkUtilString.trim(String(t).replace(/\s+/g," ")):t},toUnicode:function(t){if("string"==typeof t){for(var e="",n=!1,i=!1,o=t.length,r=0;o>r;){if(n=t.charCodeAt(r),n>=32&&126>=n||8===n||9===n||10===n||12===n||13===n||32===n||34===n||47===n||58===n||92===n)i=8===n?"\\b":9===n?"\\t":10===n?"\\n":12===n?"\\f":13===n?"\\r":t.charAt(r);else{for(i=t.charCodeAt(r).toString(16)+"".toUpperCase();i.length<4;)i="0"+i;i="\\u"+i}e+=i,r++}return e}},escape:function(t){var e=t.charCodeAt(0).toString(16).split("");if(e.length<3){for(;e.length<2;)e.unshift("0");e.unshift("x")}else{for(;e.length<4;)e.unshift("0");e.unshift("u")}return e.unshift("\\"),e.join("")},unescape:function(t){var e=t.lastIndexOf("0");e=-1===e?2:Math.min(e,2);var n=t.substring(e),i=parseInt(n,16);return String.fromCharCode(i)},escapeText:function(t,e){void 0===e&&(e=["[","]","'",","]);for(var n,i,o=[],r=0,s=t.length;s>r;++r)n=t[r],i=n.charCodeAt(0),(32>i||i>126&&-1===e.indexOf(n))&&(n=InkUtilString.escape(n)),o.push(n);return o.join("")},escapedCharRegex:/(\\x[0-9a-fA-F]{2})|(\\u[0-9a-fA-F]{4})/g,unescapeText:function(t){for(var e;e=InkUtilString.escapedCharRegex.exec(t);)e=e[0],t=t.replace(e,InkUtilString.unescape(e)),InkUtilString.escapedCharRegex.lastIndex=0;return t},strcmp:function(t,e){return t===e?0:t>e?1:-1},packetize:function(t,e){for(var n,i=t.length,o=new Array(Math.ceil(i/e)),r=t.split(""),s=0;i;)n=Math.min(e,i),o[s++]=r.splice(0,n).join(""),i-=n;return o}};return InkUtilString}),Ink.createModule("Ink.Util.Url","1",[],function(){"use strict";var t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",getUrl:function(){return window.location.href},genQueryString:function(t,e){var n,i,o,r=-1!==t.indexOf("?"),s=[t];for(i in e)e.hasOwnProperty(i)&&(r?n="&":(n="?",r=!0),o=e[i],"number"==typeof o||o||(o=""),s=s.concat([n,encodeURIComponent(i),"=",encodeURIComponent(o)]));return s.join("")},getQueryString:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n={};if(e.match(/\?(.+)/i)){var i=e.replace(/^(.*)\?([^\#]+)(\#(.*))?/g,"$2");if(i.length>0)for(var o=i.split(/[;&]/),r=0;r<o.length;r++){var s=o[r].split("=");n[decodeURIComponent(s[0])]="undefined"!=typeof s[1]&&s[1]?decodeURIComponent(s[1]):!1}}return n},getAnchor:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n=!1;return e.match(/#(.+)/)&&(n=e.replace(/([^#]+)#(.*)/,"$2")),n},getAnchorString:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n={};if(e.match(/#(.+)/i)){var i=e.replace(/^([^#]+)#(.*)?/g,"$2");if(i.length>0)for(var o=i.split(/[;&]/),r=0;r<o.length;r++){var s=o[r].split("=");n[decodeURIComponent(s[0])]="undefined"!=typeof s[1]&&s[1]?decodeURIComponent(s[1]):!1}}return n},parseUrl:function(t){var e={};if(t&&"string"==typeof t){if(t.match(/^([^:]+):\/\//i)){var n=/^([^:]+):\/\/([^\/]*)\/?([^\?#]*)\??([^#]*)#?(.*)/i;t.match(n)&&(e.scheme=t.replace(n,"$1"),e.host=t.replace(n,"$2"),e.path="/"+t.replace(n,"$3"),e.query=t.replace(n,"$4")||!1,e.fragment=t.replace(n,"$5")||!1)}else{var i=new RegExp("^([^\\?]+)\\?([^#]+)#(.*)","i"),o=new RegExp("^([^\\?]+)\\?([^#]+)#?","i"),r=new RegExp("^([^\\?]+)\\??","i");t.match(i)?(e.scheme=!1,e.host=!1,e.path=t.replace(i,"$1"),e.query=t.replace(i,"$2"),e.fragment=t.replace(i,"$3")):t.match(o)?(e.scheme=!1,e.host=!1,e.path=t.replace(o,"$1"),e.query=t.replace(o,"$2"),e.fragment=!1):t.match(r)&&(e.scheme=!1,e.host=!1,e.path=t.replace(r,"$1"),e.query=!1,e.fragment=!1)}if(e.host){var s=/^(.*?)\\:(\\d+)$/i;if(e.host.match(s)){var a=e.host;e.host=a.replace(s,"$1"),e.port=a.replace(s,"$2")}else e.port=!1;if(e.host.match(/@/i)){var l=e.host;e.host=l.split("@")[1];var h=l.split("@")[0];h.match(/\:/)?(e.user=h.split(":")[0],e.pass=h.split(":")[1]):(e.user=h,e.pass=!1)}}}return e},format:function(t){var e="",n="",i="",o="",r="";return"string"==typeof t.protocol?e=t.protocol+"//":"string"==typeof t.scheme&&(e=t.scheme+"://"),n=t.host||t.hostname||"",i=t.path||"","string"==typeof t.query?r=t.query:"string"==typeof t.search&&(r=t.search.replace(/^\?/,"")),"string"==typeof t.fragment?o=t.fragment:"string"==typeof t.hash&&(o=t.hash.replace(/#$/,"")),[e,n,i,r&&"?"+r,o&&"#"+o].join("")},currentScriptElement:function(t){var e=document.getElementsByTagName("script");if("undefined"==typeof t)return e.length>0?e[e.length-1]:!1;for(var n=!1,i=new RegExp(""+t,"i"),o=0,r=e.length;r>o;o++)if(n=e[o],i.test(n.src))return n;return!1}};return t}),Ink.createModule("Ink.Util.Validator","1",[],function(){"use strict";var t={_countryCodes:["AO","CV","MZ","TL","PT"],_internacionalPT:351,_indicativosPT:{21:"lisboa",22:"porto",231:"mealhada",232:"viseu",233:"figueira da foz",234:"aveiro",235:"arganil",236:"pombal",238:"seia",239:"coimbra",241:"abrantes",242:"ponte de s\xf4r",243:"santar\xe9m",244:"leiria",245:"portalegre",249:"torres novas",251:"valen\xe7a",252:"vila nova de famalic\xe3o",253:"braga",254:"peso da r\xe9gua",255:"penafiel",256:"s\xe3o jo\xe3o da madeira",258:"viana do castelo",259:"vila real",261:"torres vedras",262:"caldas da ra\xednha",263:"vila franca de xira",265:"set\xfabal",266:"\xe9vora",268:"estremoz",269:"santiago do cac\xe9m",271:"guarda",272:"castelo branco",273:"bragan\xe7a",274:"proen\xe7a-a-nova",275:"covilh\xe3",276:"chaves",277:"idanha-a-nova",278:"mirandela",279:"moncorvo",281:"tavira",282:"portim\xe3o",283:"odemira",284:"beja",285:"moura",286:"castro verde",289:"faro",291:"funchal, porto santo",292:"corvo, faial, flores, horta, pico",295:"angra do hero\xedsmo, graciosa, s\xe3o jorge, terceira",296:"ponta delgada, s\xe3o miguel, santa maria",91:"rede m\xf3vel 91 (Vodafone / Yorn)",93:"rede m\xf3vel 93 (Optimus)",96:"rede m\xf3vel 96 (TMN)",92:"rede m\xf3vel 92 (TODOS)",707:"n\xfamero \xfanico",760:"n\xfamero \xfanico",800:"n\xfamero gr\xe1tis",808:"chamada local",30:"voip"},_internacionalCV:238,_indicativosCV:{2:"fixo",91:"m\xf3vel 91",95:"m\xf3vel 95",97:"m\xf3vel 97",98:"m\xf3vel 98",99:"m\xf3vel 99"},_internacionalAO:244,_indicativosAO:{2:"fixo",91:"m\xf3vel 91",92:"m\xf3vel 92"},_internacionalMZ:258,_indicativosMZ:{2:"fixo",82:"m\xf3vel 82",84:"m\xf3vel 84"},_internacionalTL:670,_indicativosTL:{3:"fixo",7:"m\xf3vel 7"},_characterGroups:{numbers:["0-9"],asciiAlpha:["a-zA-Z"],latin1Alpha:["a-zA-Z","\xc0-\xff"],unicodeAlpha:["a-zA-Z","\xc0-\xff","\u0100-\u1fff","\u2c00-\ud7ff"],space:[" "],dash:["-"],underscore:["_"],nicknamePunctuation:["_.-"],singleLineWhitespace:["	 "],newline:["\n"],whitespace:["	\n\f\r\xa0 "],asciiPunctuation:["!-/",":-@","[-`","{-~"],latin1Punctuation:["!-/",":-@","[-`","{-~","\xa1-\xbf","\xd7","\xf7"],unicodePunctuation:["!-/",":-@","[-`","{-~","\xa1-\xbf","\xd7","\xf7","\u2000-\u206f","\u2e00-\u2e7f","\u3000-\u303f"]},createRegExp:function(e){var n="^[";for(var i in e)if(e.hasOwnProperty(i)){if(!(i in t._characterGroups))throw new Error("group "+i+" is not a valid character group");e[i]&&(n+=t._characterGroups[i].join(""))}return new RegExp("^["===n?"$^":n+"]*?$")},checkCharacterGroups:function(e,n){return t.createRegExp(n).test(e)},unicode:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({unicodeAlpha:!0},n))},latin1:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({latin1Alpha:!0},n))},ascii:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({asciiAlpha:!0},n))},number:function(e,n){if(e+="",n=Ink.extendObj({decimalSep:".",thousandSep:"",negative:!0,decimalPlaces:null,maxDigits:null,max:null,min:null,returnNumber:!1},n||{}),n.thousandSep)return e=e.replace(new RegExp("\\"+n.thousandSep,"g"),""),n.thousandSep="",t.number(e,n);if(n.negative===!1)return n.min=0,n.negative=!0,t.number(e,n);if("."!==n.decimalSep&&(e=e.replace(new RegExp("\\"+n.decimalSep,"g"),".")),!/^(-)?(\d+)?(\.\d+)?$/.test(e)||""===e)return!1;var i;if(n.decimalSep&&-1!==e.indexOf(n.decimalSep)){if(i=e.split(n.decimalSep),null!==n.decimalPlaces&&i[1].length>n.decimalPlaces)return!1}else i=[""+e,""];if(null!==n.maxDigits&&i[0].replace(/-/g,"").length>n.maxDigits)return i;var o=parseFloat(e);return null!==n.maxExcl&&o>=n.maxExcl||null!==n.minExcl&&o<=n.minExcl?!1:null!==n.max&&o>n.max||null!==n.min&&o<n.min?!1:n.returnNumber?o:!0},_isLeapYear:function(t){var e=/^\d{4}$/;return e.test(t)?t%4?!1:t%100?!0:t%400?!1:!0:!1},_dateParsers:{"yyyy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{4})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yyyy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{4})(\/)(\d{1,2})(\/)(\d{1,2})$/},"yy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{2})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{2})(\/)(\d{1,2})(\/)(\d{1,2})$/},"dd-mm-yyyy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{4})$/},"dd/mm/yyyy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{4})$/},"dd-mm-yy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{2})$/},"dd/mm/yy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{2})$/}},_daysInMonth:function(t,e){var n=0;return t=parseInt(t,10),e=parseInt(e,10),1===t||3===t||5===t||7===t||8===t||10===t||12===t?n=31:4===t||6===t||9===t||11===t?n=30:2===t&&(n=e%400===0||e%4===0&&e%100!==0?29:28),n},_isValidDate:function(t,e,n){var i=/^\d{4}$/,o=/^\d{1,2}$/;return i.test(t)&&o.test(e)&&o.test(n)&&e>=1&&12>=e&&n>=1&&this._daysInMonth(e,t)>=n?!0:!1},email:function(t){var e=new RegExp("^[_a-z0-9-]+((\\.|\\+)[_a-z0-9-]+)*@([\\w]*-?[\\w]*\\.)+[a-z]{2,4}$","i");return!!e.test(t)},mail:function(e){return t.email(e)},url:function(t,e){if("undefined"==typeof e||e===!1){var n=new RegExp("(^(http\\:\\/\\/|https\\:\\/\\/)(.+))","i");n.test(t)===!1&&(t="http://"+t)}var i=new RegExp("^(http:\\/\\/|https:\\/\\/)([\\w]*(-?[\\w]*)*\\.)+[a-z]{2,4}","i");return i.test(t)===!1?!1:!0},isPTPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosPT)"string"==typeof this._indicativosPT[n]&&e.push(n);var i=e.join("|"),o=/^(00351|\+351)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{9}/i;if(9===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isPortuguesePhone:function(t){return this.isPTPhone(t)},isCVPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosCV)"string"==typeof this._indicativosCV[n]&&e.push(n);var i=e.join("|"),o=/^(00238|\+238)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{7}/i;if(7===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isAOPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosAO)"string"==typeof this._indicativosAO[n]&&e.push(n);var i=e.join("|"),o=/^(00244|\+244)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{9}/i;if(9===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isMZPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosMZ)"string"==typeof this._indicativosMZ[n]&&e.push(n);var i=e.join("|"),o=/^(00258|\+258)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{8,9}/i;if((9===t.length||8===t.length)&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t)){if(0===t.indexOf("2")&&8===t.length)return!0;if(0===t.indexOf("8")&&9===t.length)return!0}}return!1},isTLPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosTL)"string"==typeof this._indicativosTL[n]&&e.push(n);var i=e.join("|"),o=/^(00670|\+670)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{7}/i;if(7===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isPhone:function(){var t;if(0===arguments.length)return!1;var e=arguments[0];if(arguments.length>1){if(arguments[1].constructor!==Array){if("function"==typeof this["is"+arguments[1].toUpperCase()+"Phone"])return this["is"+arguments[1].toUpperCase()+"Phone"](e);throw"Invalid Country Code!"}var n;for(t=0;t<arguments[1].length;t++){if("function"!=typeof(n=this["is"+arguments[1][t].toUpperCase()+"Phone"]))throw"Invalid Country Code!";if(n(e))return!0}}else for(t=0;t<this._countryCodes.length;t++)if(this["is"+this._countryCodes[t]+"Phone"](e))return!0;return!1},codPostal:function(t,e,n){var i=/^(\s*\-\s*|\s+)$/,o=/^\s+|\s+$/g,r=/^[1-9]\d{3}$/,s=/^\d{3}$/,a=/^(.{4})(.*)(.{3})$/;if(t=t.replace(o,""),"undefined"!=typeof e){if(e=e.replace(o,""),r.test(t)&&s.test(e))return n?[!0,!0]:!0}else{if(r.test(t))return n?[!0,!1]:!0;var l=t.match(a);if(null!==l&&r.test(l[1])&&i.test(l[2])&&s.test(l[3]))return n?[!0,!1]:!0}return n?[!1,!1]:!1},isDate:function(t,e){if("undefined"==typeof this._dateParsers[t])return!1;var n=this._dateParsers[t].year,i=this._dateParsers[t].month,o=this._dateParsers[t].day,r=this._dateParsers[t].parser,s=this._dateParsers[t].sep,a=e.match(r);if(null!==a&&a[2]===a[4]&&a[2]===s){var l=2===a[n].length?"20"+a[n].toString():a[n];if(this._isValidDate(l,a[i].toString(),a[o].toString()))return!0}return!1},isColor:function(t){var e,n=!1,i=/^[a-zA-Z]+$/,o=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,r=/^rgb\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,s=/^rgba\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/,a=/^hsl\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,l=/^hsla\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/;if(i.test(t)||o.test(t))return!0;var h;if(null!==(e=r.exec(t))||null!==(e=s.exec(t)))for(h=e.length;h--;){if((2===h||4===h||6===h)&&"undefined"!=typeof e[h]&&""!==e[h]){if(!("undefined"!=typeof e[h-1]&&e[h-1]>=0&&e[h-1]<=100))return!1;n=!0}if(1===h||3===h||5===h&&("undefined"==typeof e[h+1]||""===e[h+1])){if(!("undefined"!=typeof e[h]&&e[h]>=0&&e[h]<=255))return!1;n=!0}}if(null!==(e=a.exec(t))||null!==(e=l.exec(t)))for(h=e.length;h--;){if(3===h||5===h){if(!("undefined"!=typeof e[h-1]&&"undefined"!=typeof e[h]&&""!==e[h]&&e[h-1]>=0&&e[h-1]<=100))return!1;n=!0}if(1===h){if(!("undefined"!=typeof e[h]&&e[h]>=0&&e[h]<=360))return!1;n=!0}}return n},isIP:function(t,e){if("string"!=typeof t)return!1;switch(e=(e||"ipv4").toLowerCase()){case"ipv4":return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t);case"ipv6":return/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(t);default:return!1}},_creditCardSpecs:{"default":{length:"13,14,15,16,17,18,19",prefix:/^.+/,luhn:!0},"american express":{length:"15",prefix:/^3[47]/,luhn:!0},"diners club":{length:"14,16",prefix:/^36|55|30[0-5]/,luhn:!0},discover:{length:"16",prefix:/^6(?:5|011)/,luhn:!0},jcb:{length:"15,16",prefix:/^3|1800|2131/,luhn:!0},maestro:{length:"16,18",prefix:/^50(?:20|38)|6(?:304|759)/,luhn:!0},mastercard:{length:"16",prefix:/^5[1-5]/,luhn:!0},visa:{length:"13,16",prefix:/^4/,luhn:!0}},_luhn:function(t){if(t=parseInt(t,10),"number"!=typeof t&&t%1!==0)return!1;t+="";var e,n=t.length,i=0;for(e=n-1;e>=0;e-=2)i+=parseInt(t.substr(e,1),10);for(e=n-2;e>=0;e-=2){var o=parseInt(2*t.substr(e,1),10);i+=o>=10?o-9:o}return i%10===0},isCreditCard:function(t,e){if(/\d+/.test(t)===!1)return!1;if("undefined"==typeof e)e="default";else if(e instanceof Array){var n,i=e.length;for(n=0;i>n;n++)if(this.isCreditCard(t,e[n]))return!0;return!1}if(e=e.toLowerCase(),"undefined"==typeof this._creditCardSpecs[e])return!1;var o=t.length+"";return-1===this._creditCardSpecs[e].length.split(",").indexOf(o)?!1:this._creditCardSpecs[e].prefix.test(t)?this._creditCardSpecs[e].luhn===!1?!0:this._luhn(t):!1},getEANCheckDigit:function(t){var e,n,i=0;for(t=String(t);t.length<12;)t="00000"+t;for(e=t.length,n=e-1;n>=0;n--)i+=(n%2*2+1)*Number(t.charAt(n));return 10-i%10},isEAN:function(e,n){switch(void 0===n&&(n="ean-13"),n){case"ean-13":if(13!==e.length)return!1;break;case"ean-8":if(8!==e.length)return!1;break;default:return!1}var i=e.substr(0,e.length-1),o=e.charAt(e.length-1),r=t.getEANCheckDigit(i);return String(r)===o}};return t}),Ink.createModule("Ink.UI.Animate",1,["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(t,e,n){"use strict";function i(){t.BaseUIComponent.apply(this,arguments)}var o=function(t){return"animationName"in t.style?"animation":"webkitAnimationName"in t.style?"webkitAnimation":null}(document.createElement("div")),r={animation:"animationend",webkitAnimation:"webkitAnimationEnd"}[o];return i._name="Animate_1",i._optionDefinition={trigger:["Element",null],duration:["String","slow"],animation:["String"],removeClass:["Boolean",!0],onEnd:["Function",function(){}]},i.prototype._init=function(){isNaN(parseInt(this._options.duration,10))||(this._options.duration=parseInt(this._options.duration,10)),this._options.trigger?e.observe(this._options.trigger,"click",Ink.bind(function(){this.animate()},this)):this.animate()},i.prototype.animate=function(){i.animate(this._element,this._options.animation,this._options)},Ink.extendObj(i,{_animationPrefix:o,animationSupported:!!o,animationEndEventName:r,animate:function(e,s,a){function l(t){t.target===e&&t.animationName===s&&(a.onEnd&&a.onEnd(t),a.removeClass&&n.removeClassName(e,s),"string"==typeof a.duration&&n.removeClassName(e,a.duration),e.removeEventListener(r,l,!1))}return e=t.elOrSelector(e),"number"==typeof a||"string"==typeof a?a={duration:a}:a||(a={}),"function"==typeof arguments[3]&&(a.onEnd=arguments[3]),"number"!=typeof a.duration&&"string"!=typeof a.duration&&(a.duration=400),i.animationSupported?("number"==typeof a.duration?e.style[o+"Duration"]=a.duration+"ms":"string"==typeof a.duration&&n.addClassName(e,a.duration),n.addClassName(e,["animated",s]),void e.addEventListener(r,l,!1)):void(a.onEnd&&setTimeout(function(){a.onEnd(null)},0))}}),t.createUIComponent(i),i}),Ink.createModule("Ink.UI.Carousel","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.UI.Pagination_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";function s(t,e,n){return Math.min(n,Math.max(e,t))}function a(){t.BaseUIComponent.apply(this,arguments)}function l(t,e){t.style.transitionProperty=t.style.oTransitionProperty=t.style.msTransitionProperty=t.style.mozTransitionProperty=t.style.webkitTransitionProperty=e}var h=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/30)};return a._name="Carousel_1",a._optionDefinition={autoAdvance:["Integer",0],axis:["String","x"],initialPage:["Integer",0],spaceAfterLastSlide:["Boolean",!0],keyboardSupport:["Boolean",!1],pagination:["String",null],onChange:["Function",null],onInit:["Function",function(){}],swipe:["Boolean",!0]},a.prototype={_init:function(){this._handlers={paginationChange:Ink.bindMethod(this,"_onPaginationChange"),windowResize:e.throttle(Ink.bindMethod(this,"refit"),200)},e.observe(window,"resize",this._handlers.windowResize),this._isY="y"===this._options.axis;var t=Ink.s("ul.stage",this._element);t.style.width="100%",this._ulEl=t,i.removeTextNodeChildren(t),null==this._options.pagination&&(this._currentPage=this._options.initialPage),this.refit(),this._isY&&(this._ulEl.style.whiteSpace="normal"),this._options.swipe&&(e.observe(this._element,"touchstart",Ink.bindMethod(this,"_onTouchStart")),e.observe(this._element,"touchmove",Ink.bindMethod(this,"_onTouchMove")),e.observe(this._element,"touchend",Ink.bindMethod(this,"_onTouchEnd"))),this._setUpPagination(),this._setUpAutoAdvance(),this._options.onInit.call(this,this)},refit:function(){var t=this._isY,e=function(e,n){return e?n?i.outerDimensions(e)[t?0:1]:i.outerDimensions(e)[t?1:0]:0};this._liEls=Ink.ss("li.slide",this._ulEl);var n=this._liEls.length,o=this._ulEl.getBoundingClientRect();this._ctnLength=t?o.bottom-o.top:o.right-o.left,this._elLength=e(this._liEls[0]),this._slidesPerPage=Math.floor(this._ctnLength/this._elLength)||1,isFinite(this._slidesPerPage)||(this._slidesPerPage=1);var r=Math.ceil(n/this._slidesPerPage),a=this._numPages!==r;this._numPages=r,this._deltaLength=this._slidesPerPage*this._elLength,this._IE7(),this._pagination&&a&&this._pagination.setSize(this._numPages),this.setPage(s(this.getPage(),0,this._numPages-1))},_setUpPagination:function(){this._options.pagination?(t.isDOMElement(this._options.pagination)||"string"==typeof this._options.pagination?this._pagination=new o(this._options.pagination,{size:this._numPages,onChange:this._handlers.paginationChange}):(this._pagination=this._options.pagination,this._pagination.setOnChange(this._handlers.paginationChange),this._pagination.setSize(this._numPages)),this._pagination.setCurrent(this._options.initialPage||0)):this._currentPage=this._options.initialPage||0},_setUpAutoAdvance:function(){this._options.autoAdvance&&this.autoAdvance(this._options.autoAdvance)},autoAdvance:function(t){function e(){n.nextPage(!0),n._autoAdvanceSto=setTimeout(e,t)}if(!this._autoAdvanceSto){var n=this;this._autoAdvanceSto=setTimeout(e,t)}},stopAutoAdvance:function(){this._autoAdvanceSto&&(clearTimeout(this._autoAdvanceSto),this._autoAdvanceSto=null)},_IE7:function(){if(r.IE&&""+r.version.split(".")[0]=="7")for(var t=Ink.ss("li.slide",this._ulEl),e=function(e,i){t[n].style[e]=i},n=0,i=t.length;i>n;n++)e("position","absolute"),e(this._isY?"top":"left",n*this._elLength+"px")},_onTouchStart:function(t){if(!(t.touches.length>1)){this._swipeData={x:e.pointerX(t),y:e.pointerY(t)};var n=this._ulEl.getBoundingClientRect();this._swipeData.firstUlPos=n[this._isY?"top":"left"],this._swipeData.inUlX=this._swipeData.x-n.left,this._swipeData.inUlY=this._swipeData.y-n.top,l(this._ulEl,"none"),this._touchMoveIsFirstTouchMove=!0}},_onTouchMove:function(t){if(!(t.touches.length>1)){var n=e.pointerX(t),i=e.pointerY(t),o=this._swipeData.y-i,r=this._swipeData.x-n;if(this._touchMoveIsFirstTouchMove){var s=Math.abs(o),a=Math.abs(r);this._touchMoveIsFirstTouchMove=void 0,this._scrolling=this._isY?a>s:s>a,this._scrolling||this._onAnimationFrame()}!this._scrolling&&this._swipeData&&(e.stopDefault(t),this._swipeData.pointerDelta=this._isY?o:r,this._swipeData.pointerPos=this._isY?i:n)}},_onAnimationFrame:function(){var t=this._swipeData;if(t&&!this._scrolling&&!this._touchMoveIsFirstTouchMove){var e,n=this._element.getBoundingClientRect();e=this._isY?t.pointerPos-t.inUlY-n.top:t.pointerPos-t.inUlX-n.left,this._ulEl.style[this._isY?"top":"left"]=e+"px",h(Ink.bindMethod(this,"_onAnimationFrame"))}},_onTouchEnd:function(t){if(this._swipeData&&this._swipeData.pointerPos&&!this._scrolling&&!this._touchMoveIsFirstTouchMove){var n=.1,i=this._swipeData.pointerDelta,o=this.getPage(),r=i/this._elLength/this._slidesPerPage;Math.abs(r)>n&&(o+=Math[0>i?"floor":"ceil"](r)),o=s(o,0,this._numPages-1),isNaN(o)||this.setPage(o),e.stopDefault(t)}l(this._ulEl,null),this._swipeData=null,this._touchMoveIsFirstTouchMove=void 0,this._scrolling=void 0},_onPaginationChange:function(t){this._setPage(t.getCurrent())},getPage:function(){return this._pagination?this._pagination.getCurrent():this._currentPage||0},getPagination:function(){return this._pagination||null},setPage:function(t,e){return e&&(t%=this._numPages,0>t&&(t=this._numPages-t)),t=s(t,0,this._numPages-1),t===this._currentPage?void(this._swipeData&&this._setPage(t)):void(this._pagination?this._pagination.setCurrent(t):this._setPage(t))},_setPage:function(t){var e=t*this._deltaLength,n=t===this._numPages-1;if(!this._options.spaceAfterLastSlide&&n&&t>0){var i=this._liEls.length-t*this._slidesPerPage;i<this._slidesPerPage&&(e=(t-1)*this._deltaLength+i*this._elLength)}this._ulEl.style[this._isY?"top":"left"]=["-",e/this._ctnLength*100,"%"].join(""),this._options.onChange&&this._options.onChange.call(this,t),this._currentPage=t},nextPage:function(t){this.setPage(this.getPage()+1,t)},previousPage:function(t){this.setPage(this.getPage()-1,t)},getSlidesPerPage:function(){return this._slidesPerPage},getTotalPages:function(){return this._numPages},getStageElm:function(){return this._ulEl},getSlidesList:function(){return this._liEls},getTotalSlides:function(){return this.getSlidesList().length}},t.createUIComponent(a),a}),Ink.createModule("Ink.UI.Close","1",["Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e){"use strict";function n(){t.observe(document.body,"click",function(n){var i=t.element(n);if(i=e.findUpwardsByClass(i,"ink-close")||e.findUpwardsByClass(i,"ink-dismiss")){var o=e.findUpwardsByClass(i,"ink-alert")||e.findUpwardsByClass(i,"ink-alert-block")||i;o&&(t.stop(n),e.remove(o))}})}return n._name="Close_1",n}),Ink.createModule("Ink.UI.Common","1",["Ink.Dom.Element_1","Ink.Net.Ajax_1","Ink.Dom.Css_1","Ink.Dom.Selector_1","Ink.Util.Url_1"],function(t,e,n,i,o){"use strict";function r(){this&&this!==window&&"function"==typeof this.constructor&&Ink.warn("You called a method on an incorrectly instantiated "+this.constructor._name+" component. Check the warnings above to see what went wrong.")}function s(t,e){for(var n in t)if(t.hasOwnProperty(n)){if("constructor"===n)continue;"function"==typeof e[n]&&(e[n]=r)}}function a(t,e){var n=this.constructor,i=n._name;if(!this||this===window)throw new Error('Use "new InkComponent()" instead of "InkComponent()"');if(this&&!(this instanceof a))throw new Error("You forgot to call Ink.UI.Common.createUIComponent() on this module!");if(!t&&!n._componentOptions.elementIsOptional)return void Ink.error(new Error(i+': You need to pass an element or a selector as the first argument to "new '+i+'()"'));this._element=f.elsOrSelector(t,i+': An element with the selector "'+t+'" was not found!')[0],this._element||n._componentOptions.elementIsOptional||(o=!1,Ink.error(new Error(t+' does not match an element on the page. You need to pass a valid selector to "new '+i+'".'))),this._options=f.options(i,n._optionDefinition,e,this._element);var o=a._validateInstance(this)===!0;if(o&&"function"==typeof this._init)try{this._init.apply(this,arguments)}catch(r){o=!1,Ink.error(r)}o?this._element&&f.registerInstance(this):a._stubInstance(this,n,i)}var l={},h=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},u="WeakMap"in window,c=u?new WeakMap:null,d=[],p={get:function(t){return u?c.get(t):d[t.getAttribute("__InkInstance")]},set:function(t,e){u?c.set(t,e):t.setAttribute("__InkInstance",d.push(e)-1)}},f={Layouts:{TINY:"tiny",SMALL:"small",MEDIUM:"medium",LARGE:"large",XLARGE:"xlarge"},isDOMElement:t.isDOMElement,isInteger:function(t){return"number"==typeof t&&t%1===0},elOrSelector:function(t,e){if(!f.isDOMElement(t)){var n=i.select(t);return 0===n.length?(Ink.warn(e+" must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself."),null):n[0]}return t},elsOrSelector:function(t,e,n){var o;if("string"==typeof t?o=i.select(t):f.isDOMElement(t)?o=[t]:t&&"object"==typeof t&&"number"==typeof t.length&&(o=t),o&&o.length)return o;if(n)throw new TypeError(e+" must either be a DOM Element, an Array of elements, or a selector expression!\nThe script element must also be after the DOM Element itself.");return[]},options:function(e,n,i,o){function r(t){return a=n[t][0],u=a.toLowerCase(),c=2===n[t].length?n[t][1]:l,a||g("Ink.UI.Common.options: Always specify a type!"),u in f._coerce_funcs||g("Ink.UI.Common.options: "+n[t][0]+" is not a valid type. Use one of "+h(f._coerce_funcs).join(", ")),(!n[t].length||n[t].length>2)&&g('the "defaults" argument must be an object mapping option names to [typestring, optional] arrays.'),s=t in p?f._coerce_from_string(u,p[t],t,e):l,s!==l?f._options_validate(s,u)?s:(v("("+t+" option) Invalid "+u+" "+_(s)),c):t in i?i[t]:c!==l?c:void g("Option "+t+" is required!")}"string"!=typeof e&&(o=i,i=n,n=e,e=""),i=i||{};var s,a,u,c,d={},p=o?t.data(o):{},m=function(t){return e&&(t=e+': "'+(""+t).replace(/"/,'\\"')+'"'),t},_=function(t){return'"'+(""+t).replace(/"/,'\\"')+'"'},g=function(t){throw new Error(m(t))},v=function(t){Ink.error(m(t)+". Ignoring option.")};for(var y in n)n.hasOwnProperty(y)&&(d[y]=r(y));return d},_coerce_from_string:function(t,e,n,i){return t in f._coerce_funcs?f._coerce_funcs[t](e,n,i):e},_options_validate:function(t,e){return e in f._options_validate_types?f._options_validate_types[e].call(f,t):!1},_coerce_funcs:function(){var t={element:function(t){return f.elOrSelector(t,"")},elements:function(t){return f.elsOrSelector(t,"",!1)},object:function(t){return t},number:function(t){return parseFloat(t)},"boolean":function(t){return!("false"===t||""===t||null===t)},string:function(t){return t},"function":function(t,e,n){return Ink.error(n+': You cannot specify the option "'+e+"\" through data-attributes because it's a function"),l}};return t["float"]=t.integer=t.number,t}(),_options_validate_types:function(){var t={string:function(t){return"string"==typeof t},number:function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)},integer:function(t){return t===Math.round(t)},element:function(t){return f.isDOMElement(t)},elements:function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&t.length
},"boolean":function(t){return"boolean"==typeof t},object:function(){return!0}};return t["float"]=t.number,t}(),clone:function(t){try{return JSON.parse(JSON.stringify(t))}catch(e){throw new Error("Given object cannot have loops!")}},childIndex:t.parentIndexOf,ajaxJSON:function(t,n,i){new e(t,{evalJS:"force",method:"POST",parameters:n,onSuccess:function(t){try{if(t=t.responseJSON,"ok"!==t.status)throw"server error: "+t.message;i(null,t)}catch(e){i(e)}},onFailure:function(){i("communication failure")}})},currentLayout:function(){var t,e,o,r,s,a=i.select("#ink-layout-detector")[0];if(!a){a=document.createElement("div"),a.id="ink-layout-detector";for(o in f.Layouts)f.Layouts.hasOwnProperty(o)&&(r=f.Layouts[o],s=document.createElement("div"),s.className="show-"+r+" hide-all",s.setAttribute("data-ink-layout",r),a.appendChild(s));document.body.appendChild(a)}for(t=0,e=a.children.length;e>t;++t)if(s=a.children[t],"block"===n.getStyle(s,"display"))return s.getAttribute("data-ink-layout");return"large"},hashSet:function(t){if("object"!=typeof t)throw new TypeError("o should be an object!");var e=o.getAnchorString();e=Ink.extendObj(e,t),window.location.hash=o.genQueryString("",e).substring(1)},cleanChildren:function(e){if(!f.isDOMElement(e))throw new Error("Please provide a valid DOMElement");t.clear(e)},storeIdAndClasses:function(t,e){if(!f.isDOMElement(t))throw"Please provide a valid Element as first parameter";var n=t.id;n&&(e._id=n);var i=t.className;i&&(e._classes=i)},restoreIdAndClasses:function(t,e){if(!f.isDOMElement(t))throw"Please provide a valid Element as first parameter";e._id&&t.id!==e._id&&(t.id=e._id),e._classes&&-1===t.className.indexOf(e._classes)&&(t.className?t.className+=" "+e._classes:t.className=e._classes),e._instanceId&&!t.getAttribute("data-instance")&&t.setAttribute("data-instance",e._instanceId)},_warnDoubleInstantiation:function(t,e){function n(t){return(t.constructor&&t.constructor._name||t._name||"").replace(/_.*?$/,"")}var i=f.getInstance(t);if(""!==n(e)&&i){var o=n(e);if(o){for(var r=0,s=i.length;s>r;r++)if(o===n(i[r]))return Ink.warn("Creating more than one "+o+"for the same element.","(Was creating a "+o+" on:",t,")."),!1;return!0}}},registerInstance:function(t,e){if(t){if(e||(e=t._element),!f.isDOMElement(e))throw new TypeError("Ink.UI.Common.registerInstance: The element passed in is not a DOM element!");if(f._warnDoubleInstantiation(e,t)===!1)return!1;var n=p.get(e);return n||(n=[],p.set(e,n)),n.push(t),!0}},unregisterInstance:function(t){if(t&&t._element)for(var e=p.get(t._element),n=0,i=e.length;i>n;n++)e[n]===t&&e.splice(n,1)},getInstance:function(t,e){var n=t;if(t=f.elOrSelector(t),!f.isDOMElement(t))return Ink.warn("Ink.UI.Common: getInstance called on non-element ("+n+")"),[];var i=p.get(t);if(i||(i=[]),"function"!=typeof e)return i;for(var o=0,r=i.length;r>o;o++)if(i[o]instanceof e)return i[o];return null},getInstanceFromSelector:function(t){return f.getInstance(t)},getInstanceIds:function(){if(d.length>0)return d;var t=[];for(var e in c)c.hasOwnProperty(e)&&t.push(e);return t},getInstances:function(){if(d.length>0)return d;var t=[];for(var e in c)c.hasOwnProperty(e)&&t.push(c[e]);return t},destroyComponent:function(){f.unregisterInstance(this),this._element.parentNode.removeChild(this._element)}};return a._validateInstance=function(t){var e;if("function"!=typeof t._validate)return!0;try{e=t._validate()}catch(n){e=n}return e instanceof Error?(t._validationError=e,!1):!0},a._stubInstance=function(t,e,n){s(e.prototype,t),s(a.prototype,t),Ink.warn(n+" was not correctly created. "+(t._validationError||""))},a.getInstance=function(t){return t=f.elOrSelector(t),f.getInstance(t,this)},Ink.extendObj(a.prototype,{getOption:function(t){return!this.constructor||t in this.constructor._optionDefinition?this._options[t]:void Ink.error('"'+t+'" is not an option for '+this.constructor._name)},setOption:function(t,e){return!this.constructor||t in this.constructor._optionDefinition?void(this._options[t]=e):void Ink.error('"'+t+" is not an option for "+this.constructor._name)},getElement:function(){return this._element}}),f.BaseUIComponent=a,f.createUIComponent=function(t,e){function n(t,e){if(!t)throw new Error("Ink.UI_1.createUIComponent: "+e)}function i(e,i,o){var r=t[e];n("undefined"!=typeof r,t+" doesn't have a \""+e+'" property. '+o),n(i&&typeof r===i,"typeof "+t+"."+e+' is not "'+i+'". '+o)}t._componentOptions=e||{},n("function"==typeof t,"constructor argument is not a function!"),i("_name","string","This property is used for error messages. Set it to the full module path and version (Ink.My.Module_1)."),i("_optionDefinition","object","This property contains the option names, types and defaults. See Ink.UI.Common.options() for reference.");var o=t.prototype;t.prototype="function"==typeof Object.create?Object.create(a.prototype):function(){function t(){}return t.prototype=a.prototype,new t}(),Ink.extendObj(t.prototype,o),t.prototype.constructor=t,Ink.extendObj(t,a)},f}),Ink.createModule("Ink.UI.DatePicker","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.Date_1","Ink.Util.I18n_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(t,e,n){return t>n&&(t=n),e>t&&(t=e),t}function h(t){var e=t.split("-");return c(+e[0],+e[1]-1,+e[2])}function u(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function c(t,e,n){return{_year:t,_month:e,_day:n}}function d(t){return{_year:t.getFullYear(),_month:t.getMonth(),_day:t.getDate()}}function p(t){return 10*Math.floor(t/10)}function f(){t.BaseUIComponent.apply(this,arguments)}var m=new a({pt_PT:{"datepicker.clean":"Limpar","datepicker.close":"Fechar","datepicker.format":"dd-mm-yyyy","datepicker.of":" de ","datepicker.next_button":"\xbb","datepicker.prev_button":"\xab","datepicker.months":{1:"Janeiro",2:"Fevereiro",3:"Mar\xe7o",4:"Abril",5:"Maio",6:"Junho",7:"Julho",8:"Agosto",9:"Setembro",10:"Outubro",11:"Novembro",12:"Dezembro"},"datepicker.week_days":{0:"Domingo",1:"Segunda-feira",2:"Ter\xe7a-feira",3:"Quarta-feira",4:"Quinta-feira",5:"Sexta-feira",6:"S\xe1bado"}},en_US:{"datepicker.clean":"Clear","datepicker.close":"Close","datepicker.format":"dd-mm-yyyy","datepicker.of":" of ","datepicker.next_button":"\xbb","datepicker.prev_button":"\xab","datepicker.months":{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},"datepicker.week_days":{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}}},"en_US");return f._name="DatePicker_1",f._optionDefinition={autoOpen:["Boolean",!1],pickerField:["Element",null],containerElement:["Element",null],cssClass:["String","ink-calendar bottom"],dateRange:["String",null],displayInSelect:["Boolean",!1],dayField:["Element",null],monthField:["Element",null],yearField:["Element",null],format:["String","yyyy-mm-dd"],onFocus:["Boolean",!0],onMonthSelected:["Function",null],onSetDate:["Function",null],onYearSelected:["Function",null],position:["String","right"],showClean:["Boolean",!0],showClose:["Boolean",!0],shy:["Boolean",!0],startDate:["String",null],startWeekDay:["Number",1],validDayFn:["Function",null],validMonthFn:["Function",null],validYearFn:["Function",null],nextValidDateFn:["Function",null],prevValidDateFn:["Function",null],yearRange:["String",null],lang:["String",null],month:["Object",null],wDay:["Object",null],nextLinkText:["String",null],prevLinkText:["String",null],ofText:["String",null],cleanText:["String",null],closeText:["String",null]},f.prototype={_init:function(){this.i18n=m.clone(),this._options.lang&&this.i18n.lang(this._options.lang);var t=this._options.lang||m.lang(),e={};e[t]={},this._options.month&&(e[t]["datepicker.months"]=this._options.month),this._options.wDay&&(e[t]["datepicker.week_days"]=this._options.wDay),this._options.nextLinkText&&(e[t]["datepicker.next_button"]=this._options.nextLinkText),this._options.prevLinkText&&(e[t]["datepicker.prev_button"]=this._options.prevLinkText),this._options.ofText&&(e[t]["datepicker.of"]=this._options.ofText),this._options.cleanText&&(e[t]["datepicker.clean"]=this._options.cleanText),this._options.closeText&&(e[t]["datepicker.close"]=this._options.closeText),u(e[t]).length&&this.i18n.append(e),this._options.format=this._dateParsers[this._options.format]||this._options.format,this._hoverPicker=!1,this._picker=this._options.pickerField||null,this._setMinMax(this._options.dateRange||this._options.yearRange),this.setDate(this._options.startDate?this._options.startDate:this._element&&this._element.value?this._element.value:new Date),(this._options.startWeekDay<0||this._options.startWeekDay>6)&&(Ink.warn('Ink.UI.DatePicker_1: option "startWeekDay" must be between 0 (sunday) and 6 (saturday)'),this._options.startWeekDay=l(this._options.startWeekDay,0,6)),Ink.extendObj(this._options,this._lang||{}),this._render(),this._listenToContainerObjectEvents()},_validate:function(){if(this._options.displayInSelect&&!(this._options.dayField&&this._options.monthField&&this._options.yearField))throw new Error("Ink.UI.DatePicker: displayInSelect option enabled.Please specify dayField, monthField and yearField selectors.")},_render:function(){this._containerObject=document.createElement("div"),this._containerObject.className=this._options.cssClass+" ink-datepicker-calendar hide-all",this._renderSuperTopBar();var e=document.createElement("div");e.className="ink-calendar-top",this._monthDescContainer=document.createElement("div"),this._monthDescContainer.className="ink-calendar-month_desc",this._monthPrev=document.createElement("div"),this._monthPrev.className="ink-calendar-prev",this._monthPrev.appendChild(i.create("a",{href:"#prev",className:"change_month_prev",setHTML:this.i18n.text("datepicker.prev_button")})),this._monthNext=document.createElement("div"),this._monthNext.className="ink-calendar-next",this._monthNext.appendChild(i.create("a",{href:"#next",className:"change_month_next",setHTML:this.i18n.text("datepicker.next_button")})),e.appendChild(this._monthPrev),e.appendChild(this._monthDescContainer),e.appendChild(this._monthNext),this._monthContainer=document.createElement("div"),this._monthContainer.className="ink-calendar-month",this._containerObject.appendChild(e),this._containerObject.appendChild(this._monthContainer),this._monthSelector=this._renderMonthSelector(),this._containerObject.appendChild(this._monthSelector),this._yearSelector=document.createElement("ul"),this._yearSelector.className="ink-calendar-year-selector",this._containerObject.appendChild(this._yearSelector),(!this._options.onFocus||this._options.displayInSelect)&&(this._picker=this._options.pickerField?t.elOrSelector(this._options.pickerField,"pickerField"):i.create("a",{href:"#open_cal",setHTML:"open",insertBottom:this._element.parentNode,className:"ink-datepicker-picker-field"})),this._appendDatePickerToDom(),this._renderMonth(),this._monthChanger=i.create("a",{href:"#monthchanger",className:"ink-calendar-link-month",setTextContent:this.i18n.getKey("datepicker.months")[this._month+1]}),this._ofText=i.create("span",{className:"ink-calendar-of-text",setTextContent:this.i18n.text("datepicker.of")}),this._yearChanger=i.create("a",{href:"#yearchanger",className:"ink-calendar-link-year",setTextContent:this._year}),this._monthDescContainer.appendChild(this._monthChanger),this._monthDescContainer.appendChild(this._ofText),this._monthDescContainer.appendChild(this._yearChanger),this._options.inline?this.show():this._addOpenCloseEvents(),this._addDateChangeHandlersToInputs()},_addDateChangeHandlersToInputs:function(){var t=this._element;this._options.displayInSelect&&(t=[this._options.dayField,this._options.monthField,this._options.yearField]),e.observeMulti(t,"change",Ink.bindEvent(function(){this._updateDate(),this._showDefaultView(),this.setDate(),this._inline||this._hoverPicker||this._hide(!0)},this))},show:function(){this._updateDate(),this._renderMonth(),n.removeClassName(this._containerObject,"hide-all")},_addOpenCloseEvents:function(){var t=this._picker||this._element;e.observe(t,"click",Ink.bindEvent(function(t){e.stop(t),this.show()},this)),this._options.autoOpen&&this.show(),this._options.displayInSelect||e.observe(t,"blur",Ink.bindEvent(function(){this._hoverPicker||this._hide(!0)},this)),this._options.shy&&e.observe(document,"click",Ink.bindEvent(function(t){for(var n=e.element(t),o=[this._options.dayField,this._options.monthField,this._options.yearField,this._picker,this._element],r=0,s=o.length;s>r;r++)if(o[r]&&i.descendantOf(o[r],n))return;this._hide(!0)},this))},_renderMonthSelector:function(){var t=document.createElement("ul");t.className="ink-calendar-month-selector";for(var e=document.createElement("ul"),n=1;12>=n;n++)e.appendChild(this._renderMonthButton(n)),n%4===0&&(t.appendChild(e),e=document.createElement("ul"));return t},_renderMonthButton:function(t){var e=document.createElement("li");return e.appendChild(i.create("a",{"data-cal-month":t,setTextContent:this.i18n.getKey("datepicker.months")[t].substring(0,3)})),e},_appendDatePickerToDom:function(){if(this._options.containerElement){var e=t.elOrSelector(this._options.containerElement);e.appendChild(this._containerObject)}var n=o.matchesSelector(this._element.parentNode,".ink-form .control-group .control, .ink-form .control-group .control > *");n?(this._wrapper=this._element.parentNode,this._wrapperIsControl=!0):(this._wrapper=i.create("div",{className:"ink-datepicker-wrapper"}),i.wrap(this._element,this._wrapper)),i.insertAfter(this._containerObject,this._element)},_renderSuperTopBar:function(){this._options.showClose&&this._options.showClean&&(this._superTopBar=document.createElement("div"),this._superTopBar.className="ink-calendar-top-options",this._options.showClean&&this._superTopBar.appendChild(i.create("a",{className:"clean",setHTML:this.i18n.text("datepicker.clean")})),this._options.showClose&&this._superTopBar.appendChild(i.create("a",{className:"close",setHTML:this.i18n.text("datepicker.close")})),this._containerObject.appendChild(this._superTopBar))},_listenToContainerObjectEvents:function(){e.observe(this._containerObject,"mouseover",Ink.bindEvent(function(t){e.stop(t),this._hoverPicker=!0},this)),e.observe(this._containerObject,"mouseout",Ink.bindEvent(function(t){e.stop(t),this._hoverPicker=!1},this)),e.observe(this._containerObject,"click",Ink.bindEvent(this._onClick,this))},_onClick:function(t){var i=e.element(t);return n.hasClassName(i,"ink-calendar-off")?(e.stopDefault(t),null):(e.stop(t),this._onRelativeChangerClick(i),this._onAbsoluteChangerClick(i),n.hasClassName(i,"ink-calendar-link-month")?this._showMonthSelector():n.hasClassName(i,"ink-calendar-link-year")?this._showYearSelector():n.hasClassName(i,"clean")?this._clean():n.hasClassName(i,"close")&&this._hide(!1),void this._updateDescription())},_onRelativeChangerClick:function(t){var e={change_year_next:1,change_year_prev:-1},n={change_month_next:1,change_month_prev:-1};t.className in n?this._updateCal(n[t.className]):t.className in e&&this._showYearSelector(e[t.className])},_onAbsoluteChangerClick:function(t){var e=i.data(t);Number(e.calDay)?(this.setDate(new Date(this._year,this._month,e.calDay)),this._options.shy?this._hide():this._updateCal()):Number(e.calMonth)?(this._month=Number(e.calMonth)-1,this._showDefaultView(),this._updateCal()):Number(e.calYear)&&this._changeYear(Number(e.calYear))},_changeYear:function(t){t=+t,isNaN(t)||(this._year=t,"function"==typeof this._options.onYearSelected&&this._options.onYearSelected(this,{year:this._year}),this._showMonthSelector())},_clean:function(){this._options.displayInSelect?(this._options.yearField.selectedIndex=0,this._options.monthField.selectedIndex=0,this._options.dayField.selectedIndex=0):this._element.value=""},_hide:function(t){t=void 0===t?!0:t,(t===!1||t&&this._options.shy)&&n.addClassName(this._containerObject,"hide-all")},_setMinMax:function(t){function e(){n._min=i,n._max=o}var n=this,i={_year:-Number.MAX_VALUE,_month:0,_day:1},o={_year:Number.MAX_VALUE,_month:11,_day:31};if(!t)return e();var s=t.split(":"),a=/^(\d{4})((\-)(\d{1,2})((\-)(\d{1,2}))?)?$/;r.each([{name:"_min",date:s[0],noLim:i},{name:"_max",date:s[1],noLim:o}],Ink.bind(function(t){var e=t.noLim;if("NOW"===t.date.toUpperCase()){var n=new Date;e=d(n)}else"EVER"===t.date.toUpperCase()?e=t.noLim:a.test(t.date)&&(e=h(t.date),e._month=l(e._month,0,11),e._day=l(e._day,1,this._daysInMonth(e._year,e._month+1)));this[t.name]=e},this));var u=-1!==this._dateCmp(this._max,this._min);u||e()},_fitDateToRange:function(t){return this._isValidDate(t)||(t=d(new Date)),-1===this._dateCmp(t,this._min)?Ink.extendObj({},this._min):1===this._dateCmp(t,this._max)?Ink.extendObj({},this._max):Ink.extendObj({},t)},_dateWithinRange:function(t){return arguments.length||(t=this),!this._dateAboveMax(t)&&!this._dateBelowMin(t)},_dateAboveMax:function(t){return 1===this._dateCmp(t,this._max)},_dateBelowMin:function(t){return-1===this._dateCmp(t,this._min)},_dateCmp:function(t,e){return this._dateCmpUntil(t,e,"_day")},_dateCmpUntil:function(t,e,n){var i=["_year","_month","_day"],o=-1;do{if(o++,t[i[o]]>e[i[o]])return 1;if(t[i[o]]<e[i[o]])return-1}while(i[o]!==n&&void 0!==t[i[o+1]]&&void 0!==e[i[o+1]]);return 0},_showDefaultView:function(){this._yearSelector.style.display="none",this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._getPrevMonth()||(this._monthPrev.childNodes[0].className="action_inactive"),this._getNextMonth()||(this._monthNext.childNodes[0].className="action_inactive"),this._monthContainer.style.display="block"},_updateDate:function(){var t;!this._options.displayInSelect&&this._element.value?t=this._parseDate(this._element.value):this._options.displayInSelect&&(t={_year:this._options.yearField[this._options.yearField.selectedIndex].value,_month:this._options.monthField[this._options.monthField.selectedIndex].value-1,_day:this._options.dayField[this._options.dayField.selectedIndex].value}),t&&(t=this._fitDateToRange(t),this._year=t._year,this._month=t._month,this._day=t._day),this._setDate(),this._updateDescription(),this._renderMonth()},_updateDescription:function(){i.setTextContent(this._monthChanger,this.i18n.getKey("datepicker.months")[this._month+1]),i.setTextContent(this._ofText,this.i18n.text("datepicker.of")),i.setTextContent(this._yearChanger,this._year)},_showYearSelector:function(t){this._incrementViewingYear(t);var e=this._year-this._year%10,n=e-1;i.setHTML(this._yearSelector,"");var o=i.create("ul");if(this._yearSelector.appendChild(o),n>this._min._year){var r=i.create("li");r.appendChild(i.create("a",{href:"#year_prev",className:"change_year_prev",setHTML:this.i18n.text("datepicker.prev_button")})),o.appendChild(r)}else o.appendChild(i.create("li",{setHTML:"&nbsp;"}));for(var s=1;11>s;s++)s%4===0&&(o=i.create("ul"),this._yearSelector.appendChild(o)),n=e+s-1,o.appendChild(this._getYearButton(n));if(n<this._max._year){var a=i.create("li");a.appendChild(i.create("a",{href:"#year_next",className:"change_year_next",setHTML:this.i18n.text("datepicker.next_button")})),o.appendChild(a)}else o.appendChild(i.create("li",{setHTML:"&nbsp;"}));this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._monthSelector.style.display="none",this._monthContainer.style.display="none",this._yearSelector.style.display="block"},_incrementViewingYear:function(t){if(t){var e=+this._year+10*t;e-=e%10,e>this._max._year||e+9<this._min._year||(this._year=+this._year+10*t)}},_getYearButton:function(t){var e="";this._acceptableYear({_year:t})?t===this._year&&(e="ink-calendar-on"):e="ink-calendar-off";var n=i.create("li");return n.appendChild(i.create("a",{href:"#","data-cal-year":t,className:e,setTextContent:t})),n},_showMonthSelector:function(){this._yearSelector.style.display="none",this._monthContainer.style.display="none",this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._addMonthClassNames(),this._monthSelector.style.display="block"},_parseDate:function(t){var e=s.set(this._options.format,t);return e?d(e):null},_isValidDate:function(t){var e=/^\d{4}$/,n=/^\d{1,2}$/;return e.test(t._year)&&n.test(t._month)&&n.test(t._day)&&+t._month+1>=1&&+t._month+1<=12&&+t._day>=1&&+t._day<=this._daysInMonth(t._year,t._month+1)},_isDate:function(t,e){try{if("undefined"==typeof t)return!1;var n=s.set(t,e);if(n&&this._isValidDate(d(n)))return!0}catch(i){}return!1},_acceptableDay:function(t){return this._acceptableDateComponent(t,"validDayFn")},_acceptableMonth:function(t){return this._acceptableDateComponent(t,"validMonthFn")},_acceptableYear:function(t){return this._acceptableDateComponent(t,"validYearFn")},_acceptableDateComponent:function(t,e){return this._options[e]?this._callUserCallbackBool(this._options[e],t):this._dateWithinRange(t)},_writeDateInFormat:function(){return s.get(this._options.format,this.getDate())},setDate:function(t){if(t&&"function"==typeof t.getDate&&(t=[t.getFullYear(),t.getMonth()+1,t.getDate()].join("-")),/\d{4}-\d{1,2}-\d{1,2}/.test(t)){var e=t.split("-");this._year=+e[0],this._month=+e[1]-1,this._day=+e[2]}this._setDate()},getDate:function(){if(!this._day)throw"Ink.UI.DatePicker: Still picking a date. Cannot getDate now!";return new Date(this._year,this._month,this._day)},_setDate:function(t){if(t){var e=i.data(t);this._day=+e.calDay||this._day,this._options.onSetDate&&this._options.onSetDate(this,{date:this.getDate()})}var n=this._fitDateToRange(this);this._year=n._year,this._month=n._month,this._day=n._day,this._options.displayInSelect?(this._options.dayField.value=this._day,this._options.monthField.value=this._month+1,this._options.yearField.value=this._year):this._element.value=this._writeDateInFormat()},_updateCal:function(t){"function"==typeof this._options.onMonthSelected&&this._options.onMonthSelected(this,{year:this._year,month:this._month}),t&&null===this._updateMonth(t)||this._renderMonth()},_daysInMonth:function(t,e){var n={2:t%400===0||t%4===0&&t%100!==0?29:28,4:30,6:30,9:30,11:30};return n[e]||31},_updateMonth:function(t){var e;return t>0?e=this._getNextMonth():0>t&&(e=this._getPrevMonth()),e?(this._year=e._year,this._month=e._month,void(this._day=e._day)):null},_getNextMonth:function(t){return this._tryLeap(t,"Month","next",function(t){return t._month+=1,t._month>11&&(t._month=0,t._year+=1),t})},_getPrevMonth:function(t){return this._tryLeap(t,"Month","prev",function(t){return t._month-=1,t._month<0&&(t._month=11,t._year-=1),t})},_getPrevYear:function(t){return this._tryLeap(t,"Year","prev",function(t){return t._year-=1,t})},_getNextYear:function(t){return this._tryLeap(t,"Year","next",function(t){return t._year+=1,t})},_tryLeap:function(t,e,n,i){t=t||{_year:this._year,_month:this._month,_day:this._day};var o="prev"===n?"_min":"_max",r=this[o];if(0===this._dateCmpUntil(t,r,e))return null;var s=this._options[n+"ValidDateFn"];if(s)return this._callUserCallbackDate(s,t);t=i(t);var a=this._daysInMonth(t._year,t._month+1);return t._day>a&&(t._day=a),t=this._fitDateToRange(t),this["_acceptable"+e](t)?t:null},_getNextDecade:function(t){t=t||{_year:this._year,_month:this._month,_day:this._day};var e=this._getCurrentDecade(t);return e+10>this._max._year?null:e+10},_getPrevDecade:function(t){t=t||{_year:this._year,_month:this._month,_day:this._day};var e=this._getCurrentDecade(t);return p(e-10)<p(this._min._year)?null:e-10},_getCurrentDecade:function(t){return t=t?t._year||t:this._year,p(this._year)},_callUserCallbackBase:function(t,e){return t.call(this,e._year,e._month+1,e._day)},_callUserCallbackBool:function(t,e){return!!this._callUserCallbackBase(t,e)},_callUserCallbackDate:function(t,e){var n=this._callUserCallbackBase(t,e);return n?d(n):null},_dateParsers:{"yyyy-mm-dd":"Y-m-d","yyyy/mm/dd":"Y/m/d","yy-mm-dd":"y-m-d","yy/mm/dd":"y/m/d","dd-mm-yyyy":"d-m-Y","dd/mm/yyyy":"d/m/Y","dd-mm-yy":"d-m-y","dd/mm/yy":"d/m/y","mm/dd/yyyy":"m/d/Y","mm-dd-yyyy":"m-d-Y"},_renderMonth:function(){var t=this._month,e=this._year;this._showDefaultView(),i.setHTML(this._monthContainer,""),this._monthContainer.appendChild(this._getMonthCalendarHeader(this._options.startWeekDay)),this._monthContainer.appendChild(this._getDayButtons(e,t))},_getFirstDayIndex:function(t,e){var n=new Date(t,e,1).getDay(),i=this._options.startWeekDay||0,o=n-i;return o%=7,0>o&&(o+=7),o},_getDayButtons:function(t,e){var n=this._daysInMonth(t,e+1),o=document.createDocumentFragment(),r=i.create("ul");o.appendChild(r);for(var s=this._getFirstDayIndex(t,e),a=0;s>a;a++)r.appendChild(i.create("li",{className:"ink-calendar-empty",setHTML:"&nbsp;"}));for(var l=1;n>=l;l++)(l-1+s)%7===0&&(r=i.create("ul"),o.appendChild(r)),r.appendChild(this._getDayButton(t,e,l));return o},_getDayButton:function(t,e,n){var o={},r=c(t,e,n);this._acceptableDay(r)?(o["data-cal-day"]=n,this._day&&0===this._dateCmp(r,this)&&(o.className="ink-calendar-on")):o.className="ink-calendar-off",o.setTextContent=n;var s=i.create("li");return s.appendChild(i.create("a",o)),s},_getMonthCalendarHeader:function(t){for(var e,n=i.create("ul",{className:"ink-calendar-header"}),o=0;7>o;o++)e=(t+o)%7,n.appendChild(i.create("li",{setTextContent:this.i18n.getKey("datepicker.week_days")[e].substring(0,1)}));return n},_addMonthClassNames:function(t){r.forEach((t||this._monthSelector).getElementsByTagName("a"),Ink.bindMethod(this,"_addMonthButtonClassNames"))},_addMonthButtonClassNames:function(t){var e=i.data(t);if(!e.calMonth)throw"not a calendar month button!";var o=+e.calMonth-1;if(o===this._month)n.addClassName(t,"ink-calendar-on"),n.removeClassName(t,"ink-calendar-off");else{n.removeClassName(t,"ink-calendar-on");var r=!this._acceptableMonth({_year:this._year,_month:o});n.addRemoveClassName(t,"ink-calendar-off",r)}},setI18n:function(t){t.clone&&(t=t.clone()),this.i18n=t},getI18n:function(){return this.i18n||m},setLanguage:function(t){this.i18n||this.setI18n(m),this.i18n.lang(t)},getLanguage:function(){return this.i18n?this.i18n.lang():m.lang()},showMonth:function(){this._renderMonth()},isMonthRendered:function(){var t=o.select(".ink-calendar-header",this._containerObject)[0];return"none"!==n.getStyle(t.parentNode,"display")&&"none"!==n.getStyle(t.parentNode.parentNode,"display")},destroy:function(){i.unwrap(this._element),i.remove(this._wrapper),i.remove(this._containerObject),t.unregisterInstance.call(this)}},t.createUIComponent(f),f}),Ink.createModule("Ink.UI.DragDrop",1,["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.UI.Common_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";function s(t){t.exceptFor.style.display="none";var e=document.elementFromPoint(t.x,t.y);return t.exceptFor.style.display="",e}function a(){o.BaseUIComponent.apply(this,arguments)}return a._name="DragDrop_1",a._optionDefinition={dragItem:["String",".drag-item"],dragHandle:["String",".drag-handle"],dropZone:["String",".drop-zone"],ignoreDrag:["String",".drag-ignore"],draggedCloneClass:["String","drag-cloned-item"],placeholderClass:["String","drag-placeholder-item"],onDrag:["Function",null],onDrop:["Function",null]},a.prototype={_init:function(){this._dragActive=!1,this._draggedElm=null,this._clonedElm=null,this._placeholderElm=null,this._originalDrop=null,this._mouseDelta=[0,0],this._addEvents()},_addEvents:function(){e.on(this._element,"mousedown touchstart",Ink.bindEvent(this._onMouseDown,this))},_onMouseDown:function(n){var i=e.element(n),o=t.findUpwardsBySelector(i,this._options.dragItem),r=t.findUpwardsBySelector(i,this._options.ignoreDrag);if(o&&!r){e.stopDefault(n);var s=Ink.s(this._options.dragHandle,o);s&&t.findUpwardsBySelector(i,this._options.dragHandle)?this._dragActive=!0:s||(this._dragActive=!0),this._dragActive&&this._startDrag(n,o)}},_startDrag:function(i,o){this._clonedElm=o.cloneNode(!0),this._placeholderElm=o.cloneNode(!1),n.addClassName(this._clonedElm,this._options.draggedCloneClass),this._clonedElm.removeAttribute("id"),n.addClassName(this._placeholderElm,this._options.placeholderClass),this._placeholderElm.removeAttribute("id");var r=o.getBoundingClientRect(),s=[r.right-r.left,r.bottom-r.top];this._clonedElm.style.width=s[0]+"px",this._clonedElm.style.height=s[1]+"px",this._placeholderElm.style.width=s[0]+"px",this._placeholderElm.style.height=s[1]+"px",this._placeholderElm.style.visibility="hidden",this._clonedElm.style.position="fixed",this._clonedElm.style.zIndex="1000",this._clonedElm.style.left=r.left+"px",this._clonedElm.style.top=r.top+"px";var a=e.pointer(i),l=t.offset(o);this._mouseDelta=[a.x-l[0],a.y-l[1]],this._clonedElm.style.opacity="0.6",o.parentNode.insertBefore(this._clonedElm,o),this._draggedElm=o,o.parentNode.insertBefore(this._placeholderElm,o),n.addClassName(o,"hide-all");var h="function"==typeof this._options.onDrag,u="function"==typeof this._options.onDrop;if(h||u){var c={dragItem:this._draggedElm,dropZone:this.getDropZone(this._draggedElm)};h&&this._options.onDrag.call(this,c),u&&(this._originalDrop=c.dropZone)}var d=e.throttle(this._onMouseMove,50,{preventDefault:!0,bind:this});e.on(document,"mousemove.inkdraggable touchmove.inkdraggable",d),e.on(document,"mouseup.inkdraggable touchend.inkdraggable",Ink.bindEvent(this._onMouseUp,this))},_onMouseMove:function(n){if(this._dragActive){var i=e.pointer(n),o=t.scrollWidth(),r=t.scrollHeight();this._clonedElm.style.left=i.x-this._mouseDelta[0]-o+"px",this._clonedElm.style.top=i.y-this._mouseDelta[1]-r+"px";var a=s({x:i.x-o,y:i.y-r,exceptFor:this._clonedElm}),l=this.getDropZone(a),h=l&&(t.isAncestorOf(this._element,l)||this._element===l);if(l&&h){var u=t.findUpwardsBySelector(a,this._options.dragItem);u&&this.isDragItem(u)?this._insertPlaceholder(u):this._dropZoneIsEmpty(l)&&l.appendChild(this._placeholderElm)}}},isDragItem:function(t){return r.matchesSelector(t,this._options.dragItem)&&t!==this._draggedElm&&t!==this._placeholderElm&&t!==this._clonedElm},_dropZoneIsEmpty:function(t){var e=Ink.ss(this._options.dragItem,t);return!i.some(e,Ink.bindMethod(this,"isDragItem"))},_onMouseUp:function(){this._dragActive&&(t.insertBefore(this._draggedElm,this._placeholderElm),t.remove(this._placeholderElm),t.remove(this._clonedElm),n.removeClassName(this._draggedElm,"hide-all"),e.off(document,".inkdraggable"),this._dragActive=!1,"function"==typeof this._options.onDrop&&this._options.onDrop.call(this,{origin:this._originalDrop,dragItem:this._draggedElm,dropZone:this.getDropZone(this._draggedElm)}),this._placeholderElm=null,this._clonedElm=null,this._draggedElm=null,this._originalDrop=null)},getDropZone:function(e){var n=t.findUpwardsBySelector(e,this._options.dropZone)||this._element;return t.isAncestorOf(this._element,n)||n===this._element?n:null},getDraggedElement:function(){return this.dragActive?this._draggedElm:null},_insertPlaceholder:function(e){var n=!0;i.inArray(this._placeholderElm,t.previousSiblings(e))||(n=!1),n?t.insertAfter(this._placeholderElm,e):t.insertBefore(this._placeholderElm,e)},destroy:function(){this._dragActive&&e.off(document,".inkdraggable"),o.destroyComponent.call(this)}},o.createUIComponent(a),a}),Ink.createModule("Ink.UI.Draggable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1","Ink.UI.Common_1"],function(t,e,n,i,o,r){"use strict";function s(t,e,n){return t=Math.min(t,n),t=Math.max(t,e)}function a(){r.BaseUIComponent.apply(this,arguments)}var l=0,h=1;return a._name="Draggable_1",a._optionDefinition={constraint:["String",!1],constraintElm:["Element",!1],top:["Number",!1],right:["Number",!1],bottom:["Number",!1],left:["Number",!1],handle:["Element",!1],revert:["Boolean",!1],cursor:["String","move"],zIndex:["Number",9999],fps:["Number",0],droppableProxy:["Element",!1],mouseAnchor:["String",void 0],dragClass:["String","drag"],skipChildren:["Boolean",!0],onStart:["Function",!1],onEnd:["Function",!1],onDrag:["Function",!1],onChange:["Function",!1]},a.prototype={_init:function(){var t=this._options;this.constraintElm=t.constraintElm&&r.elOrSelector(t.constraintElm),this.handle=!1,this.elmStartPosition=!1,this.active=!1,this.dragged=!1,this.prevCoords=!1,this.placeholder=!1,this.position=!1,this.zindex=!1,this.firstDrag=!0,t.fps&&(this.deltaMs=1e3/t.fps,this.lastRunAt=0),this.handlers={},this.handlers.start=Ink.bindEvent(this._onStart,this),this.handlers.dragFacade=Ink.bindEvent(this._onDragFacade,this),this.handlers.drag=Ink.bindEvent(this._onDrag,this),this.handlers.end=Ink.bindEvent(this._onEnd,this),this.handlers.selectStart=function(t){return e.stop(t),!1},this.handle=this._options.handle?r.elOrSelector(this._options.handle):this._element,this.handle.style.cursor=t.cursor,e.observe(this.handle,"touchstart",this.handlers.start),e.observe(this.handle,"mousedown",this.handlers.start),i.IE&&e.observe(this._element,"selectstart",this.handlers.selectStart)
},destroy:function(){e.stopObserving(this.handle,"touchstart",this.handlers.start),e.stopObserving(this.handle,"mousedown",this.handlers.start),i.IE&&e.stopObserving(this._element,"selectstart",this.handlers.selectStart)},_getCoords:function(e){var n=[t.scrollWidth(),t.scrollHeight()];return{x:(e.touches?e.touches[0].clientX:e.clientX)+n[l],y:(e.touches?e.touches[0].clientY:e.clientY)+n[h]}},_cloneStyle:function(e,i){i.className=e.className,i.style.borderWidth="0",i.style.padding="0",i.style.position="absolute",i.style.width=t.elementWidth(e)+"px",i.style.height=t.elementHeight(e)+"px",i.style.left=t.elementLeft(e)+"px",i.style.top=t.elementTop(e)+"px",i.style.cssFloat=n.getStyle(e,"float"),i.style.display=n.getStyle(e,"display")},_onStart:function(i){if(!this.active&&e.isLeftClick(i)||"undefined"==typeof i.button){var o=e.element(i);if(this._options.skipChildren&&o!==this.handle)return;e.stop(i),n.addClassName(this._element,this._options.dragClass),this.elmStartPosition=[t.elementLeft(this._element),t.elementTop(this._element)];var r=[parseInt(n.getStyle(this._element,"left"),10),parseInt(n.getStyle(this._element,"top"),10)],s=t.elementDimensions(this._element);this.originalPosition=[r[l]?r[l]:null,r[h]?r[h]:null],this.delta=this._getCoords(i),this.active=!0,this.position=n.getStyle(this._element,"position"),this.zindex=n.getStyle(this._element,"zIndex");var a=document.createElement("div");if(a.style.position=this.position,a.style.width=s[l]+"px",a.style.height=s[h]+"px",a.style.marginTop=n.getStyle(this._element,"margin-top"),a.style.marginBottom=n.getStyle(this._element,"margin-bottom"),a.style.marginLeft=n.getStyle(this._element,"margin-left"),a.style.marginRight=n.getStyle(this._element,"margin-right"),a.style.borderWidth="0",a.style.padding="0",a.style.cssFloat=n.getStyle(this._element,"float"),a.style.display=n.getStyle(this._element,"display"),a.style.visibility="hidden",this.delta2=[this.delta.x-this.elmStartPosition[l],this.delta.y-this.elmStartPosition[h]],this._options.mouseAnchor){var u=this._options.mouseAnchor.split(" "),c=[s[l],s[h]];"left"===u[0]?c[l]=0:"center"===u[0]&&(c[l]=parseInt(c[l]/2,10)),"top"===u[1]?c[h]=0:"center"===u[1]&&(c[h]=parseInt(c[h]/2,10)),this.applyDelta=[this.delta2[l]-c[l],this.delta2[h]-c[h]]}var d=this._options.fps?"dragFacade":"drag";if(this.placeholder=a,this._options.onStart&&this._options.onStart(this._element,i),this._options.droppableProxy){this.proxy=document.createElement("div"),s=[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight];var p=this.proxy.style;p.width=s[l]+"px",p.height=s[h]+"px",p.position="fixed",p.left="0",p.top="0",p.zIndex=this._options.zIndex+1,p.backgroundColor="#FF0000",n.setOpacity(this.proxy,0);for(var f=document.body.firstChild;f&&1!==f.nodeType;)f=f.nextSibling;document.body.insertBefore(this.proxy,f),e.observe(this.proxy,"mousemove",this.handlers[d]),e.observe(this.proxy,"touchmove",this.handlers[d])}else e.observe(document,"mousemove",this.handlers[d]);return this._element.style.position="absolute",this._element.style.zIndex=this._options.zIndex,this._element.parentNode.insertBefore(this.placeholder,this._element),this._onDrag(i),e.observe(document,"mouseup",this.handlers.end),e.observe(document,"touchend",this.handlers.end),!1}},_onDragFacade:function(t){var e=+new Date;(!this.lastRunAt||e>this.lastRunAt+this.deltaMs)&&(this.lastRunAt=e,this._onDrag(t))},_onDrag:function(n){if(this.active){e.stop(n),this.dragged=!0;var i=this._getCoords(n),o=i.x,r=i.y,a=this._options,u=!1,c=!1;if(this.prevCoords&&o!==this.prevCoords.x||r!==this.prevCoords.y){a.onDrag&&a.onDrag(this._element,n),this.prevCoords=i,u=this.elmStartPosition[l]+o-this.delta.x,c=this.elmStartPosition[h]+r-this.delta.y;var d=t.elementDimensions(this._element);if(this.constraintElm){var p=t.offset(this.constraintElm),f=t.elementDimensions(this.constraintElm),m=p[h]+(a.top||0),_=p[h]+f[h]-(a.bottom||0),g=p[l]+(a.left||0),v=p[l]+f[l]-(a.right||0);c=s(c,m,_-d[h]),u=s(u,g,v-d[l])}else if(a.constraint){var y=a.right===!1?t.pageWidth()-d[l]:a.right,b=a.left===!1?0:a.left,k=a.top===!1?0:a.top,C=a.bottom===!1?t.pageHeight()-d[h]:a.bottom;("horizontal"===a.constraint||"both"===a.constraint)&&(u=s(u,b,y)),("vertical"===a.constraint||"both"===a.constraint)&&(c=s(c,k,C))}var I=Ink.getModule("Ink.UI.Droppable_1");if(this.firstDrag&&(I&&I.updateAll(),this.firstDrag=!1),u&&(this._element.style.left=u+"px"),c&&(this._element.style.top=c+"px"),I){var w=this._options.mouseAnchor?{x:o-this.applyDelta[l],y:r-this.applyDelta[h]}:i;I.action(w,"drag",n,this._element)}a.onChange&&a.onChange(this)}}},_onEnd:function(i){if(e.stopObserving(document,"mousemove",this.handlers.drag),e.stopObserving(document,"touchmove",this.handlers.drag),this._options.fps&&this._onDrag(i),n.removeClassName(this._element,this._options.dragClass),this.active&&this.dragged){this._options.droppableProxy&&document.body.removeChild(this.proxy),this.pt&&(t.remove(this.pt),this.pt=void 0),this.placeholder&&t.remove(this.placeholder),this._options.revert&&(this._element.style.position=this.position,this._element.style.zIndex=null!==this.zindex?this.zindex:"auto",this._element.style.left=this.originalPosition[l]?this.originalPosition[l]+"px":"",this._element.style.top=this.originalPosition[h]?this.originalPosition[h]+"px":""),this._options.onEnd&&this._options.onEnd(this._element,i);var o=Ink.getModule("Ink.UI.Droppable_1");o&&o.action(this._getCoords(i),"drop",i,this._element),this.position=!1,this.zindex=!1,this.firstDrag=!0}this.active=!1,this.dragged=!1}},r.createUIComponent(a),a}),Ink.createModule("Ink.UI.Drawer","1",["Ink.UI.Common_1","Ink.Dom.Loaded_1","Ink.Dom.Selector_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(t,e,n,i,o,r){"use strict";function s(t){if(document.addEventListener){d&&a();var e=!1;d=function(n){return"mousedown"===n.type||"mouseup"===n.type?void(e="mousedown"===n.type):void(e||t(n.target))},document.addEventListener("focus",d,!0),document.addEventListener("mousedown",d,!0),document.addEventListener("mouseup",d,!0)}}function a(){document.addEventListener&&d&&(document.removeEventListener("focus",d,!0),document.removeEventListener("mousedown",d,!0),document.removeEventListener("mouseup",d,!0),d=null)}function l(t){for(var e=Ink.ss("[tabindex]",t),n=null,i=null,o=0;o<e.length;o++){var r=+e[o].tabIndex;r||e.splice(o,1),(null===n||n>r)&&(n=r,i=e[o])}if(i)return i.focus(),!0;var s=Ink.s(c,t);return s?(s.focus(),!0):!1}function h(t){return'Ink.UI.Drawer_1: Could not find the "'+t+'" element on this page. Please make sure it exists.'}function u(e,n){t.isDOMElement(e)||(n=e),t.BaseUIComponent.apply(this,[document.body,n])}var c=['[tabindex]:not([tabindex="-1"])',"input","select","textarea","button","object","a[href]","area"].join(","),d=null,p=function(t){var e={WebkitTransitionProperty:"webkitTransitionEnd",transitionProperty:"transitionend"};for(var n in e)if(e.hasOwnProperty(n)&&void 0!==t.style[n])return{styleProp:n,eventName:e[n]};return!1}(document.createElement("div"));return u.transitionSupport=p,u._name="Drawer_1",u._optionDefinition={parentSelector:["String",".ink-drawer"],leftDrawer:["String",".left-drawer"],leftTrigger:["String",".left-drawer-trigger"],rightDrawer:["String",".right-drawer"],rightTrigger:["String",".right-drawer-trigger"],contentDrawer:["String",".content-drawer"],mode:["String","push"],sides:["String","both"]},u.prototype={_init:function(){function t(t){t.drawer&&t.triggers.length?e=!0:n=h(t.drawer?t.drawerOption:t.triggerOption)}if(this._contentDrawers=Ink.ss(this._options.contentDrawer),this._leftDrawer=Ink.s(this._options.leftDrawer),this._leftTriggers=Ink.ss(this._options.leftTrigger),this._rightDrawer=Ink.s(this._options.rightDrawer),this._rightTriggers=Ink.ss(this._options.rightTrigger),r.addClassName(document.body,"ink-drawer"),0===this._contentDrawers.length)throw new Error('Ink.UI.Drawer_1: Could not find any "'+this._options.contentDrawer+'" elements on this page. Please make sure you have at least one.');switch(this._options.sides){case"both":this._triggers=this._options.leftTrigger+", "+this._options.rightTrigger+", "+this._options.contentDrawer;break;case"left":this._triggers=this._options.leftTrigger+", "+this._options.contentDrawer;break;case"right":this._triggers=this._options.rightTrigger+", "+this._options.contentDrawer}var e=!1,n=null;("left"===this._options.sides||"both"===this._options.sides)&&t({name:"left",drawer:this._leftDrawer,drawerOption:this._options.leftDrawer,triggers:this._leftTriggers,triggerOption:this._options.leftTrigger}),("right"===this._options.sides||"both"===this._options.sides)&&t({name:"right",drawer:this._rightDrawer,drawerOption:this._options.rightDrawer,triggers:this._rightTriggers,triggerOption:this._options.rightTrigger}),e||Ink.warn(n),this._isOpen=!1,this._direction=void 0,this._handlers={click:Ink.bindEvent(this._onClick,this),afterTransition:Ink.bindEvent(this._afterTransition,this)},this._addEvents()},_onClick:function(t){var e=i.findUpwardsBySelector(t.currentTarget,this._options.leftTrigger)?"left":i.findUpwardsBySelector(t.currentTarget,this._options.rightTrigger)?"right":null;if(e)return void this._onTriggerClicked(t,e);if(this._isOpen){var n=i.findUpwardsBySelector(t.currentTarget,this._options.contentDrawer),o=i.isLink(t.target);(n||o)&&this.close(),n&&t.preventDefault()}},_onTriggerClicked:function(t,e){this._isOpen?this.close():this.open(e),t.preventDefault()},_afterTransition:function(){this._isOpen||r.removeClassName(this._getRecentDrawer(),"show")},_addEvents:function(){o.on(document.body,"click",this._triggers+', a[href*="#"]',this._handlers.click)},_getRecentDrawer:function(){return"left"===this._direction?this._leftDrawer:"right"===this._direction?this._rightDrawer:null},open:function(t){this._isOpen=!0,this._direction=t;var e=this._getRecentDrawer();r.addClassName(e,"show"),setTimeout(Ink.bind(function(){r.addClassName(document.body,[this._options.mode,t])},this),0),p&&this._transitionWillOccur(e)&&o.one(e,p.eventName,function(){r.removeClassName(e,"show");+e.offsetWidth;r.addClassName(e,"show")});var n=document.activeElement,h=l(e);s(Ink.bind(function(t){var o=i.isAncestorOf(e,t);o||(this.close(),a(),h&&n&&n.focus())},this))},_transitionWillOccur:function(t){return!(!p||!r.getStyle(t,p.styleProp))},close:function(){if(this._isOpen!==!1){var t=this._getRecentDrawer();if(t){a(),this._isOpen=!1;var e=null;p&&(e=this._transitionWillOccur(this._getRecentDrawer())),r.removeClassName(document.body,[this._options.mode,this._direction]),e?o.one(document.body,p.eventName,this._handlers.afterTransition):this._handlers.afterTransition()}}}},t.createUIComponent(u),u}),Ink.createModule("Ink.UI.Dropdown","1",["Ink.UI.Common_1","Ink.UI.Toggle_1","Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="Dropdown_1",o._optionDefinition={target:["Element"],hoverOpen:["Number",null],dismissOnInsideClick:["Boolean",!1],dismissOnOutsideClick:["Boolean",!0],dismissAfter:["Number",null],onInsideClick:["Function",null],onOutsideClick:["Function",null],onOpen:["Function",null],onDismiss:["Function",null]},o.prototype={_init:function(){this._toggle=new e(this._element,{target:this._options.target,closeOnInsideClick:null,closeOnClick:!1,onChangeState:Ink.bind(function(t){return this._openOrDismiss(t,!0,!0)},this)}),n.observeMulti([this._options.target,this._element],"mouseout",Ink.bindMethod(this,"_onMouseOut")),n.observeMulti([this._options.target,this._element],"mouseover",Ink.bindMethod(this,"_onMouseOver")),n.observe(this._options.target,"click",Ink.bindMethod(this,"_onInsideClick")),n.observe(document,"click",Ink.bindMethod(this,"_onOutsideClick"))},_onMouseOver:function(){"number"==typeof this._options.hoverOpen&&this._toggle.getState()===!1&&(clearTimeout(this._openTimeout),this._openTimeout=setTimeout(Ink.bindMethod(this,"open",!0),1e3*this._options.hoverOpen)),"number"==typeof this._options.dismissAfter&&clearTimeout(this._dismissTimeout)},_onMouseOut:function(){"number"==typeof this._options.dismissAfter&&this._toggle.getState()===!0&&(clearTimeout(this._dismissTimeout),this._dismissTimeout=setTimeout(Ink.bindMethod(this,"dismiss",!0),1e3*this._options.dismissAfter)),"number"==typeof this._options.hoverOpen&&clearTimeout(this._openTimeout)},_onInsideClick:function(t){var e=this._handlerCall("onInsideClick",n.element(t));e!==!1&&this._options.dismissOnInsideClick&&this.dismiss(!0)},_onOutsideClick:function(t){var e=n.element(t),o=i.findUpwardsHaving(e,Ink.bind(function(t){return t===this._element},this)),r=i.findUpwardsHaving(e,Ink.bind(function(t){return t===this._options.target},this));if(!o&&!r){var s=this._handlerCall("onOutsideClick",e);if(s===!1)return;this._options.dismissOnOutsideClick&&this.dismiss(!0)}},dismiss:function(t){this._openOrDismiss(!1,t,arguments[1])},open:function(t){this._openOrDismiss(!0,t,arguments[1])},_openOrDismiss:function(t,e,n){if(!this._toggle||this._toggle.getState()!==t){if(e&&this._handlerCall(t?"onOpen":"onDismiss")===!1)return!1;n||this._toggle.setState(t),clearTimeout(this._dismissTimeout),clearTimeout(this._openTimeout)}},_handlerCall:function(t){return this._options[t]?this._options[t].call(this,[].slice.call(arguments,1)):void 0}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Droppable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.UI.Common_1","Ink.Util.Array_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";var s=function(t){return function(e){return n.addClassName(t,e)}},a=function(t){return function(e){return n.removeClassName(t,e)}},l={debug:!1,_droppables:[],_draggables:[],add:function(e,n){function o(t){t.style.position="inherit"}e=i.elOrSelector(e,"Droppable.add target element");var r=Ink.extendObj({hoverClass:n.hoverclass||!1,accept:!1,onHover:!1,onDrop:!1,onDropOut:!1},n||{},t.data(e));"string"==typeof r.hoverClass&&(r.hoverClass=r.hoverClass.split(/\s+/));var s,a=this,l={move:function(t,e){o(t),e.appendChild(t)},copy:function(t,e){o(t),e.appendChild(t.cloneNode(!0))},revert:function(t){a._findDraggable(t).originalParent.appendChild(t),o(t)}};if("string"==typeof r.onHover&&(s=r.onHover,r.onHover=l[s],void 0===r.onHover))throw new Error("Unknown hover event handler: "+s);if("string"==typeof r.onDrop&&(s=r.onDrop,r.onDrop=l[s],void 0===r.onDrop))throw new Error("Unknown drop event handler: "+s);if("string"==typeof r.onDropOut&&(s=r.onDropOut,r.onDropOut=l[s],void 0===r.onDropOut))throw new Error("Unknown dropOut event handler: "+s);var h={element:e,data:{},options:r};this._droppables.push(h),this._update(h)},_findData:function(t){for(var e=this._droppables,n=0,i=e.length;i>n;n++)if(e[n].element===t)return e[n]},_findDraggable:function(t){for(var e=this._draggables,n=0,i=e.length;i>n;n++)if(e[n].element===t)return e[n]},updateAll:function(){o.each(this._droppables,l._update)},update:function(t){this._update(this._findData(t))},_update:function(e){var n=e.data,i=e.element;n.left=t.offsetLeft(i),n.top=t.offsetTop(i),n.right=n.left+t.elementWidth(i),n.bottom=n.top+t.elementHeight(i)},remove:function(t){t=i.elOrSelector(t);for(var e=this._droppables.length,n=0;e>n;n++)if(this._droppables[n].element===t){this._droppables.splice(n,1);break}return e!==this._droppables.length},action:function(t,e,n,i){o.each(this._droppables,Ink.bind(function(l){var h=l.data,u=l.options,c=l.element;(!u.accept||r.matches(u.accept,[i]).length)&&("drag"!==e||this._findDraggable(i)||this._draggables.push({element:i,originalParent:i.parentNode}),t.x>=h.left&&t.x<=h.right&&t.y>=h.top&&t.y<=h.bottom?"drag"===e?(u.hoverClass&&o.each(u.hoverClass,s(c)),u.onHover&&u.onHover(i,c)):"drop"===e&&(u.hoverClass&&o.each(u.hoverClass,a(c)),u.onDrop&&u.onDrop(i,c,n)):"drag"===e&&u.hoverClass?o.each(u.hoverClass,a(c)):"drop"===e&&u.onDropOut&&u.onDropOut(i,c,n))},this))}};return l}),Ink.createModule("Ink.UI.FormValidator","1",["Ink.Dom.Element_1","Ink.Dom.Css_1","Ink.Util.Validator_1","Ink.Dom.Selector_1"],function(t,e,n,i){"use strict";function o(t){if(!t.name)return[];if(!t.form)return i.select('[name="'+t.name+'"]');var e=t.form[t.name];return e?("undefined"==typeof e.length&&(e=[e]),e):function(){for(var e=[],n=Ink.ss("*",t.form),i=0;i<n.length;i++)n[i].name===t.name&&e.push(n[i]);return e}()}var r={version:"1",_flagMap:{"ink-fv-required":{msg:"Required field"},"ink-fv-email":{msg:"Invalid e-mail address"},"ink-fv-url":{msg:"Invalid URL"},"ink-fv-number":{msg:"Invalid number"},"ink-fv-phone_pt":{msg:"Invalid phone number"},"ink-fv-phone_cv":{msg:"Invalid phone number"},"ink-fv-phone_mz":{msg:"Invalid phone number"},"ink-fv-phone_ao":{msg:"Invalid phone number"},"ink-fv-date":{msg:"Invalid date"},"ink-fv-confirm":{msg:"Confirmation does not match"},"ink-fv-custom":{msg:""}},elements:{},confirmElms:{},hasConfirm:{},_errorClassName:"tip error",_errorValidationClassName:"validaton",_errorTypeWarningClassName:"warning",_errorTypeErrorClassName:"error",validate:function(t,e){if(this._free(),e=Ink.extendObj({onSuccess:!1,onError:!1,customFlag:!1,confirmGroup:[]},e||{}),"string"==typeof t&&(t=document.getElementById(t)),null===t)return!1;this.element=t,("undefined"==typeof this.element.id||null===this.element.id||""===this.element.id)&&(this.element.id="ink-fv_randomid_"+Math.round(99999*Math.random())),this.custom=e.customFlag,this.confirmGroup=e.confirmGroup;var n=this._validateElements();return n.length>0?(e.onError?e.onError(n):this._showError(t,n),!1):(e.onError||this._clearError(t),this._clearCache(),e.onSuccess&&e.onSuccess(),!0)},reset:function(){this._clearError(),this._clearCache()},_free:function(){this.element=null,this.custom=!1,this.confirmGroup=!1},_clearCache:function(){this.element=null,this.elements=[],this.custom=!1,this.confirmGroup=!1},_getElements:function(){var t=this.elements[this.element.id]=[];this.confirmElms[this.element.id]=[];for(var n=i.select(":input",this.element),o=!1,r=0,s=n.length;s>r;r++){o=n[r];var a=(o.getAttribute("type")+"").toLowerCase();if("radio"===a||"checkbox"===a){if(0===t.length||o.getAttribute("type")!==t[t.length-1].getAttribute("type")&&o.getAttribute("name")!==t[t.length-1].getAttribute("name"))for(var l in this._flagMap)if(e.hasClassName(o,l)){t.push(o);break}}else{for(var h in this._flagMap)if(e.hasClassName(o,h)&&"ink-fv-confirm"!==h){t.push(o);break}e.hasClassName(o,"ink-fv-confirm")&&(this.confirmElms[this.element.id].push(o),this.hasConfirm[this.element.id]=!0)}}},_validateElements:function(){var t;this._getElements(),this.hasConfirm[this.element.id]===!0&&(t=this._makeConfirmGroups());for(var n,i=[],o=!1,r=!1,s=0,a=this.elements[this.element.id].length;a>s;s++)if(n=!1,o=this.elements[this.element.id][s],!o.disabled)for(var l in this._flagMap)if(e.hasClassName(o,l))if("ink-fv-custom"!==l&&"ink-fv-confirm"!==l)this._isValid(o,l)||(n?i[i.length-1].errors.push(l):(i.push({elm:o,errors:[l]}),n=!0));else if("ink-fv-confirm"!==l)r=this._isCustomValid(o),r.length>0&&i.push({elm:o,errors:[l],custom:r});else if("ink-fv-confirm"===l)continue;return i=this._validateConfirmGroups(t,i)},_validateConfirmGroups:function(t,e){var n=!1;for(var i in t)t.hasOwnProperty(i)&&(n=t[i],2===n.length&&n[0].value!==n[1].value&&e.push({elm:n[1],errors:["ink-fv-confirm"]}));return e},_makeConfirmGroups:function(){var t;if(this.confirmGroup&&this.confirmGroup.length>0){t={};for(var n=!1,i=!1,o=0,r=this.confirmElms[this.element.id].length;r>o;o++){n=this.confirmElms[this.element.id][o];for(var s=0,a=this.confirmGroup.length;a>s;s++)i=this.confirmGroup[s],e.hasClassName(n,i)&&("undefined"==typeof t[i]?t[i]=[n]:t[i].push(n))}return t}return 2===this.confirmElms[this.element.id].length&&(t={"ink-fv-confirm":[this.confirmElms[this.element.id][0],this.confirmElms[this.element.id][1]]}),t},_isCustomValid:function(t){for(var n=[],i=!1,o=0,r=this.custom.length;r>o;o++)i=this.custom[o],e.hasClassName(t,i.flag)&&(i.callback(t,i.msg)||n.push({flag:i.flag,msg:i.msg}));return n},_isValid:function(t,i){var r=t.nodeName.toLowerCase(),s=(t.getAttribute("type")||"").toLowerCase(),a=this._trim(t.value);if("ink-fv-required"!==i&&"checkbox"!==s&&"radio"!==s&&""===a)return!e.hasClassName(t,"ink-fv-required");switch(i){case"ink-fv-required":if("select"===r)return t.selectedIndex>0?!0:!1;if("checkbox"!==s&&"radio"!==s)return""!==a;if("checkbox"===s||"radio"===s){for(var l=o(t),h=0,u=l.length;u>h;h++)if(l[h].checked===!0)return!0;return!1}return!1;case"ink-fv-email":return n.mail(t.value);case"ink-fv-url":return n.url(t.value);case"ink-fv-number":return!isNaN(Number(t.value))&&isFinite(Number(t.value));case"ink-fv-phone_pt":return n.isPTPhone(t.value);case"ink-fv-phone_cv":return n.isCVPhone(t.value);case"ink-fv-phone_ao":return n.isAOPhone(t.value);case"ink-fv-phone_mz":return n.isMZPhone(t.value);case"ink-fv-date":var c=Ink.getModule("Ink.Dom.Element",1),d=c.data(t),p="yyyy-mm-dd";if(e.hasClassName(t,"ink-datepicker")&&"format"in d?p=d.format:"validFormat"in d&&(p=d.validFormat),!(p in n._dateParsers)){var f=[];for(var m in n._dateParsers)n._dateParsers.hasOwnProperty(m)&&f.push(m);throw new Error("The attribute data-valid-format must be one of the following values: "+f.join(", "))}return n.isDate(p,t.value);case"ink-fv-custom":}return!1},_showError:function(t,e){this._clearError(t);for(var n=!1,i=0,o=e.length;o>i;i++)n=e[i].elm,n&&this._showAnErrorOnElement(n,e[i])},_showAnErrorOnElement:function(n,i){var o=t.findUpwardsByClass(n,"control-group"),r=t.findUpwardsByClass(n,"control"),s=[this._errorClassName,this._errorTypeClassName].join(" "),a=t.create("p",{className:s});a.innerHTML="ink-fv-custom"!==i.errors[0]?this._flagMap[i.errors[0]].msg:i.custom[0].msg;var l=r||o;l?l.appendChild(a):t.insertAfter(a,n),r&&("ink-fv-required"===i.errors[0]?e.addClassName(o,"validation error"):e.addClassName(o,"validation warning"))},_clearError:function(n){for(var i,o,r=n.getElementsByTagName("p"),s=r.length-1;s>=0;s--)i=r[s],e.hasClassName(i,this._errorClassName)&&(o=t.findUpwardsBySelector(i,".control-group"),o&&e.removeClassName(o,["validation","error","warning"]),e.hasClassName(i,this._errorClassName,!0)&&t.remove(i));var a=n.getElementsByTagName("ul");for(s=a.length-1;s>=0;s--)i=a[s],e.hasClassName(i,"control-group")&&e.removeClassName(i,"validation error")},_trim:function(t){return"string"==typeof t?t.replace(/^\s+|\s+$|\n+$/g,""):void 0}};return r}),Ink.createModule("Ink.UI.FormValidator","2",["Ink.UI.Common_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.Util.I18n_1","Ink.Util.Validator_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(t){switch(t.nodeName.toLowerCase()){case"select":return Ink.s("option:selected",t).value;case"textarea":return t.value;case"input":if(!("type"in t))return t.value;if("radio"===t.type||"checkbox"===t.type){if(t.checked)return t.value}else if("file"!==t.type)return t.value;return;default:return t.innerHTML}}function h(){t.BaseUIComponent.apply(this,arguments)}function u(){t.BaseUIComponent.apply(this,arguments)}var c={required:function(t){return"undefined"!=typeof t&&!/^\s*$/.test(t)},min_length:function(t,e){return"string"==typeof t&&t.length>=parseInt(e,10)},max_length:function(t,e){return"string"==typeof t&&t.length<=parseInt(e,10)},exact_length:function(t,e){return"string"==typeof t&&t.length===parseInt(e,10)},email:function(t){return"string"==typeof t&&a.mail(t)},url:function(t,e){return e=e||!1,"string"==typeof t&&a.url(t,e)},ip:function(t,e){return"string"!=typeof t?!1:a.isIP(t,e)},phone:function(t,e){if("string"!=typeof t)return!1;var n=e?e.toUpperCase():"";return a["is"+n+"Phone"](t)},credit_card:function(t,e){return"string"!=typeof t?!1:a.isCreditCard(t,e||"default")},date:function(t,e){return"string"==typeof t&&a.isDate(e,t)},alpha:function(t,e){return a.ascii(t,{singleLineWhitespace:e})},text:function(t,e,n){return a.unicode(t,{singleLineWhitespace:e,unicodePunctuation:n})},latin:function(t,e,n){return"string"!=typeof t?!1:a.latin1(t,{latin1Punctuation:e,singleLineWhitespace:n})},alpha_numeric:function(t){return a.ascii(t,{numbers:!0})},alpha_dash:function(t){return a.ascii(t,{dash:!0,underscore:!0})},digit:function(t){return"string"==typeof t&&/^[0-9]{1}$/.test(t)},integer:function(t,e){return a.number(t,{negative:!e,decimalPlaces:0})},decimal:function(t,e,n,i){return a.number(t,{decimalSep:e||".",decimalPlaces:+n||null,maxDigits:+i})},numeric:function(t,e,n,i){return e=e||".",-1!==t.indexOf(e)?c.decimal(t,e,n,i):c.integer(t)},range:function(t,e,n,i){return t=+t,e=+e,n=+n,isNaN(t)||isNaN(e)||isNaN(n)?!1:e>t||t>n?!1:i?(t-e)%i===0:!0},color:function(t){return a.isColor(t)},matches:function(t,e){var n=this.getFormElements()[e];if(!n){for(var i=Ink.ss("input, select, textarea, .control-group",this._options.form._element),o=0;o<i.length;o++)if((i[o].name||i[o].id)===e)return l(i[o])===t;return!1}n=n[0];var r=n.getValue();return n._rules.required&&""===r?!1:t===r},ean:function(t){return a.isEAN(t.replace(/[^\d]/g,""),"ean-13")}},d=new s({en_US:{"formvalidator.required":"Filling {field} is mandatory","formvalidator.min_length":"The {field} must have a minimum size of {param1} characters","formvalidator.max_length":"The {field} must have a maximum size of {param1} characters","formvalidator.exact_length":"The {field} must have an exact size of {param1} characters","formvalidator.email":"The {field} must have a valid e-mail address","formvalidator.url":"The {field} must have a valid URL","formvalidator.ip":"The {field} does not contain a valid {param1} IP address","formvalidator.phone":"The {field} does not contain a valid {param1} phone number","formvalidator.credit_card":"The {field} does not contain a valid {param1} credit card","formvalidator.date":"The {field} should contain a date in the {param1} format","formvalidator.alpha":"The {field} should only contain letters","formvalidator.text":"The {field} should only contain alphabetic characters","formvalidator.latin":"The {field} should only contain alphabetic characters","formvalidator.alpha_numeric":"The {field} should only contain letters or numbers","formvalidator.alpha_dash":"The {field} should only contain letters or dashes","formvalidator.digit":"The {field} should only contain a digit","formvalidator.integer":"The {field} should only contain an integer","formvalidator.decimal":"The {field} should contain a valid decimal number","formvalidator.numeric":"The {field} should contain a number","formvalidator.range":"The {field} should contain a number between {param1} and {param2}","formvalidator.color":"The {field} should contain a valid color","formvalidator.matches":"The {field} should match the field {param1}"},pt_PT:{"formvalidator.required":"Preencher {field} \xe9 obrigat\xf3rio","formvalidator.min_length":"{field} deve ter no m\xednimo {param1} caracteres","formvalidator.max_length":"{field} tem um tamanho m\xe1ximo de {param1} caracteres","formvalidator.exact_length":"{field} devia ter exactamente {param1} caracteres","formvalidator.email":"{field} deve ser um e-mail v\xe1lido","formvalidator.url":"O {field} deve ser um URL v\xe1lido","formvalidator.ip":"{field} n\xe3o tem um endere\xe7o IP {param1} v\xe1lido","formvalidator.phone":"{field} deve ser preenchido com um n\xfamero de telefone {param1} v\xe1lido.","formvalidator.credit_card":"{field} n\xe3o tem um cart\xe3o de cr\xe9dito {param1} v\xe1lido","formvalidator.date":"{field} deve conter uma data no formato {param1}","formvalidator.alpha":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.text":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.latin":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.alpha_numeric":"{field} deve conter apenas letras e n\xfameros","formvalidator.alpha_dash":"{field} deve conter apenas letras e tra\xe7os","formvalidator.digit":"{field} destina-se a ser preenchido com apenas um d\xedgito","formvalidator.integer":"{field} deve conter um n\xfamero inteiro","formvalidator.decimal":"{field} deve conter um n\xfamero v\xe1lido","formvalidator.numeric":"{field} deve conter um n\xfamero v\xe1lido","formvalidator.range":"{field} deve conter um n\xfamero entre {param1} e {param2}","formvalidator.color":"{field} deve conter uma cor v\xe1lida","formvalidator.matches":"{field} deve corresponder ao campo {param1}"}},"en_US");return h._name="FormElement_1",h._optionDefinition={label:["String",null],rules:["String",null],error:["String",null],form:["Object"]},h.prototype={_init:function(){this._errors={},this._rules={},this._value=null,null===this._options.label&&(this._options.label=this._getLabel())},_getLabel:function(){var t=e.findUpwardsBySelector(this._element,".control-group label");return t?e.textContent(t):this._element.name||this._element.id||""},_parseRules:function(t){this._rules={},t=t.split("|");var e,n,i,o,r=t.length;if(r>0)for(e=0;r>e;e++)if(n=t[e])if(-1!==(o=n.indexOf("["))){i=n.substr(o+1),i=i.split("]"),i=i[0],i=i.split(",");for(var s=0,a=i.length;a>s;s++)i[s]="true"===i[s]?!0:"false"===i[s]?!1:i[s];i.splice(0,0,this.getValue()),n=n.substr(0,o),this._rules[n]=i}else this._rules[n]=[this.getValue()]},_addError:function(t){for(var e=this._rules[t]||[],n={field:this._options.label,value:this.getValue()},i=1;i<e.length;i++)n["param"+i]=e[i];var o,r="formvalidator."+t;this._options.error?o=this._options.error:(o=d.text(r,n),o===r&&(o="[Validation message not found for rule ]"+t)),this._errors[t]=o},getValue:function(){return l(this._element)},getErrors:function(){return this._errors},getElement:function(){return this._element},getFormElements:function(){return this._options.form._formElements},validate:function(){this._errors={},this._parseRules(this._options.rules);var t=""!==this.getValue()||"required"in this._rules||"matches"in this._rules;if(t)for(var e in this._rules)if(this._rules.hasOwnProperty(e)){if("function"!=typeof c[e])return Ink.warn('Rule "'+e+'" not found. Used in element:',this._element),this._addError(null),!1;if(c[e].apply(this,this._rules[e])===!1)return this._addError(e),!1}return!0}},t.createUIComponent(h),u._name="FormValidator_1",u._optionDefinition={eventTrigger:["String","submit"],neverSubmit:["Boolean",!1],searchFor:["String","input, select, textarea, .control-group"],beforeValidation:["Function",void 0],onError:["Function",void 0],onSuccess:["Function",void 0]},u.setRule=function(t,e,n){if(c[t]=n,d.getKey("formvalidator."+t)!==e){var i={};i["formvalidator."+t]=e;var o={};o[d.lang()]=i,d.append(o)}},u.getI18n=function(){return d},u.setI18n=function(t){d=t},u.appendI18n=function(){d.append.apply(d,[].slice.call(arguments))},u.setLanguage=function(t){d.lang(t)},u.getRules=function(){return c},u.prototype={_init:function(){this._rootElement=this._element,this._formElements={},this._errorMessages=[],this._markedErrorElements=[],"string"==typeof this._options.eventTrigger&&n.observe(this._rootElement,this._options.eventTrigger,Ink.bindEvent(this.validate,this))},getElements:function(){this._formElements||(this._formElements={});for(var t=i.select(this._options.searchFor,this._rootElement),n=0;n<t.length;n+=1){var o=t[n],r=e.data(o);if("rules"in r){var s,a={form:this};"name"in o&&o.name?s=o.name:"id"in o&&o.id?s=o.id:(s="element_"+Math.floor(100*Math.random()),o.id=s),s in this._formElements||(this._formElements[s]=[]);var l=this._getOrCreateFormElementInstance(s,o,a);l&&this._formElements[s].push(l)}}return this._formElements},_getOrCreateFormElementInstance:function(t,e,n){for(var i=0;i<this._formElements[t].length;i++)if(this._formElements[t][i].getElement()===e)return null;return new h(e,n)},setI18n:function(t){t.clone&&(t=t.clone()),this.i18n=t},getI18n:function(){return this.i18n||d},setLanguage:function(t){this.i18n||this.setI18n(d),this.i18n.lang(t)},getLanguage:function(){return this.i18n?this.i18n.lang():d.lang()},validate:function(t){this._options.neverSubmit&&t&&n.stopDefault(t),"function"==typeof this._options.beforeValidation&&this._options.beforeValidation(),r.each(this._markedErrorElements,function(t){o.removeClassName(t,["validation","error"])}),r.each(this._errorMessages,e.remove),this.getElements();var i=[];for(var s in this._formElements)if(this._formElements.hasOwnProperty(s))for(var a=0;a<this._formElements[s].length;a+=1)this._formElements[s][a].validate()||i.push(this._formElements[s][a]);return 0===i.length?("function"==typeof this._options.onSuccess&&this._options.onSuccess(),!0):(t&&n.stopDefault(t),"function"==typeof this._options.onError&&this._options.onError(i),this._errorMessages=[],this._markedErrorElements=[],r.each(i,Ink.bind(function(t){var n,i;
o.hasClassName(t.getElement(),"control-group")?(n=t.getElement(),i=Ink.s(".control",t.getElement())):(n=e.findUpwardsByClass(t.getElement(),"control-group"),i=e.findUpwardsByClass(t.getElement(),"control")),n&&(o.addClassName(n,["validation","error"]),this._markedErrorElements.push(n));var r=document.createElement("p");o.addClassName(r,"tip"),i||n?(i||n).appendChild(r):e.insertAfter(r,t.getElement());var s=t.getErrors(),a=[];for(var l in s)s.hasOwnProperty(l)&&a.push(s[l]);r.innerHTML=a.join("<br/>"),this._errorMessages.push(r)},this)),!1)}},t.createUIComponent(u),u.FormElement=h,u.validationFunctions=c,u}),Ink.createModule("Ink.UI.ImageQuery","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Util.Array_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="ImageQuery_1",o._optionDefinition={src:["String"],retina:["String",void 0],queries:["Object"],onLoad:["Function",null]},o.prototype={_init:function(){var t;if(-1!==(t=this._element.src.lastIndexOf("?"))){var n=this._element.src.substr(t);this._filename=this._element.src.replace(n,"").split("/").pop()+n}else this._filename=this._element.src.split("/").pop();this._options.queries||(this._options.queries=[]),this._options.queries=i.sortMulti(this._options.queries,"width").reverse(),"function"==typeof this._options.onLoad&&e.observe(this._element,"load",Ink.bindEvent(this._onLoad,this)),this._onResize(),e.observe(window,"resize",e.throttle(Ink.bindMethod(this,"_onResize"),400))},_onResize:function(){if(this._options.queries.length){var t=this._findCurrentQuery();this._element.src=this.getQuerySrc(t)}},_findCurrentQuery:function(){for(var t=n.viewportWidth(),e=this._options.queries,i=e.length-1,o=0;i>o;o+=1)if(e[o].width<=t)return e[o];return e[i]},getQuerySrc:function(t){var e=t.src||this._options.src;if(window.devicePixelRatio>1&&void 0!==this._options.retina&&(e=t.retina||this._options.retina),t.file=this._filename,"function"==typeof e&&(e=e.apply(this,[this._element,t]),"string"!=typeof e))throw'[ImageQuery] :: "src" callback does not return a string';return e=e.replace(/{:(.*?)}/g,function(e,n){return t[n]}),delete t.file,e},_onLoad:function(){this._options.onLoad.call(this)}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.LazyLoad","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Css_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="LazyLoad_1",o._optionDefinition={item:["String",".lazyload-item"],placeholder:["String",null],loadedClass:["String",null],source:["String","data-src"],destination:["String","src"],delay:["Number",100],delta:["Number",0],image:["Boolean",!0],scrollElement:["Element",window],touchEvents:["Boolean",!0],onInsideViewport:["Function",!1],onAfterAttributeChange:["Function",!1],autoInit:["Boolean",!0]},o.prototype={_init:function(){this._aData=[],this._hasEvents=!1,this._options.autoInit&&this._activate()},_activate:function(){this._getData(),this._hasEvents||this._addEvents(),this._onScrollThrottled()},_getData:function(){for(var t=Ink.ss(this._options.item,this._element),e=null,i=0,o=t.length;o>i;i++)null==this._options.placeholder||n.hasAttribute(t[i],this._options.destination)||t[i].setAttribute(this._options.destination,this._options.placeholder),e=t[i].getAttribute(this._options.source),null===e&&this._options.image||this._aData.push({elm:t[i],original:e})},_addEvents:function(){this._onScrollThrottled=e.throttle(Ink.bindEvent(this._onScroll,this),this._options.delay),"ontouchmove"in document.documentElement&&this._options.touchEvents&&e.observe(document.documentElement,"touchmove",this._onScrollThrottled),e.observe(this._options.scrollElement,"scroll",this._onScrollThrottled),this._hasEvents=!0},_removeEvents:function(){"ontouchmove"in document.documentElement&&this._options.touchEvents&&e.stopObserving(document.documentElement,"touchmove",this._onScrollThrottled),e.stopObserving(this._options.scrollElement,"scroll",this._onScrollThrottled),this._hasEvents=!1},_onScroll:function(){for(var t,e=0;e<this._aData.length;e++)t=this._aData[e],n.inViewport(t.elm,{partial:!0,margin:this._options.delta})&&(this._elInViewport(t),this._aData.splice(e,1),e-=1);0===this._aData.length&&this._removeEvents()},_elInViewport:function(t){this._userCallback("onInsideViewport",{element:t.elm}),this._options.image&&(t.elm.setAttribute(this._options.destination,t.original),this._options.loadedClass&&i.addClassName(t.elm,this._options.loadedClass),t.elm.removeAttribute(this._options.source)),this._userCallback("onAfterAttributeChange",{element:t.elm})},_userCallback:function(t){"function"==typeof this._options[t]&&this._options[t].apply(this,[].slice.call(arguments,1))},reload:function(){this._activate()},destroy:function(){this._hasEvents&&this._removeEvents(),t.destroyComponent.call(this)}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Modal","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}var a=function(t){return t.style.opacity="invalid","invalid"!==t.style.opacity}(i.create("div",{style:"opacity: 1"})),l=function(t){return"10vh"===t.style.height&&"10vw"===t.style.width}(i.create("div",{style:"height:10vh;width:10vw"})),h=function(t){return""!==t.style.display}(i.create("div",{style:"display: flex"})),u=function(t){t=t.replace(/^\s+|\s+$/g,"");var e=-1!==t.indexOf("%"),n=-1!==t.indexOf("px");return e||n?!e&&n?t:!n&&e?t:t+"px":t+"%"},c=function(t,e){for(var n,i=t.split(/\s+/g),o=0;o<i.length;o++){var r=i[o].split("-"),s=r[0].replace(/^\s+|\s+$/g,"");if(s===e)return u(r[1]);"all"===s&&(n=u(r[1]))}return n},d=[];return s._name="Modal_1",s._optionDefinition={width:["String","90%"],height:["String","90%"],shadeClass:["String",void 0],modalClass:["String",void 0],trigger:["String",void 0],triggerEvent:["String","click"],autoDisplay:["Boolean",!0],markup:["String",void 0],onShow:["Function",void 0],onDismiss:["Function",void 0],closeOnClick:["Boolean",!1],closeOnEscape:["Boolean",!0],responsive:["Boolean",!0]},s.prototype={_init:function(){if(this._handlers={click:Ink.bindEvent(this._onShadeClick,this),keyDown:Ink.bindEvent(this._onKeyDown,this),resize:null},this._dimensionIsVariant={width:-1!==(""+this._options.width).indexOf(" "),height:-1!==(""+this._options.height).indexOf(" ")},this._isOpen=!1,this._markupMode=this._element?n.hasClassName(this._element,"ink-modal"):!1,this._markupMode){if(this._modalDiv=this._element,this._modalShadow=this._modalDiv.parentNode,this._contentContainer=o.select(".modal-body",this._modalDiv)[0],!this._contentContainer)throw new Error('Ink.UI.Modal: Missing div with class "modal-body"');this._options.markup=this._contentContainer.innerHTML}else this._modalShadow=i.create("div",{className:"ink-shade"}),this._modalDiv=i.create("div",{className:"ink-modal ink-space"}),this._element&&(this._options.markup=this._element.innerHTML),this._modalShadow.appendChild(this._modalDiv),document.body.appendChild(this._modalShadow);if(this._markupMode||this.setContentMarkup(this._options.markup),"string"==typeof this._options.shadeClass&&n.addClassName(this._modalShadow,this._options.shadeClass),"string"==typeof this._options.modalClass&&n.addClassName(this._modalDiv,this._options.modalClass),this._options.trigger){var r=t.elsOrSelector(this._options.trigger,"");e.observeMulti(r,this._options.triggerEvent,Ink.bindEvent(this.open,this))}else this._options.autoDisplay&&this.open()},_dimensionIsPercentage:function(){var t=this._getDimensions();return{width:-1!==(""+t.width).indexOf("%"),height:-1!==(""+t.height).indexOf("%")}},_getDimensions:function(e){e=e||{};var n,o={width:this._options.width,height:this._options.height};if((this._dimensionIsVariant.width||this._dimensionIsVariant.height)&&(n=t.currentLayout()),this._dimensionIsVariant.width&&(o.width=c(o.width,n)),this._dimensionIsVariant.height&&(o.height=c(o.height,n)),e.dynamic){var r=this._dimensionIsPercentage();if(!r.width){var s=.9*i.viewportWidth();parseFloat(o.width)>=s&&(o.width=s+"px")}if(!r.height){var a=.9*i.viewportHeight();parseFloat(o.height)>=a&&(o.height=a+"px")}}return o},_reposition:function(){var t,e=this._dimensionIsPercentage(),n=this._getDimensions();l&&e.height?this._modalDiv.style.marginTop=-parseFloat(n.height)/2+"vh":l?(t=parseFloat(n.height)>.9*i.viewportHeight(),(t!==this._heightWasLargerThan90Percent||!t||this._dimensionIsVariant.height)&&(this._heightWasLargerThan90Percent=t,t?(this._modalDiv.style.marginTop="0",this._modalDiv.style.top="5vh"):(this._modalDiv.style.marginTop=-parseFloat(n.height)/2+"px",this._modalDiv.style.top=""))):this._modalDiv.style.marginTop=-i.elementHeight(this._modalDiv)/2+"px",l&&e.width?this._modalDiv.style.marginLeft=-parseFloat(n.width)/2+"vw":l?(t=parseFloat(n.width)>.9*i.viewportWidth(),(t!==this._widthWasLargerThan90Percent||!t||this._dimensionIsVariant.width)&&(this._widthWasLargerThan90Percent=t,t?(this._modalDiv.style.marginLeft="0",this._modalDiv.style.left="5vw"):(this._modalDiv.style.marginLeft=-parseFloat(n.width)/2+"px",this._modalDiv.style.left=""))):this._modalDiv.style.marginLeft=-i.elementWidth(this._modalDiv)/2+"px"},_onResize:function(){var t=this._dimensionIsVariant.height||this._dimensionIsVariant.width,e=this._dimensionIsPercentage(),n=!e.height||!e.width;t&&this._resize(),(!l||t)&&this._avoidModalLargerThanScreen(),(!l||n||t)&&this._reposition(),h||this._resizeContainer()},_onShadeClick:function(t){var r=e.element(t);if(r===this._modalShadow&&this._options.closeOnClick)this.dismiss();else if(n.hasClassName(r,"ink-close")||n.hasClassName(r,"ink-dismiss")||i.findUpwardsBySelector(r,".ink-close,.ink-dismiss")||this._options.closeOnClick&&(!i.descendantOf(this._shadeElement,r)||r===this._shadeElement)){for(var s=o.select(".ink-alert",this._shadeElement),a=s.length,l=0;a>l;l++)if(i.descendantOf(s[l],r))return;this.dismiss(),this._isOpen||e.stop(t)}},_onKeyDown:function(t){27===t.keyCode&&this._isOpen&&this._options.closeOnEscape&&d[d.length-1]===this&&(this.dismiss(),this._isOpen||e.stop(t))},_resize:function(){var t=this._getDimensions();this._modalDiv.style.width=t.width,this._modalDiv.style.height=t.height},_resizeContainer:function(){var t=i.elementHeight(this._modalDiv);this._modalHeader=o.select(".modal-header",this._modalDiv)[0],this._modalHeader&&(t-=i.elementHeight(this._modalHeader)),this._modalFooter=o.select(".modal-footer",this._modalDiv)[0],this._modalFooter&&(t-=i.elementHeight(this._modalFooter)),this._contentContainer.style.height=t+"px",this._markupMode},_resizeContainerFlex:function(){this._contentContainer.style.flex="1",this._modalDiv.style.display="flex",this._modalDiv.style.flexDirection="column"},_avoidModalLargerThanScreen:function(){var t=this._dimensionIsPercentage();if(l)t.width||(this._modalDiv.style.maxWidth="90vw"),t.height||(this._modalDiv.style.maxHeight="90vh");else{var e={height:i.viewportHeight(),width:i.viewportWidth()},n=this._getDimensions();r.forEach(["height","width"],Ink.bind(function(i){if(!t[i]){var o=Math.round(.9*e[i]);if(parseFloat(n[i])>o)this._modalDiv.style[i]=o+"px";else{if(isNaN(parseFloat(n[i])))return;this._modalDiv.style[i]=parseFloat(n[i])+"px"}}},this))}},open:function(t){if(this.isOpen())return!1;if(t&&e.stop(t),n.addClassName(this._modalShadow,"ink-shade"),this._modalShadow.style.display=this._modalDiv.style.display="block",this._modalShadow.offsetHeight,n.addClassName(this._modalShadow,"visible"),n.addClassName(this._modalDiv,"visible"),this._contentElement=this._modalDiv,this._shadeElement=this._modalShadow,this._markupMode||this.setContentMarkup(this._options.markup),this._resize(),this._avoidModalLargerThanScreen(),this._reposition(),h?this._resizeContainerFlex():this._resizeContainer(),this._options.responsive){var i=this._dimensionIsPercentage(),o=!(l&&h&&i.height&&i.width&&!this._dimensionIsVariant.height&&!this._dimensionIsVariant.width);o&&(this._handlers.resize=e.throttle(Ink.bind(this._onResize,this),500),e.observe(window,"resize",this._handlers.resize))}this._options.onShow&&this._options.onShow(this),e.observe(this._shadeElement,"click",this._handlers.click),this._options.closeOnEscape&&e.observe(document,"keydown",this._handlers.keyDown),this._isOpen=!0,d.push(this),n.addClassName(document.documentElement,"ink-modal-open")},isOpen:function(){return this._isOpen},dismiss:function(){if(this._isOpen){if(this._options.onDismiss){var t=this._options.onDismiss(this);if(t===!1)return}if(this._isOpen=!1,this._handlers.resize&&e.stopObserving(window,"resize",this._handlers.resize),this._markupMode?(n.removeClassName(this._modalDiv,"visible"),n.removeClassName(this._modalShadow,"visible"),this._waitForFade(this._modalShadow,Ink.bind(function(){this._modalShadow.style.display="none"},this))):(this._modalShadow.parentNode.removeChild(this._modalShadow),this.destroy()),d=r.remove(d,r.keyValue(this,d),1),0===d.length){var i=document.documentElement;n.removeClassName(i,"ink-modal-open")}}},_waitForFade:function(t,e){if(!a)return e();var i=5,o=function(){+n.getStyle(t,"opacity")>0&&i>0?(i--,setTimeout(o,250)):e()};setTimeout(o,500)},destroy:function(){t.unregisterInstance(this._instanceId)},getContentElement:function(){return this._contentContainer},setContentMarkup:function(t){if(this._markupMode)this._contentContainer.innerHTML=t;else{if(this._modalDiv.innerHTML=[t].join(""),this._contentContainer=o.select(".modal-body",this._modalDiv),!this._contentContainer.length){var e=o.select(".modal-header",this._modalDiv),s=o.select(".modal-footer",this._modalDiv);r.each(e,i.remove),r.each(s,i.remove);var a=document.createElement("div");n.addClassName(a,"modal-body"),a.innerHTML=this._modalDiv.innerHTML,this._modalDiv.innerHTML="";var l=e.concat([a]).concat(s);r.each(l,Ink.bindMethod(this._modalDiv,"appendChild")),this._contentContainer=o.select(".modal-body",this._modalDiv)}this._contentContainer=this._contentContainer[0]}this._contentElement=this._modalDiv,this._resizeContainer()}},t.createUIComponent(s,{elementIsOptional:!0}),s}),Ink.createModule("Ink.UI.Pagination","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}var s=function(t,e,n){var i=document.createElement("a");if(i.setAttribute("href","#"),"number"==typeof e&&i.setAttribute("data-index",e),n&&n.wrapText){var o=document.createElement("span");i.appendChild(o),o.innerHTML=t}else i.innerHTML=t;return i};return r._name="Pagination_1",r._optionDefinition={size:["Integer",null],totalItemCount:["Integer",null],itemsPerPage:["Integer",null],maxSize:["Integer",null],start:["Integer",1],sideButtons:["Boolean",1],firstLabel:["String","First"],lastLabel:["String","Last"],previousLabel:["String","Previous"],nextLabel:["String","Next"],previousPageLabel:["String",null],nextPageLabel:["String",null],onChange:["Function",void 0],hashParameter:["String","page"],parentTag:["String","ul"],childTag:["String","li"],wrapperClass:["String","ink-navigation"],paginationClass:["String","pagination"],activeClass:["String","active"],disabledClass:["String","disabled"],hideClass:["String","hide-all"],previousClass:["String","previous"],previousPageClass:["String","previousPage"],nextClass:["String","next"],nextPageClass:["String","nextPage"],firstClass:["String","first"],lastClass:["String","last"],numberFormatter:["Function",function(t){return t+1}],autoWrap:["Boolean",!1]},r.prototype={_init:function(){this._options.previousPageLabel||(this._options.previousPageLabel=this._options.previousLabel+" "+this._options.maxSize),this._options.nextPageLabel||(this._options.nextPageLabel=this._options.nextLabel+" "+this._options.maxSize),this._handlers={click:Ink.bindEvent(this._onClick,this)},t.isInteger(this._options.totalItemCount)&&t.isInteger(this._options.itemsPerPage)?this._size=this._calculateSize(this._options.totalItemCount,this._options.itemsPerPage):t.isInteger(this._options.size)?this._size=this._options.size:(Ink.error("Ink.UI.Pagination: Please supply a size option or totalItemCount and itemsPerPage options."),this._size=0),this._current=this._options.start-1,this._itemLiEls=[],this._generateMarkup(this._element),this._updateItems(),this._observe()},_observe:function(){e.observeDelegated(this._element,"click","."+this._options.paginationClass+" > "+this._options.childTag,this._handlers.click)},_calculateSize:function(t,e){return Math.ceil(t/e)},_updateItems:function(){var t,e,i,o=this._itemLiEls,r=this._size===o.length;if(r)for(t=0,e=this._size;e>t;++t)n.setClassName(o[t],this._options.activeClass,t===this._current);else{for(t=o.length-1;t>=0;--t)this._ulEl.removeChild(o[t]);for(o=[],t=0,e=this._size;e>t;++t)i=document.createElement(this._options.childTag),i.appendChild(s(this._options.numberFormatter(t,this._size),t)),n.setClassName(i,this._options.activeClass,t===this._current),this._nextEl?this._ulEl.insertBefore(i,this._nextEl):this._ulEl.appendChild(i),o.push(i);this._itemLiEls=o}if(this._options.maxSize){var a=Math.floor(this._current/this._options.maxSize),l=this._options.maxSize*a,h=l+this._options.maxSize-1;for(t=0,e=this._size;e>t;++t)i=o[t],n.setClassName(i,this._options.hideClass,l>t||t>h);this._pageStart=l,this._pageEnd=h,this._page=a,n.setClassName(this._prevPageEl,this._options.disabledClass,!this.hasPreviousPage()),n.setClassName(this._nextPageEl,this._options.disabledClass,!this.hasNextPage()),n.setClassName(this._firstEl,this._options.disabledClass,this.isFirst()),n.setClassName(this._lastEl,this._options.disabledClass,this.isLast())}this._prevEl&&!this._options.autoWrap&&n.setClassName(this._prevEl,this._options.disabledClass,!this.hasPrevious()),this._nextEl&&!this._options.autoWrap&&n.setClassName(this._nextEl,this._options.disabledClass,!this.hasNext())},_generateMarkup:function(t){n.addClassName(t,"ink-navigation");var e=Ink.s("."+this._options.paginationClass,t),i=!1;e?i=!0:(e=document.createElement(this._options.parentTag),n.addClassName(e,this._options.paginationClass));var o=n.hasClassName(e,"chevron"),r=n.hasClassName(e,"dotted"),a=Ink.bind(function(t,i){var o=document.createElement(this._options.childTag),r=s(this._options[t+"Label"],void 0,{wrapText:i&&i.wrapText});return n.addClassName(o,this._options[t+"Class"]),o.appendChild(r),e.appendChild(o),o},this);!r&&this._options.maxSize&&(this._firstEl=a("first"),this._prevPageEl=a("previousPage")),(r&&this._options.sideButtons===!0||!r&&this._options.sideButtons)&&(this._prevEl=a("previous",{wrapText:o}),this._nextEl=a("next",{wrapText:o})),!r&&this._options.maxSize&&(this._nextPageEl=a("nextPage"),this._lastEl=a("last")),i||t.appendChild(e),this._ulEl=e},_onClick:function(t){e.stop(t);var i=e.element(t);if(!n.hasClassName(i,this._options.activeClass)&&!n.hasClassName(i,this._options.disabledClass)){var r=n.hasClassName(i,this._options.previousClass),s=n.hasClassName(i,this._options.nextClass),a=n.hasClassName(i,this._options.previousPageClass),l=n.hasClassName(i,this._options.nextPageClass),h=n.hasClassName(i,this._options.firstClass),u=n.hasClassName(i,this._options.lastClass);if(h)this.setCurrent(0);else if(u)this.setCurrent(this._size-1);else if(a||l)this.setCurrent((a?-1:1)*this._options.maxSize,!0,!!this._options.autoWrap);else if(r||s)this.setCurrent(r?-1:1,!0,!!this._options.autoWrap);else{var c=o.select("[data-index]",i)[0],d=c&&parseInt(c.getAttribute("data-index"),10);this.setCurrent(d)}}},setOnChange:function(t){if(t&&"function"!=typeof t)throw new TypeError("onChange option must be a function!");this._options.onChange=t},setSize:function(e){if(!t.isInteger(e))throw new TypeError("1st argument must be an integer number!");this._size=e,this._updateItems(),this._current=0},setSizeInItems:function(t,e){var n=Math.ceil(t/e);this.setSize(n)},setCurrent:function(e,n,i){if(!t.isInteger(e))throw new TypeError("1st argument must be an integer number!");n&&(e+=this._current),i?(e%=this._size,0>e&&(e+=this._size)):(e>this._size-1&&(e=this._size-1),0>e&&(e=0)),this._current=e,this._updateItems(),this._options.onChange&&this._options.onChange(this,e)},next:function(t){this.setCurrent(1,!0,t)},previous:function(t){this.setCurrent(-1,!0,t)},getSize:function(){return this._size},getCurrent:function(){return this._current},isFirst:function(){return 0===this._current},isLast:function(){return this._current===this._size-1},hasPrevious:function(){return this._current>0},hasNext:function(){return this._current<this._size-1},hasPreviousPage:function(){return this._options.maxSize&&this._current>this._options.maxSize-1},hasNextPage:function(){return this._options.maxSize&&this._size-this._current>=this._options.maxSize+1},destroy:t.destroyComponent},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.ProgressBar","1",["Ink.UI.Common_1","Ink.Dom.Selector_1"],function(t,e){"use strict";function n(){t.BaseUIComponent.apply(this,arguments)}return n._name="ProgressBar_1",n._optionDefinition={startValue:["Number",0],onStart:["Function",function(){}],onEnd:["Function",function(){}]},n.prototype={_init:function(){if(this._value=this._options.startValue,this._elementBar=e.select(".bar",this._element),this._elementBar.length<1)throw new Error("[Ink.UI.ProgressBar] :: Bar element not found");this._elementBar=this._elementBar[0],this.setValue(this._options.startValue)},setValue:function(t){this._options.onStart.call(this,this._value),t=parseInt(t,10),isNaN(t)||0>t?t=0:t>100&&(t=100),this._value=t,this._elementBar.style.width=this._value+"%",this._options.onEnd.call(this,this._value)}},t.createUIComponent(n),n}),Ink.createModule("Ink.UI.SmoothScroller","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Dom.Css_1"],function(t,e,n,i,o){"use strict";var r=window.requestAnimationFrame||function(t){return setTimeout(t,10)},s=window.cancelAnimationFrame||function(t){clearTimeout(t)},a={speed:10,changeHash:!0,margin:0,scroll:function(t,e){var i=Math.round(n.scrollHeight()),o=Math.round(t-(e.margin||0));i+=o>i?Math.ceil((o-i)/e.speed):(o-i)/e.speed,s(a.interval),i!==o&&a.offsetTop!==i?a.interval=r(Ink.bindMethod(a,"scroll",t,e),document.body):a.onDone(e),window.scrollTo(0,i),a.offsetTop=i},init:function(t){e.on(document,"click",t||"a.scrollableLink, a.ink-smooth-scroll",a.onClick)},render:function(){},onClick:function(e){var i=e.currentTarget,r=(location+"").replace(/#.*?$/,""),s=(i.href+"").replace(/#.*?$/,"");if(s===r){var l=i.getAttribute("data-hash")||(i.getAttribute("href")||"").replace(/^.*?#/,"");if(l){e.preventDefault();var h="ul > li.active > "+u,u='a[name="'+l+'"],#'+l,c=Ink.s(u),d=Ink.s(h);if(d=d&&d.parentNode,c){o.hasClassName(i.parentNode,"active")||(d&&o.removeClassName(d,"active"),o.addClassName(i.parentNode,"active"));var p=t.options("SmoothScroller link options",{margin:["Number",a.margin],speed:["Number",a.speed],changeHash:["Boolean",a.changeHash]},{},i);a.hash=l,a.scroll(n.offsetTop(c),p)}}}},onDone:function(t){t.changeHash===!0&&(window.location.hash=a.hash),a.hash=a.offsetTop=null}};return a}),Ink.createModule("Ink.UI.SortableList","1",["Ink.UI.Common_1","Ink.Dom.Css_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}var s="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;return r._name="SortableList_1",r._optionDefinition={placeholderClass:["String","placeholder"],draggedClass:["String","hide-all"],draggingClass:["String","dragging"],dragSelector:["String","> li"],handleSelector:["String",":not(button, button *, a[href], a[href] *)"],moveSelector:["String",!1],swap:["Boolean",!1],cancelMouseOut:["Boolean",!1],onDrop:["Function",function(){}]},r.prototype={_init:function(){this._handlers={down:Ink.bind(this._onDown,this),move:Ink.bind(this._onMove,this),up:Ink.bind(this._onUp,this)},this._isMoving=!1,this._down=s?"touchstart mousedown":"mousedown",this._move=s?"touchmove mousemove":"mousemove",this._up=s?"touchend mouseup":"mouseup",this._observe()},_observe:function(){n.on(this._element,this._down,this._options.dragSelector,this._handlers.down),n.on(this._element,this._move,this._options.dragSelector,this._handlers.move),this._options.cancelMouseOut&&n.on(this._element,"mouseleave",Ink.bind(this.stopMoving,this)),n.on(document.documentElement,this._up,this._handlers.up)},_onDown:function(t){if(!this._isMoving&&!this._placeholder){var e=t.currentTarget;if(this._options.handleSelector){var n=i.findUpwardsBySelector(t.target,this._options.handleSelector);if(!n||!i.isAncestorOf(e,n))return}return this._isMoving=e,this._placeholder=e.cloneNode(!0),this._movePlaceholder(e),this._addMovingClasses(),!1}},_onMove:function(t){var e=t.currentTarget;if("touchmove"===t.type){var n=t.touches[0];e=document.elementFromPoint(n.clientX,n.clientY),e=i.findUpwardsBySelector(e,this._options.dragSelector)}this.validateMove(e),t.preventDefault()},_onUp:function(t){return this._isMoving&&this._placeholder&&t.currentTarget!==this._isMoving&&t.currentTarget!==this._placeholder?(i.insertBefore(this._isMoving,this._placeholder),this.stopMoving(),this._options.onDrop.call(this,{droppedElement:t.currentTarget}),!1):void 0},_addMovingClasses:function(){e.addClassName(this._placeholder,this._options.placeholderClass),e.addClassName(this._isMoving,this._options.draggedClass),e.addClassName(document.documentElement,this._options.draggingClass)},_removeMovingClasses:function(){this._isMoving&&e.removeClassName(this._isMoving,this._options.draggedClass),this._placeholder&&e.removeClassName(this._placeholder,this._options.placeholderClass),e.removeClassName(document.documentElement,this._options.draggingClass)},_movePlaceholder:function(t){var e,n,o,r,s=this._placeholder;s?this._options.swap?(i.insertAfter(s,t),i.insertBefore(t,this._isMoving),i.insertBefore(this._isMoving,s)):(e=i.offset(t),n=i.offset(this._placeholder),o=e[1]>n[1],r=e[0]>n[0],o&&r||!o&&!r?i.insertBefore(s,t):i.insertAfter(s,t),i.insertBefore(this._isMoving,s)):i.insertAfter(s,t)},destroy:t.destroyComponent,stopMoving:function(){this._removeMovingClasses(),i.remove(this._placeholder),this._placeholder=!1,this._isMoving=!1},validateMove:function(t){t&&this._isMoving&&this._placeholder&&t!==this._placeholder&&t!==this._isMoving&&(!this._options.moveSelector||o.matchesSelector(t,this._options.moveSelector)?this._movePlaceholder(t):this.stopMoving())}},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.Spy","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(t){for(var e=0,n=d.length;n>e;e++)if(d[e][0]===t)return e;return null}function s(t,e){var n=r(e);null===n?d.push([e,[t]]):d[n][1].push(t)}function a(){p||(p=!0,e.observe(document,"scroll",e.throttle(l,300)))}function l(){for(var t=0,e=d.length;e>t;t++)h(d[t][0],d[t][1])}function h(t,e){for(var r=u(e),s=o.select("li.active",t),a=0,l=s.length;l>a;a++)n.removeClassName(s[a],"active");if(null!==r){var h='a[href$="#'+(r.name||r.id)+'"]',c=o.select(h,t);for(a=0,l=c.length;l>a;a++)n.addClassName(i.findUpwardsByTag(c[a],"li"),"active")}}function u(t){for(var e,n,i=-1/0,o=0,r=t.length;r>o;o++)n=t[o].getBoundingClientRect(),n.top<=0&&n.top>i&&(i=n.top,e=o);return void 0===e?null:t[e]}function c(){t.BaseUIComponent.apply(this,arguments)}var d=[],p=!1;return c._name="Spy_1",c._optionDefinition={target:["Element",void 0]},c.prototype={_init:function(){s(this._element,this._options.target),a(),l()}},t.createUIComponent(c),c}),Ink.createModule("Ink.UI.Stacker",1,["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e,n){"use strict";function i(){t.BaseUIComponent.apply(this,arguments)}return i._name="Stacker_1",i._optionDefinition={column:["String",".stacker-column"],item:["String",".stacker-item"],customBreakPoints:["Object",null],largeMax:["Number",Number.MAX_VALUE],largeMin:["Number",961],mediumMax:["Number",960],mediumMin:["Number",651],smallMax:["Number",650],smallMin:["Number",0],largeCols:["Integer",3],mediumCols:["Integer",2],smallCols:["Integer",1],isOrdered:["Boolean",!0],onRunCallback:["Function",null],onResizeCallback:["Function",null],onAPIReloadCallback:["Function",null]},i.prototype={_init:function(){this._aList=[],this._curLayout="large",this._runFirstTime=!1,this._getPageItemsToList(),(this._canApplyLayoutChange()||!this._runFirstTime)&&(this._runFirstTime=!0,this._applyLayoutChange(),"function"==typeof this._options.onRunCallback&&this._options.onRunCallback(this._curLayout)),this._addEvents()},addItem:function(t){this._aList.push(t)},reloadItems:function(){this._applyLayoutChange(),"function"==typeof this._options.onAPIReloadCallback&&this._options.onAPIReloadCallback(this._curLayout)},_addEvents:function(){e.observe(window,"resize",Ink.bindEvent(this._onResize,this))},_onResize:function(){this._canApplyLayoutChange()&&(this._removeDomItems(),this._applyLayoutChange(),"function"==typeof this._options.onResizeCallback&&this._options.onResizeCallback(this._curLayout))},_setCurLayout:function(){var t=n.viewportWidth();if(this._options.customBreakpoints&&"object"==typeof this._options.customBreakPoints){for(var e in this._options.customBreakPoints)if(this._options.customBreakPoints.hasOwnProperty(e)&&t>=Number(this._options.customBreakPoints[e].min)&&t<=Number(this._options.customBreakPoints[e].max)&&this._curLayout!==e)return void(this._curLayout=e)}else t<=Number(this._options.largeMax)&&t>=Number(this._options.largeMin)&&"large"!==this._curLayout?this._curLayout="large":t>=Number(this._options.mediumMin)&&t<=Number(this._options.mediumMax)&&"medium"!==this._curLayout?this._curLayout="medium":t>=Number(this._options.smallMin)&&t<=Number(this._options.smallMax)&&"small"!==this._curLayout&&(this._curLayout="small")},_getColumnsToShow:function(){return Number(this._options.customBreakPoints&&"object"==typeof this._options.customBreakPoints?this._options.customBreakPoints[this._curLayout].cols:this._options[this._curLayout+"Cols"])},_canApplyLayoutChange:function(){var t=this._curLayout;return this._setCurLayout(),t!==this._curLayout?!0:!1},_getPageItemsToList:function(){this._aColumn=Ink.ss(this._options.column,this._element);var t=this._aColumn.length,e=0;if(t>0){for(var n=0;n<this._aColumn.length;n++)for(var i=Ink.ss(this._options.item,this._aColumn[n]),o=0;o<i.length;o++)this._options.isOrdered&&(e=n+o*t),this._aList[e]=i[o],this._options.isOrdered||e++,i[o].parentNode.removeChild(i[o]);if(this._aList.length>0&&this._options.isOrdered){for(var r=[],s=0;s<this._aList.length;s++)"undefined"!=typeof this._aList[s]&&r.push(this._aList[s]);this._aList=r}}},_removeDomItems:function(){var t=this._aColumn.length;if(t>0)for(var e=0;t>e;e++)for(var n=Ink.ss(this._options.item,this._aColumn[e]),i=n.length-1;i>=0;i--)n[i].parentNode.removeChild(n[i])},_applyLayoutChange:function(){var t=this._getColumnsToShow(),e=this._aList.length,n=0,i=0;if(t>0)for(;t>i;){if(this._aColumn[i].appendChild(this._aList[n]),n++,i++,n===e)return;i===t&&(i=0)}}},t.createUIComponent(i),i}),Ink.createModule("Ink.UI.Sticky","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Css_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="Sticky_1",o._optionDefinition={offsetBottom:["Integer",0],offsetTop:["Integer",0],topElement:["Element",null],wrapperClass:["String","ink-sticky-wrapper"],stickyClass:["String","ink-sticky-stuck"],inlineDimensions:["Boolean",!0],inlinePosition:["Boolean",!0],bottomElement:["Element",null],activateInLayouts:["String",null]},o.prototype={_init:function(){this._options.activateInLayouts&&(this._options.activateInLayouts=this._options.activateInLayouts.toString()),this._dims=null,this._options.offsetTop=parseInt(this._options.offsetTop,10)||0,this._options.offsetBottom=parseInt(this._options.offsetBottom,10)||0,this._options.topElement&&(this._options.topElement=t.elOrSelector(this._options.topElement,"Top Element")),this._options.bottomElement&&(this._options.bottomElement=t.elOrSelector(this._options.bottomElement,"Sticky bottom Element")),this._wrapper=n.create("div",{className:this._options.wrapperClass}),n.wrap(this._element,this._wrapper);var i=document.addEventListener?document:window;this._onScroll=Ink.bind(e.throttle(this._onScroll,33),this),e.observe(i,"scroll",this._onScroll),e.observe(window,"resize",Ink.bindEvent(e.throttle(this._onResize,100),this)),this._onScroll()},_isDisabledInLayout:function(){if(!this._options.activateInLayouts)return!1;var e=t.currentLayout();return e?-1===this._options.activateInLayouts.indexOf(e):!1
},_onScroll:function(){var t=this._getDims(),e=n.scrollHeight(),i=this._isDisabledInLayout()||e<=t.top-this._options.offsetTop||this._options.topElement&&this._options.topElement.getBoundingClientRect().bottom+this._options.offsetTop>0;if(i)return void this._unstick();var o=this._options.offsetTop+t.height+n.scrollHeight(),r=document.body.scrollHeight;this._options.bottomElement&&(r=this._options.bottomElement.getBoundingClientRect().top+n.scrollHeight()),r-=this._options.offsetBottom,this._stickTo(r>o?"screen":"bottom")},_stickTo:function(t){var e=this._element.style,o=this._getDims();if(i.addClassName(this._element,this._options.stickyClass),this._wrapper.style.height=o.height+"px",this._inlineDimensions(o.height+"px",o.width+"px"),this._options.inlinePosition!==!1)if(e.left=o.left+"px","screen"===t)e.bottom=null,e.top=this._options.offsetTop+"px";else if("bottom"===t){var r=this._getBottomOffset(),s=n.scrollHeight()+n.viewportHeight(),a=n.pageHeight()-s;e.bottom=r-a+"px",e.top="auto"}},_unstick:function(){i.removeClassName(this._element,this._options.stickyClass),this._inlineDimensions(null,null),this._options.inlinePosition&&(this._element.style.left=null,this._element.style.top=null,this._element.style.bottom=null),this._wrapper.style.height=null,this._wrapper.style.width=null,this._dims=null},_onResize:function(){this._dims=null,this._onScroll()},_getDims:function(){if(null!==this._dims)return this._dims;var t=this._element.style,e=t.position,i=t.width;t.position="static",t.width=null;var o=n.outerDimensions(this._element),r=this._wrapper.getBoundingClientRect();return this._dims={height:o[1],width:o[0],left:r.left+n.scrollWidth(),top:r.top+n.scrollHeight()},t.position=e,t.width=i,this._dims},_inlineDimensions:function(t,e){this._options.inlineDimensions&&(this._element.style.height=t,this._element.style.width=e)},_getBottomOffset:function(){var t=this._options.offsetBottom;return this._options.bottomElement&&(t+=n.pageHeight()-n.offsetTop(this._options.bottomElement)),t}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Swipe","1",["Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.UI.Common_1"],function(t,e,n){"use strict";function i(){"function"==typeof arguments[1]&&(arguments[1]={onEnd:arguments[1]}),n.BaseUIComponent.apply(this,arguments)}return i._name="Swipe_1",i._optionDefinition={onEnd:["Function",void 0],onStart:["Function",void 0],onMove:["Function",void 0],minDist:["Number",void 0],maxDist:["Number",void 0],minDuration:["Number",void 0],maxDuration:["Number",void 0],axis:["String",void 0],storeGesture:["Boolean",!1],stopEvents:["Boolean",!0]},i.prototype={_supported:"ontouchstart"in document.documentElement,_init:function(){this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)};var e=document.body;t.observe(e,"touchstart",this._handlers.down),(this._options.storeGesture||this._options.onMove)&&t.observe(e,"touchmove",this._handlers.move),t.observe(e,"touchend",this._handlers.up),this._isOn=!1},_isMeOrParent:function(t,e){if(t){do{if(t===e)return!0;t=t.parentNode}while(t);return!1}},_pushGesture:function(t,e){this._options.storeGesture&&(this._gesture.push(t),this._time.push(e))},_onDown:function(e){1===e.changedTouches.length&&this._isMeOrParent(e.target,this._element)&&(this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0],this._isOn=!0,this._target=e.target,this._t0=+new Date,this._p0=[e.pageX,e.pageY],this._options.storeGesture&&(this._gesture=[],this._time=[]),this._pushGesture(this._p0,0),this._options.onStart&&this._options.onStart({event:e,element:this._element,instance:this,position:this._p0,dt:0}))},_onMove:function(e){if(this._isOn&&1===e.changedTouches.length){this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0];var n=+new Date,i=n-this._t0,o=[e.pageX,e.pageY];this._pushGesture(o,i),this._options.onMove&&this._options.onMove({event:e,element:this._element,instance:this,position:o,dt:i})}},_onUp:function(e){if(this._isOn&&1===e.changedTouches.length){this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0],this._isOn=!1;var n=+new Date,i=[e.pageX,e.pageY],o=n-this._t0,r=[i[0]-this._p0[0],i[1]-this._p0[1]],s=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=Math.abs(r[0])>Math.abs(r[1])?"x":"y",l=this._options;l.minDist&&s<l.minDist||l.maxDist&&s>l.maxDist||l.minDuration&&o<l.minDuration||l.maxDuration&&o>l.maxDuration||l.axis&&a!==l.axis||this._options.onEnd&&this._options.onEnd({event:e,element:this._element,instance:this,gesture:this._gesture,time:this._time,axis:a,overallMovement:r,overallTime:o})}}},n.createUIComponent(i),i}),Ink.createModule("Ink.UI.Table","1",["Ink.Util.Url_1","Ink.UI.Pagination_1","Ink.Net.Ajax_1","Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.String_1","Ink.Util.Json_1"],function(t,e,n,i,o,r,s,a,l,h,u){"use strict";function c(t){return!isNaN(t)&&g.test(t)?parseInt(t,10):isNaN(t)?t:parseFloat(t)}function d(t,e){return t===e?0:t>e?1:-1}function p(t,e){var n=c(s.textContent(t)),i=c(s.textContent(e));return typeof n==typeof i?d(n,i):"number"==typeof n?1:-1}function f(t){if("undefined"!=typeof Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function m(){i.BaseUIComponent.apply(this,arguments)}function _(t){return t}var g=/\d/g;return m._name="Table_1",m._optionDefinition={pageSize:["Integer",null],caretUpClass:["String","fa fa-caret-up"],caretDownClass:["String","fa fa-caret-down"],endpoint:["String",null],createEndpointUrl:["Function",null],createEndpointURL:["Function",null],getDataFromEndPoint:["Function",null],getDataFromEndpoint:["Function",null],processJSONRows:["Function",function(t){return"number"==typeof t.length?t:t.rows||null}],processJSONRow:["Function",_],processJSONField:["Function",_],processJSONHeaders:["Function",function(t){return t.fields}],processJSONTotalRows:["Function",function(t){return t.totalRows||t.length}],getSortKey:["Function",null],pagination:["Element",null],allowResetSorting:["Boolean",!1],visibleFields:["String",null],tdClassNames:["Object",{}],paginationOptions:["Object",null]},m.prototype={_validate:function(){if("table"!==this._element.nodeName.toLowerCase())throw new Error("[Ink.UI.Table] :: The element is not a table")},_init:function(){this._options.createEndpointUrl&&(this._options.createEndpointURL=this._options.createEndpointUrl),this._options.getDataFromEndPoint&&(this._options.getDataFromEndpoint=this._options.getDataFromEndpoint),this._markupMode=!(this._options.endpoint||this._options.createEndpointURL),this._options.visibleFields&&(this._options.visibleFields=this._options.visibleFields.toString().split(/[, ]+/g)),this._thead=this._element.tHead||this._element.createTHead(),this._headers=a.select("th",this._thead),this._handlers={thClick:null},this._originalFields=[],this._sortableFields={},this._originalData=this._data=[],this._pagination=null,this._totalRows=0,this._handlers.thClick=o.on(this._element,"click",'thead th[data-sortable="true"]',Ink.bindMethod(this,"_onThClick")),this._markupMode?(this._resetSortOrder(),this._addHeadersClasses(),this._data=a.select("tbody tr",this._element),this._originalData=this._data.slice(0),this._totalRows=this._data.length,this._setPagination()):this._getData()},_addHeadersClasses:function(){for(var t,e,n=0,i=this._headers.length;i>n;n++)t=s.textContent(this._headers[n]),e=this._options.tdClassNames[t],e&&r.addClassName(this._headers[n],e)},_onThClick:function(t){var e=o.element(t),n=void 0!==this._options.pageSize;o.stop(t);var i=l.keyValue(e,this._headers,!0),r=i!==!1&&void 0!==this._sortableFields[i];if(r)if(!this._markupMode&&n)this._invertSortOrder(i,!1);else{"desc"===this._sortableFields[i]&&this._options.allowResetSorting?(this._setSortOrderOfColumn(i,null),this._data=this._originalData.slice(0)):this._invertSortOrder(i,!0);var s=a.select("tbody",this._element)[0];l.each(this._data,function(t){s.appendChild(t)}),this._pagination&&(this._pagination.setCurrent(0),this._paginate(1))}},_invertSortOrder:function(t,e){for(var n="asc"===this._sortableFields[t],i=0,o=this._headers.length;o>i;i++)this._setSortOrderOfColumn(i,null);this._setSortOrderOfColumn(t,!n),e?(this._sort(t),n&&this._data.reverse()):this._getData()},_setSortOrderOfColumn:function(t,e){var n=this._headers[t],i=[""],o="none";e===!0?(i=['<i class="',this._options.caretUpClass,'"></i>'],o="asc"):e===!1&&(i=['<i class="',this._options.caretDownClass,'"></i>'],o="desc"),this._sortableFields[t]=o,n.innerHTML=s.textContent(n)+i.join("")},_paginate:function(t){if(this._pagination){var e=this._options.pageSize,n=(t-1)*e,i=n+e;l.each(this._data,function(t,e){e>=n&&i>e?r.removeClassName(t,"hide-all"):r.addClassName(t,"hide-all")})}},_registerFieldNames:function(t){this._originalFields=[],l.forEach(t,Ink.bind(function(t){this._fieldIsVisible(t)&&this._originalFields.push(t)},this))},_fieldIsVisible:function(t){return!this._options.visibleFields||-1!==this._options.visibleFields.indexOf(t)},_sort:function(t){function e(e){return i.call(o,{columnIndex:t,columnName:n,data:s.textContent(e),element:e})}var n=s.textContent(this._headers[t]),i=this._options.getSortKey;i&&(i="function"==typeof i[n]?i[n]:"function"==typeof i?i:null);var o=this;this._data.sort(function(n,o){var r=Ink.ss("td",n)[t],s=Ink.ss("td",o)[t];return i?d(e(r),e(s)):p(r,s,t)})},_createHeadersFromJson:function(t){if(this._registerFieldNames(f(t)),!this._thead.children.length)for(var e,n=this._thead.insertRow(0),i=0,o=t.length;o>i;i++)this._fieldIsVisible(t[i])&&(e=s.create("th"),e=this._createSingleHeaderFromJson(t[i],e),n.appendChild(e),this._headers.push(e))},_createSingleHeaderFromJson:function(t,e){return t.sortable&&e.setAttribute("data-sortable","true"),t.label&&s.setTextContent(e,t.label),e},_resetSortOrder:function(){for(var t=0,e=this._headers.length;e>t;t++){var n=s.data(this._headers[t]);n.sortable&&"true"===n.sortable.toString()&&(this._sortableFields[t]="none")}},_createRowsFromJSON:function(t){var e=a.select("tbody",this._element)[0];e?s.setHTML(e,""):(e=document.createElement("tbody"),this._element.appendChild(e)),this._data=[];var n;for(var i in t)t.hasOwnProperty(i)&&(n=this._options.processJSONRow(t[i]),this._createSingleRowFromJson(e,n,i));this._originalData=this._data.slice(0)},_createSingleRowFromJson:function(t,e,n){var i=document.createElement("tr");t.appendChild(i);for(var o in e)e.hasOwnProperty(o)&&this._createFieldFromJson(i,e[o],o,n);this._data.push(i)},_createFieldFromJson:function(t,e,n,i){if(this._fieldIsVisible(n)){var o,s=this._options.processJSONField[n]||this._options.processJSONField;o="function"==typeof s?s(e,n,i):e;var a=this._elOrFieldData(o),l=this._options.tdClassNames[n];l&&r.addClassName(a,l),t.appendChild(a)}},_elOrFieldData:function(t){if(i.isDOMElement(t))return t;var e="string"==typeof t,n="number"==typeof t,o=s.create("td");if(e&&/^\s*?</.test(t))s.setHTML(o,t);else{if(!e&&!n)throw new Error("Ink.UI.Table Unknown result from processJSONField: "+t);s.setTextContent(o,t)}return o},setEndpoint:function(t,e){this._markupMode||(this._options.endpoint=t,this._pagination&&this._pagination.setCurrent(e?parseInt(e,10):0))},_setPagination:function(){if(null!=this._options.pageSize){var t=this._options.pagination;if(t instanceof e)return void(this._pagination=t);t||(t=s.create("nav",{className:"ink-navigation",insertAfter:this._element}),s.create("ul",{className:"pagination",insertBottom:t}));var n=Ink.extendObj({totalItemCount:this._totalRows,itemsPerPage:this._options.pageSize,onChange:Ink.bind(function(t,e){this._paginate(e+1)},this)},this._options.paginationOptions||{});this._pagination=new e(t,n),this._paginate(1)}},_getData:function(){var t=this._getSortOrder()||null,e=null;this._options.pageSize&&(e={size:this._options.pageSize,page:this._pagination?this._pagination.getCurrent()+1:1}),this._getDataViaAjax(this._getUrl(t,e))},_getSortOrder:function(){var t;for(t in this._sortableFields)if(this._sortableFields.hasOwnProperty(t)&&"none"!==this._sortableFields[t])break;return t?{field:this._originalFields[t]||s.textContent(this._headers[t]),order:this._sortableFields[t]}:null},_getUrl:function(e,n){var i=this._options.createEndpointURL||function(e,n,i){return e=t.parseUrl(e),e.query=e.query||{},n&&(e.query.sortOrder=n.order,e.query.sortField=n.field),i&&(e.query.rows_per_page=i.size,e.query.page=i.page),t.format(e)},o=i(this._options.endpoint,e,n);if("string"!=typeof o)throw new TypeError("Ink.UI.Table_1: createEndpointUrl did not return a string!");return o},_getDataViaAjax:function(t){var e=Ink.bind(function(t){this._onAjaxSuccess(t)},this);this._options.getDataFromEndpoint?this._options.getDataFromEndpoint(t,e):new n(t,{method:"GET",contentType:"application/json",sanitizeJSON:!0,onSuccess:Ink.bind(function(t){200===t.status&&e(u.parse(t.responseText))},this)})},_onAjaxSuccess:function(t){var e=null!=this._options.pageSize,n=this._options.processJSONRows(t);if(this._headers=a.select("th",this._thead),0===this._headers.length){var i=this._options.processJSONHeaders(t);if(!i||!i.length||!i[0])throw new Error("Ink.UI.Table: processJSONHeaders option must return an array of objects!");this._createHeadersFromJson(i),this._resetSortOrder(),this._addHeadersClasses()}else this._resetSortOrder();this._createRowsFromJSON(n),this._totalRows=this._rowLength=n.length,e&&(this._totalRows=this._options.processJSONTotalRows(t),this._setPagination())}},i.createUIComponent(m),m}),Ink.createModule("Ink.UI.Tabs","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}return r._name="Tabs_1",r._optionDefinition={preventUrlChange:["Boolean",!1],active:["String",void 0],onBeforeChange:["Function",void 0],onChange:["Function",void 0],menuSelector:["String",".tabs-nav"],contentSelector:["String",".tabs-content"],triggerEventsOnLoad:["Boolean",!0]},r.prototype={_init:function(){return this._menu=o.select(this._options.menuSelector,this._element)[0],this._menu?(this._initializeDom(),e.on(this._menu,"click","a",Ink.bindMethod(this,"_onTabClickedGeneric")),void this._setFirstActive()):void Ink.warn('Ink.UI.Tabs: An element selected by "'+this._options.menuSelector+'" needs to exist inside the element!')},_initializeDom:function(){for(var t=o.select(this._options.contentSelector,this._element),e=0;e<t.length;e++)n.addClassName(t[e],"hide-all")},_setFirstActive:function(){var t=window.location.hash,e=this._findLinkByHref(t)||this._options.active&&this._findLinkByHref(this._options.active)||o.select(".active a",this._menu)[0]||o.select("a",this._menu)[0];e&&(this._firstTime=!0,this._changeTab(e,this._options.triggerEventsOnLoad),this._firstTime=!1)},_changeTab:function(t,e){e&&"undefined"!=typeof this._options.onBeforeChange&&this._options.onBeforeChange(this);var i=t.getAttribute("href"),r=i.substr(i.indexOf("#"));window.location.hash===r||this._options.preventUrlChange||this._firstTime||(window.location.hash=r);for(var s=o.select("> li.active",this._menu),a=0,l=s.length;l>a;a++)s[a]!==t&&n.removeClassName(s[a],"active");return this._activeMenuTab&&(n.removeClassName(this._activeMenuTab,"active"),n.removeClassName(this._activeSection,"active"),n.addClassName(this._activeSection,"hide-all")),this._activeMenuLink=t,this._activeMenuTab=this._activeMenuLink.parentNode,this._activeSection=o.select(r,this._element)[0],this._activeSection?(n.addClassName(this._activeMenuTab,"active"),n.addClassName(this._activeSection,"active"),n.removeClassName(this._activeSection,"hide-all"),void(e&&"undefined"!=typeof this._options.onChange&&this._options.onChange(this))):void(this._activeMenuLink=this._activeMenuTab=this._activeSection=null)},_onTabClickedGeneric:function(t){t.preventDefault();var e=!n.hasClassName(t.currentTarget,"ink-disabled")&&t.currentTarget!==this._activeMenuLink;e&&this._onTabClicked(t.currentTarget)},_onTabClicked:function(t){var e=t.getAttribute("href")||"";e=e.substr(e.indexOf("#")),e&&null!==Ink.i(this._dehashify(e))&&t!==this._activeMenuLink&&this.changeTab(t)},_hashify:function(t){return t?0===t.indexOf("#")?t:"#"+t:""},_dehashify:function(t){return t?(""+t).replace(/^#/,""):""},_findLinkByHref:function(t){if(!t)return null;if(1===t.nodeType){if(i.isAncestorOf(t,this._element))return null;for(var e=o.select("a",this._menu),n=t.getAttribute("id"),r=0,s=e.length;s>r;r++){if(e[r]===t||i.isAncestorOf(t,e[r]))return e[r];if(n&&n===this._dehashify(e[r].hash))return e[r]}return null}return t=this._hashify(t),o.select('a[href$="'+t+'"]',this._menu)[0]||null},changeTab:function(t){t=this._findLinkByHref(t),t&&!n.hasClassName(t,"ink-disabled")&&this._changeTab(t,!0)},disable:function(t){n.addClassName(this._findLinkByHref(t),"ink-disabled")},enable:function(t){n.removeClassName(this._findLinkByHref(t),"ink-disabled")},activeTab:function(){return this._activeSection.getAttribute("id")},activeMenuLink:function(){return this._activeMenuLink},activeSection:function(){return this._activeSection},destroy:t.destroyComponent},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.TagField","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.UI.Droppable_1","Ink.Util.Array_1","Ink.Dom.Selector_1","Ink.UI.Common_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(){a.BaseUIComponent.apply(this,arguments)}var h=13,u=8,c=function(t){return!!t},d=1==="s,".split(/,/g).length,p=function(){var t,e=String.prototype.split,n=void 0===/()??/.exec("")[1];return t=function(t,i,o){if("[object RegExp]"!==Object.prototype.toString.call(i))return e.call(t,i,o);var r,s,a,l,h=[],u=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),c=0,i=new RegExp(i.source,u+"g");for(t+="",n||(r=new RegExp("^"+i.source+"$(?!\\s)",u)),o=void 0===o?-1>>>0:o>>>0;(s=i.exec(t))&&(a=s.index+s[0].length,!(a>c&&(h.push(t.slice(c,s.index)),!n&&s.length>1&&s[0].replace(r,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(s[t]=void 0)}),s.length>1&&s.index<t.length&&Array.prototype.push.apply(h,s.slice(1)),l=s[0].length,c=a,h.length>=o)));)i.lastIndex===s.index&&i.lastIndex++;return c===t.length?(l||!i.test(""))&&h.push(""):h.push(t.slice(c)),h.length>o?h.slice(0,o):h}}();return l._name="TagField_1",l._optionDefinition={tags:["String",[]],tagQuery:["Object",null],tagQueryAsync:["Object",null],allowRepeated:["Boolean",!1],maxTags:["Integer",-1],outSeparator:["String",","],separator:["String",/[,; ]+/g],autoSplit:["Boolean",!0]},l.prototype={_init:function(){var i=this._options;"string"==typeof i.separator&&(i.separator=new RegExp(i.separator,"g")),"string"==typeof i.tags&&(i.tags=this._readInput(i.tags)),n.addClassName(this._element,"hide-all"),this._viewElm=t.create("div",{className:"ink-tagfield",insertAfter:this._element}),this._input=t.create("input",{type:"text",className:"new-tag-input",insertBottom:this._viewElm});var o=[].concat(i.tags,this._tagsFromMarkup(this._element));this._tags=[],r.each(o,Ink.bindMethod(this,"_addTag")),e.observe(this._input,"keyup",Ink.bindEvent(this._onKeyUp,this)),e.observe(this._input,"change",Ink.bindEvent(this._onKeyUp,this)),e.observe(this._input,"keydown",Ink.bindEvent(this._onKeyDown,this)),e.observe(this._input,"blur",Ink.bindEvent(this._onBlur,this)),e.observe(this._viewElm,"click",Ink.bindEvent(this._refocus,this))},destroy:function(){t.remove(this._viewElm),n.removeClassName(this._element,"hide-all")},_tagsFromMarkup:function(e){var n=e.tagName.toLowerCase();if("input"===n)return this._readInput(e.value);if("select"===n)return r.map(e.getElementsByTagName("option"),function(e){return t.textContent(e)});throw new Error("Cannot read tags from a "+n+" tag. Unknown tag")},_tagsToMarkup:function(e,n){var i=n.tagName.toLowerCase();if("input"===i)this._options.separator&&(n.value=e.join(this._options.outSeparator));else{if("select"!==i)throw new Error("TagField: Cannot read tags from a "+i+" tag. Unknown tag");n.innerHTML="",r.each(e,function(e){var i=t.create("option",{selected:"selected"});t.setTextContent(i,e),n.appendChild(i)})}},_addTag:function(n){if(!(-1!==this._options.maxTags&&this._tags.length>=this._options.maxTags)){if(!this._options.allowRepeated&&r.inArray(n,this._tags,n)||!n)return!1;var i=t.create("span",{className:"ink-tag",setTextContent:n+" "}),o=t.create("span",{className:"remove fa fa-times",insertBottom:i});e.observe(o,"click",Ink.bindEvent(this._removeTag,this,null));var s=document.createTextNode(" ");this._tags.push(n),this._viewElm.insertBefore(i,this._input),this._viewElm.insertBefore(s,this._input),this._tagsToMarkup(this._tags,this._element)}},_readInput:function(t){return this._options.separator?r.filter(t.split(this._options.separator),c):[t]},_onKeyUp:function(){if(this._options.autoSplit){var t;if(t=d?p(this._input.value,this._options.separator):this._input.value.split(this._options.separator),!(t.length<=1)){var e=t[t.length-1];t=t.splice(0,t.length-1),t=r.filter(t,c),r.each(t,Ink.bind(this._addTag,this)),this._input.value=e}}},_onKeyDown:function(t){return t.which===h?this._onEnterKeyDown(t):t.which===u?this._onBackspaceKeyDown():void(this._removeConfirm&&this._unsetRemovingVisual(this._tags.length-1))},_onBackspaceKeyDown:function(){this._input.value||(this._removeConfirm?(this._unsetRemovingVisual(this._tags.length-1),this._removeTag(this._tags.length-1),this._removeConfirm=null):this._setRemovingVisual(this._tags.length-1))},_onEnterKeyDown:function(t){var n=this._input.value;n&&(this._addTag(n),this._input.value=""),e.stopDefault(t)},_onBlur:function(){this._addTag(this._input.value),this._input.value=""},_setRemovingVisual:function(t){var i=this._viewElm.children[t];i&&(n.addClassName(i,"tag-deleting"),this._removeRemovingVisualTimeout=setTimeout(Ink.bindMethod(this,"_unsetRemovingVisual",t),4e3),e.observe(this._input,"blur",Ink.bindMethod(this,"_unsetRemovingVisual",t)),this._removeConfirm=!0)},_unsetRemovingVisual:function(t){var e=this._viewElm.children[t];e&&(n.removeClassName(e,"tag-deleting"),clearTimeout(this._removeRemovingVisualTimeout)),this._removeConfirm=null},_removeTag:function(n){var i;if("object"==typeof n){var o=e.element(n).parentNode;i=t.parentIndexOf(this._viewElm,o)}else"number"==typeof n&&(i=n);this._tags=r.remove(this._tags,i,1),t.remove(this._viewElm.children[i]),this._tagsToMarkup(this._tags,this._element)},_refocus:function(t){return this._input.focus(),e.stop(t),!1}},a.createUIComponent(l),l}),Ink.createModule("Ink.UI.Toggle","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}return s._name="Toggle_1",s._optionDefinition={target:["Elements"],triggerEvent:["String","click"],closeOnClick:["Boolean",null],canToggleAnAncestor:["Boolean",!1],isAccordion:["Boolean",!1],initialState:["Boolean",null],classNameOn:["String","show-all"],classNameOff:["String","hide-all"],closeOnInsideClick:["String","a[href]"],onChangeState:["Function",null]},s.prototype={_init:function(){var e,o;if(this._targets=t.elsOrSelector(this._options.target),null===this._options.closeOnClick&&(this._options.closeOnClick=this._options.isAccordion||this._options.canToggleAnAncestor?!1:!0),null===this._options.initialState&&(this._options.initialState=n.hasClassName(this._targets[0],this._options.classNameOn)),"show-all"!==this._options.classNameOn||"hide-all"!==this._options.classNameOff)for(e=0,o=this._targets.length;o>e;e++)n.removeClassName(this._targets[e],"show-all"),n.removeClassName(this._targets[e],"hide-all");if(this._options.isAccordion&&(this._accordionContainer=i.findUpwardsByClass(this._element,"accordion"),this._accordionContainer||Ink.warn('Ink.UI.Toggle_1: This toggle has the isAccordion option set to `true`, but is not a descendant of an element with the class "accordion"! Because of this, it won\'t be able to find other toggles in the same accordion and cooperate with them.')),this._constructing=!0,this._bindEvents(),null!==this._options.initialState)this.setState(this._options.initialState,!0);else{var r="none"!==n.getStyle(this._targets[0],"display");this.setState(r,!0)}for(e=0,o=this._targets.length;o>e;e++)this._targets[e].style.display&&(this._targets[e].style.display="");this._element.setAttribute("data-is-toggle-trigger","true"),this._constructing=!1},_bindEvents:function(){if(this._options.triggerEvent&&e.on(this._element,this._options.triggerEvent,Ink.bind(this._onTriggerEvent,this)),this._options.closeOnClick&&e.observe(document,"click",Ink.bind(this._onOutsideClick,this)),this._options.closeOnInsideClick){var t=this._options.closeOnInsideClick;"true"===t.toString()&&(t="*"),e.observeMulti(this._targets,"click",Ink.bind(function(n){i.findUpwardsBySelector(e.element(n),t)&&this.setState(!1,!0)},this))}},_onTriggerEvent:function(t){var n=e.element(t),o=r.some(this._targets,function(t){return t===n||i.isAncestorOf(t,n)});if(this._options.canToggleAnAncestor||!o){var s=this.getState();this.setState(!s,!0),!s&&this._firstTime&&(this._firstTime=!1),e.stopDefault(t)}},_updateAccordion:function(){if(this._accordionContainer&&this.getState()!==!1)for(var t=o.select("[data-is-toggle-trigger]",this._accordionContainer),e=0;e<t.length;e++){var n=s.getInstance(t[e]);n&&n!==this&&n.getState()===!0&&n.setState(!1,!0)}},_onOutsideClick:function(t){var n,o=e.element(t);if(i.isAncestorOf(document.documentElement,o)){var s=r.some(this._targets,function(t){return i.isAncestorOf(t,o)||t===o});if(this._element!==o&&!i.isAncestorOf(this._element,o)&&!s){if((n=Ink.ss(".ink-shade")).length)for(var a=n.length,l=0;a>l;l++)if(i.isAncestorOf(n[l],o)&&i.isAncestorOf(n[l],this._element))return;this.setState(!1,!0)}}},setState:function(t,e){if(t!==this.getState()||this._constructing){var i,o;if(this._group&&t)for(i=0,o=this._group.length;o>i;i++)this._group[i].getState()===!0&&this._group[i].setState(!1,!0);if(e&&"function"==typeof this._options.onChangeState){var r=this._options.onChangeState.call(this,t,{element:this._element});if(r===!1)return!1}for(i=0,o=this._targets.length;o>i;i++)n.addRemoveClassName(this._targets[i],this._options.classNameOn,t),n.addRemoveClassName(this._targets[i],this._options.classNameOff,!t);n.addRemoveClassName(this._element,"active",t),this._accordionContainer&&this._updateAccordion()}},getState:function(){return n.hasClassName(this._element,"active")}},t.createUIComponent(s),s}),Ink.createModule("Ink.UI.Tooltip","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Dom.Css_1","Ink.Dom.Browser_1"],function(t,e,n,i,o,r){"use strict";function s(t,e){this._init(t,e||{})}function a(t,e){this._init(t,e)}var l,h,u;!function(){for(var t=document.createElement("DIV"),e=["transition","oTransition","msTransition","mozTransition","webkitTransition"],n=0;n<e.length;n++)if("undefined"!=typeof t.style[e[n]+"Duration"]){l=e[n]+"Duration",h=e[n]+"Property",u=e[n]+"TimingFunction";break}}();var c=document.getElementsByTagName("body"),d=c.length?c[0]:document.documentElement;return s.prototype={_init:function(t,e){var n;if(this.options=Ink.extendObj({where:"up",zIndex:1e4,left:10,top:10,spacing:8,forever:0,color:"",timeout:0,delay:0,template:null,templatefield:null,fade:.3,text:""},e||{}),"string"==typeof t)n=i.select(t);else{if("object"!=typeof t)throw"Element expected";n=[t]}this.tooltips=[];for(var o=0,r=n.length;r>o;o++)this.tooltips[o]=new a(this,n[o])},destroy:function(){o.each(this.tooltips,function(t){t._destroy()}),this.tooltips=null,this.options=null}},a.prototype={_oppositeDirections:{left:"right",right:"left",up:"down",down:"up"},_init:function(n,i){e.observe(i,"mouseover",Ink.bindEvent(this._onMouseOver,this)),e.observe(i,"focus",Ink.bindEvent(this._onMouseOver,this)),e.observe(i,"mouseout",Ink.bindEvent(this._onMouseOut,this)),e.observe(i,"blur",Ink.bindEvent(this._onMouseOut,this)),e.observe(i,"mousemove",Ink.bindEvent(this._onMouseMove,this)),this.root=n,this.element=i,this._delayTimeout=null,this.tooltip=null,t.registerInstance(this,this.element)},_makeTooltip:function(t){if(!this._getOpt("text")&&!this._getOpt("html")&&!n.hasAttribute(this.element,"title"))return!1;var i=this._createTooltipElement();this.tooltip&&this._removeTooltip(),this.tooltip=i,this._fadeInTooltipElement(i),this._placeTooltipElement(i,t),e.observe(i,"mouseover",Ink.bindEvent(this._onTooltipMouseOver,this));var o=this._getFloatOpt("timeout");o&&setTimeout(Ink.bind(function(){this.tooltip===i&&this._removeTooltip()},this),1e3*o)},_createTooltipElement:function(){var e,o,s=this._getOpt("template"),a=this._getOpt("templatefield");if(s){var l=document.createElement("DIV");if(l.innerHTML=t.elOrSelector(s,"options.template").outerHTML,e=l.firstChild,a){if(o=i.select(a,e),!o)throw"options.templatefield must be a valid selector within options.template";o=o[0]}else o=e}else e=document.createElement("DIV"),r.addClassName(e,"ink-tooltip"),r.addClassName(e,this._getOpt("color")),o=document.createElement("DIV"),r.addClassName(o,"content"),e.appendChild(o);return this._getOpt("html")?o.innerHTML=this._getOpt("html"):this._getOpt("text")?n.setTextContent(o,this._getOpt("text")):n.setTextContent(o,this.element.getAttribute("title")),e.style.display="block",e.style.position="absolute",e.style.zIndex=this._getIntOpt("zIndex"),e},_fadeInTooltipElement:function(t){var e=this._getFloatOpt("fade");l&&e&&(t.style.opacity="0",t.style[l]=e+"s",t.style[h]="opacity",t.style[u]="ease-in-out",setTimeout(function(){t.style.opacity="1"},0))},_placeTooltipElement:function(t,e){var i=this._getOpt("where");if(null!==e||"mousemove"!==i&&"mousefix"!==i||(i="up"),"mousemove"===i||"mousefix"===i){var o=e;this._setPos(o[0],o[1]),d.appendChild(t)}else if(i.match(/(up|down|left|right)/)){d.appendChild(t);var s=n.offset(this.element),a=s[0],l=s[1],h=n.elementWidth(this.element)/2-n.elementWidth(t)/2,u=n.elementHeight(this.element)/2-n.elementHeight(t)/2,c=this._getIntOpt("spacing"),p=n.elementDimensions(t),f=n.elementDimensions(this.element),m=n.scrollWidth()+n.viewportWidth(),_=n.scrollHeight()+n.viewportHeight();i=this._getWhereValueInsideViewport(i,{left:a-p[0],right:a+p[0],top:l+p[1],bottom:l+p[1]},{right:m,bottom:_}),"up"===i?(l-=p[1],l-=c,a+=h):"down"===i?(l+=f[1],l+=c,a+=h):"left"===i?(a-=p[0],a-=c,l+=u):"right"===i&&(a+=f[0],a+=c,l+=u);var g=null;i.match(/(up|down|left|right)/)&&(g=document.createElement("SPAN"),r.addClassName(g,"arrow"),r.addClassName(g,this._oppositeDirections[i]),t.appendChild(g));var v=a,y=l,b=y+p[1]-_,k=v+p[0]-m,C=0-v,I=0-y;b>0?(g&&(g.style.top=p[1]/2+b+"px"),y-=b):I>0?(g&&(g.style.top=p[1]/2-I+"px"),y+=I):k>0?(g&&(g.style.left=p[0]/2+k+"px"),v-=k):C>0&&(g&&(g.style.left=p[0]/2-C+"px"),v+=C),t.style.left=v+"px",t.style.top=y+"px"}},_getWhereValueInsideViewport:function(t,e,n){return"left"===t&&e.left<0?"right":"right"===t&&e.right>n.right?"left":"up"===t&&e.top<0?"down":"down"===t&&e.bottom>n.bottom?"up":t},_removeTooltip:function(){var t=this.tooltip;if(t){var e=Ink.bind(n.remove,{},t);"mousemove"!==this._getOpt("where")&&l?(t.style.opacity=0,setTimeout(e,1e3*this._getFloatOpt("fade"))):e(),this.tooltip=null}},_getOpt:function(t){var e=n.data(this.element)[n._camelCase("tip-"+t)];if(e)return e;var i=this.root.options[t];return"undefined"!=typeof i?i:void 0},_getIntOpt:function(t){return parseInt(this._getOpt(t),10)},_getFloatOpt:function(t){return parseFloat(this._getOpt(t),10)},_destroy:function(){this.tooltip&&n.remove(this.tooltip),this.root=null,this.element=null,this.tooltip=null},_onMouseOver:function(t){var e;e="mouseover"!==t.type?null:this._getMousePosition(t);var n=this._getFloatOpt("delay");n?this._delayTimeout=setTimeout(Ink.bind(function(){this.tooltip||this._makeTooltip(e),this._delayTimeout=null},this),1e3*n):this._makeTooltip(e)},_onMouseMove:function(t){if("mousemove"===this._getOpt("where")&&this.tooltip){var e=this._getMousePosition(t);this._setPos(e[0],e[1])}},_onMouseOut:function(){this._getIntOpt("forever")||this._removeTooltip(),this._delayTimeout&&(clearTimeout(this._delayTimeout),this._delayTimeout=null)},_onTooltipMouseOver:function(){this.tooltip&&this._removeTooltip()},_setPos:function(t,e){t+=this._getIntOpt("left"),e+=this._getIntOpt("top");var i=this._getPageXY();if(this.tooltip){var o=[n.elementWidth(this.tooltip),n.elementHeight(this.tooltip)],r=this._getScroll();o[0]+t-r[0]>=i[0]-20&&(t=t-o[0]-this._getIntOpt("left")-10),o[1]+e-r[1]>=i[1]-20&&(e=e-o[1]-this._getIntOpt("top")-10),this.tooltip.style.left=t+"px",this.tooltip.style.top=e+"px"}},_getPageXY:function(){var t=0,e=0;return"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(t=document.body.clientWidth,e=document.body.clientHeight),[parseInt(t,10),parseInt(e,10)]
},_getScroll:function(){var t=document.documentElement,e=document.body;return t&&(t.scrollLeft||t.scrollTop)?[t.scrollLeft,t.scrollTop]:e?[e.scrollLeft,e.scrollTop]:[0,0]},_getMousePosition:function(t){return[parseInt(e.pointerX(t),10),parseInt(e.pointerY(t),10)]}},s}),Ink.createModule("Ink.UI.TreeView","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}return s._name="TreeView_1",s._optionDefinition={node:["String","li"],children:["String","ul"],parentClass:["String","parent"],openNodeClass:["String","open"],openClass:["String","fa fa-minus-circle"],closedClass:["String","fa fa-plus-circle"],hideClass:["String","hide-all"],iconTag:["String","i"],stopDefault:["Boolean",!0]},s.prototype={_init:function(){this._handlers={click:Ink.bindEvent(this._onClick,this)},e.on(this._element,"click",this._options.node,this._handlers.click),r.each(Ink.ss(this._options.node,this._element),Ink.bind(function(t){if(this.isParent(t)){n.addClassName(t,this._options.parentClass);var e=this.isOpen(t);this._getIcon(t)||i.create(this._options.iconTag,{insertTop:t}),this._setNodeOpen(t,e)}},this))},_getIcon:function(t){return Ink.s("> "+this._options.iconTag,t)},isOpen:function(t){if(!this._getChild(t))throw new Error("not a node!");return"true"===t.getAttribute("data-open")||n.hasClassName(t,this._options.openNodeClass)},isParent:function(t){return n.hasClassName(t,this._options.parentClass)||null!=this._getChild(t)},_setNodeOpen:function(t,e){var i=this._getChild(t);if(i){n.setClassName(i,this._options.hideClass,!e);var o=this._getIcon(t);t.setAttribute("data-open",e);var r=e?this._options.openClass:this._options.closedClass,s=e?this._options.closedClass:this._options.openClass;n.removeClassName(o,s),n.addClassName(o,r),n.setClassName(t,this._options.openNodeClass,e)}else Ink.error("Ink.UI.TreeView: node",t,"is not a node!")},open:function(t){this._setNodeOpen(t,!0)},close:function(t){this._setNodeOpen(t,!1)},toggle:function(t){this.isOpen(t)?this.close(t):this.open(t)},_getChild:function(t){return o.select(this._options.children,t)[0]||null},_onClick:function(t){!this.isParent(t.currentTarget)||o.matchesSelector(t.target,this._options.node)||o.matchesSelector(t.target,this._options.children)||(this._options.stopDefault&&t.preventDefault(),this.toggle(t.currentTarget))}},t.createUIComponent(s),s}),Ink.createModule("Ink.UI.Upload","1",["Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Browser_1","Ink.UI.Common_1"],function(t,e,n,i){"use strict";var o=function(t){this.init(t)};o.prototype={init:function(t){this._options=Ink.extendObj({entry:void 0,maxDepth:10},t||{});try{this._read()}catch(e){Ink.error(e)}},_read:function(){if(!this._options.entry)return void Ink.error("You must specify the entry!");try{this._readDirectories()}catch(t){Ink.error(t)}},_readDirectories:function(){var t=[],e=!1,n=0,i=Ink.bind(function(o){var r=o.createReader();e=!0,r.readEntries(Ink.bind(function(o){if(o.length>0){for(var r=0,s=o.length;s>r;r++)t.push(o[r]),o[r].isDirectory&&(n=this.clearArray(o[r].fullPath.split("/")),n.shift(),n=n.length,n<=this._options.maxDepth&&i(o[r]));this._stopActivityTimeout&&clearTimeout(this._stopActivityTimeout),this._stopActivityTimeout=setTimeout(function(){e=!1},250)}o.length||(e=!1)},this),Ink.bind(function(t){this._options.readError(t,o)},this))},this);i(this._options.entry);var o,r=function(){return e?!1:(clearInterval(o),this._options.readComplete&&"function"==typeof this._options.readComplete&&this._options.readComplete(t),!0)};o=setInterval(Ink.bind(r,this),250)},clearArray:function(t){for(var e=t.length-1;e>=0;e--)("undefined"==typeof t[e]||null===t[e]||""===t[e])&&t.splice(e,1);return t}};var r={lists:[],items:[],create:function(t){var e;return t=String(t),this.lists.push({name:t}),e=this.lists.length-1},getItems:function(t){if(!t)return this.items;for(var e=[],n=0,i=this.items.length;i>n;n++)this.items[n].parentId===t&&e.push(this.items[n]);return e},purge:function(t,e){if("number"!=typeof t||isNaN(Number(t)))return!1;try{for(var n=this.items.length;n>=0;n--)this.items[n]&&t===this.items[n].parentId&&this.remove(this.items[n].parentId,this.items[n].pid);return e||this.lists.splice(t,1),!0}catch(i){return Ink.error("Purge: invalid id"),!1}},add:function(t,e,n){if(!this.lists[t])return!1;"object"!=typeof e&&(e=String(e));var i=parseInt(Math.round(1e5*Math.random())+""+Math.round(1e5*Math.random()),10);return n=n||0,this.items.push({parentId:t,item:e,priority:n||0,pid:i}),i},view:function(t,e){var n=this._searchByPid(t,e);return n===!1?!1:this.items[n]},remove:function(t,e){try{var n=this._searchByPid(t,e);return n===!1?!1:(this.items.splice(n,1),!0)}catch(i){return Ink.error("Remove: invalid id"),!1}},_searchByPid:function(t,e){if(!t&&"boolean"==typeof t||!e)return!1;if(t=parseInt(t,10),e=parseInt(e,10),isNaN(t)||isNaN(e))return!1;for(var n=0,i=this.items.length;i>n;n++)if(this.items[n].parentId===t&&this.items[n].pid===e)return n;return!1}},s=function(t){this.Upload=t,this.init()};s.prototype={init:function(){this._fileButton=this.Upload._options.fileButton,this._dropzone=this.Upload._options.dropzone,this._setDropEvent(),this._setFileButton()},_setDropEvent:function(){var t=this._dropzone;if(t)for(var e=0,n=t.length;n>e;e++)t[e].ondrop=Ink.bindEvent(this.Upload._dropEventHandler,this.Upload),t[e].ondragleave=Ink.bindEvent(this._onDragLeave,this),t[e].ondragend=Ink.bindEvent(this._onDragEndEventHandler,this),t[e].ondragdrop=Ink.bindEvent(this._onDragEndEventHandler,this),t[e].ondragenter=Ink.bindEvent(this._onDragEnterHandler,this),t[e].ondragover=Ink.bindEvent(this._onDragOverHandler,this)},_onDragEnterHandler:function(t){return t&&t.stopPropagation&&t.stopPropagation(),t&&t.preventDefault&&t.preventDefault(),t&&(t.returnValue=!1),this.Upload.publish("DragEnter",t),!1},_onDragOverHandler:function(t){return t?(t.preventDefault(),t.stopPropagation(),t.returnValue=!1,!0):!1},_onDragLeave:function(t){return this.Upload.publish("DragLeave",t)},_onDragEndEventHandler:function(t){return this.Upload.publish("DragEnd",t)},_setFileButton:function(){var e=this._fileButton;e&&t.observeMulti(e,"change",Ink.bindEvent(this._fileChangeHandler,this))},_fileChangeHandler:function(n){var i=t.element(n),o=i.files,r=e.findUpwardsByTag(i,"form");return o&&window.FormData&&"withCredentials"in new XMLHttpRequest?(this.Upload._addFilesToQueue(o),void(i.value="")):(r.parentNode.submit(),!1)}};var a=function(t){this.Queue=r,this.init(t),this._events={}};return a.prototype={init:function(t){if("string"==typeof t&&(t=e.data(i.elOrSelector(t,"1st argument"))),this._options=Ink.extendObj({dropzone:void 0,fileButton:void 0,fileFormName:"Ink_Filelist",endpoint:"",maxFilesize:300<<20,INVALID_FILE_NAME:void 0,extraData:{},useChunks:!1,chunkSize:4194304,minSizeToUseChunks:20971520,endpointChunk:"",endpointChunkCommit:"",foldersEnabled:!1,directoryMaxDepth:10},t||{}),this._queueId=r.create("Ink_UPLOAD"),this._queueRunning=!1,this._folders={},this._options.dropzone&&(this._options.dropzone=i.elsOrSelector(this._options.dropzone,"Ink.UI.Upload - dropzone")),this._options.fileButton&&(this._options.fileButton=i.elsOrSelector(this._options.fileButton,"Ink.UI.Upload - fileButton")),!this._options.dropzone&&!this._options.fileButton)throw new TypeError("Ink.UI.Upload: Specify a fileButton or a Dropzone!");new s(this)},_supportChunks:function(t){return this._options.useChunks&&"Blob"in window&&(new Blob).slice&&t>this._options.minSizeToUseChunks},_dropEventHandler:function(e){t.stop(e),this.publish("DropComplete",e.dataTransfer);var n=e.dataTransfer;if(!n||!n.files||!n.files.length)return!1;if(this._files=n.files,this._files=Array.prototype.slice.call(this._files||[],0),n.items&&n.items[0]&&n.items[0].webkitGetAsEntry){if(!this._options.foldersEnabled)return setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0);for(var i,o=[],r=e.dataTransfer.items.length-1;r>=0;r--)i=e.dataTransfer.items[r].webkitGetAsEntry(),i&&i.isDirectory&&(o.push(i),this._files[r].isDirectory=!0,this._files.splice(r,1));this._addFolderToQueue(o,Ink.bind(function(){setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0)},this))}else setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0);return!0},_addFolderToQueue:function(t,e){var n=[],i={};if(!t||!t.length)return e(),n;var r=function(t){for(var e=[],n=0,i=t.length;i>n;n++)t[n].isFile&&e.push(t[n]);return e},s=function(t,e){var i;return e=e||0,this._files[e]?"fileentry"!==this._files[e].constructor.name.toLowerCase()?s.apply(this,[t,++e]):void this._files[e].file(Ink.bind(function(n){i=this._files[e].fullPath,this._files[e]=n,this._files[e].hasParent=!0,this._files[e].fullPath||(this._files[e].fullPath=i),s.apply(this,[t,++e])},this),Ink.bind(function(){this._files.splice(e,1),s.apply(this,[t,e])},this)):(t(),n)},a=Ink.bind(function(l){return t[l]?void new o({entry:t[l],maxDepth:this._options.directoryMaxDepth,readComplete:Ink.bind(function(e){if(n=n.concat(r(e)),t[l]&&!(t[l].fullPath in this._folders)){this._folders[t[l].fullPath]={items:e,files:n,length:e.length,created:!1,root:!0};for(var o=0,s=e.length;s>o;o++)e[o].isFile||(e[o].fullPath in i?delete i[e[o].fullPath]:this._folders[e[o].fullPath]={created:!1,root:!1});a(++l)}},this),readError:Ink.bind(function(t,e){i[e.fullPath]={},i[e.fullPath].error=t},this)}):(this._files=this._files.concat(n),s.call(this,e),!1)},this);return a(0),n},_addFilesToQueue:function(t){for(var e,i,o,s=0,a=t.length;a>s;s++)e=t[s],e.isDirectory||null!==e&&(e.type||e.size%4096!==0||n.CHROME&&this._options.foldersEnabled)?e.size>this._options.maxFilesize?this.publish("MaxSizeFailure",e,this._options.maxFilesize):(i=parseInt(Math.round(1e5*Math.random())+""+Math.round(1e5*Math.random()),10),o={id:s,data:e,fileID:i,directory:e.isDirectory},r.add(this._queueId,o),this.publish("FileAddedToQueue",o)):this.publish("InvalidFile",e,"size");this._processQueue(!0),this._files=[]},_processQueue:function(t){if(this._queueRunning)return!1;this.running=0;var e,n=1,i=0,o=r.items.length;this._queueRunning=!0,this.interval=setInterval(Ink.bind(function(){if(r.items.length===i&&0===this.running&&(r.purge(this._queueId,!0),this._queueRunning=!1,clearInterval(this.interval),this.publish("QueueEnd",this._queueId,o)),e=r.getItems(this._queueId),this.running<n&&e[i]){if(e[i].canceled)for(var a=i;e[a]&&e[a].canceled;)i++,a++;else s.call(this,e[i].pid,e[i].item.data,e[i].item.fileID,e[i].item.directory,t),this.running++,i++;return!0}return!1},this),100);var s=function(t,e,n,i,o){var r={file:e,fileID:n,cb:Ink.bind(function(){this.running--},this)};o&&(i?r.cb():this._upload(r))};return!0},_upload:function(t){var e=t.file,n=new XMLHttpRequest,i=t.fileID;this.publish("BeforeUpload",e,this._options.extraData,i,n,this._supportChunks(e.size));var o=function(o){t.cb&&t.cb(),this.publish("OnProgress",{length:e.size,lengthComputable:!0,loaded:e.size,total:e.size},e,i),this.publish("EndUpload",e,i,o?{error:!0}:!0),this.publish("InvalidFile",e,"name"),n.abort()};if(this._options.INVALID_FILE_NAME&&this._options.INVALID_FILE_NAME instanceof RegExp&&this._options.INVALID_FILE_NAME.test(t.file.name))return void o.call(this);if(!e.lastModifiedDate&&!Ink.Dom.Browser.OPERA)return void o.call(this,!0);n.upload.onprogress=Ink.bind(this.publish,this,"OnProgress",e,i);var r,s;this._supportChunks(e.size)?e.size<=e.chunk_offset?(r=this._options.endpointChunkCommit,s="POST"):(r=this._options.endpointChunk,e.chunk_upload_id&&(r+="?upload_id="+e.chunk_upload_id),e.chunk_offset&&(r+="&offset="+e.chunk_offset),s="PUT"):(r=this._options.endpoint,s="POST"),n.open(s,r,!0),n.withCredentials=!0,n.setRequestHeader("x-requested-with","XMLHttpRequest"),this._supportChunks(e.size)&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var a,l=new FormData;if("Blob"in window&&"function"==typeof Blob?(a=new Blob([e],{type:e.type}),this._supportChunks(e.size)?(e.chunk_offset=e.chunk_offset||0,a=a.slice(e.chunk_offset,e.chunk_offset+this._options.chunkSize)):l.append(this._options.fileFormName,a,e.name)):l.append(this._options.fileFormName,e),this._supportChunks(e.size))l.append("upload_id",e.chunk_upload_id),l.append("path",e.upload_path);else for(var h in this._options.extraData)this._options.extraData.hasOwnProperty(h)&&l.append(h,this._options.extraData[h]);e.hasParent?this.publish("cbCreateFolder",e.parentID,e.fullPath,this._options.extraData,this._folders,e.rootPath,Ink.bind(function(){n.send(this._supportChunks(e.size)?e.size<=e.chunk_offset?"upload_id="+e.chunk_upload_id+"&path="+e.upload_path+"/"+e.name:a:l)},this)):n.send(this._supportChunks(e.size)?e.size<=e.chunk_offset?"upload_id="+e.chunk_upload_id+"&path="+e.upload_path+"/"+e.name:a:l),n.onload=Ink.bindEvent(function(){if(this._supportChunks(e.size)&&e.size>e.chunk_offset){if(n.response){var o=JSON.parse(n.response),r=e.chunk_offset&&o.offset!==e.chunk_offset+this._options.chunkSize&&e.size!==o.offset;r?(t.cb&&t.cb(),this.publish("ErrorUpload",e,i)):(e.chunk_upload_id=o.upload_id,e.chunk_offset=o.offset,e.chunk_expires=o.expires,this._upload(t))}else t.cb&&t.cb(),this.publish("ErrorUpload",e,i);return n=null}return t.cb&&t.cb(),n.responseText&&n.status<400?this.publish("EndUpload",e,i,n.responseText):this.publish("ErrorUpload",e,i),n=null},this),n.onerror=Ink.bindEvent(function(){t.cb&&t.cb(),this.publish("ErrorUpload",e,i)},this),n.onabort=Ink.bindEvent(function(){t.cb&&t.cb(),this.publish("AbortUpload",e,i,{abortAll:Ink.bind(this.abortAll,this),abortOne:Ink.bind(this.abortOne,this)})},this)},abortAll:function(){return this._queueRunning?(clearInterval(this.interval),this._queueRunning=!1,r.purge(this._queueId,!0),!0):!1},abortOne:function(t,e){for(var n,i=r.getItems(0),o=0,s=i.length;s>o;o++)if(i[o].item.fileID===t)return n={id:i[o].item.fileID,name:i[o].item.data.name,size:i[o].item.data.size,hasParent:i[o].item.data.hasParent},r.remove(0,i[o].pid),e&&e(n),!0;return!1},subscribe:function(t,e){return this._events[t]||(this._events[t]=[]),this._events[t].push(e),this._events[t]},publish:function(t){var e=this._events[t],n=Array.prototype.slice.call(arguments||[],0);if(e)for(var i=0,o=e.length;o>i;i++)try{e[i].apply(this,n.splice(1,n.length))}catch(r){Ink.error(t+": "+r)}}},a}),Ink.createModule("Ink.UI.Animate",1,["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(t,e,n){"use strict";function i(){t.BaseUIComponent.apply(this,arguments)}var o=function(t){return"animationName"in t.style?"animation":"webkitAnimationName"in t.style?"webkitAnimation":null}(document.createElement("div")),r={animation:"animationend",webkitAnimation:"webkitAnimationEnd"}[o];return i._name="Animate_1",i._optionDefinition={trigger:["Element",null],duration:["String","slow"],animation:["String"],removeClass:["Boolean",!0],onEnd:["Function",function(){}]},i.prototype._init=function(){isNaN(parseInt(this._options.duration,10))||(this._options.duration=parseInt(this._options.duration,10)),this._options.trigger?e.observe(this._options.trigger,"click",Ink.bind(function(){this.animate()},this)):this.animate()},i.prototype.animate=function(){i.animate(this._element,this._options.animation,this._options)},Ink.extendObj(i,{_animationPrefix:o,animationSupported:!!o,animationEndEventName:r,animate:function(e,s,a){function l(t){t.target===e&&t.animationName===s&&(a.onEnd&&a.onEnd(t),a.removeClass&&n.removeClassName(e,s),"string"==typeof a.duration&&n.removeClassName(e,a.duration),e.removeEventListener(r,l,!1))}return e=t.elOrSelector(e),"number"==typeof a||"string"==typeof a?a={duration:a}:a||(a={}),"function"==typeof arguments[3]&&(a.onEnd=arguments[3]),"number"!=typeof a.duration&&"string"!=typeof a.duration&&(a.duration=400),i.animationSupported?("number"==typeof a.duration?e.style[o+"Duration"]=a.duration+"ms":"string"==typeof a.duration&&n.addClassName(e,a.duration),n.addClassName(e,["animated",s]),void e.addEventListener(r,l,!1)):void(a.onEnd&&setTimeout(function(){a.onEnd(null)},0))}}),t.createUIComponent(i),i}),Ink.createModule("Ink.UI.Carousel","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.UI.Pagination_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";function s(t,e,n){return Math.min(n,Math.max(e,t))}function a(){t.BaseUIComponent.apply(this,arguments)}function l(t,e){t.style.transitionProperty=t.style.oTransitionProperty=t.style.msTransitionProperty=t.style.mozTransitionProperty=t.style.webkitTransitionProperty=e}var h=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/30)};return a._name="Carousel_1",a._optionDefinition={autoAdvance:["Integer",0],axis:["String","x"],initialPage:["Integer",0],spaceAfterLastSlide:["Boolean",!0],keyboardSupport:["Boolean",!1],pagination:["String",null],onChange:["Function",null],onInit:["Function",function(){}],swipe:["Boolean",!0]},a.prototype={_init:function(){this._handlers={paginationChange:Ink.bindMethod(this,"_onPaginationChange"),windowResize:e.throttle(Ink.bindMethod(this,"refit"),200)},e.observe(window,"resize",this._handlers.windowResize),this._isY="y"===this._options.axis;var t=Ink.s("ul.stage",this._element);t.style.width="100%",this._ulEl=t,i.removeTextNodeChildren(t),null==this._options.pagination&&(this._currentPage=this._options.initialPage),this.refit(),this._isY&&(this._ulEl.style.whiteSpace="normal"),this._options.swipe&&(e.observe(this._element,"touchstart",Ink.bindMethod(this,"_onTouchStart")),e.observe(this._element,"touchmove",Ink.bindMethod(this,"_onTouchMove")),e.observe(this._element,"touchend",Ink.bindMethod(this,"_onTouchEnd"))),this._setUpPagination(),this._setUpAutoAdvance(),this._options.onInit.call(this,this)},refit:function(){var t=this._isY,e=function(e,n){return e?n?i.outerDimensions(e)[t?0:1]:i.outerDimensions(e)[t?1:0]:0};this._liEls=Ink.ss("li.slide",this._ulEl);var n=this._liEls.length,o=this._ulEl.getBoundingClientRect();this._ctnLength=t?o.bottom-o.top:o.right-o.left,this._elLength=e(this._liEls[0]),this._slidesPerPage=Math.floor(this._ctnLength/this._elLength)||1,isFinite(this._slidesPerPage)||(this._slidesPerPage=1);var r=Math.ceil(n/this._slidesPerPage),a=this._numPages!==r;this._numPages=r,this._deltaLength=this._slidesPerPage*this._elLength,this._IE7(),this._pagination&&a&&this._pagination.setSize(this._numPages),this.setPage(s(this.getPage(),0,this._numPages-1))},_setUpPagination:function(){this._options.pagination?(t.isDOMElement(this._options.pagination)||"string"==typeof this._options.pagination?this._pagination=new o(this._options.pagination,{size:this._numPages,onChange:this._handlers.paginationChange}):(this._pagination=this._options.pagination,this._pagination.setOnChange(this._handlers.paginationChange),this._pagination.setSize(this._numPages)),this._pagination.setCurrent(this._options.initialPage||0)):this._currentPage=this._options.initialPage||0},_setUpAutoAdvance:function(){this._options.autoAdvance&&this.autoAdvance(this._options.autoAdvance)},autoAdvance:function(t){function e(){n.nextPage(!0),n._autoAdvanceSto=setTimeout(e,t)}if(!this._autoAdvanceSto){var n=this;this._autoAdvanceSto=setTimeout(e,t)}},stopAutoAdvance:function(){this._autoAdvanceSto&&(clearTimeout(this._autoAdvanceSto),this._autoAdvanceSto=null)},_IE7:function(){if(r.IE&&""+r.version.split(".")[0]=="7")for(var t=Ink.ss("li.slide",this._ulEl),e=function(e,i){t[n].style[e]=i},n=0,i=t.length;i>n;n++)e("position","absolute"),e(this._isY?"top":"left",n*this._elLength+"px")},_onTouchStart:function(t){if(!(t.touches.length>1)){this._swipeData={x:e.pointerX(t),y:e.pointerY(t)};var n=this._ulEl.getBoundingClientRect();this._swipeData.firstUlPos=n[this._isY?"top":"left"],this._swipeData.inUlX=this._swipeData.x-n.left,this._swipeData.inUlY=this._swipeData.y-n.top,l(this._ulEl,"none"),this._touchMoveIsFirstTouchMove=!0}},_onTouchMove:function(t){if(!(t.touches.length>1)){var n=e.pointerX(t),i=e.pointerY(t),o=this._swipeData.y-i,r=this._swipeData.x-n;if(this._touchMoveIsFirstTouchMove){var s=Math.abs(o),a=Math.abs(r);this._touchMoveIsFirstTouchMove=void 0,this._scrolling=this._isY?a>s:s>a,this._scrolling||this._onAnimationFrame()}!this._scrolling&&this._swipeData&&(e.stopDefault(t),this._swipeData.pointerDelta=this._isY?o:r,this._swipeData.pointerPos=this._isY?i:n)}},_onAnimationFrame:function(){var t=this._swipeData;if(t&&!this._scrolling&&!this._touchMoveIsFirstTouchMove){var e,n=this._element.getBoundingClientRect();e=this._isY?t.pointerPos-t.inUlY-n.top:t.pointerPos-t.inUlX-n.left,this._ulEl.style[this._isY?"top":"left"]=e+"px",h(Ink.bindMethod(this,"_onAnimationFrame"))}},_onTouchEnd:function(t){if(this._swipeData&&this._swipeData.pointerPos&&!this._scrolling&&!this._touchMoveIsFirstTouchMove){var n=.1,i=this._swipeData.pointerDelta,o=this.getPage(),r=i/this._elLength/this._slidesPerPage;Math.abs(r)>n&&(o+=Math[0>i?"floor":"ceil"](r)),o=s(o,0,this._numPages-1),isNaN(o)||this.setPage(o),e.stopDefault(t)}l(this._ulEl,null),this._swipeData=null,this._touchMoveIsFirstTouchMove=void 0,this._scrolling=void 0},_onPaginationChange:function(t){this._setPage(t.getCurrent())},getPage:function(){return this._pagination?this._pagination.getCurrent():this._currentPage||0},getPagination:function(){return this._pagination||null},setPage:function(t,e){return e&&(t%=this._numPages,0>t&&(t=this._numPages-t)),t=s(t,0,this._numPages-1),t===this._currentPage?void(this._swipeData&&this._setPage(t)):void(this._pagination?this._pagination.setCurrent(t):this._setPage(t))},_setPage:function(t){var e=t*this._deltaLength,n=t===this._numPages-1;if(!this._options.spaceAfterLastSlide&&n&&t>0){var i=this._liEls.length-t*this._slidesPerPage;i<this._slidesPerPage&&(e=(t-1)*this._deltaLength+i*this._elLength)}this._ulEl.style[this._isY?"top":"left"]=["-",e/this._ctnLength*100,"%"].join(""),this._options.onChange&&this._options.onChange.call(this,t),this._currentPage=t},nextPage:function(t){this.setPage(this.getPage()+1,t)},previousPage:function(t){this.setPage(this.getPage()-1,t)},getSlidesPerPage:function(){return this._slidesPerPage},getTotalPages:function(){return this._numPages},getStageElm:function(){return this._ulEl},getSlidesList:function(){return this._liEls},getTotalSlides:function(){return this.getSlidesList().length}},t.createUIComponent(a),a}),Ink.createModule("Ink.UI.Close","1",["Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e){"use strict";function n(){t.observe(document.body,"click",function(n){var i=t.element(n);if(i=e.findUpwardsByClass(i,"ink-close")||e.findUpwardsByClass(i,"ink-dismiss")){var o=e.findUpwardsByClass(i,"ink-alert")||e.findUpwardsByClass(i,"ink-alert-block")||i;o&&(t.stop(n),e.remove(o))}})}return n._name="Close_1",n}),Ink.createModule("Ink.UI.Common","1",["Ink.Dom.Element_1","Ink.Net.Ajax_1","Ink.Dom.Css_1","Ink.Dom.Selector_1","Ink.Util.Url_1"],function(t,e,n,i,o){"use strict";function r(){this&&this!==window&&"function"==typeof this.constructor&&Ink.warn("You called a method on an incorrectly instantiated "+this.constructor._name+" component. Check the warnings above to see what went wrong.")}function s(t,e){for(var n in t)if(t.hasOwnProperty(n)){if("constructor"===n)continue;"function"==typeof e[n]&&(e[n]=r)}}function a(t,e){var n=this.constructor,i=n._name;if(!this||this===window)throw new Error('Use "new InkComponent()" instead of "InkComponent()"');if(this&&!(this instanceof a))throw new Error("You forgot to call Ink.UI.Common.createUIComponent() on this module!");if(!t&&!n._componentOptions.elementIsOptional)return void Ink.error(new Error(i+': You need to pass an element or a selector as the first argument to "new '+i+'()"'));this._element=f.elsOrSelector(t,i+': An element with the selector "'+t+'" was not found!')[0],this._element||n._componentOptions.elementIsOptional||(o=!1,Ink.error(new Error(t+' does not match an element on the page. You need to pass a valid selector to "new '+i+'".'))),this._options=f.options(i,n._optionDefinition,e,this._element);var o=a._validateInstance(this)===!0;if(o&&"function"==typeof this._init)try{this._init.apply(this,arguments)}catch(r){o=!1,Ink.error(r)}o?this._element&&f.registerInstance(this):a._stubInstance(this,n,i)}var l={},h=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},u="WeakMap"in window,c=u?new WeakMap:null,d=[],p={get:function(t){return u?c.get(t):d[t.getAttribute("__InkInstance")]},set:function(t,e){u?c.set(t,e):t.setAttribute("__InkInstance",d.push(e)-1)}},f={Layouts:{TINY:"tiny",SMALL:"small",MEDIUM:"medium",LARGE:"large",XLARGE:"xlarge"},isDOMElement:t.isDOMElement,isInteger:function(t){return"number"==typeof t&&t%1===0},elOrSelector:function(t,e){if(!f.isDOMElement(t)){var n=i.select(t);return 0===n.length?(Ink.warn(e+" must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself."),null):n[0]}return t},elsOrSelector:function(t,e,n){var o;if("string"==typeof t?o=i.select(t):f.isDOMElement(t)?o=[t]:t&&"object"==typeof t&&"number"==typeof t.length&&(o=t),o&&o.length)return o;if(n)throw new TypeError(e+" must either be a DOM Element, an Array of elements, or a selector expression!\nThe script element must also be after the DOM Element itself.");return[]},options:function(e,n,i,o){function r(t){return a=n[t][0],u=a.toLowerCase(),c=2===n[t].length?n[t][1]:l,a||g("Ink.UI.Common.options: Always specify a type!"),u in f._coerce_funcs||g("Ink.UI.Common.options: "+n[t][0]+" is not a valid type. Use one of "+h(f._coerce_funcs).join(", ")),(!n[t].length||n[t].length>2)&&g('the "defaults" argument must be an object mapping option names to [typestring, optional] arrays.'),s=t in p?f._coerce_from_string(u,p[t],t,e):l,s!==l?f._options_validate(s,u)?s:(v("("+t+" option) Invalid "+u+" "+_(s)),c):t in i?i[t]:c!==l?c:void g("Option "+t+" is required!")}"string"!=typeof e&&(o=i,i=n,n=e,e=""),i=i||{};var s,a,u,c,d={},p=o?t.data(o):{},m=function(t){return e&&(t=e+': "'+(""+t).replace(/"/,'\\"')+'"'),t},_=function(t){return'"'+(""+t).replace(/"/,'\\"')+'"'},g=function(t){throw new Error(m(t))},v=function(t){Ink.error(m(t)+". Ignoring option.")};for(var y in n)n.hasOwnProperty(y)&&(d[y]=r(y));return d},_coerce_from_string:function(t,e,n,i){return t in f._coerce_funcs?f._coerce_funcs[t](e,n,i):e},_options_validate:function(t,e){return e in f._options_validate_types?f._options_validate_types[e].call(f,t):!1},_coerce_funcs:function(){var t={element:function(t){return f.elOrSelector(t,"")},elements:function(t){return f.elsOrSelector(t,"",!1)},object:function(t){return t},number:function(t){return parseFloat(t)},"boolean":function(t){return!("false"===t||""===t||null===t)},string:function(t){return t},"function":function(t,e,n){return Ink.error(n+': You cannot specify the option "'+e+"\" through data-attributes because it's a function"),l}};return t["float"]=t.integer=t.number,t}(),_options_validate_types:function(){var t={string:function(t){return"string"==typeof t},number:function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)},integer:function(t){return t===Math.round(t)},element:function(t){return f.isDOMElement(t)},elements:function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&t.length},"boolean":function(t){return"boolean"==typeof t},object:function(){return!0}};return t["float"]=t.number,t}(),clone:function(t){try{return JSON.parse(JSON.stringify(t))}catch(e){throw new Error("Given object cannot have loops!")}},childIndex:t.parentIndexOf,ajaxJSON:function(t,n,i){new e(t,{evalJS:"force",method:"POST",parameters:n,onSuccess:function(t){try{if(t=t.responseJSON,"ok"!==t.status)throw"server error: "+t.message;i(null,t)}catch(e){i(e)}},onFailure:function(){i("communication failure")}})},currentLayout:function(){var t,e,o,r,s,a=i.select("#ink-layout-detector")[0];if(!a){a=document.createElement("div"),a.id="ink-layout-detector";for(o in f.Layouts)f.Layouts.hasOwnProperty(o)&&(r=f.Layouts[o],s=document.createElement("div"),s.className="show-"+r+" hide-all",s.setAttribute("data-ink-layout",r),a.appendChild(s));document.body.appendChild(a)}for(t=0,e=a.children.length;e>t;++t)if(s=a.children[t],"block"===n.getStyle(s,"display"))return s.getAttribute("data-ink-layout");return"large"},hashSet:function(t){if("object"!=typeof t)throw new TypeError("o should be an object!");var e=o.getAnchorString();e=Ink.extendObj(e,t),window.location.hash=o.genQueryString("",e).substring(1)},cleanChildren:function(e){if(!f.isDOMElement(e))throw new Error("Please provide a valid DOMElement");t.clear(e)},storeIdAndClasses:function(t,e){if(!f.isDOMElement(t))throw"Please provide a valid Element as first parameter";var n=t.id;n&&(e._id=n);var i=t.className;i&&(e._classes=i)},restoreIdAndClasses:function(t,e){if(!f.isDOMElement(t))throw"Please provide a valid Element as first parameter";e._id&&t.id!==e._id&&(t.id=e._id),e._classes&&-1===t.className.indexOf(e._classes)&&(t.className?t.className+=" "+e._classes:t.className=e._classes),e._instanceId&&!t.getAttribute("data-instance")&&t.setAttribute("data-instance",e._instanceId)},_warnDoubleInstantiation:function(t,e){function n(t){return(t.constructor&&t.constructor._name||t._name||"").replace(/_.*?$/,"")}var i=f.getInstance(t);if(""!==n(e)&&i){var o=n(e);if(o){for(var r=0,s=i.length;s>r;r++)if(o===n(i[r]))return Ink.warn("Creating more than one "+o+"for the same element.","(Was creating a "+o+" on:",t,")."),!1;return!0}}},registerInstance:function(t,e){if(t){if(e||(e=t._element),!f.isDOMElement(e))throw new TypeError("Ink.UI.Common.registerInstance: The element passed in is not a DOM element!");if(f._warnDoubleInstantiation(e,t)===!1)return!1;var n=p.get(e);return n||(n=[],p.set(e,n)),n.push(t),!0}},unregisterInstance:function(t){if(t&&t._element)for(var e=p.get(t._element),n=0,i=e.length;i>n;n++)e[n]===t&&e.splice(n,1)},getInstance:function(t,e){var n=t;if(t=f.elOrSelector(t),!f.isDOMElement(t))return Ink.warn("Ink.UI.Common: getInstance called on non-element ("+n+")"),[];var i=p.get(t);if(i||(i=[]),"function"!=typeof e)return i;for(var o=0,r=i.length;r>o;o++)if(i[o]instanceof e)return i[o];return null},getInstanceFromSelector:function(t){return f.getInstance(t)},getInstanceIds:function(){if(d.length>0)return d;var t=[];for(var e in c)c.hasOwnProperty(e)&&t.push(e);return t},getInstances:function(){if(d.length>0)return d;var t=[];for(var e in c)c.hasOwnProperty(e)&&t.push(c[e]);return t},destroyComponent:function(){f.unregisterInstance(this),this._element.parentNode.removeChild(this._element)}};return a._validateInstance=function(t){var e;if("function"!=typeof t._validate)return!0;try{e=t._validate()}catch(n){e=n}return e instanceof Error?(t._validationError=e,!1):!0},a._stubInstance=function(t,e,n){s(e.prototype,t),s(a.prototype,t),Ink.warn(n+" was not correctly created. "+(t._validationError||""))},a.getInstance=function(t){return t=f.elOrSelector(t),f.getInstance(t,this)},Ink.extendObj(a.prototype,{getOption:function(t){return!this.constructor||t in this.constructor._optionDefinition?this._options[t]:void Ink.error('"'+t+'" is not an option for '+this.constructor._name)},setOption:function(t,e){return!this.constructor||t in this.constructor._optionDefinition?void(this._options[t]=e):void Ink.error('"'+t+" is not an option for "+this.constructor._name)},getElement:function(){return this._element}}),f.BaseUIComponent=a,f.createUIComponent=function(t,e){function n(t,e){if(!t)throw new Error("Ink.UI_1.createUIComponent: "+e)}function i(e,i,o){var r=t[e];n("undefined"!=typeof r,t+" doesn't have a \""+e+'" property. '+o),n(i&&typeof r===i,"typeof "+t+"."+e+' is not "'+i+'". '+o)}t._componentOptions=e||{},n("function"==typeof t,"constructor argument is not a function!"),i("_name","string","This property is used for error messages. Set it to the full module path and version (Ink.My.Module_1)."),i("_optionDefinition","object","This property contains the option names, types and defaults. See Ink.UI.Common.options() for reference.");var o=t.prototype;t.prototype="function"==typeof Object.create?Object.create(a.prototype):function(){function t(){}return t.prototype=a.prototype,new t}(),Ink.extendObj(t.prototype,o),t.prototype.constructor=t,Ink.extendObj(t,a)},f}),Ink.createModule("Ink.UI.DatePicker","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.Date_1","Ink.Util.I18n_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(t,e,n){return t>n&&(t=n),e>t&&(t=e),t}function h(t){var e=t.split("-");return c(+e[0],+e[1]-1,+e[2])}function u(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function c(t,e,n){return{_year:t,_month:e,_day:n}}function d(t){return{_year:t.getFullYear(),_month:t.getMonth(),_day:t.getDate()}
}function p(t){return 10*Math.floor(t/10)}function f(){t.BaseUIComponent.apply(this,arguments)}var m=new a({pt_PT:{"datepicker.clean":"Limpar","datepicker.close":"Fechar","datepicker.format":"dd-mm-yyyy","datepicker.of":" de ","datepicker.next_button":"\xbb","datepicker.prev_button":"\xab","datepicker.months":{1:"Janeiro",2:"Fevereiro",3:"Mar\xe7o",4:"Abril",5:"Maio",6:"Junho",7:"Julho",8:"Agosto",9:"Setembro",10:"Outubro",11:"Novembro",12:"Dezembro"},"datepicker.week_days":{0:"Domingo",1:"Segunda-feira",2:"Ter\xe7a-feira",3:"Quarta-feira",4:"Quinta-feira",5:"Sexta-feira",6:"S\xe1bado"}},en_US:{"datepicker.clean":"Clear","datepicker.close":"Close","datepicker.format":"dd-mm-yyyy","datepicker.of":" of ","datepicker.next_button":"\xbb","datepicker.prev_button":"\xab","datepicker.months":{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},"datepicker.week_days":{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}}},"en_US");return f._name="DatePicker_1",f._optionDefinition={autoOpen:["Boolean",!1],pickerField:["Element",null],containerElement:["Element",null],cssClass:["String","ink-calendar bottom"],dateRange:["String",null],displayInSelect:["Boolean",!1],dayField:["Element",null],monthField:["Element",null],yearField:["Element",null],format:["String","yyyy-mm-dd"],onFocus:["Boolean",!0],onMonthSelected:["Function",null],onSetDate:["Function",null],onYearSelected:["Function",null],position:["String","right"],showClean:["Boolean",!0],showClose:["Boolean",!0],shy:["Boolean",!0],startDate:["String",null],startWeekDay:["Number",1],validDayFn:["Function",null],validMonthFn:["Function",null],validYearFn:["Function",null],nextValidDateFn:["Function",null],prevValidDateFn:["Function",null],yearRange:["String",null],lang:["String",null],month:["Object",null],wDay:["Object",null],nextLinkText:["String",null],prevLinkText:["String",null],ofText:["String",null],cleanText:["String",null],closeText:["String",null]},f.prototype={_init:function(){this.i18n=m.clone(),this._options.lang&&this.i18n.lang(this._options.lang);var t=this._options.lang||m.lang(),e={};e[t]={},this._options.month&&(e[t]["datepicker.months"]=this._options.month),this._options.wDay&&(e[t]["datepicker.week_days"]=this._options.wDay),this._options.nextLinkText&&(e[t]["datepicker.next_button"]=this._options.nextLinkText),this._options.prevLinkText&&(e[t]["datepicker.prev_button"]=this._options.prevLinkText),this._options.ofText&&(e[t]["datepicker.of"]=this._options.ofText),this._options.cleanText&&(e[t]["datepicker.clean"]=this._options.cleanText),this._options.closeText&&(e[t]["datepicker.close"]=this._options.closeText),u(e[t]).length&&this.i18n.append(e),this._options.format=this._dateParsers[this._options.format]||this._options.format,this._hoverPicker=!1,this._picker=this._options.pickerField||null,this._setMinMax(this._options.dateRange||this._options.yearRange),this.setDate(this._options.startDate?this._options.startDate:this._element&&this._element.value?this._element.value:new Date),(this._options.startWeekDay<0||this._options.startWeekDay>6)&&(Ink.warn('Ink.UI.DatePicker_1: option "startWeekDay" must be between 0 (sunday) and 6 (saturday)'),this._options.startWeekDay=l(this._options.startWeekDay,0,6)),Ink.extendObj(this._options,this._lang||{}),this._render(),this._listenToContainerObjectEvents()},_validate:function(){if(this._options.displayInSelect&&!(this._options.dayField&&this._options.monthField&&this._options.yearField))throw new Error("Ink.UI.DatePicker: displayInSelect option enabled.Please specify dayField, monthField and yearField selectors.")},_render:function(){this._containerObject=document.createElement("div"),this._containerObject.className=this._options.cssClass+" ink-datepicker-calendar hide-all",this._renderSuperTopBar();var e=document.createElement("div");e.className="ink-calendar-top",this._monthDescContainer=document.createElement("div"),this._monthDescContainer.className="ink-calendar-month_desc",this._monthPrev=document.createElement("div"),this._monthPrev.className="ink-calendar-prev",this._monthPrev.appendChild(i.create("a",{href:"#prev",className:"change_month_prev",setHTML:this.i18n.text("datepicker.prev_button")})),this._monthNext=document.createElement("div"),this._monthNext.className="ink-calendar-next",this._monthNext.appendChild(i.create("a",{href:"#next",className:"change_month_next",setHTML:this.i18n.text("datepicker.next_button")})),e.appendChild(this._monthPrev),e.appendChild(this._monthDescContainer),e.appendChild(this._monthNext),this._monthContainer=document.createElement("div"),this._monthContainer.className="ink-calendar-month",this._containerObject.appendChild(e),this._containerObject.appendChild(this._monthContainer),this._monthSelector=this._renderMonthSelector(),this._containerObject.appendChild(this._monthSelector),this._yearSelector=document.createElement("ul"),this._yearSelector.className="ink-calendar-year-selector",this._containerObject.appendChild(this._yearSelector),(!this._options.onFocus||this._options.displayInSelect)&&(this._picker=this._options.pickerField?t.elOrSelector(this._options.pickerField,"pickerField"):i.create("a",{href:"#open_cal",setHTML:"open",insertBottom:this._element.parentNode,className:"ink-datepicker-picker-field"})),this._appendDatePickerToDom(),this._renderMonth(),this._monthChanger=i.create("a",{href:"#monthchanger",className:"ink-calendar-link-month",setTextContent:this.i18n.getKey("datepicker.months")[this._month+1]}),this._ofText=i.create("span",{className:"ink-calendar-of-text",setTextContent:this.i18n.text("datepicker.of")}),this._yearChanger=i.create("a",{href:"#yearchanger",className:"ink-calendar-link-year",setTextContent:this._year}),this._monthDescContainer.appendChild(this._monthChanger),this._monthDescContainer.appendChild(this._ofText),this._monthDescContainer.appendChild(this._yearChanger),this._options.inline?this.show():this._addOpenCloseEvents(),this._addDateChangeHandlersToInputs()},_addDateChangeHandlersToInputs:function(){var t=this._element;this._options.displayInSelect&&(t=[this._options.dayField,this._options.monthField,this._options.yearField]),e.observeMulti(t,"change",Ink.bindEvent(function(){this._updateDate(),this._showDefaultView(),this.setDate(),this._inline||this._hoverPicker||this._hide(!0)},this))},show:function(){this._updateDate(),this._renderMonth(),n.removeClassName(this._containerObject,"hide-all")},_addOpenCloseEvents:function(){var t=this._picker||this._element;e.observe(t,"click",Ink.bindEvent(function(t){e.stop(t),this.show()},this)),this._options.autoOpen&&this.show(),this._options.displayInSelect||e.observe(t,"blur",Ink.bindEvent(function(){this._hoverPicker||this._hide(!0)},this)),this._options.shy&&e.observe(document,"click",Ink.bindEvent(function(t){for(var n=e.element(t),o=[this._options.dayField,this._options.monthField,this._options.yearField,this._picker,this._element],r=0,s=o.length;s>r;r++)if(o[r]&&i.descendantOf(o[r],n))return;this._hide(!0)},this))},_renderMonthSelector:function(){var t=document.createElement("ul");t.className="ink-calendar-month-selector";for(var e=document.createElement("ul"),n=1;12>=n;n++)e.appendChild(this._renderMonthButton(n)),n%4===0&&(t.appendChild(e),e=document.createElement("ul"));return t},_renderMonthButton:function(t){var e=document.createElement("li");return e.appendChild(i.create("a",{"data-cal-month":t,setTextContent:this.i18n.getKey("datepicker.months")[t].substring(0,3)})),e},_appendDatePickerToDom:function(){if(this._options.containerElement){var e=t.elOrSelector(this._options.containerElement);e.appendChild(this._containerObject)}var n=o.matchesSelector(this._element.parentNode,".ink-form .control-group .control, .ink-form .control-group .control > *");n?(this._wrapper=this._element.parentNode,this._wrapperIsControl=!0):(this._wrapper=i.create("div",{className:"ink-datepicker-wrapper"}),i.wrap(this._element,this._wrapper)),i.insertAfter(this._containerObject,this._element)},_renderSuperTopBar:function(){this._options.showClose&&this._options.showClean&&(this._superTopBar=document.createElement("div"),this._superTopBar.className="ink-calendar-top-options",this._options.showClean&&this._superTopBar.appendChild(i.create("a",{className:"clean",setHTML:this.i18n.text("datepicker.clean")})),this._options.showClose&&this._superTopBar.appendChild(i.create("a",{className:"close",setHTML:this.i18n.text("datepicker.close")})),this._containerObject.appendChild(this._superTopBar))},_listenToContainerObjectEvents:function(){e.observe(this._containerObject,"mouseover",Ink.bindEvent(function(t){e.stop(t),this._hoverPicker=!0},this)),e.observe(this._containerObject,"mouseout",Ink.bindEvent(function(t){e.stop(t),this._hoverPicker=!1},this)),e.observe(this._containerObject,"click",Ink.bindEvent(this._onClick,this))},_onClick:function(t){var i=e.element(t);return n.hasClassName(i,"ink-calendar-off")?(e.stopDefault(t),null):(e.stop(t),this._onRelativeChangerClick(i),this._onAbsoluteChangerClick(i),n.hasClassName(i,"ink-calendar-link-month")?this._showMonthSelector():n.hasClassName(i,"ink-calendar-link-year")?this._showYearSelector():n.hasClassName(i,"clean")?this._clean():n.hasClassName(i,"close")&&this._hide(!1),void this._updateDescription())},_onRelativeChangerClick:function(t){var e={change_year_next:1,change_year_prev:-1},n={change_month_next:1,change_month_prev:-1};t.className in n?this._updateCal(n[t.className]):t.className in e&&this._showYearSelector(e[t.className])},_onAbsoluteChangerClick:function(t){var e=i.data(t);Number(e.calDay)?(this.setDate(new Date(this._year,this._month,e.calDay)),this._options.shy?this._hide():this._updateCal()):Number(e.calMonth)?(this._month=Number(e.calMonth)-1,this._showDefaultView(),this._updateCal()):Number(e.calYear)&&this._changeYear(Number(e.calYear))},_changeYear:function(t){t=+t,isNaN(t)||(this._year=t,"function"==typeof this._options.onYearSelected&&this._options.onYearSelected(this,{year:this._year}),this._showMonthSelector())},_clean:function(){this._options.displayInSelect?(this._options.yearField.selectedIndex=0,this._options.monthField.selectedIndex=0,this._options.dayField.selectedIndex=0):this._element.value=""},_hide:function(t){t=void 0===t?!0:t,(t===!1||t&&this._options.shy)&&n.addClassName(this._containerObject,"hide-all")},_setMinMax:function(t){function e(){n._min=i,n._max=o}var n=this,i={_year:-Number.MAX_VALUE,_month:0,_day:1},o={_year:Number.MAX_VALUE,_month:11,_day:31};if(!t)return e();var s=t.split(":"),a=/^(\d{4})((\-)(\d{1,2})((\-)(\d{1,2}))?)?$/;r.each([{name:"_min",date:s[0],noLim:i},{name:"_max",date:s[1],noLim:o}],Ink.bind(function(t){var e=t.noLim;if("NOW"===t.date.toUpperCase()){var n=new Date;e=d(n)}else"EVER"===t.date.toUpperCase()?e=t.noLim:a.test(t.date)&&(e=h(t.date),e._month=l(e._month,0,11),e._day=l(e._day,1,this._daysInMonth(e._year,e._month+1)));this[t.name]=e},this));var u=-1!==this._dateCmp(this._max,this._min);u||e()},_fitDateToRange:function(t){return this._isValidDate(t)||(t=d(new Date)),-1===this._dateCmp(t,this._min)?Ink.extendObj({},this._min):1===this._dateCmp(t,this._max)?Ink.extendObj({},this._max):Ink.extendObj({},t)},_dateWithinRange:function(t){return arguments.length||(t=this),!this._dateAboveMax(t)&&!this._dateBelowMin(t)},_dateAboveMax:function(t){return 1===this._dateCmp(t,this._max)},_dateBelowMin:function(t){return-1===this._dateCmp(t,this._min)},_dateCmp:function(t,e){return this._dateCmpUntil(t,e,"_day")},_dateCmpUntil:function(t,e,n){var i=["_year","_month","_day"],o=-1;do{if(o++,t[i[o]]>e[i[o]])return 1;if(t[i[o]]<e[i[o]])return-1}while(i[o]!==n&&void 0!==t[i[o+1]]&&void 0!==e[i[o+1]]);return 0},_showDefaultView:function(){this._yearSelector.style.display="none",this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._getPrevMonth()||(this._monthPrev.childNodes[0].className="action_inactive"),this._getNextMonth()||(this._monthNext.childNodes[0].className="action_inactive"),this._monthContainer.style.display="block"},_updateDate:function(){var t;!this._options.displayInSelect&&this._element.value?t=this._parseDate(this._element.value):this._options.displayInSelect&&(t={_year:this._options.yearField[this._options.yearField.selectedIndex].value,_month:this._options.monthField[this._options.monthField.selectedIndex].value-1,_day:this._options.dayField[this._options.dayField.selectedIndex].value}),t&&(t=this._fitDateToRange(t),this._year=t._year,this._month=t._month,this._day=t._day),this._setDate(),this._updateDescription(),this._renderMonth()},_updateDescription:function(){i.setTextContent(this._monthChanger,this.i18n.getKey("datepicker.months")[this._month+1]),i.setTextContent(this._ofText,this.i18n.text("datepicker.of")),i.setTextContent(this._yearChanger,this._year)},_showYearSelector:function(t){this._incrementViewingYear(t);var e=this._year-this._year%10,n=e-1;i.setHTML(this._yearSelector,"");var o=i.create("ul");if(this._yearSelector.appendChild(o),n>this._min._year){var r=i.create("li");r.appendChild(i.create("a",{href:"#year_prev",className:"change_year_prev",setHTML:this.i18n.text("datepicker.prev_button")})),o.appendChild(r)}else o.appendChild(i.create("li",{setHTML:"&nbsp;"}));for(var s=1;11>s;s++)s%4===0&&(o=i.create("ul"),this._yearSelector.appendChild(o)),n=e+s-1,o.appendChild(this._getYearButton(n));if(n<this._max._year){var a=i.create("li");a.appendChild(i.create("a",{href:"#year_next",className:"change_year_next",setHTML:this.i18n.text("datepicker.next_button")})),o.appendChild(a)}else o.appendChild(i.create("li",{setHTML:"&nbsp;"}));this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._monthSelector.style.display="none",this._monthContainer.style.display="none",this._yearSelector.style.display="block"},_incrementViewingYear:function(t){if(t){var e=+this._year+10*t;e-=e%10,e>this._max._year||e+9<this._min._year||(this._year=+this._year+10*t)}},_getYearButton:function(t){var e="";this._acceptableYear({_year:t})?t===this._year&&(e="ink-calendar-on"):e="ink-calendar-off";var n=i.create("li");return n.appendChild(i.create("a",{href:"#","data-cal-year":t,className:e,setTextContent:t})),n},_showMonthSelector:function(){this._yearSelector.style.display="none",this._monthContainer.style.display="none",this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._addMonthClassNames(),this._monthSelector.style.display="block"},_parseDate:function(t){var e=s.set(this._options.format,t);return e?d(e):null},_isValidDate:function(t){var e=/^\d{4}$/,n=/^\d{1,2}$/;return e.test(t._year)&&n.test(t._month)&&n.test(t._day)&&+t._month+1>=1&&+t._month+1<=12&&+t._day>=1&&+t._day<=this._daysInMonth(t._year,t._month+1)},_isDate:function(t,e){try{if("undefined"==typeof t)return!1;var n=s.set(t,e);if(n&&this._isValidDate(d(n)))return!0}catch(i){}return!1},_acceptableDay:function(t){return this._acceptableDateComponent(t,"validDayFn")},_acceptableMonth:function(t){return this._acceptableDateComponent(t,"validMonthFn")},_acceptableYear:function(t){return this._acceptableDateComponent(t,"validYearFn")},_acceptableDateComponent:function(t,e){return this._options[e]?this._callUserCallbackBool(this._options[e],t):this._dateWithinRange(t)},_writeDateInFormat:function(){return s.get(this._options.format,this.getDate())},setDate:function(t){if(t&&"function"==typeof t.getDate&&(t=[t.getFullYear(),t.getMonth()+1,t.getDate()].join("-")),/\d{4}-\d{1,2}-\d{1,2}/.test(t)){var e=t.split("-");this._year=+e[0],this._month=+e[1]-1,this._day=+e[2]}this._setDate()},getDate:function(){if(!this._day)throw"Ink.UI.DatePicker: Still picking a date. Cannot getDate now!";return new Date(this._year,this._month,this._day)},_setDate:function(t){if(t){var e=i.data(t);this._day=+e.calDay||this._day,this._options.onSetDate&&this._options.onSetDate(this,{date:this.getDate()})}var n=this._fitDateToRange(this);this._year=n._year,this._month=n._month,this._day=n._day,this._options.displayInSelect?(this._options.dayField.value=this._day,this._options.monthField.value=this._month+1,this._options.yearField.value=this._year):this._element.value=this._writeDateInFormat()},_updateCal:function(t){"function"==typeof this._options.onMonthSelected&&this._options.onMonthSelected(this,{year:this._year,month:this._month}),t&&null===this._updateMonth(t)||this._renderMonth()},_daysInMonth:function(t,e){var n={2:t%400===0||t%4===0&&t%100!==0?29:28,4:30,6:30,9:30,11:30};return n[e]||31},_updateMonth:function(t){var e;return t>0?e=this._getNextMonth():0>t&&(e=this._getPrevMonth()),e?(this._year=e._year,this._month=e._month,void(this._day=e._day)):null},_getNextMonth:function(t){return this._tryLeap(t,"Month","next",function(t){return t._month+=1,t._month>11&&(t._month=0,t._year+=1),t})},_getPrevMonth:function(t){return this._tryLeap(t,"Month","prev",function(t){return t._month-=1,t._month<0&&(t._month=11,t._year-=1),t})},_getPrevYear:function(t){return this._tryLeap(t,"Year","prev",function(t){return t._year-=1,t})},_getNextYear:function(t){return this._tryLeap(t,"Year","next",function(t){return t._year+=1,t})},_tryLeap:function(t,e,n,i){t=t||{_year:this._year,_month:this._month,_day:this._day};var o="prev"===n?"_min":"_max",r=this[o];if(0===this._dateCmpUntil(t,r,e))return null;var s=this._options[n+"ValidDateFn"];if(s)return this._callUserCallbackDate(s,t);t=i(t);var a=this._daysInMonth(t._year,t._month+1);return t._day>a&&(t._day=a),t=this._fitDateToRange(t),this["_acceptable"+e](t)?t:null},_getNextDecade:function(t){t=t||{_year:this._year,_month:this._month,_day:this._day};var e=this._getCurrentDecade(t);return e+10>this._max._year?null:e+10},_getPrevDecade:function(t){t=t||{_year:this._year,_month:this._month,_day:this._day};var e=this._getCurrentDecade(t);return p(e-10)<p(this._min._year)?null:e-10},_getCurrentDecade:function(t){return t=t?t._year||t:this._year,p(this._year)},_callUserCallbackBase:function(t,e){return t.call(this,e._year,e._month+1,e._day)},_callUserCallbackBool:function(t,e){return!!this._callUserCallbackBase(t,e)},_callUserCallbackDate:function(t,e){var n=this._callUserCallbackBase(t,e);return n?d(n):null},_dateParsers:{"yyyy-mm-dd":"Y-m-d","yyyy/mm/dd":"Y/m/d","yy-mm-dd":"y-m-d","yy/mm/dd":"y/m/d","dd-mm-yyyy":"d-m-Y","dd/mm/yyyy":"d/m/Y","dd-mm-yy":"d-m-y","dd/mm/yy":"d/m/y","mm/dd/yyyy":"m/d/Y","mm-dd-yyyy":"m-d-Y"},_renderMonth:function(){var t=this._month,e=this._year;this._showDefaultView(),i.setHTML(this._monthContainer,""),this._monthContainer.appendChild(this._getMonthCalendarHeader(this._options.startWeekDay)),this._monthContainer.appendChild(this._getDayButtons(e,t))},_getFirstDayIndex:function(t,e){var n=new Date(t,e,1).getDay(),i=this._options.startWeekDay||0,o=n-i;return o%=7,0>o&&(o+=7),o},_getDayButtons:function(t,e){var n=this._daysInMonth(t,e+1),o=document.createDocumentFragment(),r=i.create("ul");o.appendChild(r);for(var s=this._getFirstDayIndex(t,e),a=0;s>a;a++)r.appendChild(i.create("li",{className:"ink-calendar-empty",setHTML:"&nbsp;"}));for(var l=1;n>=l;l++)(l-1+s)%7===0&&(r=i.create("ul"),o.appendChild(r)),r.appendChild(this._getDayButton(t,e,l));return o},_getDayButton:function(t,e,n){var o={},r=c(t,e,n);this._acceptableDay(r)?(o["data-cal-day"]=n,this._day&&0===this._dateCmp(r,this)&&(o.className="ink-calendar-on")):o.className="ink-calendar-off",o.setTextContent=n;var s=i.create("li");return s.appendChild(i.create("a",o)),s},_getMonthCalendarHeader:function(t){for(var e,n=i.create("ul",{className:"ink-calendar-header"}),o=0;7>o;o++)e=(t+o)%7,n.appendChild(i.create("li",{setTextContent:this.i18n.getKey("datepicker.week_days")[e].substring(0,1)}));return n},_addMonthClassNames:function(t){r.forEach((t||this._monthSelector).getElementsByTagName("a"),Ink.bindMethod(this,"_addMonthButtonClassNames"))},_addMonthButtonClassNames:function(t){var e=i.data(t);if(!e.calMonth)throw"not a calendar month button!";var o=+e.calMonth-1;if(o===this._month)n.addClassName(t,"ink-calendar-on"),n.removeClassName(t,"ink-calendar-off");else{n.removeClassName(t,"ink-calendar-on");var r=!this._acceptableMonth({_year:this._year,_month:o});n.addRemoveClassName(t,"ink-calendar-off",r)}},setI18n:function(t){t.clone&&(t=t.clone()),this.i18n=t},getI18n:function(){return this.i18n||m},setLanguage:function(t){this.i18n||this.setI18n(m),this.i18n.lang(t)},getLanguage:function(){return this.i18n?this.i18n.lang():m.lang()},showMonth:function(){this._renderMonth()},isMonthRendered:function(){var t=o.select(".ink-calendar-header",this._containerObject)[0];return"none"!==n.getStyle(t.parentNode,"display")&&"none"!==n.getStyle(t.parentNode.parentNode,"display")},destroy:function(){i.unwrap(this._element),i.remove(this._wrapper),i.remove(this._containerObject),t.unregisterInstance.call(this)}},t.createUIComponent(f),f}),Ink.createModule("Ink.UI.DragDrop",1,["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.UI.Common_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";function s(t){t.exceptFor.style.display="none";var e=document.elementFromPoint(t.x,t.y);return t.exceptFor.style.display="",e}function a(){o.BaseUIComponent.apply(this,arguments)}return a._name="DragDrop_1",a._optionDefinition={dragItem:["String",".drag-item"],dragHandle:["String",".drag-handle"],dropZone:["String",".drop-zone"],ignoreDrag:["String",".drag-ignore"],draggedCloneClass:["String","drag-cloned-item"],placeholderClass:["String","drag-placeholder-item"],onDrag:["Function",null],onDrop:["Function",null]},a.prototype={_init:function(){this._dragActive=!1,this._draggedElm=null,this._clonedElm=null,this._placeholderElm=null,this._originalDrop=null,this._mouseDelta=[0,0],this._addEvents()},_addEvents:function(){e.on(this._element,"mousedown touchstart",Ink.bindEvent(this._onMouseDown,this))},_onMouseDown:function(n){var i=e.element(n),o=t.findUpwardsBySelector(i,this._options.dragItem),r=t.findUpwardsBySelector(i,this._options.ignoreDrag);if(o&&!r){e.stopDefault(n);var s=Ink.s(this._options.dragHandle,o);s&&t.findUpwardsBySelector(i,this._options.dragHandle)?this._dragActive=!0:s||(this._dragActive=!0),this._dragActive&&this._startDrag(n,o)}},_startDrag:function(i,o){this._clonedElm=o.cloneNode(!0),this._placeholderElm=o.cloneNode(!1),n.addClassName(this._clonedElm,this._options.draggedCloneClass),this._clonedElm.removeAttribute("id"),n.addClassName(this._placeholderElm,this._options.placeholderClass),this._placeholderElm.removeAttribute("id");var r=o.getBoundingClientRect(),s=[r.right-r.left,r.bottom-r.top];this._clonedElm.style.width=s[0]+"px",this._clonedElm.style.height=s[1]+"px",this._placeholderElm.style.width=s[0]+"px",this._placeholderElm.style.height=s[1]+"px",this._placeholderElm.style.visibility="hidden",this._clonedElm.style.position="fixed",this._clonedElm.style.zIndex="1000",this._clonedElm.style.left=r.left+"px",this._clonedElm.style.top=r.top+"px";var a=e.pointer(i),l=t.offset(o);this._mouseDelta=[a.x-l[0],a.y-l[1]],this._clonedElm.style.opacity="0.6",o.parentNode.insertBefore(this._clonedElm,o),this._draggedElm=o,o.parentNode.insertBefore(this._placeholderElm,o),n.addClassName(o,"hide-all");var h="function"==typeof this._options.onDrag,u="function"==typeof this._options.onDrop;if(h||u){var c={dragItem:this._draggedElm,dropZone:this.getDropZone(this._draggedElm)};h&&this._options.onDrag.call(this,c),u&&(this._originalDrop=c.dropZone)}var d=e.throttle(this._onMouseMove,50,{preventDefault:!0,bind:this});e.on(document,"mousemove.inkdraggable touchmove.inkdraggable",d),e.on(document,"mouseup.inkdraggable touchend.inkdraggable",Ink.bindEvent(this._onMouseUp,this))},_onMouseMove:function(n){if(this._dragActive){var i=e.pointer(n),o=t.scrollWidth(),r=t.scrollHeight();this._clonedElm.style.left=i.x-this._mouseDelta[0]-o+"px",this._clonedElm.style.top=i.y-this._mouseDelta[1]-r+"px";var a=s({x:i.x-o,y:i.y-r,exceptFor:this._clonedElm}),l=this.getDropZone(a),h=l&&(t.isAncestorOf(this._element,l)||this._element===l);if(l&&h){var u=t.findUpwardsBySelector(a,this._options.dragItem);u&&this.isDragItem(u)?this._insertPlaceholder(u):this._dropZoneIsEmpty(l)&&l.appendChild(this._placeholderElm)}}},isDragItem:function(t){return r.matchesSelector(t,this._options.dragItem)&&t!==this._draggedElm&&t!==this._placeholderElm&&t!==this._clonedElm},_dropZoneIsEmpty:function(t){var e=Ink.ss(this._options.dragItem,t);return!i.some(e,Ink.bindMethod(this,"isDragItem"))},_onMouseUp:function(){this._dragActive&&(t.insertBefore(this._draggedElm,this._placeholderElm),t.remove(this._placeholderElm),t.remove(this._clonedElm),n.removeClassName(this._draggedElm,"hide-all"),e.off(document,".inkdraggable"),this._dragActive=!1,"function"==typeof this._options.onDrop&&this._options.onDrop.call(this,{origin:this._originalDrop,dragItem:this._draggedElm,dropZone:this.getDropZone(this._draggedElm)}),this._placeholderElm=null,this._clonedElm=null,this._draggedElm=null,this._originalDrop=null)},getDropZone:function(e){var n=t.findUpwardsBySelector(e,this._options.dropZone)||this._element;return t.isAncestorOf(this._element,n)||n===this._element?n:null},getDraggedElement:function(){return this.dragActive?this._draggedElm:null},_insertPlaceholder:function(e){var n=!0;i.inArray(this._placeholderElm,t.previousSiblings(e))||(n=!1),n?t.insertAfter(this._placeholderElm,e):t.insertBefore(this._placeholderElm,e)},destroy:function(){this._dragActive&&e.off(document,".inkdraggable"),o.destroyComponent.call(this)}},o.createUIComponent(a),a}),Ink.createModule("Ink.UI.Draggable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1","Ink.UI.Common_1"],function(t,e,n,i,o,r){"use strict";function s(t,e,n){return t=Math.min(t,n),t=Math.max(t,e)}function a(){r.BaseUIComponent.apply(this,arguments)}var l=0,h=1;return a._name="Draggable_1",a._optionDefinition={constraint:["String",!1],constraintElm:["Element",!1],top:["Number",!1],right:["Number",!1],bottom:["Number",!1],left:["Number",!1],handle:["Element",!1],revert:["Boolean",!1],cursor:["String","move"],zIndex:["Number",9999],fps:["Number",0],droppableProxy:["Element",!1],mouseAnchor:["String",void 0],dragClass:["String","drag"],skipChildren:["Boolean",!0],onStart:["Function",!1],onEnd:["Function",!1],onDrag:["Function",!1],onChange:["Function",!1]},a.prototype={_init:function(){var t=this._options;this.constraintElm=t.constraintElm&&r.elOrSelector(t.constraintElm),this.handle=!1,this.elmStartPosition=!1,this.active=!1,this.dragged=!1,this.prevCoords=!1,this.placeholder=!1,this.position=!1,this.zindex=!1,this.firstDrag=!0,t.fps&&(this.deltaMs=1e3/t.fps,this.lastRunAt=0),this.handlers={},this.handlers.start=Ink.bindEvent(this._onStart,this),this.handlers.dragFacade=Ink.bindEvent(this._onDragFacade,this),this.handlers.drag=Ink.bindEvent(this._onDrag,this),this.handlers.end=Ink.bindEvent(this._onEnd,this),this.handlers.selectStart=function(t){return e.stop(t),!1},this.handle=this._options.handle?r.elOrSelector(this._options.handle):this._element,this.handle.style.cursor=t.cursor,e.observe(this.handle,"touchstart",this.handlers.start),e.observe(this.handle,"mousedown",this.handlers.start),i.IE&&e.observe(this._element,"selectstart",this.handlers.selectStart)},destroy:function(){e.stopObserving(this.handle,"touchstart",this.handlers.start),e.stopObserving(this.handle,"mousedown",this.handlers.start),i.IE&&e.stopObserving(this._element,"selectstart",this.handlers.selectStart)},_getCoords:function(e){var n=[t.scrollWidth(),t.scrollHeight()];return{x:(e.touches?e.touches[0].clientX:e.clientX)+n[l],y:(e.touches?e.touches[0].clientY:e.clientY)+n[h]}},_cloneStyle:function(e,i){i.className=e.className,i.style.borderWidth="0",i.style.padding="0",i.style.position="absolute",i.style.width=t.elementWidth(e)+"px",i.style.height=t.elementHeight(e)+"px",i.style.left=t.elementLeft(e)+"px",i.style.top=t.elementTop(e)+"px",i.style.cssFloat=n.getStyle(e,"float"),i.style.display=n.getStyle(e,"display")},_onStart:function(i){if(!this.active&&e.isLeftClick(i)||"undefined"==typeof i.button){var o=e.element(i);if(this._options.skipChildren&&o!==this.handle)return;e.stop(i),n.addClassName(this._element,this._options.dragClass),this.elmStartPosition=[t.elementLeft(this._element),t.elementTop(this._element)];var r=[parseInt(n.getStyle(this._element,"left"),10),parseInt(n.getStyle(this._element,"top"),10)],s=t.elementDimensions(this._element);this.originalPosition=[r[l]?r[l]:null,r[h]?r[h]:null],this.delta=this._getCoords(i),this.active=!0,this.position=n.getStyle(this._element,"position"),this.zindex=n.getStyle(this._element,"zIndex");var a=document.createElement("div");if(a.style.position=this.position,a.style.width=s[l]+"px",a.style.height=s[h]+"px",a.style.marginTop=n.getStyle(this._element,"margin-top"),a.style.marginBottom=n.getStyle(this._element,"margin-bottom"),a.style.marginLeft=n.getStyle(this._element,"margin-left"),a.style.marginRight=n.getStyle(this._element,"margin-right"),a.style.borderWidth="0",a.style.padding="0",a.style.cssFloat=n.getStyle(this._element,"float"),a.style.display=n.getStyle(this._element,"display"),a.style.visibility="hidden",this.delta2=[this.delta.x-this.elmStartPosition[l],this.delta.y-this.elmStartPosition[h]],this._options.mouseAnchor){var u=this._options.mouseAnchor.split(" "),c=[s[l],s[h]];"left"===u[0]?c[l]=0:"center"===u[0]&&(c[l]=parseInt(c[l]/2,10)),"top"===u[1]?c[h]=0:"center"===u[1]&&(c[h]=parseInt(c[h]/2,10)),this.applyDelta=[this.delta2[l]-c[l],this.delta2[h]-c[h]]}var d=this._options.fps?"dragFacade":"drag";if(this.placeholder=a,this._options.onStart&&this._options.onStart(this._element,i),this._options.droppableProxy){this.proxy=document.createElement("div"),s=[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight];var p=this.proxy.style;p.width=s[l]+"px",p.height=s[h]+"px",p.position="fixed",p.left="0",p.top="0",p.zIndex=this._options.zIndex+1,p.backgroundColor="#FF0000",n.setOpacity(this.proxy,0);for(var f=document.body.firstChild;f&&1!==f.nodeType;)f=f.nextSibling;document.body.insertBefore(this.proxy,f),e.observe(this.proxy,"mousemove",this.handlers[d]),e.observe(this.proxy,"touchmove",this.handlers[d])}else e.observe(document,"mousemove",this.handlers[d]);return this._element.style.position="absolute",this._element.style.zIndex=this._options.zIndex,this._element.parentNode.insertBefore(this.placeholder,this._element),this._onDrag(i),e.observe(document,"mouseup",this.handlers.end),e.observe(document,"touchend",this.handlers.end),!1}},_onDragFacade:function(t){var e=+new Date;(!this.lastRunAt||e>this.lastRunAt+this.deltaMs)&&(this.lastRunAt=e,this._onDrag(t))},_onDrag:function(n){if(this.active){e.stop(n),this.dragged=!0;var i=this._getCoords(n),o=i.x,r=i.y,a=this._options,u=!1,c=!1;if(this.prevCoords&&o!==this.prevCoords.x||r!==this.prevCoords.y){a.onDrag&&a.onDrag(this._element,n),this.prevCoords=i,u=this.elmStartPosition[l]+o-this.delta.x,c=this.elmStartPosition[h]+r-this.delta.y;var d=t.elementDimensions(this._element);if(this.constraintElm){var p=t.offset(this.constraintElm),f=t.elementDimensions(this.constraintElm),m=p[h]+(a.top||0),_=p[h]+f[h]-(a.bottom||0),g=p[l]+(a.left||0),v=p[l]+f[l]-(a.right||0);c=s(c,m,_-d[h]),u=s(u,g,v-d[l])}else if(a.constraint){var y=a.right===!1?t.pageWidth()-d[l]:a.right,b=a.left===!1?0:a.left,k=a.top===!1?0:a.top,C=a.bottom===!1?t.pageHeight()-d[h]:a.bottom;("horizontal"===a.constraint||"both"===a.constraint)&&(u=s(u,b,y)),("vertical"===a.constraint||"both"===a.constraint)&&(c=s(c,k,C))}var I=Ink.getModule("Ink.UI.Droppable_1");if(this.firstDrag&&(I&&I.updateAll(),this.firstDrag=!1),u&&(this._element.style.left=u+"px"),c&&(this._element.style.top=c+"px"),I){var w=this._options.mouseAnchor?{x:o-this.applyDelta[l],y:r-this.applyDelta[h]}:i;I.action(w,"drag",n,this._element)}a.onChange&&a.onChange(this)}}},_onEnd:function(i){if(e.stopObserving(document,"mousemove",this.handlers.drag),e.stopObserving(document,"touchmove",this.handlers.drag),this._options.fps&&this._onDrag(i),n.removeClassName(this._element,this._options.dragClass),this.active&&this.dragged){this._options.droppableProxy&&document.body.removeChild(this.proxy),this.pt&&(t.remove(this.pt),this.pt=void 0),this.placeholder&&t.remove(this.placeholder),this._options.revert&&(this._element.style.position=this.position,this._element.style.zIndex=null!==this.zindex?this.zindex:"auto",this._element.style.left=this.originalPosition[l]?this.originalPosition[l]+"px":"",this._element.style.top=this.originalPosition[h]?this.originalPosition[h]+"px":""),this._options.onEnd&&this._options.onEnd(this._element,i);
var o=Ink.getModule("Ink.UI.Droppable_1");o&&o.action(this._getCoords(i),"drop",i,this._element),this.position=!1,this.zindex=!1,this.firstDrag=!0}this.active=!1,this.dragged=!1}},r.createUIComponent(a),a}),Ink.createModule("Ink.UI.Drawer","1",["Ink.UI.Common_1","Ink.Dom.Loaded_1","Ink.Dom.Selector_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(t,e,n,i,o,r){"use strict";function s(t){if(document.addEventListener){d&&a();var e=!1;d=function(n){return"mousedown"===n.type||"mouseup"===n.type?void(e="mousedown"===n.type):void(e||t(n.target))},document.addEventListener("focus",d,!0),document.addEventListener("mousedown",d,!0),document.addEventListener("mouseup",d,!0)}}function a(){document.addEventListener&&d&&(document.removeEventListener("focus",d,!0),document.removeEventListener("mousedown",d,!0),document.removeEventListener("mouseup",d,!0),d=null)}function l(t){for(var e=Ink.ss("[tabindex]",t),n=null,i=null,o=0;o<e.length;o++){var r=+e[o].tabIndex;r||e.splice(o,1),(null===n||n>r)&&(n=r,i=e[o])}if(i)return i.focus(),!0;var s=Ink.s(c,t);return s?(s.focus(),!0):!1}function h(t){return'Ink.UI.Drawer_1: Could not find the "'+t+'" element on this page. Please make sure it exists.'}function u(e,n){t.isDOMElement(e)||(n=e),t.BaseUIComponent.apply(this,[document.body,n])}var c=['[tabindex]:not([tabindex="-1"])',"input","select","textarea","button","object","a[href]","area"].join(","),d=null,p=function(t){var e={WebkitTransitionProperty:"webkitTransitionEnd",transitionProperty:"transitionend"};for(var n in e)if(e.hasOwnProperty(n)&&void 0!==t.style[n])return{styleProp:n,eventName:e[n]};return!1}(document.createElement("div"));return u.transitionSupport=p,u._name="Drawer_1",u._optionDefinition={parentSelector:["String",".ink-drawer"],leftDrawer:["String",".left-drawer"],leftTrigger:["String",".left-drawer-trigger"],rightDrawer:["String",".right-drawer"],rightTrigger:["String",".right-drawer-trigger"],contentDrawer:["String",".content-drawer"],mode:["String","push"],sides:["String","both"]},u.prototype={_init:function(){function t(t){t.drawer&&t.triggers.length?e=!0:n=h(t.drawer?t.drawerOption:t.triggerOption)}if(this._contentDrawers=Ink.ss(this._options.contentDrawer),this._leftDrawer=Ink.s(this._options.leftDrawer),this._leftTriggers=Ink.ss(this._options.leftTrigger),this._rightDrawer=Ink.s(this._options.rightDrawer),this._rightTriggers=Ink.ss(this._options.rightTrigger),r.addClassName(document.body,"ink-drawer"),0===this._contentDrawers.length)throw new Error('Ink.UI.Drawer_1: Could not find any "'+this._options.contentDrawer+'" elements on this page. Please make sure you have at least one.');switch(this._options.sides){case"both":this._triggers=this._options.leftTrigger+", "+this._options.rightTrigger+", "+this._options.contentDrawer;break;case"left":this._triggers=this._options.leftTrigger+", "+this._options.contentDrawer;break;case"right":this._triggers=this._options.rightTrigger+", "+this._options.contentDrawer}var e=!1,n=null;("left"===this._options.sides||"both"===this._options.sides)&&t({name:"left",drawer:this._leftDrawer,drawerOption:this._options.leftDrawer,triggers:this._leftTriggers,triggerOption:this._options.leftTrigger}),("right"===this._options.sides||"both"===this._options.sides)&&t({name:"right",drawer:this._rightDrawer,drawerOption:this._options.rightDrawer,triggers:this._rightTriggers,triggerOption:this._options.rightTrigger}),e||Ink.warn(n),this._isOpen=!1,this._direction=void 0,this._handlers={click:Ink.bindEvent(this._onClick,this),afterTransition:Ink.bindEvent(this._afterTransition,this)},this._addEvents()},_onClick:function(t){var e=i.findUpwardsBySelector(t.currentTarget,this._options.leftTrigger)?"left":i.findUpwardsBySelector(t.currentTarget,this._options.rightTrigger)?"right":null;if(e)return void this._onTriggerClicked(t,e);if(this._isOpen){var n=i.findUpwardsBySelector(t.currentTarget,this._options.contentDrawer),o=i.isLink(t.target);(n||o)&&this.close(),n&&t.preventDefault()}},_onTriggerClicked:function(t,e){this._isOpen?this.close():this.open(e),t.preventDefault()},_afterTransition:function(){this._isOpen||r.removeClassName(this._getRecentDrawer(),"show")},_addEvents:function(){o.on(document.body,"click",this._triggers+', a[href*="#"]',this._handlers.click)},_getRecentDrawer:function(){return"left"===this._direction?this._leftDrawer:"right"===this._direction?this._rightDrawer:null},open:function(t){this._isOpen=!0,this._direction=t;var e=this._getRecentDrawer();r.addClassName(e,"show"),setTimeout(Ink.bind(function(){r.addClassName(document.body,[this._options.mode,t])},this),0),p&&this._transitionWillOccur(e)&&o.one(e,p.eventName,function(){r.removeClassName(e,"show");+e.offsetWidth;r.addClassName(e,"show")});var n=document.activeElement,h=l(e);s(Ink.bind(function(t){var o=i.isAncestorOf(e,t);o||(this.close(),a(),h&&n&&n.focus())},this))},_transitionWillOccur:function(t){return!(!p||!r.getStyle(t,p.styleProp))},close:function(){if(this._isOpen!==!1){var t=this._getRecentDrawer();if(t){a(),this._isOpen=!1;var e=null;p&&(e=this._transitionWillOccur(this._getRecentDrawer())),r.removeClassName(document.body,[this._options.mode,this._direction]),e?o.one(document.body,p.eventName,this._handlers.afterTransition):this._handlers.afterTransition()}}}},t.createUIComponent(u),u}),Ink.createModule("Ink.UI.Dropdown","1",["Ink.UI.Common_1","Ink.UI.Toggle_1","Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="Dropdown_1",o._optionDefinition={target:["Element"],hoverOpen:["Number",null],dismissOnInsideClick:["Boolean",!1],dismissOnOutsideClick:["Boolean",!0],dismissAfter:["Number",null],onInsideClick:["Function",null],onOutsideClick:["Function",null],onOpen:["Function",null],onDismiss:["Function",null]},o.prototype={_init:function(){this._toggle=new e(this._element,{target:this._options.target,closeOnInsideClick:null,closeOnClick:!1,onChangeState:Ink.bind(function(t){return this._openOrDismiss(t,!0,!0)},this)}),n.observeMulti([this._options.target,this._element],"mouseout",Ink.bindMethod(this,"_onMouseOut")),n.observeMulti([this._options.target,this._element],"mouseover",Ink.bindMethod(this,"_onMouseOver")),n.observe(this._options.target,"click",Ink.bindMethod(this,"_onInsideClick")),n.observe(document,"click",Ink.bindMethod(this,"_onOutsideClick"))},_onMouseOver:function(){"number"==typeof this._options.hoverOpen&&this._toggle.getState()===!1&&(clearTimeout(this._openTimeout),this._openTimeout=setTimeout(Ink.bindMethod(this,"open",!0),1e3*this._options.hoverOpen)),"number"==typeof this._options.dismissAfter&&clearTimeout(this._dismissTimeout)},_onMouseOut:function(){"number"==typeof this._options.dismissAfter&&this._toggle.getState()===!0&&(clearTimeout(this._dismissTimeout),this._dismissTimeout=setTimeout(Ink.bindMethod(this,"dismiss",!0),1e3*this._options.dismissAfter)),"number"==typeof this._options.hoverOpen&&clearTimeout(this._openTimeout)},_onInsideClick:function(t){var e=this._handlerCall("onInsideClick",n.element(t));e!==!1&&this._options.dismissOnInsideClick&&this.dismiss(!0)},_onOutsideClick:function(t){var e=n.element(t),o=i.findUpwardsHaving(e,Ink.bind(function(t){return t===this._element},this)),r=i.findUpwardsHaving(e,Ink.bind(function(t){return t===this._options.target},this));if(!o&&!r){var s=this._handlerCall("onOutsideClick",e);if(s===!1)return;this._options.dismissOnOutsideClick&&this.dismiss(!0)}},dismiss:function(t){this._openOrDismiss(!1,t,arguments[1])},open:function(t){this._openOrDismiss(!0,t,arguments[1])},_openOrDismiss:function(t,e,n){if(!this._toggle||this._toggle.getState()!==t){if(e&&this._handlerCall(t?"onOpen":"onDismiss")===!1)return!1;n||this._toggle.setState(t),clearTimeout(this._dismissTimeout),clearTimeout(this._openTimeout)}},_handlerCall:function(t){return this._options[t]?this._options[t].call(this,[].slice.call(arguments,1)):void 0}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Droppable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.UI.Common_1","Ink.Util.Array_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";var s=function(t){return function(e){return n.addClassName(t,e)}},a=function(t){return function(e){return n.removeClassName(t,e)}},l={debug:!1,_droppables:[],_draggables:[],add:function(e,n){function o(t){t.style.position="inherit"}e=i.elOrSelector(e,"Droppable.add target element");var r=Ink.extendObj({hoverClass:n.hoverclass||!1,accept:!1,onHover:!1,onDrop:!1,onDropOut:!1},n||{},t.data(e));"string"==typeof r.hoverClass&&(r.hoverClass=r.hoverClass.split(/\s+/));var s,a=this,l={move:function(t,e){o(t),e.appendChild(t)},copy:function(t,e){o(t),e.appendChild(t.cloneNode(!0))},revert:function(t){a._findDraggable(t).originalParent.appendChild(t),o(t)}};if("string"==typeof r.onHover&&(s=r.onHover,r.onHover=l[s],void 0===r.onHover))throw new Error("Unknown hover event handler: "+s);if("string"==typeof r.onDrop&&(s=r.onDrop,r.onDrop=l[s],void 0===r.onDrop))throw new Error("Unknown drop event handler: "+s);if("string"==typeof r.onDropOut&&(s=r.onDropOut,r.onDropOut=l[s],void 0===r.onDropOut))throw new Error("Unknown dropOut event handler: "+s);var h={element:e,data:{},options:r};this._droppables.push(h),this._update(h)},_findData:function(t){for(var e=this._droppables,n=0,i=e.length;i>n;n++)if(e[n].element===t)return e[n]},_findDraggable:function(t){for(var e=this._draggables,n=0,i=e.length;i>n;n++)if(e[n].element===t)return e[n]},updateAll:function(){o.each(this._droppables,l._update)},update:function(t){this._update(this._findData(t))},_update:function(e){var n=e.data,i=e.element;n.left=t.offsetLeft(i),n.top=t.offsetTop(i),n.right=n.left+t.elementWidth(i),n.bottom=n.top+t.elementHeight(i)},remove:function(t){t=i.elOrSelector(t);for(var e=this._droppables.length,n=0;e>n;n++)if(this._droppables[n].element===t){this._droppables.splice(n,1);break}return e!==this._droppables.length},action:function(t,e,n,i){o.each(this._droppables,Ink.bind(function(l){var h=l.data,u=l.options,c=l.element;(!u.accept||r.matches(u.accept,[i]).length)&&("drag"!==e||this._findDraggable(i)||this._draggables.push({element:i,originalParent:i.parentNode}),t.x>=h.left&&t.x<=h.right&&t.y>=h.top&&t.y<=h.bottom?"drag"===e?(u.hoverClass&&o.each(u.hoverClass,s(c)),u.onHover&&u.onHover(i,c)):"drop"===e&&(u.hoverClass&&o.each(u.hoverClass,a(c)),u.onDrop&&u.onDrop(i,c,n)):"drag"===e&&u.hoverClass?o.each(u.hoverClass,a(c)):"drop"===e&&u.onDropOut&&u.onDropOut(i,c,n))},this))}};return l}),Ink.createModule("Ink.UI.FormValidator","1",["Ink.Dom.Element_1","Ink.Dom.Css_1","Ink.Util.Validator_1","Ink.Dom.Selector_1"],function(t,e,n,i){"use strict";function o(t){if(!t.name)return[];if(!t.form)return i.select('[name="'+t.name+'"]');var e=t.form[t.name];return e?("undefined"==typeof e.length&&(e=[e]),e):function(){for(var e=[],n=Ink.ss("*",t.form),i=0;i<n.length;i++)n[i].name===t.name&&e.push(n[i]);return e}()}var r={version:"1",_flagMap:{"ink-fv-required":{msg:"Required field"},"ink-fv-email":{msg:"Invalid e-mail address"},"ink-fv-url":{msg:"Invalid URL"},"ink-fv-number":{msg:"Invalid number"},"ink-fv-phone_pt":{msg:"Invalid phone number"},"ink-fv-phone_cv":{msg:"Invalid phone number"},"ink-fv-phone_mz":{msg:"Invalid phone number"},"ink-fv-phone_ao":{msg:"Invalid phone number"},"ink-fv-date":{msg:"Invalid date"},"ink-fv-confirm":{msg:"Confirmation does not match"},"ink-fv-custom":{msg:""}},elements:{},confirmElms:{},hasConfirm:{},_errorClassName:"tip error",_errorValidationClassName:"validaton",_errorTypeWarningClassName:"warning",_errorTypeErrorClassName:"error",validate:function(t,e){if(this._free(),e=Ink.extendObj({onSuccess:!1,onError:!1,customFlag:!1,confirmGroup:[]},e||{}),"string"==typeof t&&(t=document.getElementById(t)),null===t)return!1;this.element=t,("undefined"==typeof this.element.id||null===this.element.id||""===this.element.id)&&(this.element.id="ink-fv_randomid_"+Math.round(99999*Math.random())),this.custom=e.customFlag,this.confirmGroup=e.confirmGroup;var n=this._validateElements();return n.length>0?(e.onError?e.onError(n):this._showError(t,n),!1):(e.onError||this._clearError(t),this._clearCache(),e.onSuccess&&e.onSuccess(),!0)},reset:function(){this._clearError(),this._clearCache()},_free:function(){this.element=null,this.custom=!1,this.confirmGroup=!1},_clearCache:function(){this.element=null,this.elements=[],this.custom=!1,this.confirmGroup=!1},_getElements:function(){var t=this.elements[this.element.id]=[];this.confirmElms[this.element.id]=[];for(var n=i.select(":input",this.element),o=!1,r=0,s=n.length;s>r;r++){o=n[r];var a=(o.getAttribute("type")+"").toLowerCase();if("radio"===a||"checkbox"===a){if(0===t.length||o.getAttribute("type")!==t[t.length-1].getAttribute("type")&&o.getAttribute("name")!==t[t.length-1].getAttribute("name"))for(var l in this._flagMap)if(e.hasClassName(o,l)){t.push(o);break}}else{for(var h in this._flagMap)if(e.hasClassName(o,h)&&"ink-fv-confirm"!==h){t.push(o);break}e.hasClassName(o,"ink-fv-confirm")&&(this.confirmElms[this.element.id].push(o),this.hasConfirm[this.element.id]=!0)}}},_validateElements:function(){var t;this._getElements(),this.hasConfirm[this.element.id]===!0&&(t=this._makeConfirmGroups());for(var n,i=[],o=!1,r=!1,s=0,a=this.elements[this.element.id].length;a>s;s++)if(n=!1,o=this.elements[this.element.id][s],!o.disabled)for(var l in this._flagMap)if(e.hasClassName(o,l))if("ink-fv-custom"!==l&&"ink-fv-confirm"!==l)this._isValid(o,l)||(n?i[i.length-1].errors.push(l):(i.push({elm:o,errors:[l]}),n=!0));else if("ink-fv-confirm"!==l)r=this._isCustomValid(o),r.length>0&&i.push({elm:o,errors:[l],custom:r});else if("ink-fv-confirm"===l)continue;return i=this._validateConfirmGroups(t,i)},_validateConfirmGroups:function(t,e){var n=!1;for(var i in t)t.hasOwnProperty(i)&&(n=t[i],2===n.length&&n[0].value!==n[1].value&&e.push({elm:n[1],errors:["ink-fv-confirm"]}));return e},_makeConfirmGroups:function(){var t;if(this.confirmGroup&&this.confirmGroup.length>0){t={};for(var n=!1,i=!1,o=0,r=this.confirmElms[this.element.id].length;r>o;o++){n=this.confirmElms[this.element.id][o];for(var s=0,a=this.confirmGroup.length;a>s;s++)i=this.confirmGroup[s],e.hasClassName(n,i)&&("undefined"==typeof t[i]?t[i]=[n]:t[i].push(n))}return t}return 2===this.confirmElms[this.element.id].length&&(t={"ink-fv-confirm":[this.confirmElms[this.element.id][0],this.confirmElms[this.element.id][1]]}),t},_isCustomValid:function(t){for(var n=[],i=!1,o=0,r=this.custom.length;r>o;o++)i=this.custom[o],e.hasClassName(t,i.flag)&&(i.callback(t,i.msg)||n.push({flag:i.flag,msg:i.msg}));return n},_isValid:function(t,i){var r=t.nodeName.toLowerCase(),s=(t.getAttribute("type")||"").toLowerCase(),a=this._trim(t.value);if("ink-fv-required"!==i&&"checkbox"!==s&&"radio"!==s&&""===a)return!e.hasClassName(t,"ink-fv-required");switch(i){case"ink-fv-required":if("select"===r)return t.selectedIndex>0?!0:!1;if("checkbox"!==s&&"radio"!==s)return""!==a;if("checkbox"===s||"radio"===s){for(var l=o(t),h=0,u=l.length;u>h;h++)if(l[h].checked===!0)return!0;return!1}return!1;case"ink-fv-email":return n.mail(t.value);case"ink-fv-url":return n.url(t.value);case"ink-fv-number":return!isNaN(Number(t.value))&&isFinite(Number(t.value));case"ink-fv-phone_pt":return n.isPTPhone(t.value);case"ink-fv-phone_cv":return n.isCVPhone(t.value);case"ink-fv-phone_ao":return n.isAOPhone(t.value);case"ink-fv-phone_mz":return n.isMZPhone(t.value);case"ink-fv-date":var c=Ink.getModule("Ink.Dom.Element",1),d=c.data(t),p="yyyy-mm-dd";if(e.hasClassName(t,"ink-datepicker")&&"format"in d?p=d.format:"validFormat"in d&&(p=d.validFormat),!(p in n._dateParsers)){var f=[];for(var m in n._dateParsers)n._dateParsers.hasOwnProperty(m)&&f.push(m);throw new Error("The attribute data-valid-format must be one of the following values: "+f.join(", "))}return n.isDate(p,t.value);case"ink-fv-custom":}return!1},_showError:function(t,e){this._clearError(t);for(var n=!1,i=0,o=e.length;o>i;i++)n=e[i].elm,n&&this._showAnErrorOnElement(n,e[i])},_showAnErrorOnElement:function(n,i){var o=t.findUpwardsByClass(n,"control-group"),r=t.findUpwardsByClass(n,"control"),s=[this._errorClassName,this._errorTypeClassName].join(" "),a=t.create("p",{className:s});a.innerHTML="ink-fv-custom"!==i.errors[0]?this._flagMap[i.errors[0]].msg:i.custom[0].msg;var l=r||o;l?l.appendChild(a):t.insertAfter(a,n),r&&("ink-fv-required"===i.errors[0]?e.addClassName(o,"validation error"):e.addClassName(o,"validation warning"))},_clearError:function(n){for(var i,o,r=n.getElementsByTagName("p"),s=r.length-1;s>=0;s--)i=r[s],e.hasClassName(i,this._errorClassName)&&(o=t.findUpwardsBySelector(i,".control-group"),o&&e.removeClassName(o,["validation","error","warning"]),e.hasClassName(i,this._errorClassName,!0)&&t.remove(i));var a=n.getElementsByTagName("ul");for(s=a.length-1;s>=0;s--)i=a[s],e.hasClassName(i,"control-group")&&e.removeClassName(i,"validation error")},_trim:function(t){return"string"==typeof t?t.replace(/^\s+|\s+$|\n+$/g,""):void 0}};return r}),Ink.createModule("Ink.UI.FormValidator","2",["Ink.UI.Common_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.Util.I18n_1","Ink.Util.Validator_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(t){switch(t.nodeName.toLowerCase()){case"select":return Ink.s("option:selected",t).value;case"textarea":return t.value;case"input":if(!("type"in t))return t.value;if("radio"===t.type||"checkbox"===t.type){if(t.checked)return t.value}else if("file"!==t.type)return t.value;return;default:return t.innerHTML}}function h(){t.BaseUIComponent.apply(this,arguments)}function u(){t.BaseUIComponent.apply(this,arguments)}var c={required:function(t){return"undefined"!=typeof t&&!/^\s*$/.test(t)},min_length:function(t,e){return"string"==typeof t&&t.length>=parseInt(e,10)},max_length:function(t,e){return"string"==typeof t&&t.length<=parseInt(e,10)},exact_length:function(t,e){return"string"==typeof t&&t.length===parseInt(e,10)},email:function(t){return"string"==typeof t&&a.mail(t)},url:function(t,e){return e=e||!1,"string"==typeof t&&a.url(t,e)},ip:function(t,e){return"string"!=typeof t?!1:a.isIP(t,e)},phone:function(t,e){if("string"!=typeof t)return!1;var n=e?e.toUpperCase():"";return a["is"+n+"Phone"](t)},credit_card:function(t,e){return"string"!=typeof t?!1:a.isCreditCard(t,e||"default")},date:function(t,e){return"string"==typeof t&&a.isDate(e,t)},alpha:function(t,e){return a.ascii(t,{singleLineWhitespace:e})},text:function(t,e,n){return a.unicode(t,{singleLineWhitespace:e,unicodePunctuation:n})},latin:function(t,e,n){return"string"!=typeof t?!1:a.latin1(t,{latin1Punctuation:e,singleLineWhitespace:n})},alpha_numeric:function(t){return a.ascii(t,{numbers:!0})},alpha_dash:function(t){return a.ascii(t,{dash:!0,underscore:!0})},digit:function(t){return"string"==typeof t&&/^[0-9]{1}$/.test(t)},integer:function(t,e){return a.number(t,{negative:!e,decimalPlaces:0})},decimal:function(t,e,n,i){return a.number(t,{decimalSep:e||".",decimalPlaces:+n||null,maxDigits:+i})},numeric:function(t,e,n,i){return e=e||".",-1!==t.indexOf(e)?c.decimal(t,e,n,i):c.integer(t)},range:function(t,e,n,i){return t=+t,e=+e,n=+n,isNaN(t)||isNaN(e)||isNaN(n)?!1:e>t||t>n?!1:i?(t-e)%i===0:!0},color:function(t){return a.isColor(t)},matches:function(t,e){var n=this.getFormElements()[e];if(!n){for(var i=Ink.ss("input, select, textarea, .control-group",this._options.form._element),o=0;o<i.length;o++)if((i[o].name||i[o].id)===e)return l(i[o])===t;return!1}n=n[0];var r=n.getValue();return n._rules.required&&""===r?!1:t===r},ean:function(t){return a.isEAN(t.replace(/[^\d]/g,""),"ean-13")}},d=new s({en_US:{"formvalidator.required":"Filling {field} is mandatory","formvalidator.min_length":"The {field} must have a minimum size of {param1} characters","formvalidator.max_length":"The {field} must have a maximum size of {param1} characters","formvalidator.exact_length":"The {field} must have an exact size of {param1} characters","formvalidator.email":"The {field} must have a valid e-mail address","formvalidator.url":"The {field} must have a valid URL","formvalidator.ip":"The {field} does not contain a valid {param1} IP address","formvalidator.phone":"The {field} does not contain a valid {param1} phone number","formvalidator.credit_card":"The {field} does not contain a valid {param1} credit card","formvalidator.date":"The {field} should contain a date in the {param1} format","formvalidator.alpha":"The {field} should only contain letters","formvalidator.text":"The {field} should only contain alphabetic characters","formvalidator.latin":"The {field} should only contain alphabetic characters","formvalidator.alpha_numeric":"The {field} should only contain letters or numbers","formvalidator.alpha_dash":"The {field} should only contain letters or dashes","formvalidator.digit":"The {field} should only contain a digit","formvalidator.integer":"The {field} should only contain an integer","formvalidator.decimal":"The {field} should contain a valid decimal number","formvalidator.numeric":"The {field} should contain a number","formvalidator.range":"The {field} should contain a number between {param1} and {param2}","formvalidator.color":"The {field} should contain a valid color","formvalidator.matches":"The {field} should match the field {param1}"},pt_PT:{"formvalidator.required":"Preencher {field} \xe9 obrigat\xf3rio","formvalidator.min_length":"{field} deve ter no m\xednimo {param1} caracteres","formvalidator.max_length":"{field} tem um tamanho m\xe1ximo de {param1} caracteres","formvalidator.exact_length":"{field} devia ter exactamente {param1} caracteres","formvalidator.email":"{field} deve ser um e-mail v\xe1lido","formvalidator.url":"O {field} deve ser um URL v\xe1lido","formvalidator.ip":"{field} n\xe3o tem um endere\xe7o IP {param1} v\xe1lido","formvalidator.phone":"{field} deve ser preenchido com um n\xfamero de telefone {param1} v\xe1lido.","formvalidator.credit_card":"{field} n\xe3o tem um cart\xe3o de cr\xe9dito {param1} v\xe1lido","formvalidator.date":"{field} deve conter uma data no formato {param1}","formvalidator.alpha":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.text":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.latin":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.alpha_numeric":"{field} deve conter apenas letras e n\xfameros","formvalidator.alpha_dash":"{field} deve conter apenas letras e tra\xe7os","formvalidator.digit":"{field} destina-se a ser preenchido com apenas um d\xedgito","formvalidator.integer":"{field} deve conter um n\xfamero inteiro","formvalidator.decimal":"{field} deve conter um n\xfamero v\xe1lido","formvalidator.numeric":"{field} deve conter um n\xfamero v\xe1lido","formvalidator.range":"{field} deve conter um n\xfamero entre {param1} e {param2}","formvalidator.color":"{field} deve conter uma cor v\xe1lida","formvalidator.matches":"{field} deve corresponder ao campo {param1}"}},"en_US");return h._name="FormElement_1",h._optionDefinition={label:["String",null],rules:["String",null],error:["String",null],form:["Object"]},h.prototype={_init:function(){this._errors={},this._rules={},this._value=null,null===this._options.label&&(this._options.label=this._getLabel())},_getLabel:function(){var t=e.findUpwardsBySelector(this._element,".control-group label");return t?e.textContent(t):this._element.name||this._element.id||""},_parseRules:function(t){this._rules={},t=t.split("|");var e,n,i,o,r=t.length;if(r>0)for(e=0;r>e;e++)if(n=t[e])if(-1!==(o=n.indexOf("["))){i=n.substr(o+1),i=i.split("]"),i=i[0],i=i.split(",");for(var s=0,a=i.length;a>s;s++)i[s]="true"===i[s]?!0:"false"===i[s]?!1:i[s];i.splice(0,0,this.getValue()),n=n.substr(0,o),this._rules[n]=i}else this._rules[n]=[this.getValue()]},_addError:function(t){for(var e=this._rules[t]||[],n={field:this._options.label,value:this.getValue()},i=1;i<e.length;i++)n["param"+i]=e[i];var o,r="formvalidator."+t;this._options.error?o=this._options.error:(o=d.text(r,n),o===r&&(o="[Validation message not found for rule ]"+t)),this._errors[t]=o},getValue:function(){return l(this._element)},getErrors:function(){return this._errors},getElement:function(){return this._element},getFormElements:function(){return this._options.form._formElements},validate:function(){this._errors={},this._parseRules(this._options.rules);var t=""!==this.getValue()||"required"in this._rules||"matches"in this._rules;if(t)for(var e in this._rules)if(this._rules.hasOwnProperty(e)){if("function"!=typeof c[e])return Ink.warn('Rule "'+e+'" not found. Used in element:',this._element),this._addError(null),!1;if(c[e].apply(this,this._rules[e])===!1)return this._addError(e),!1}return!0}},t.createUIComponent(h),u._name="FormValidator_1",u._optionDefinition={eventTrigger:["String","submit"],neverSubmit:["Boolean",!1],searchFor:["String","input, select, textarea, .control-group"],beforeValidation:["Function",void 0],onError:["Function",void 0],onSuccess:["Function",void 0]},u.setRule=function(t,e,n){if(c[t]=n,d.getKey("formvalidator."+t)!==e){var i={};i["formvalidator."+t]=e;var o={};o[d.lang()]=i,d.append(o)}},u.getI18n=function(){return d},u.setI18n=function(t){d=t},u.appendI18n=function(){d.append.apply(d,[].slice.call(arguments))},u.setLanguage=function(t){d.lang(t)},u.getRules=function(){return c},u.prototype={_init:function(){this._rootElement=this._element,this._formElements={},this._errorMessages=[],this._markedErrorElements=[],"string"==typeof this._options.eventTrigger&&n.observe(this._rootElement,this._options.eventTrigger,Ink.bindEvent(this.validate,this))},getElements:function(){this._formElements||(this._formElements={});for(var t=i.select(this._options.searchFor,this._rootElement),n=0;n<t.length;n+=1){var o=t[n],r=e.data(o);if("rules"in r){var s,a={form:this};"name"in o&&o.name?s=o.name:"id"in o&&o.id?s=o.id:(s="element_"+Math.floor(100*Math.random()),o.id=s),s in this._formElements||(this._formElements[s]=[]);var l=this._getOrCreateFormElementInstance(s,o,a);l&&this._formElements[s].push(l)}}return this._formElements},_getOrCreateFormElementInstance:function(t,e,n){for(var i=0;i<this._formElements[t].length;i++)if(this._formElements[t][i].getElement()===e)return null;return new h(e,n)},setI18n:function(t){t.clone&&(t=t.clone()),this.i18n=t},getI18n:function(){return this.i18n||d},setLanguage:function(t){this.i18n||this.setI18n(d),this.i18n.lang(t)},getLanguage:function(){return this.i18n?this.i18n.lang():d.lang()},validate:function(t){this._options.neverSubmit&&t&&n.stopDefault(t),"function"==typeof this._options.beforeValidation&&this._options.beforeValidation(),r.each(this._markedErrorElements,function(t){o.removeClassName(t,["validation","error"])}),r.each(this._errorMessages,e.remove),this.getElements();var i=[];for(var s in this._formElements)if(this._formElements.hasOwnProperty(s))for(var a=0;a<this._formElements[s].length;a+=1)this._formElements[s][a].validate()||i.push(this._formElements[s][a]);return 0===i.length?("function"==typeof this._options.onSuccess&&this._options.onSuccess(),!0):(t&&n.stopDefault(t),"function"==typeof this._options.onError&&this._options.onError(i),this._errorMessages=[],this._markedErrorElements=[],r.each(i,Ink.bind(function(t){var n,i;o.hasClassName(t.getElement(),"control-group")?(n=t.getElement(),i=Ink.s(".control",t.getElement())):(n=e.findUpwardsByClass(t.getElement(),"control-group"),i=e.findUpwardsByClass(t.getElement(),"control")),n&&(o.addClassName(n,["validation","error"]),this._markedErrorElements.push(n));var r=document.createElement("p");o.addClassName(r,"tip"),i||n?(i||n).appendChild(r):e.insertAfter(r,t.getElement());var s=t.getErrors(),a=[];for(var l in s)s.hasOwnProperty(l)&&a.push(s[l]);r.innerHTML=a.join("<br/>"),this._errorMessages.push(r)},this)),!1)}},t.createUIComponent(u),u.FormElement=h,u.validationFunctions=c,u}),Ink.createModule("Ink.UI.ImageQuery","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Util.Array_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="ImageQuery_1",o._optionDefinition={src:["String"],retina:["String",void 0],queries:["Object"],onLoad:["Function",null]},o.prototype={_init:function(){var t;if(-1!==(t=this._element.src.lastIndexOf("?"))){var n=this._element.src.substr(t);this._filename=this._element.src.replace(n,"").split("/").pop()+n}else this._filename=this._element.src.split("/").pop();this._options.queries||(this._options.queries=[]),this._options.queries=i.sortMulti(this._options.queries,"width").reverse(),"function"==typeof this._options.onLoad&&e.observe(this._element,"load",Ink.bindEvent(this._onLoad,this)),this._onResize(),e.observe(window,"resize",e.throttle(Ink.bindMethod(this,"_onResize"),400))},_onResize:function(){if(this._options.queries.length){var t=this._findCurrentQuery();this._element.src=this.getQuerySrc(t)}},_findCurrentQuery:function(){for(var t=n.viewportWidth(),e=this._options.queries,i=e.length-1,o=0;i>o;o+=1)if(e[o].width<=t)return e[o];return e[i]},getQuerySrc:function(t){var e=t.src||this._options.src;if(window.devicePixelRatio>1&&void 0!==this._options.retina&&(e=t.retina||this._options.retina),t.file=this._filename,"function"==typeof e&&(e=e.apply(this,[this._element,t]),"string"!=typeof e))throw'[ImageQuery] :: "src" callback does not return a string';return e=e.replace(/{:(.*?)}/g,function(e,n){return t[n]}),delete t.file,e},_onLoad:function(){this._options.onLoad.call(this)}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.LazyLoad","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Css_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="LazyLoad_1",o._optionDefinition={item:["String",".lazyload-item"],placeholder:["String",null],loadedClass:["String",null],source:["String","data-src"],destination:["String","src"],delay:["Number",100],delta:["Number",0],image:["Boolean",!0],scrollElement:["Element",window],touchEvents:["Boolean",!0],onInsideViewport:["Function",!1],onAfterAttributeChange:["Function",!1],autoInit:["Boolean",!0]},o.prototype={_init:function(){this._aData=[],this._hasEvents=!1,this._options.autoInit&&this._activate()},_activate:function(){this._getData(),this._hasEvents||this._addEvents(),this._onScrollThrottled()},_getData:function(){for(var t=Ink.ss(this._options.item,this._element),e=null,i=0,o=t.length;o>i;i++)null==this._options.placeholder||n.hasAttribute(t[i],this._options.destination)||t[i].setAttribute(this._options.destination,this._options.placeholder),e=t[i].getAttribute(this._options.source),null===e&&this._options.image||this._aData.push({elm:t[i],original:e})},_addEvents:function(){this._onScrollThrottled=e.throttle(Ink.bindEvent(this._onScroll,this),this._options.delay),"ontouchmove"in document.documentElement&&this._options.touchEvents&&e.observe(document.documentElement,"touchmove",this._onScrollThrottled),e.observe(this._options.scrollElement,"scroll",this._onScrollThrottled),this._hasEvents=!0},_removeEvents:function(){"ontouchmove"in document.documentElement&&this._options.touchEvents&&e.stopObserving(document.documentElement,"touchmove",this._onScrollThrottled),e.stopObserving(this._options.scrollElement,"scroll",this._onScrollThrottled),this._hasEvents=!1},_onScroll:function(){for(var t,e=0;e<this._aData.length;e++)t=this._aData[e],n.inViewport(t.elm,{partial:!0,margin:this._options.delta})&&(this._elInViewport(t),this._aData.splice(e,1),e-=1);0===this._aData.length&&this._removeEvents()},_elInViewport:function(t){this._userCallback("onInsideViewport",{element:t.elm}),this._options.image&&(t.elm.setAttribute(this._options.destination,t.original),this._options.loadedClass&&i.addClassName(t.elm,this._options.loadedClass),t.elm.removeAttribute(this._options.source)),this._userCallback("onAfterAttributeChange",{element:t.elm})},_userCallback:function(t){"function"==typeof this._options[t]&&this._options[t].apply(this,[].slice.call(arguments,1))},reload:function(){this._activate()},destroy:function(){this._hasEvents&&this._removeEvents(),t.destroyComponent.call(this)}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Modal","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}var a=function(t){return t.style.opacity="invalid","invalid"!==t.style.opacity}(i.create("div",{style:"opacity: 1"})),l=function(t){return"10vh"===t.style.height&&"10vw"===t.style.width}(i.create("div",{style:"height:10vh;width:10vw"})),h=function(t){return""!==t.style.display}(i.create("div",{style:"display: flex"})),u=function(t){t=t.replace(/^\s+|\s+$/g,"");
var e=-1!==t.indexOf("%"),n=-1!==t.indexOf("px");return e||n?!e&&n?t:!n&&e?t:t+"px":t+"%"},c=function(t,e){for(var n,i=t.split(/\s+/g),o=0;o<i.length;o++){var r=i[o].split("-"),s=r[0].replace(/^\s+|\s+$/g,"");if(s===e)return u(r[1]);"all"===s&&(n=u(r[1]))}return n},d=[];return s._name="Modal_1",s._optionDefinition={width:["String","90%"],height:["String","90%"],shadeClass:["String",void 0],modalClass:["String",void 0],trigger:["String",void 0],triggerEvent:["String","click"],autoDisplay:["Boolean",!0],markup:["String",void 0],onShow:["Function",void 0],onDismiss:["Function",void 0],closeOnClick:["Boolean",!1],closeOnEscape:["Boolean",!0],responsive:["Boolean",!0]},s.prototype={_init:function(){if(this._handlers={click:Ink.bindEvent(this._onShadeClick,this),keyDown:Ink.bindEvent(this._onKeyDown,this),resize:null},this._dimensionIsVariant={width:-1!==(""+this._options.width).indexOf(" "),height:-1!==(""+this._options.height).indexOf(" ")},this._isOpen=!1,this._markupMode=this._element?n.hasClassName(this._element,"ink-modal"):!1,this._markupMode){if(this._modalDiv=this._element,this._modalShadow=this._modalDiv.parentNode,this._contentContainer=o.select(".modal-body",this._modalDiv)[0],!this._contentContainer)throw new Error('Ink.UI.Modal: Missing div with class "modal-body"');this._options.markup=this._contentContainer.innerHTML}else this._modalShadow=i.create("div",{className:"ink-shade"}),this._modalDiv=i.create("div",{className:"ink-modal ink-space"}),this._element&&(this._options.markup=this._element.innerHTML),this._modalShadow.appendChild(this._modalDiv),document.body.appendChild(this._modalShadow);if(this._markupMode||this.setContentMarkup(this._options.markup),"string"==typeof this._options.shadeClass&&n.addClassName(this._modalShadow,this._options.shadeClass),"string"==typeof this._options.modalClass&&n.addClassName(this._modalDiv,this._options.modalClass),this._options.trigger){var r=t.elsOrSelector(this._options.trigger,"");e.observeMulti(r,this._options.triggerEvent,Ink.bindEvent(this.open,this))}else this._options.autoDisplay&&this.open()},_dimensionIsPercentage:function(){var t=this._getDimensions();return{width:-1!==(""+t.width).indexOf("%"),height:-1!==(""+t.height).indexOf("%")}},_getDimensions:function(e){e=e||{};var n,o={width:this._options.width,height:this._options.height};if((this._dimensionIsVariant.width||this._dimensionIsVariant.height)&&(n=t.currentLayout()),this._dimensionIsVariant.width&&(o.width=c(o.width,n)),this._dimensionIsVariant.height&&(o.height=c(o.height,n)),e.dynamic){var r=this._dimensionIsPercentage();if(!r.width){var s=.9*i.viewportWidth();parseFloat(o.width)>=s&&(o.width=s+"px")}if(!r.height){var a=.9*i.viewportHeight();parseFloat(o.height)>=a&&(o.height=a+"px")}}return o},_reposition:function(){var t,e=this._dimensionIsPercentage(),n=this._getDimensions();l&&e.height?this._modalDiv.style.marginTop=-parseFloat(n.height)/2+"vh":l?(t=parseFloat(n.height)>.9*i.viewportHeight(),(t!==this._heightWasLargerThan90Percent||!t||this._dimensionIsVariant.height)&&(this._heightWasLargerThan90Percent=t,t?(this._modalDiv.style.marginTop="0",this._modalDiv.style.top="5vh"):(this._modalDiv.style.marginTop=-parseFloat(n.height)/2+"px",this._modalDiv.style.top=""))):this._modalDiv.style.marginTop=-i.elementHeight(this._modalDiv)/2+"px",l&&e.width?this._modalDiv.style.marginLeft=-parseFloat(n.width)/2+"vw":l?(t=parseFloat(n.width)>.9*i.viewportWidth(),(t!==this._widthWasLargerThan90Percent||!t||this._dimensionIsVariant.width)&&(this._widthWasLargerThan90Percent=t,t?(this._modalDiv.style.marginLeft="0",this._modalDiv.style.left="5vw"):(this._modalDiv.style.marginLeft=-parseFloat(n.width)/2+"px",this._modalDiv.style.left=""))):this._modalDiv.style.marginLeft=-i.elementWidth(this._modalDiv)/2+"px"},_onResize:function(){var t=this._dimensionIsVariant.height||this._dimensionIsVariant.width,e=this._dimensionIsPercentage(),n=!e.height||!e.width;t&&this._resize(),(!l||t)&&this._avoidModalLargerThanScreen(),(!l||n||t)&&this._reposition(),h||this._resizeContainer()},_onShadeClick:function(t){var r=e.element(t);if(r===this._modalShadow&&this._options.closeOnClick)this.dismiss();else if(n.hasClassName(r,"ink-close")||n.hasClassName(r,"ink-dismiss")||i.findUpwardsBySelector(r,".ink-close,.ink-dismiss")||this._options.closeOnClick&&(!i.descendantOf(this._shadeElement,r)||r===this._shadeElement)){for(var s=o.select(".ink-alert",this._shadeElement),a=s.length,l=0;a>l;l++)if(i.descendantOf(s[l],r))return;this.dismiss(),this._isOpen||e.stop(t)}},_onKeyDown:function(t){27===t.keyCode&&this._isOpen&&this._options.closeOnEscape&&d[d.length-1]===this&&(this.dismiss(),this._isOpen||e.stop(t))},_resize:function(){var t=this._getDimensions();this._modalDiv.style.width=t.width,this._modalDiv.style.height=t.height},_resizeContainer:function(){var t=i.elementHeight(this._modalDiv);this._modalHeader=o.select(".modal-header",this._modalDiv)[0],this._modalHeader&&(t-=i.elementHeight(this._modalHeader)),this._modalFooter=o.select(".modal-footer",this._modalDiv)[0],this._modalFooter&&(t-=i.elementHeight(this._modalFooter)),this._contentContainer.style.height=t+"px",this._markupMode},_resizeContainerFlex:function(){this._contentContainer.style.flex="1",this._modalDiv.style.display="flex",this._modalDiv.style.flexDirection="column"},_avoidModalLargerThanScreen:function(){var t=this._dimensionIsPercentage();if(l)t.width||(this._modalDiv.style.maxWidth="90vw"),t.height||(this._modalDiv.style.maxHeight="90vh");else{var e={height:i.viewportHeight(),width:i.viewportWidth()},n=this._getDimensions();r.forEach(["height","width"],Ink.bind(function(i){if(!t[i]){var o=Math.round(.9*e[i]);if(parseFloat(n[i])>o)this._modalDiv.style[i]=o+"px";else{if(isNaN(parseFloat(n[i])))return;this._modalDiv.style[i]=parseFloat(n[i])+"px"}}},this))}},open:function(t){if(this.isOpen())return!1;if(t&&e.stop(t),n.addClassName(this._modalShadow,"ink-shade"),this._modalShadow.style.display=this._modalDiv.style.display="block",this._modalShadow.offsetHeight,n.addClassName(this._modalShadow,"visible"),n.addClassName(this._modalDiv,"visible"),this._contentElement=this._modalDiv,this._shadeElement=this._modalShadow,this._markupMode||this.setContentMarkup(this._options.markup),this._resize(),this._avoidModalLargerThanScreen(),this._reposition(),h?this._resizeContainerFlex():this._resizeContainer(),this._options.responsive){var i=this._dimensionIsPercentage(),o=!(l&&h&&i.height&&i.width&&!this._dimensionIsVariant.height&&!this._dimensionIsVariant.width);o&&(this._handlers.resize=e.throttle(Ink.bind(this._onResize,this),500),e.observe(window,"resize",this._handlers.resize))}this._options.onShow&&this._options.onShow(this),e.observe(this._shadeElement,"click",this._handlers.click),this._options.closeOnEscape&&e.observe(document,"keydown",this._handlers.keyDown),this._isOpen=!0,d.push(this),n.addClassName(document.documentElement,"ink-modal-open")},isOpen:function(){return this._isOpen},dismiss:function(){if(this._isOpen){if(this._options.onDismiss){var t=this._options.onDismiss(this);if(t===!1)return}if(this._isOpen=!1,this._handlers.resize&&e.stopObserving(window,"resize",this._handlers.resize),this._markupMode?(n.removeClassName(this._modalDiv,"visible"),n.removeClassName(this._modalShadow,"visible"),this._waitForFade(this._modalShadow,Ink.bind(function(){this._modalShadow.style.display="none"},this))):(this._modalShadow.parentNode.removeChild(this._modalShadow),this.destroy()),d=r.remove(d,r.keyValue(this,d),1),0===d.length){var i=document.documentElement;n.removeClassName(i,"ink-modal-open")}}},_waitForFade:function(t,e){if(!a)return e();var i=5,o=function(){+n.getStyle(t,"opacity")>0&&i>0?(i--,setTimeout(o,250)):e()};setTimeout(o,500)},destroy:function(){t.unregisterInstance(this._instanceId)},getContentElement:function(){return this._contentContainer},setContentMarkup:function(t){if(this._markupMode)this._contentContainer.innerHTML=t;else{if(this._modalDiv.innerHTML=[t].join(""),this._contentContainer=o.select(".modal-body",this._modalDiv),!this._contentContainer.length){var e=o.select(".modal-header",this._modalDiv),s=o.select(".modal-footer",this._modalDiv);r.each(e,i.remove),r.each(s,i.remove);var a=document.createElement("div");n.addClassName(a,"modal-body"),a.innerHTML=this._modalDiv.innerHTML,this._modalDiv.innerHTML="";var l=e.concat([a]).concat(s);r.each(l,Ink.bindMethod(this._modalDiv,"appendChild")),this._contentContainer=o.select(".modal-body",this._modalDiv)}this._contentContainer=this._contentContainer[0]}this._contentElement=this._modalDiv,this._resizeContainer()}},t.createUIComponent(s,{elementIsOptional:!0}),s}),Ink.createModule("Ink.UI.Pagination","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}var s=function(t,e,n){var i=document.createElement("a");if(i.setAttribute("href","#"),"number"==typeof e&&i.setAttribute("data-index",e),n&&n.wrapText){var o=document.createElement("span");i.appendChild(o),o.innerHTML=t}else i.innerHTML=t;return i};return r._name="Pagination_1",r._optionDefinition={size:["Integer",null],totalItemCount:["Integer",null],itemsPerPage:["Integer",null],maxSize:["Integer",null],start:["Integer",1],sideButtons:["Boolean",1],firstLabel:["String","First"],lastLabel:["String","Last"],previousLabel:["String","Previous"],nextLabel:["String","Next"],previousPageLabel:["String",null],nextPageLabel:["String",null],onChange:["Function",void 0],hashParameter:["String","page"],parentTag:["String","ul"],childTag:["String","li"],wrapperClass:["String","ink-navigation"],paginationClass:["String","pagination"],activeClass:["String","active"],disabledClass:["String","disabled"],hideClass:["String","hide-all"],previousClass:["String","previous"],previousPageClass:["String","previousPage"],nextClass:["String","next"],nextPageClass:["String","nextPage"],firstClass:["String","first"],lastClass:["String","last"],numberFormatter:["Function",function(t){return t+1}],autoWrap:["Boolean",!1]},r.prototype={_init:function(){this._options.previousPageLabel||(this._options.previousPageLabel=this._options.previousLabel+" "+this._options.maxSize),this._options.nextPageLabel||(this._options.nextPageLabel=this._options.nextLabel+" "+this._options.maxSize),this._handlers={click:Ink.bindEvent(this._onClick,this)},t.isInteger(this._options.totalItemCount)&&t.isInteger(this._options.itemsPerPage)?this._size=this._calculateSize(this._options.totalItemCount,this._options.itemsPerPage):t.isInteger(this._options.size)?this._size=this._options.size:(Ink.error("Ink.UI.Pagination: Please supply a size option or totalItemCount and itemsPerPage options."),this._size=0),this._current=this._options.start-1,this._itemLiEls=[],this._generateMarkup(this._element),this._updateItems(),this._observe()},_observe:function(){e.observeDelegated(this._element,"click","."+this._options.paginationClass+" > "+this._options.childTag,this._handlers.click)},_calculateSize:function(t,e){return Math.ceil(t/e)},_updateItems:function(){var t,e,i,o=this._itemLiEls,r=this._size===o.length;if(r)for(t=0,e=this._size;e>t;++t)n.setClassName(o[t],this._options.activeClass,t===this._current);else{for(t=o.length-1;t>=0;--t)this._ulEl.removeChild(o[t]);for(o=[],t=0,e=this._size;e>t;++t)i=document.createElement(this._options.childTag),i.appendChild(s(this._options.numberFormatter(t,this._size),t)),n.setClassName(i,this._options.activeClass,t===this._current),this._nextEl?this._ulEl.insertBefore(i,this._nextEl):this._ulEl.appendChild(i),o.push(i);this._itemLiEls=o}if(this._options.maxSize){var a=Math.floor(this._current/this._options.maxSize),l=this._options.maxSize*a,h=l+this._options.maxSize-1;for(t=0,e=this._size;e>t;++t)i=o[t],n.setClassName(i,this._options.hideClass,l>t||t>h);this._pageStart=l,this._pageEnd=h,this._page=a,n.setClassName(this._prevPageEl,this._options.disabledClass,!this.hasPreviousPage()),n.setClassName(this._nextPageEl,this._options.disabledClass,!this.hasNextPage()),n.setClassName(this._firstEl,this._options.disabledClass,this.isFirst()),n.setClassName(this._lastEl,this._options.disabledClass,this.isLast())}this._prevEl&&!this._options.autoWrap&&n.setClassName(this._prevEl,this._options.disabledClass,!this.hasPrevious()),this._nextEl&&!this._options.autoWrap&&n.setClassName(this._nextEl,this._options.disabledClass,!this.hasNext())},_generateMarkup:function(t){n.addClassName(t,"ink-navigation");var e=Ink.s("."+this._options.paginationClass,t),i=!1;e?i=!0:(e=document.createElement(this._options.parentTag),n.addClassName(e,this._options.paginationClass));var o=n.hasClassName(e,"chevron"),r=n.hasClassName(e,"dotted"),a=Ink.bind(function(t,i){var o=document.createElement(this._options.childTag),r=s(this._options[t+"Label"],void 0,{wrapText:i&&i.wrapText});return n.addClassName(o,this._options[t+"Class"]),o.appendChild(r),e.appendChild(o),o},this);!r&&this._options.maxSize&&(this._firstEl=a("first"),this._prevPageEl=a("previousPage")),(r&&this._options.sideButtons===!0||!r&&this._options.sideButtons)&&(this._prevEl=a("previous",{wrapText:o}),this._nextEl=a("next",{wrapText:o})),!r&&this._options.maxSize&&(this._nextPageEl=a("nextPage"),this._lastEl=a("last")),i||t.appendChild(e),this._ulEl=e},_onClick:function(t){e.stop(t);var i=e.element(t);if(!n.hasClassName(i,this._options.activeClass)&&!n.hasClassName(i,this._options.disabledClass)){var r=n.hasClassName(i,this._options.previousClass),s=n.hasClassName(i,this._options.nextClass),a=n.hasClassName(i,this._options.previousPageClass),l=n.hasClassName(i,this._options.nextPageClass),h=n.hasClassName(i,this._options.firstClass),u=n.hasClassName(i,this._options.lastClass);if(h)this.setCurrent(0);else if(u)this.setCurrent(this._size-1);else if(a||l)this.setCurrent((a?-1:1)*this._options.maxSize,!0,!!this._options.autoWrap);else if(r||s)this.setCurrent(r?-1:1,!0,!!this._options.autoWrap);else{var c=o.select("[data-index]",i)[0],d=c&&parseInt(c.getAttribute("data-index"),10);this.setCurrent(d)}}},setOnChange:function(t){if(t&&"function"!=typeof t)throw new TypeError("onChange option must be a function!");this._options.onChange=t},setSize:function(e){if(!t.isInteger(e))throw new TypeError("1st argument must be an integer number!");this._size=e,this._updateItems(),this._current=0},setSizeInItems:function(t,e){var n=Math.ceil(t/e);this.setSize(n)},setCurrent:function(e,n,i){if(!t.isInteger(e))throw new TypeError("1st argument must be an integer number!");n&&(e+=this._current),i?(e%=this._size,0>e&&(e+=this._size)):(e>this._size-1&&(e=this._size-1),0>e&&(e=0)),this._current=e,this._updateItems(),this._options.onChange&&this._options.onChange(this,e)},next:function(t){this.setCurrent(1,!0,t)},previous:function(t){this.setCurrent(-1,!0,t)},getSize:function(){return this._size},getCurrent:function(){return this._current},isFirst:function(){return 0===this._current},isLast:function(){return this._current===this._size-1},hasPrevious:function(){return this._current>0},hasNext:function(){return this._current<this._size-1},hasPreviousPage:function(){return this._options.maxSize&&this._current>this._options.maxSize-1},hasNextPage:function(){return this._options.maxSize&&this._size-this._current>=this._options.maxSize+1},destroy:t.destroyComponent},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.ProgressBar","1",["Ink.UI.Common_1","Ink.Dom.Selector_1"],function(t,e){"use strict";function n(){t.BaseUIComponent.apply(this,arguments)}return n._name="ProgressBar_1",n._optionDefinition={startValue:["Number",0],onStart:["Function",function(){}],onEnd:["Function",function(){}]},n.prototype={_init:function(){if(this._value=this._options.startValue,this._elementBar=e.select(".bar",this._element),this._elementBar.length<1)throw new Error("[Ink.UI.ProgressBar] :: Bar element not found");this._elementBar=this._elementBar[0],this.setValue(this._options.startValue)},setValue:function(t){this._options.onStart.call(this,this._value),t=parseInt(t,10),isNaN(t)||0>t?t=0:t>100&&(t=100),this._value=t,this._elementBar.style.width=this._value+"%",this._options.onEnd.call(this,this._value)}},t.createUIComponent(n),n}),Ink.createModule("Ink.UI.SmoothScroller","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Dom.Css_1"],function(t,e,n,i,o){"use strict";var r=window.requestAnimationFrame||function(t){return setTimeout(t,10)},s=window.cancelAnimationFrame||function(t){clearTimeout(t)},a={speed:10,changeHash:!0,margin:0,scroll:function(t,e){var i=Math.round(n.scrollHeight()),o=Math.round(t-(e.margin||0));i+=o>i?Math.ceil((o-i)/e.speed):(o-i)/e.speed,s(a.interval),i!==o&&a.offsetTop!==i?a.interval=r(Ink.bindMethod(a,"scroll",t,e),document.body):a.onDone(e),window.scrollTo(0,i),a.offsetTop=i},init:function(t){e.on(document,"click",t||"a.scrollableLink, a.ink-smooth-scroll",a.onClick)},render:function(){},onClick:function(e){var i=e.currentTarget,r=(location+"").replace(/#.*?$/,""),s=(i.href+"").replace(/#.*?$/,"");if(s===r){var l=i.getAttribute("data-hash")||(i.getAttribute("href")||"").replace(/^.*?#/,"");if(l){e.preventDefault();var h="ul > li.active > "+u,u='a[name="'+l+'"],#'+l,c=Ink.s(u),d=Ink.s(h);if(d=d&&d.parentNode,c){o.hasClassName(i.parentNode,"active")||(d&&o.removeClassName(d,"active"),o.addClassName(i.parentNode,"active"));var p=t.options("SmoothScroller link options",{margin:["Number",a.margin],speed:["Number",a.speed],changeHash:["Boolean",a.changeHash]},{},i);a.hash=l,a.scroll(n.offsetTop(c),p)}}}},onDone:function(t){t.changeHash===!0&&(window.location.hash=a.hash),a.hash=a.offsetTop=null}};return a}),Ink.createModule("Ink.UI.SortableList","1",["Ink.UI.Common_1","Ink.Dom.Css_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}var s="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;return r._name="SortableList_1",r._optionDefinition={placeholderClass:["String","placeholder"],draggedClass:["String","hide-all"],draggingClass:["String","dragging"],dragSelector:["String","> li"],handleSelector:["String",":not(button, button *, a[href], a[href] *)"],moveSelector:["String",!1],swap:["Boolean",!1],cancelMouseOut:["Boolean",!1],onDrop:["Function",function(){}]},r.prototype={_init:function(){this._handlers={down:Ink.bind(this._onDown,this),move:Ink.bind(this._onMove,this),up:Ink.bind(this._onUp,this)},this._isMoving=!1,this._down=s?"touchstart mousedown":"mousedown",this._move=s?"touchmove mousemove":"mousemove",this._up=s?"touchend mouseup":"mouseup",this._observe()},_observe:function(){n.on(this._element,this._down,this._options.dragSelector,this._handlers.down),n.on(this._element,this._move,this._options.dragSelector,this._handlers.move),this._options.cancelMouseOut&&n.on(this._element,"mouseleave",Ink.bind(this.stopMoving,this)),n.on(document.documentElement,this._up,this._handlers.up)},_onDown:function(t){if(!this._isMoving&&!this._placeholder){var e=t.currentTarget;if(this._options.handleSelector){var n=i.findUpwardsBySelector(t.target,this._options.handleSelector);if(!n||!i.isAncestorOf(e,n))return}return this._isMoving=e,this._placeholder=e.cloneNode(!0),this._movePlaceholder(e),this._addMovingClasses(),!1}},_onMove:function(t){var e=t.currentTarget;if("touchmove"===t.type){var n=t.touches[0];e=document.elementFromPoint(n.clientX,n.clientY),e=i.findUpwardsBySelector(e,this._options.dragSelector)}this.validateMove(e),t.preventDefault()},_onUp:function(t){return this._isMoving&&this._placeholder&&t.currentTarget!==this._isMoving&&t.currentTarget!==this._placeholder?(i.insertBefore(this._isMoving,this._placeholder),this.stopMoving(),this._options.onDrop.call(this,{droppedElement:t.currentTarget}),!1):void 0},_addMovingClasses:function(){e.addClassName(this._placeholder,this._options.placeholderClass),e.addClassName(this._isMoving,this._options.draggedClass),e.addClassName(document.documentElement,this._options.draggingClass)},_removeMovingClasses:function(){this._isMoving&&e.removeClassName(this._isMoving,this._options.draggedClass),this._placeholder&&e.removeClassName(this._placeholder,this._options.placeholderClass),e.removeClassName(document.documentElement,this._options.draggingClass)},_movePlaceholder:function(t){var e,n,o,r,s=this._placeholder;s?this._options.swap?(i.insertAfter(s,t),i.insertBefore(t,this._isMoving),i.insertBefore(this._isMoving,s)):(e=i.offset(t),n=i.offset(this._placeholder),o=e[1]>n[1],r=e[0]>n[0],o&&r||!o&&!r?i.insertBefore(s,t):i.insertAfter(s,t),i.insertBefore(this._isMoving,s)):i.insertAfter(s,t)},destroy:t.destroyComponent,stopMoving:function(){this._removeMovingClasses(),i.remove(this._placeholder),this._placeholder=!1,this._isMoving=!1},validateMove:function(t){t&&this._isMoving&&this._placeholder&&t!==this._placeholder&&t!==this._isMoving&&(!this._options.moveSelector||o.matchesSelector(t,this._options.moveSelector)?this._movePlaceholder(t):this.stopMoving())}},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.Spy","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(t){for(var e=0,n=d.length;n>e;e++)if(d[e][0]===t)return e;return null}function s(t,e){var n=r(e);null===n?d.push([e,[t]]):d[n][1].push(t)}function a(){p||(p=!0,e.observe(document,"scroll",e.throttle(l,300)))}function l(){for(var t=0,e=d.length;e>t;t++)h(d[t][0],d[t][1])}function h(t,e){for(var r=u(e),s=o.select("li.active",t),a=0,l=s.length;l>a;a++)n.removeClassName(s[a],"active");if(null!==r){var h='a[href$="#'+(r.name||r.id)+'"]',c=o.select(h,t);for(a=0,l=c.length;l>a;a++)n.addClassName(i.findUpwardsByTag(c[a],"li"),"active")}}function u(t){for(var e,n,i=-1/0,o=0,r=t.length;r>o;o++)n=t[o].getBoundingClientRect(),n.top<=0&&n.top>i&&(i=n.top,e=o);return void 0===e?null:t[e]}function c(){t.BaseUIComponent.apply(this,arguments)}var d=[],p=!1;return c._name="Spy_1",c._optionDefinition={target:["Element",void 0]},c.prototype={_init:function(){s(this._element,this._options.target),a(),l()}},t.createUIComponent(c),c}),Ink.createModule("Ink.UI.Stacker",1,["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e,n){"use strict";function i(){t.BaseUIComponent.apply(this,arguments)}return i._name="Stacker_1",i._optionDefinition={column:["String",".stacker-column"],item:["String",".stacker-item"],customBreakPoints:["Object",null],largeMax:["Number",Number.MAX_VALUE],largeMin:["Number",961],mediumMax:["Number",960],mediumMin:["Number",651],smallMax:["Number",650],smallMin:["Number",0],largeCols:["Integer",3],mediumCols:["Integer",2],smallCols:["Integer",1],isOrdered:["Boolean",!0],onRunCallback:["Function",null],onResizeCallback:["Function",null],onAPIReloadCallback:["Function",null]},i.prototype={_init:function(){this._aList=[],this._curLayout="large",this._runFirstTime=!1,this._getPageItemsToList(),(this._canApplyLayoutChange()||!this._runFirstTime)&&(this._runFirstTime=!0,this._applyLayoutChange(),"function"==typeof this._options.onRunCallback&&this._options.onRunCallback(this._curLayout)),this._addEvents()},addItem:function(t){this._aList.push(t)},reloadItems:function(){this._applyLayoutChange(),"function"==typeof this._options.onAPIReloadCallback&&this._options.onAPIReloadCallback(this._curLayout)},_addEvents:function(){e.observe(window,"resize",Ink.bindEvent(this._onResize,this))},_onResize:function(){this._canApplyLayoutChange()&&(this._removeDomItems(),this._applyLayoutChange(),"function"==typeof this._options.onResizeCallback&&this._options.onResizeCallback(this._curLayout))},_setCurLayout:function(){var t=n.viewportWidth();if(this._options.customBreakpoints&&"object"==typeof this._options.customBreakPoints){for(var e in this._options.customBreakPoints)if(this._options.customBreakPoints.hasOwnProperty(e)&&t>=Number(this._options.customBreakPoints[e].min)&&t<=Number(this._options.customBreakPoints[e].max)&&this._curLayout!==e)return void(this._curLayout=e)}else t<=Number(this._options.largeMax)&&t>=Number(this._options.largeMin)&&"large"!==this._curLayout?this._curLayout="large":t>=Number(this._options.mediumMin)&&t<=Number(this._options.mediumMax)&&"medium"!==this._curLayout?this._curLayout="medium":t>=Number(this._options.smallMin)&&t<=Number(this._options.smallMax)&&"small"!==this._curLayout&&(this._curLayout="small")},_getColumnsToShow:function(){return Number(this._options.customBreakPoints&&"object"==typeof this._options.customBreakPoints?this._options.customBreakPoints[this._curLayout].cols:this._options[this._curLayout+"Cols"])},_canApplyLayoutChange:function(){var t=this._curLayout;return this._setCurLayout(),t!==this._curLayout?!0:!1},_getPageItemsToList:function(){this._aColumn=Ink.ss(this._options.column,this._element);var t=this._aColumn.length,e=0;if(t>0){for(var n=0;n<this._aColumn.length;n++)for(var i=Ink.ss(this._options.item,this._aColumn[n]),o=0;o<i.length;o++)this._options.isOrdered&&(e=n+o*t),this._aList[e]=i[o],this._options.isOrdered||e++,i[o].parentNode.removeChild(i[o]);if(this._aList.length>0&&this._options.isOrdered){for(var r=[],s=0;s<this._aList.length;s++)"undefined"!=typeof this._aList[s]&&r.push(this._aList[s]);this._aList=r}}},_removeDomItems:function(){var t=this._aColumn.length;if(t>0)for(var e=0;t>e;e++)for(var n=Ink.ss(this._options.item,this._aColumn[e]),i=n.length-1;i>=0;i--)n[i].parentNode.removeChild(n[i])},_applyLayoutChange:function(){var t=this._getColumnsToShow(),e=this._aList.length,n=0,i=0;if(t>0)for(;t>i;){if(this._aColumn[i].appendChild(this._aList[n]),n++,i++,n===e)return;i===t&&(i=0)}}},t.createUIComponent(i),i}),Ink.createModule("Ink.UI.Sticky","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Css_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="Sticky_1",o._optionDefinition={offsetBottom:["Integer",0],offsetTop:["Integer",0],topElement:["Element",null],wrapperClass:["String","ink-sticky-wrapper"],stickyClass:["String","ink-sticky-stuck"],inlineDimensions:["Boolean",!0],inlinePosition:["Boolean",!0],bottomElement:["Element",null],activateInLayouts:["String",null]},o.prototype={_init:function(){this._options.activateInLayouts&&(this._options.activateInLayouts=this._options.activateInLayouts.toString()),this._dims=null,this._options.offsetTop=parseInt(this._options.offsetTop,10)||0,this._options.offsetBottom=parseInt(this._options.offsetBottom,10)||0,this._options.topElement&&(this._options.topElement=t.elOrSelector(this._options.topElement,"Top Element")),this._options.bottomElement&&(this._options.bottomElement=t.elOrSelector(this._options.bottomElement,"Sticky bottom Element")),this._wrapper=n.create("div",{className:this._options.wrapperClass}),n.wrap(this._element,this._wrapper);var i=document.addEventListener?document:window;this._onScroll=Ink.bind(e.throttle(this._onScroll,33),this),e.observe(i,"scroll",this._onScroll),e.observe(window,"resize",Ink.bindEvent(e.throttle(this._onResize,100),this)),this._onScroll()},_isDisabledInLayout:function(){if(!this._options.activateInLayouts)return!1;var e=t.currentLayout();return e?-1===this._options.activateInLayouts.indexOf(e):!1},_onScroll:function(){var t=this._getDims(),e=n.scrollHeight(),i=this._isDisabledInLayout()||e<=t.top-this._options.offsetTop||this._options.topElement&&this._options.topElement.getBoundingClientRect().bottom+this._options.offsetTop>0;if(i)return void this._unstick();var o=this._options.offsetTop+t.height+n.scrollHeight(),r=document.body.scrollHeight;this._options.bottomElement&&(r=this._options.bottomElement.getBoundingClientRect().top+n.scrollHeight()),r-=this._options.offsetBottom,this._stickTo(r>o?"screen":"bottom")},_stickTo:function(t){var e=this._element.style,o=this._getDims();if(i.addClassName(this._element,this._options.stickyClass),this._wrapper.style.height=o.height+"px",this._inlineDimensions(o.height+"px",o.width+"px"),this._options.inlinePosition!==!1)if(e.left=o.left+"px","screen"===t)e.bottom=null,e.top=this._options.offsetTop+"px";else if("bottom"===t){var r=this._getBottomOffset(),s=n.scrollHeight()+n.viewportHeight(),a=n.pageHeight()-s;e.bottom=r-a+"px",e.top="auto"}},_unstick:function(){i.removeClassName(this._element,this._options.stickyClass),this._inlineDimensions(null,null),this._options.inlinePosition&&(this._element.style.left=null,this._element.style.top=null,this._element.style.bottom=null),this._wrapper.style.height=null,this._wrapper.style.width=null,this._dims=null},_onResize:function(){this._dims=null,this._onScroll()},_getDims:function(){if(null!==this._dims)return this._dims;var t=this._element.style,e=t.position,i=t.width;t.position="static",t.width=null;var o=n.outerDimensions(this._element),r=this._wrapper.getBoundingClientRect();return this._dims={height:o[1],width:o[0],left:r.left+n.scrollWidth(),top:r.top+n.scrollHeight()},t.position=e,t.width=i,this._dims},_inlineDimensions:function(t,e){this._options.inlineDimensions&&(this._element.style.height=t,this._element.style.width=e)},_getBottomOffset:function(){var t=this._options.offsetBottom;return this._options.bottomElement&&(t+=n.pageHeight()-n.offsetTop(this._options.bottomElement)),t}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Swipe","1",["Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.UI.Common_1"],function(t,e,n){"use strict";function i(){"function"==typeof arguments[1]&&(arguments[1]={onEnd:arguments[1]}),n.BaseUIComponent.apply(this,arguments)}return i._name="Swipe_1",i._optionDefinition={onEnd:["Function",void 0],onStart:["Function",void 0],onMove:["Function",void 0],minDist:["Number",void 0],maxDist:["Number",void 0],minDuration:["Number",void 0],maxDuration:["Number",void 0],axis:["String",void 0],storeGesture:["Boolean",!1],stopEvents:["Boolean",!0]},i.prototype={_supported:"ontouchstart"in document.documentElement,_init:function(){this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)};var e=document.body;t.observe(e,"touchstart",this._handlers.down),(this._options.storeGesture||this._options.onMove)&&t.observe(e,"touchmove",this._handlers.move),t.observe(e,"touchend",this._handlers.up),this._isOn=!1},_isMeOrParent:function(t,e){if(t){do{if(t===e)return!0;t=t.parentNode}while(t);return!1}},_pushGesture:function(t,e){this._options.storeGesture&&(this._gesture.push(t),this._time.push(e))},_onDown:function(e){1===e.changedTouches.length&&this._isMeOrParent(e.target,this._element)&&(this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0],this._isOn=!0,this._target=e.target,this._t0=+new Date,this._p0=[e.pageX,e.pageY],this._options.storeGesture&&(this._gesture=[],this._time=[]),this._pushGesture(this._p0,0),this._options.onStart&&this._options.onStart({event:e,element:this._element,instance:this,position:this._p0,dt:0}))},_onMove:function(e){if(this._isOn&&1===e.changedTouches.length){this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0];var n=+new Date,i=n-this._t0,o=[e.pageX,e.pageY];this._pushGesture(o,i),this._options.onMove&&this._options.onMove({event:e,element:this._element,instance:this,position:o,dt:i})}},_onUp:function(e){if(this._isOn&&1===e.changedTouches.length){this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0],this._isOn=!1;var n=+new Date,i=[e.pageX,e.pageY],o=n-this._t0,r=[i[0]-this._p0[0],i[1]-this._p0[1]],s=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=Math.abs(r[0])>Math.abs(r[1])?"x":"y",l=this._options;l.minDist&&s<l.minDist||l.maxDist&&s>l.maxDist||l.minDuration&&o<l.minDuration||l.maxDuration&&o>l.maxDuration||l.axis&&a!==l.axis||this._options.onEnd&&this._options.onEnd({event:e,element:this._element,instance:this,gesture:this._gesture,time:this._time,axis:a,overallMovement:r,overallTime:o})}}},n.createUIComponent(i),i}),Ink.createModule("Ink.UI.Table","1",["Ink.Util.Url_1","Ink.UI.Pagination_1","Ink.Net.Ajax_1","Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.String_1","Ink.Util.Json_1"],function(t,e,n,i,o,r,s,a,l,h,u){"use strict";function c(t){return!isNaN(t)&&g.test(t)?parseInt(t,10):isNaN(t)?t:parseFloat(t)}function d(t,e){return t===e?0:t>e?1:-1}function p(t,e){var n=c(s.textContent(t)),i=c(s.textContent(e));return typeof n==typeof i?d(n,i):"number"==typeof n?1:-1}function f(t){if("undefined"!=typeof Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function m(){i.BaseUIComponent.apply(this,arguments)}function _(t){return t}var g=/\d/g;return m._name="Table_1",m._optionDefinition={pageSize:["Integer",null],caretUpClass:["String","fa fa-caret-up"],caretDownClass:["String","fa fa-caret-down"],endpoint:["String",null],createEndpointUrl:["Function",null],createEndpointURL:["Function",null],getDataFromEndPoint:["Function",null],getDataFromEndpoint:["Function",null],processJSONRows:["Function",function(t){return"number"==typeof t.length?t:t.rows||null
}],processJSONRow:["Function",_],processJSONField:["Function",_],processJSONHeaders:["Function",function(t){return t.fields}],processJSONTotalRows:["Function",function(t){return t.totalRows||t.length}],getSortKey:["Function",null],pagination:["Element",null],allowResetSorting:["Boolean",!1],visibleFields:["String",null],tdClassNames:["Object",{}],paginationOptions:["Object",null]},m.prototype={_validate:function(){if("table"!==this._element.nodeName.toLowerCase())throw new Error("[Ink.UI.Table] :: The element is not a table")},_init:function(){this._options.createEndpointUrl&&(this._options.createEndpointURL=this._options.createEndpointUrl),this._options.getDataFromEndPoint&&(this._options.getDataFromEndpoint=this._options.getDataFromEndpoint),this._markupMode=!(this._options.endpoint||this._options.createEndpointURL),this._options.visibleFields&&(this._options.visibleFields=this._options.visibleFields.toString().split(/[, ]+/g)),this._thead=this._element.tHead||this._element.createTHead(),this._headers=a.select("th",this._thead),this._handlers={thClick:null},this._originalFields=[],this._sortableFields={},this._originalData=this._data=[],this._pagination=null,this._totalRows=0,this._handlers.thClick=o.on(this._element,"click",'thead th[data-sortable="true"]',Ink.bindMethod(this,"_onThClick")),this._markupMode?(this._resetSortOrder(),this._addHeadersClasses(),this._data=a.select("tbody tr",this._element),this._originalData=this._data.slice(0),this._totalRows=this._data.length,this._setPagination()):this._getData()},_addHeadersClasses:function(){for(var t,e,n=0,i=this._headers.length;i>n;n++)t=s.textContent(this._headers[n]),e=this._options.tdClassNames[t],e&&r.addClassName(this._headers[n],e)},_onThClick:function(t){var e=o.element(t),n=void 0!==this._options.pageSize;o.stop(t);var i=l.keyValue(e,this._headers,!0),r=i!==!1&&void 0!==this._sortableFields[i];if(r)if(!this._markupMode&&n)this._invertSortOrder(i,!1);else{"desc"===this._sortableFields[i]&&this._options.allowResetSorting?(this._setSortOrderOfColumn(i,null),this._data=this._originalData.slice(0)):this._invertSortOrder(i,!0);var s=a.select("tbody",this._element)[0];l.each(this._data,function(t){s.appendChild(t)}),this._pagination&&(this._pagination.setCurrent(0),this._paginate(1))}},_invertSortOrder:function(t,e){for(var n="asc"===this._sortableFields[t],i=0,o=this._headers.length;o>i;i++)this._setSortOrderOfColumn(i,null);this._setSortOrderOfColumn(t,!n),e?(this._sort(t),n&&this._data.reverse()):this._getData()},_setSortOrderOfColumn:function(t,e){var n=this._headers[t],i=[""],o="none";e===!0?(i=['<i class="',this._options.caretUpClass,'"></i>'],o="asc"):e===!1&&(i=['<i class="',this._options.caretDownClass,'"></i>'],o="desc"),this._sortableFields[t]=o,n.innerHTML=s.textContent(n)+i.join("")},_paginate:function(t){if(this._pagination){var e=this._options.pageSize,n=(t-1)*e,i=n+e;l.each(this._data,function(t,e){e>=n&&i>e?r.removeClassName(t,"hide-all"):r.addClassName(t,"hide-all")})}},_registerFieldNames:function(t){this._originalFields=[],l.forEach(t,Ink.bind(function(t){this._fieldIsVisible(t)&&this._originalFields.push(t)},this))},_fieldIsVisible:function(t){return!this._options.visibleFields||-1!==this._options.visibleFields.indexOf(t)},_sort:function(t){function e(e){return i.call(o,{columnIndex:t,columnName:n,data:s.textContent(e),element:e})}var n=s.textContent(this._headers[t]),i=this._options.getSortKey;i&&(i="function"==typeof i[n]?i[n]:"function"==typeof i?i:null);var o=this;this._data.sort(function(n,o){var r=Ink.ss("td",n)[t],s=Ink.ss("td",o)[t];return i?d(e(r),e(s)):p(r,s,t)})},_createHeadersFromJson:function(t){if(this._registerFieldNames(f(t)),!this._thead.children.length)for(var e,n=this._thead.insertRow(0),i=0,o=t.length;o>i;i++)this._fieldIsVisible(t[i])&&(e=s.create("th"),e=this._createSingleHeaderFromJson(t[i],e),n.appendChild(e),this._headers.push(e))},_createSingleHeaderFromJson:function(t,e){return t.sortable&&e.setAttribute("data-sortable","true"),t.label&&s.setTextContent(e,t.label),e},_resetSortOrder:function(){for(var t=0,e=this._headers.length;e>t;t++){var n=s.data(this._headers[t]);n.sortable&&"true"===n.sortable.toString()&&(this._sortableFields[t]="none")}},_createRowsFromJSON:function(t){var e=a.select("tbody",this._element)[0];e?s.setHTML(e,""):(e=document.createElement("tbody"),this._element.appendChild(e)),this._data=[];var n;for(var i in t)t.hasOwnProperty(i)&&(n=this._options.processJSONRow(t[i]),this._createSingleRowFromJson(e,n,i));this._originalData=this._data.slice(0)},_createSingleRowFromJson:function(t,e,n){var i=document.createElement("tr");t.appendChild(i);for(var o in e)e.hasOwnProperty(o)&&this._createFieldFromJson(i,e[o],o,n);this._data.push(i)},_createFieldFromJson:function(t,e,n,i){if(this._fieldIsVisible(n)){var o,s=this._options.processJSONField[n]||this._options.processJSONField;o="function"==typeof s?s(e,n,i):e;var a=this._elOrFieldData(o),l=this._options.tdClassNames[n];l&&r.addClassName(a,l),t.appendChild(a)}},_elOrFieldData:function(t){if(i.isDOMElement(t))return t;var e="string"==typeof t,n="number"==typeof t,o=s.create("td");if(e&&/^\s*?</.test(t))s.setHTML(o,t);else{if(!e&&!n)throw new Error("Ink.UI.Table Unknown result from processJSONField: "+t);s.setTextContent(o,t)}return o},setEndpoint:function(t,e){this._markupMode||(this._options.endpoint=t,this._pagination&&this._pagination.setCurrent(e?parseInt(e,10):0))},_setPagination:function(){if(null!=this._options.pageSize){var t=this._options.pagination;if(t instanceof e)return void(this._pagination=t);t||(t=s.create("nav",{className:"ink-navigation",insertAfter:this._element}),s.create("ul",{className:"pagination",insertBottom:t}));var n=Ink.extendObj({totalItemCount:this._totalRows,itemsPerPage:this._options.pageSize,onChange:Ink.bind(function(t,e){this._paginate(e+1)},this)},this._options.paginationOptions||{});this._pagination=new e(t,n),this._paginate(1)}},_getData:function(){var t=this._getSortOrder()||null,e=null;this._options.pageSize&&(e={size:this._options.pageSize,page:this._pagination?this._pagination.getCurrent()+1:1}),this._getDataViaAjax(this._getUrl(t,e))},_getSortOrder:function(){var t;for(t in this._sortableFields)if(this._sortableFields.hasOwnProperty(t)&&"none"!==this._sortableFields[t])break;return t?{field:this._originalFields[t]||s.textContent(this._headers[t]),order:this._sortableFields[t]}:null},_getUrl:function(e,n){var i=this._options.createEndpointURL||function(e,n,i){return e=t.parseUrl(e),e.query=e.query||{},n&&(e.query.sortOrder=n.order,e.query.sortField=n.field),i&&(e.query.rows_per_page=i.size,e.query.page=i.page),t.format(e)},o=i(this._options.endpoint,e,n);if("string"!=typeof o)throw new TypeError("Ink.UI.Table_1: createEndpointUrl did not return a string!");return o},_getDataViaAjax:function(t){var e=Ink.bind(function(t){this._onAjaxSuccess(t)},this);this._options.getDataFromEndpoint?this._options.getDataFromEndpoint(t,e):new n(t,{method:"GET",contentType:"application/json",sanitizeJSON:!0,onSuccess:Ink.bind(function(t){200===t.status&&e(u.parse(t.responseText))},this)})},_onAjaxSuccess:function(t){var e=null!=this._options.pageSize,n=this._options.processJSONRows(t);if(this._headers=a.select("th",this._thead),0===this._headers.length){var i=this._options.processJSONHeaders(t);if(!i||!i.length||!i[0])throw new Error("Ink.UI.Table: processJSONHeaders option must return an array of objects!");this._createHeadersFromJson(i),this._resetSortOrder(),this._addHeadersClasses()}else this._resetSortOrder();this._createRowsFromJSON(n),this._totalRows=this._rowLength=n.length,e&&(this._totalRows=this._options.processJSONTotalRows(t),this._setPagination())}},i.createUIComponent(m),m}),Ink.createModule("Ink.UI.Tabs","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}return r._name="Tabs_1",r._optionDefinition={preventUrlChange:["Boolean",!1],active:["String",void 0],onBeforeChange:["Function",void 0],onChange:["Function",void 0],menuSelector:["String",".tabs-nav"],contentSelector:["String",".tabs-content"],triggerEventsOnLoad:["Boolean",!0]},r.prototype={_init:function(){return this._menu=o.select(this._options.menuSelector,this._element)[0],this._menu?(this._initializeDom(),e.on(this._menu,"click","a",Ink.bindMethod(this,"_onTabClickedGeneric")),void this._setFirstActive()):void Ink.warn('Ink.UI.Tabs: An element selected by "'+this._options.menuSelector+'" needs to exist inside the element!')},_initializeDom:function(){for(var t=o.select(this._options.contentSelector,this._element),e=0;e<t.length;e++)n.addClassName(t[e],"hide-all")},_setFirstActive:function(){var t=window.location.hash,e=this._findLinkByHref(t)||this._options.active&&this._findLinkByHref(this._options.active)||o.select(".active a",this._menu)[0]||o.select("a",this._menu)[0];e&&(this._firstTime=!0,this._changeTab(e,this._options.triggerEventsOnLoad),this._firstTime=!1)},_changeTab:function(t,e){e&&"undefined"!=typeof this._options.onBeforeChange&&this._options.onBeforeChange(this);var i=t.getAttribute("href"),r=i.substr(i.indexOf("#"));window.location.hash===r||this._options.preventUrlChange||this._firstTime||(window.location.hash=r);for(var s=o.select("> li.active",this._menu),a=0,l=s.length;l>a;a++)s[a]!==t&&n.removeClassName(s[a],"active");return this._activeMenuTab&&(n.removeClassName(this._activeMenuTab,"active"),n.removeClassName(this._activeSection,"active"),n.addClassName(this._activeSection,"hide-all")),this._activeMenuLink=t,this._activeMenuTab=this._activeMenuLink.parentNode,this._activeSection=o.select(r,this._element)[0],this._activeSection?(n.addClassName(this._activeMenuTab,"active"),n.addClassName(this._activeSection,"active"),n.removeClassName(this._activeSection,"hide-all"),void(e&&"undefined"!=typeof this._options.onChange&&this._options.onChange(this))):void(this._activeMenuLink=this._activeMenuTab=this._activeSection=null)},_onTabClickedGeneric:function(t){t.preventDefault();var e=!n.hasClassName(t.currentTarget,"ink-disabled")&&t.currentTarget!==this._activeMenuLink;e&&this._onTabClicked(t.currentTarget)},_onTabClicked:function(t){var e=t.getAttribute("href")||"";e=e.substr(e.indexOf("#")),e&&null!==Ink.i(this._dehashify(e))&&t!==this._activeMenuLink&&this.changeTab(t)},_hashify:function(t){return t?0===t.indexOf("#")?t:"#"+t:""},_dehashify:function(t){return t?(""+t).replace(/^#/,""):""},_findLinkByHref:function(t){if(!t)return null;if(1===t.nodeType){if(i.isAncestorOf(t,this._element))return null;for(var e=o.select("a",this._menu),n=t.getAttribute("id"),r=0,s=e.length;s>r;r++){if(e[r]===t||i.isAncestorOf(t,e[r]))return e[r];if(n&&n===this._dehashify(e[r].hash))return e[r]}return null}return t=this._hashify(t),o.select('a[href$="'+t+'"]',this._menu)[0]||null},changeTab:function(t){t=this._findLinkByHref(t),t&&!n.hasClassName(t,"ink-disabled")&&this._changeTab(t,!0)},disable:function(t){n.addClassName(this._findLinkByHref(t),"ink-disabled")},enable:function(t){n.removeClassName(this._findLinkByHref(t),"ink-disabled")},activeTab:function(){return this._activeSection.getAttribute("id")},activeMenuLink:function(){return this._activeMenuLink},activeSection:function(){return this._activeSection},destroy:t.destroyComponent},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.TagField","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.UI.Droppable_1","Ink.Util.Array_1","Ink.Dom.Selector_1","Ink.UI.Common_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(){a.BaseUIComponent.apply(this,arguments)}var h=13,u=8,c=function(t){return!!t},d=1==="s,".split(/,/g).length,p=function(){var t,e=String.prototype.split,n=void 0===/()??/.exec("")[1];return t=function(t,i,o){if("[object RegExp]"!==Object.prototype.toString.call(i))return e.call(t,i,o);var r,s,a,l,h=[],u=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),c=0,i=new RegExp(i.source,u+"g");for(t+="",n||(r=new RegExp("^"+i.source+"$(?!\\s)",u)),o=void 0===o?-1>>>0:o>>>0;(s=i.exec(t))&&(a=s.index+s[0].length,!(a>c&&(h.push(t.slice(c,s.index)),!n&&s.length>1&&s[0].replace(r,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(s[t]=void 0)}),s.length>1&&s.index<t.length&&Array.prototype.push.apply(h,s.slice(1)),l=s[0].length,c=a,h.length>=o)));)i.lastIndex===s.index&&i.lastIndex++;return c===t.length?(l||!i.test(""))&&h.push(""):h.push(t.slice(c)),h.length>o?h.slice(0,o):h}}();return l._name="TagField_1",l._optionDefinition={tags:["String",[]],tagQuery:["Object",null],tagQueryAsync:["Object",null],allowRepeated:["Boolean",!1],maxTags:["Integer",-1],outSeparator:["String",","],separator:["String",/[,; ]+/g],autoSplit:["Boolean",!0]},l.prototype={_init:function(){var i=this._options;"string"==typeof i.separator&&(i.separator=new RegExp(i.separator,"g")),"string"==typeof i.tags&&(i.tags=this._readInput(i.tags)),n.addClassName(this._element,"hide-all"),this._viewElm=t.create("div",{className:"ink-tagfield",insertAfter:this._element}),this._input=t.create("input",{type:"text",className:"new-tag-input",insertBottom:this._viewElm});var o=[].concat(i.tags,this._tagsFromMarkup(this._element));this._tags=[],r.each(o,Ink.bindMethod(this,"_addTag")),e.observe(this._input,"keyup",Ink.bindEvent(this._onKeyUp,this)),e.observe(this._input,"change",Ink.bindEvent(this._onKeyUp,this)),e.observe(this._input,"keydown",Ink.bindEvent(this._onKeyDown,this)),e.observe(this._input,"blur",Ink.bindEvent(this._onBlur,this)),e.observe(this._viewElm,"click",Ink.bindEvent(this._refocus,this))},destroy:function(){t.remove(this._viewElm),n.removeClassName(this._element,"hide-all")},_tagsFromMarkup:function(e){var n=e.tagName.toLowerCase();if("input"===n)return this._readInput(e.value);if("select"===n)return r.map(e.getElementsByTagName("option"),function(e){return t.textContent(e)});throw new Error("Cannot read tags from a "+n+" tag. Unknown tag")},_tagsToMarkup:function(e,n){var i=n.tagName.toLowerCase();if("input"===i)this._options.separator&&(n.value=e.join(this._options.outSeparator));else{if("select"!==i)throw new Error("TagField: Cannot read tags from a "+i+" tag. Unknown tag");n.innerHTML="",r.each(e,function(e){var i=t.create("option",{selected:"selected"});t.setTextContent(i,e),n.appendChild(i)})}},_addTag:function(n){if(!(-1!==this._options.maxTags&&this._tags.length>=this._options.maxTags)){if(!this._options.allowRepeated&&r.inArray(n,this._tags,n)||!n)return!1;var i=t.create("span",{className:"ink-tag",setTextContent:n+" "}),o=t.create("span",{className:"remove fa fa-times",insertBottom:i});e.observe(o,"click",Ink.bindEvent(this._removeTag,this,null));var s=document.createTextNode(" ");this._tags.push(n),this._viewElm.insertBefore(i,this._input),this._viewElm.insertBefore(s,this._input),this._tagsToMarkup(this._tags,this._element)}},_readInput:function(t){return this._options.separator?r.filter(t.split(this._options.separator),c):[t]},_onKeyUp:function(){if(this._options.autoSplit){var t;if(t=d?p(this._input.value,this._options.separator):this._input.value.split(this._options.separator),!(t.length<=1)){var e=t[t.length-1];t=t.splice(0,t.length-1),t=r.filter(t,c),r.each(t,Ink.bind(this._addTag,this)),this._input.value=e}}},_onKeyDown:function(t){return t.which===h?this._onEnterKeyDown(t):t.which===u?this._onBackspaceKeyDown():void(this._removeConfirm&&this._unsetRemovingVisual(this._tags.length-1))},_onBackspaceKeyDown:function(){this._input.value||(this._removeConfirm?(this._unsetRemovingVisual(this._tags.length-1),this._removeTag(this._tags.length-1),this._removeConfirm=null):this._setRemovingVisual(this._tags.length-1))},_onEnterKeyDown:function(t){var n=this._input.value;n&&(this._addTag(n),this._input.value=""),e.stopDefault(t)},_onBlur:function(){this._addTag(this._input.value),this._input.value=""},_setRemovingVisual:function(t){var i=this._viewElm.children[t];i&&(n.addClassName(i,"tag-deleting"),this._removeRemovingVisualTimeout=setTimeout(Ink.bindMethod(this,"_unsetRemovingVisual",t),4e3),e.observe(this._input,"blur",Ink.bindMethod(this,"_unsetRemovingVisual",t)),this._removeConfirm=!0)},_unsetRemovingVisual:function(t){var e=this._viewElm.children[t];e&&(n.removeClassName(e,"tag-deleting"),clearTimeout(this._removeRemovingVisualTimeout)),this._removeConfirm=null},_removeTag:function(n){var i;if("object"==typeof n){var o=e.element(n).parentNode;i=t.parentIndexOf(this._viewElm,o)}else"number"==typeof n&&(i=n);this._tags=r.remove(this._tags,i,1),t.remove(this._viewElm.children[i]),this._tagsToMarkup(this._tags,this._element)},_refocus:function(t){return this._input.focus(),e.stop(t),!1}},a.createUIComponent(l),l}),Ink.createModule("Ink.UI.Toggle","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}return s._name="Toggle_1",s._optionDefinition={target:["Elements"],triggerEvent:["String","click"],closeOnClick:["Boolean",null],canToggleAnAncestor:["Boolean",!1],isAccordion:["Boolean",!1],initialState:["Boolean",null],classNameOn:["String","show-all"],classNameOff:["String","hide-all"],closeOnInsideClick:["String","a[href]"],onChangeState:["Function",null]},s.prototype={_init:function(){var e,o;if(this._targets=t.elsOrSelector(this._options.target),null===this._options.closeOnClick&&(this._options.closeOnClick=this._options.isAccordion||this._options.canToggleAnAncestor?!1:!0),null===this._options.initialState&&(this._options.initialState=n.hasClassName(this._targets[0],this._options.classNameOn)),"show-all"!==this._options.classNameOn||"hide-all"!==this._options.classNameOff)for(e=0,o=this._targets.length;o>e;e++)n.removeClassName(this._targets[e],"show-all"),n.removeClassName(this._targets[e],"hide-all");if(this._options.isAccordion&&(this._accordionContainer=i.findUpwardsByClass(this._element,"accordion"),this._accordionContainer||Ink.warn('Ink.UI.Toggle_1: This toggle has the isAccordion option set to `true`, but is not a descendant of an element with the class "accordion"! Because of this, it won\'t be able to find other toggles in the same accordion and cooperate with them.')),this._constructing=!0,this._bindEvents(),null!==this._options.initialState)this.setState(this._options.initialState,!0);else{var r="none"!==n.getStyle(this._targets[0],"display");this.setState(r,!0)}for(e=0,o=this._targets.length;o>e;e++)this._targets[e].style.display&&(this._targets[e].style.display="");this._element.setAttribute("data-is-toggle-trigger","true"),this._constructing=!1},_bindEvents:function(){if(this._options.triggerEvent&&e.on(this._element,this._options.triggerEvent,Ink.bind(this._onTriggerEvent,this)),this._options.closeOnClick&&e.observe(document,"click",Ink.bind(this._onOutsideClick,this)),this._options.closeOnInsideClick){var t=this._options.closeOnInsideClick;"true"===t.toString()&&(t="*"),e.observeMulti(this._targets,"click",Ink.bind(function(n){i.findUpwardsBySelector(e.element(n),t)&&this.setState(!1,!0)},this))}},_onTriggerEvent:function(t){var n=e.element(t),o=r.some(this._targets,function(t){return t===n||i.isAncestorOf(t,n)});if(this._options.canToggleAnAncestor||!o){var s=this.getState();this.setState(!s,!0),!s&&this._firstTime&&(this._firstTime=!1),e.stopDefault(t)}},_updateAccordion:function(){if(this._accordionContainer&&this.getState()!==!1)for(var t=o.select("[data-is-toggle-trigger]",this._accordionContainer),e=0;e<t.length;e++){var n=s.getInstance(t[e]);n&&n!==this&&n.getState()===!0&&n.setState(!1,!0)}},_onOutsideClick:function(t){var n,o=e.element(t);if(i.isAncestorOf(document.documentElement,o)){var s=r.some(this._targets,function(t){return i.isAncestorOf(t,o)||t===o});if(this._element!==o&&!i.isAncestorOf(this._element,o)&&!s){if((n=Ink.ss(".ink-shade")).length)for(var a=n.length,l=0;a>l;l++)if(i.isAncestorOf(n[l],o)&&i.isAncestorOf(n[l],this._element))return;this.setState(!1,!0)}}},setState:function(t,e){if(t!==this.getState()||this._constructing){var i,o;if(this._group&&t)for(i=0,o=this._group.length;o>i;i++)this._group[i].getState()===!0&&this._group[i].setState(!1,!0);if(e&&"function"==typeof this._options.onChangeState){var r=this._options.onChangeState.call(this,t,{element:this._element});if(r===!1)return!1}for(i=0,o=this._targets.length;o>i;i++)n.addRemoveClassName(this._targets[i],this._options.classNameOn,t),n.addRemoveClassName(this._targets[i],this._options.classNameOff,!t);n.addRemoveClassName(this._element,"active",t),this._accordionContainer&&this._updateAccordion()}},getState:function(){return n.hasClassName(this._element,"active")}},t.createUIComponent(s),s}),Ink.createModule("Ink.UI.Tooltip","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Dom.Css_1","Ink.Dom.Browser_1"],function(t,e,n,i,o,r){"use strict";function s(t,e){this._init(t,e||{})}function a(t,e){this._init(t,e)}var l,h,u;!function(){for(var t=document.createElement("DIV"),e=["transition","oTransition","msTransition","mozTransition","webkitTransition"],n=0;n<e.length;n++)if("undefined"!=typeof t.style[e[n]+"Duration"]){l=e[n]+"Duration",h=e[n]+"Property",u=e[n]+"TimingFunction";break}}();var c=document.getElementsByTagName("body"),d=c.length?c[0]:document.documentElement;return s.prototype={_init:function(t,e){var n;if(this.options=Ink.extendObj({where:"up",zIndex:1e4,left:10,top:10,spacing:8,forever:0,color:"",timeout:0,delay:0,template:null,templatefield:null,fade:.3,text:""},e||{}),"string"==typeof t)n=i.select(t);else{if("object"!=typeof t)throw"Element expected";n=[t]}this.tooltips=[];for(var o=0,r=n.length;r>o;o++)this.tooltips[o]=new a(this,n[o])},destroy:function(){o.each(this.tooltips,function(t){t._destroy()}),this.tooltips=null,this.options=null}},a.prototype={_oppositeDirections:{left:"right",right:"left",up:"down",down:"up"},_init:function(n,i){e.observe(i,"mouseover",Ink.bindEvent(this._onMouseOver,this)),e.observe(i,"focus",Ink.bindEvent(this._onMouseOver,this)),e.observe(i,"mouseout",Ink.bindEvent(this._onMouseOut,this)),e.observe(i,"blur",Ink.bindEvent(this._onMouseOut,this)),e.observe(i,"mousemove",Ink.bindEvent(this._onMouseMove,this)),this.root=n,this.element=i,this._delayTimeout=null,this.tooltip=null,t.registerInstance(this,this.element)},_makeTooltip:function(t){if(!this._getOpt("text")&&!this._getOpt("html")&&!n.hasAttribute(this.element,"title"))return!1;var i=this._createTooltipElement();this.tooltip&&this._removeTooltip(),this.tooltip=i,this._fadeInTooltipElement(i),this._placeTooltipElement(i,t),e.observe(i,"mouseover",Ink.bindEvent(this._onTooltipMouseOver,this));var o=this._getFloatOpt("timeout");o&&setTimeout(Ink.bind(function(){this.tooltip===i&&this._removeTooltip()},this),1e3*o)},_createTooltipElement:function(){var e,o,s=this._getOpt("template"),a=this._getOpt("templatefield");if(s){var l=document.createElement("DIV");if(l.innerHTML=t.elOrSelector(s,"options.template").outerHTML,e=l.firstChild,a){if(o=i.select(a,e),!o)throw"options.templatefield must be a valid selector within options.template";o=o[0]}else o=e}else e=document.createElement("DIV"),r.addClassName(e,"ink-tooltip"),r.addClassName(e,this._getOpt("color")),o=document.createElement("DIV"),r.addClassName(o,"content"),e.appendChild(o);return this._getOpt("html")?o.innerHTML=this._getOpt("html"):this._getOpt("text")?n.setTextContent(o,this._getOpt("text")):n.setTextContent(o,this.element.getAttribute("title")),e.style.display="block",e.style.position="absolute",e.style.zIndex=this._getIntOpt("zIndex"),e},_fadeInTooltipElement:function(t){var e=this._getFloatOpt("fade");l&&e&&(t.style.opacity="0",t.style[l]=e+"s",t.style[h]="opacity",t.style[u]="ease-in-out",setTimeout(function(){t.style.opacity="1"},0))},_placeTooltipElement:function(t,e){var i=this._getOpt("where");if(null!==e||"mousemove"!==i&&"mousefix"!==i||(i="up"),"mousemove"===i||"mousefix"===i){var o=e;this._setPos(o[0],o[1]),d.appendChild(t)}else if(i.match(/(up|down|left|right)/)){d.appendChild(t);var s=n.offset(this.element),a=s[0],l=s[1],h=n.elementWidth(this.element)/2-n.elementWidth(t)/2,u=n.elementHeight(this.element)/2-n.elementHeight(t)/2,c=this._getIntOpt("spacing"),p=n.elementDimensions(t),f=n.elementDimensions(this.element),m=n.scrollWidth()+n.viewportWidth(),_=n.scrollHeight()+n.viewportHeight();i=this._getWhereValueInsideViewport(i,{left:a-p[0],right:a+p[0],top:l+p[1],bottom:l+p[1]},{right:m,bottom:_}),"up"===i?(l-=p[1],l-=c,a+=h):"down"===i?(l+=f[1],l+=c,a+=h):"left"===i?(a-=p[0],a-=c,l+=u):"right"===i&&(a+=f[0],a+=c,l+=u);var g=null;i.match(/(up|down|left|right)/)&&(g=document.createElement("SPAN"),r.addClassName(g,"arrow"),r.addClassName(g,this._oppositeDirections[i]),t.appendChild(g));var v=a,y=l,b=y+p[1]-_,k=v+p[0]-m,C=0-v,I=0-y;b>0?(g&&(g.style.top=p[1]/2+b+"px"),y-=b):I>0?(g&&(g.style.top=p[1]/2-I+"px"),y+=I):k>0?(g&&(g.style.left=p[0]/2+k+"px"),v-=k):C>0&&(g&&(g.style.left=p[0]/2-C+"px"),v+=C),t.style.left=v+"px",t.style.top=y+"px"}},_getWhereValueInsideViewport:function(t,e,n){return"left"===t&&e.left<0?"right":"right"===t&&e.right>n.right?"left":"up"===t&&e.top<0?"down":"down"===t&&e.bottom>n.bottom?"up":t},_removeTooltip:function(){var t=this.tooltip;if(t){var e=Ink.bind(n.remove,{},t);"mousemove"!==this._getOpt("where")&&l?(t.style.opacity=0,setTimeout(e,1e3*this._getFloatOpt("fade"))):e(),this.tooltip=null}},_getOpt:function(t){var e=n.data(this.element)[n._camelCase("tip-"+t)];if(e)return e;var i=this.root.options[t];return"undefined"!=typeof i?i:void 0},_getIntOpt:function(t){return parseInt(this._getOpt(t),10)},_getFloatOpt:function(t){return parseFloat(this._getOpt(t),10)},_destroy:function(){this.tooltip&&n.remove(this.tooltip),this.root=null,this.element=null,this.tooltip=null},_onMouseOver:function(t){var e;e="mouseover"!==t.type?null:this._getMousePosition(t);var n=this._getFloatOpt("delay");n?this._delayTimeout=setTimeout(Ink.bind(function(){this.tooltip||this._makeTooltip(e),this._delayTimeout=null},this),1e3*n):this._makeTooltip(e)},_onMouseMove:function(t){if("mousemove"===this._getOpt("where")&&this.tooltip){var e=this._getMousePosition(t);this._setPos(e[0],e[1])}},_onMouseOut:function(){this._getIntOpt("forever")||this._removeTooltip(),this._delayTimeout&&(clearTimeout(this._delayTimeout),this._delayTimeout=null)},_onTooltipMouseOver:function(){this.tooltip&&this._removeTooltip()},_setPos:function(t,e){t+=this._getIntOpt("left"),e+=this._getIntOpt("top");var i=this._getPageXY();if(this.tooltip){var o=[n.elementWidth(this.tooltip),n.elementHeight(this.tooltip)],r=this._getScroll();o[0]+t-r[0]>=i[0]-20&&(t=t-o[0]-this._getIntOpt("left")-10),o[1]+e-r[1]>=i[1]-20&&(e=e-o[1]-this._getIntOpt("top")-10),this.tooltip.style.left=t+"px",this.tooltip.style.top=e+"px"}},_getPageXY:function(){var t=0,e=0;return"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(t=document.body.clientWidth,e=document.body.clientHeight),[parseInt(t,10),parseInt(e,10)]},_getScroll:function(){var t=document.documentElement,e=document.body;return t&&(t.scrollLeft||t.scrollTop)?[t.scrollLeft,t.scrollTop]:e?[e.scrollLeft,e.scrollTop]:[0,0]},_getMousePosition:function(t){return[parseInt(e.pointerX(t),10),parseInt(e.pointerY(t),10)]}},s}),Ink.createModule("Ink.UI.TreeView","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}return s._name="TreeView_1",s._optionDefinition={node:["String","li"],children:["String","ul"],parentClass:["String","parent"],openNodeClass:["String","open"],openClass:["String","fa fa-minus-circle"],closedClass:["String","fa fa-plus-circle"],hideClass:["String","hide-all"],iconTag:["String","i"],stopDefault:["Boolean",!0]},s.prototype={_init:function(){this._handlers={click:Ink.bindEvent(this._onClick,this)},e.on(this._element,"click",this._options.node,this._handlers.click),r.each(Ink.ss(this._options.node,this._element),Ink.bind(function(t){if(this.isParent(t)){n.addClassName(t,this._options.parentClass);var e=this.isOpen(t);this._getIcon(t)||i.create(this._options.iconTag,{insertTop:t}),this._setNodeOpen(t,e)}},this))},_getIcon:function(t){return Ink.s("> "+this._options.iconTag,t)},isOpen:function(t){if(!this._getChild(t))throw new Error("not a node!");return"true"===t.getAttribute("data-open")||n.hasClassName(t,this._options.openNodeClass)},isParent:function(t){return n.hasClassName(t,this._options.parentClass)||null!=this._getChild(t)},_setNodeOpen:function(t,e){var i=this._getChild(t);if(i){n.setClassName(i,this._options.hideClass,!e);var o=this._getIcon(t);t.setAttribute("data-open",e);var r=e?this._options.openClass:this._options.closedClass,s=e?this._options.closedClass:this._options.openClass;n.removeClassName(o,s),n.addClassName(o,r),n.setClassName(t,this._options.openNodeClass,e)}else Ink.error("Ink.UI.TreeView: node",t,"is not a node!")},open:function(t){this._setNodeOpen(t,!0)},close:function(t){this._setNodeOpen(t,!1)},toggle:function(t){this.isOpen(t)?this.close(t):this.open(t)},_getChild:function(t){return o.select(this._options.children,t)[0]||null},_onClick:function(t){!this.isParent(t.currentTarget)||o.matchesSelector(t.target,this._options.node)||o.matchesSelector(t.target,this._options.children)||(this._options.stopDefault&&t.preventDefault(),this.toggle(t.currentTarget))}},t.createUIComponent(s),s}),Ink.createModule("Ink.UI.Upload","1",["Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Browser_1","Ink.UI.Common_1"],function(t,e,n,i){"use strict";var o=function(t){this.init(t)};o.prototype={init:function(t){this._options=Ink.extendObj({entry:void 0,maxDepth:10},t||{});try{this._read()}catch(e){Ink.error(e)}},_read:function(){if(!this._options.entry)return void Ink.error("You must specify the entry!");try{this._readDirectories()}catch(t){Ink.error(t)}},_readDirectories:function(){var t=[],e=!1,n=0,i=Ink.bind(function(o){var r=o.createReader();e=!0,r.readEntries(Ink.bind(function(o){if(o.length>0){for(var r=0,s=o.length;s>r;r++)t.push(o[r]),o[r].isDirectory&&(n=this.clearArray(o[r].fullPath.split("/")),n.shift(),n=n.length,n<=this._options.maxDepth&&i(o[r]));this._stopActivityTimeout&&clearTimeout(this._stopActivityTimeout),this._stopActivityTimeout=setTimeout(function(){e=!1},250)}o.length||(e=!1)},this),Ink.bind(function(t){this._options.readError(t,o)},this))},this);i(this._options.entry);var o,r=function(){return e?!1:(clearInterval(o),this._options.readComplete&&"function"==typeof this._options.readComplete&&this._options.readComplete(t),!0)};o=setInterval(Ink.bind(r,this),250)},clearArray:function(t){for(var e=t.length-1;e>=0;e--)("undefined"==typeof t[e]||null===t[e]||""===t[e])&&t.splice(e,1);return t}};var r={lists:[],items:[],create:function(t){var e;return t=String(t),this.lists.push({name:t}),e=this.lists.length-1},getItems:function(t){if(!t)return this.items;for(var e=[],n=0,i=this.items.length;i>n;n++)this.items[n].parentId===t&&e.push(this.items[n]);return e},purge:function(t,e){if("number"!=typeof t||isNaN(Number(t)))return!1;try{for(var n=this.items.length;n>=0;n--)this.items[n]&&t===this.items[n].parentId&&this.remove(this.items[n].parentId,this.items[n].pid);return e||this.lists.splice(t,1),!0}catch(i){return Ink.error("Purge: invalid id"),!1}},add:function(t,e,n){if(!this.lists[t])return!1;"object"!=typeof e&&(e=String(e));var i=parseInt(Math.round(1e5*Math.random())+""+Math.round(1e5*Math.random()),10);return n=n||0,this.items.push({parentId:t,item:e,priority:n||0,pid:i}),i},view:function(t,e){var n=this._searchByPid(t,e);return n===!1?!1:this.items[n]},remove:function(t,e){try{var n=this._searchByPid(t,e);return n===!1?!1:(this.items.splice(n,1),!0)}catch(i){return Ink.error("Remove: invalid id"),!1}},_searchByPid:function(t,e){if(!t&&"boolean"==typeof t||!e)return!1;if(t=parseInt(t,10),e=parseInt(e,10),isNaN(t)||isNaN(e))return!1;for(var n=0,i=this.items.length;i>n;n++)if(this.items[n].parentId===t&&this.items[n].pid===e)return n;return!1}},s=function(t){this.Upload=t,this.init()};s.prototype={init:function(){this._fileButton=this.Upload._options.fileButton,this._dropzone=this.Upload._options.dropzone,this._setDropEvent(),this._setFileButton()},_setDropEvent:function(){var t=this._dropzone;if(t)for(var e=0,n=t.length;n>e;e++)t[e].ondrop=Ink.bindEvent(this.Upload._dropEventHandler,this.Upload),t[e].ondragleave=Ink.bindEvent(this._onDragLeave,this),t[e].ondragend=Ink.bindEvent(this._onDragEndEventHandler,this),t[e].ondragdrop=Ink.bindEvent(this._onDragEndEventHandler,this),t[e].ondragenter=Ink.bindEvent(this._onDragEnterHandler,this),t[e].ondragover=Ink.bindEvent(this._onDragOverHandler,this)
},_onDragEnterHandler:function(t){return t&&t.stopPropagation&&t.stopPropagation(),t&&t.preventDefault&&t.preventDefault(),t&&(t.returnValue=!1),this.Upload.publish("DragEnter",t),!1},_onDragOverHandler:function(t){return t?(t.preventDefault(),t.stopPropagation(),t.returnValue=!1,!0):!1},_onDragLeave:function(t){return this.Upload.publish("DragLeave",t)},_onDragEndEventHandler:function(t){return this.Upload.publish("DragEnd",t)},_setFileButton:function(){var e=this._fileButton;e&&t.observeMulti(e,"change",Ink.bindEvent(this._fileChangeHandler,this))},_fileChangeHandler:function(n){var i=t.element(n),o=i.files,r=e.findUpwardsByTag(i,"form");return o&&window.FormData&&"withCredentials"in new XMLHttpRequest?(this.Upload._addFilesToQueue(o),void(i.value="")):(r.parentNode.submit(),!1)}};var a=function(t){this.Queue=r,this.init(t),this._events={}};return a.prototype={init:function(t){if("string"==typeof t&&(t=e.data(i.elOrSelector(t,"1st argument"))),this._options=Ink.extendObj({dropzone:void 0,fileButton:void 0,fileFormName:"Ink_Filelist",endpoint:"",maxFilesize:300<<20,INVALID_FILE_NAME:void 0,extraData:{},useChunks:!1,chunkSize:4194304,minSizeToUseChunks:20971520,endpointChunk:"",endpointChunkCommit:"",foldersEnabled:!1,directoryMaxDepth:10},t||{}),this._queueId=r.create("Ink_UPLOAD"),this._queueRunning=!1,this._folders={},this._options.dropzone&&(this._options.dropzone=i.elsOrSelector(this._options.dropzone,"Ink.UI.Upload - dropzone")),this._options.fileButton&&(this._options.fileButton=i.elsOrSelector(this._options.fileButton,"Ink.UI.Upload - fileButton")),!this._options.dropzone&&!this._options.fileButton)throw new TypeError("Ink.UI.Upload: Specify a fileButton or a Dropzone!");new s(this)},_supportChunks:function(t){return this._options.useChunks&&"Blob"in window&&(new Blob).slice&&t>this._options.minSizeToUseChunks},_dropEventHandler:function(e){t.stop(e),this.publish("DropComplete",e.dataTransfer);var n=e.dataTransfer;if(!n||!n.files||!n.files.length)return!1;if(this._files=n.files,this._files=Array.prototype.slice.call(this._files||[],0),n.items&&n.items[0]&&n.items[0].webkitGetAsEntry){if(!this._options.foldersEnabled)return setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0);for(var i,o=[],r=e.dataTransfer.items.length-1;r>=0;r--)i=e.dataTransfer.items[r].webkitGetAsEntry(),i&&i.isDirectory&&(o.push(i),this._files[r].isDirectory=!0,this._files.splice(r,1));this._addFolderToQueue(o,Ink.bind(function(){setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0)},this))}else setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0);return!0},_addFolderToQueue:function(t,e){var n=[],i={};if(!t||!t.length)return e(),n;var r=function(t){for(var e=[],n=0,i=t.length;i>n;n++)t[n].isFile&&e.push(t[n]);return e},s=function(t,e){var i;return e=e||0,this._files[e]?"fileentry"!==this._files[e].constructor.name.toLowerCase()?s.apply(this,[t,++e]):void this._files[e].file(Ink.bind(function(n){i=this._files[e].fullPath,this._files[e]=n,this._files[e].hasParent=!0,this._files[e].fullPath||(this._files[e].fullPath=i),s.apply(this,[t,++e])},this),Ink.bind(function(){this._files.splice(e,1),s.apply(this,[t,e])},this)):(t(),n)},a=Ink.bind(function(l){return t[l]?void new o({entry:t[l],maxDepth:this._options.directoryMaxDepth,readComplete:Ink.bind(function(e){if(n=n.concat(r(e)),t[l]&&!(t[l].fullPath in this._folders)){this._folders[t[l].fullPath]={items:e,files:n,length:e.length,created:!1,root:!0};for(var o=0,s=e.length;s>o;o++)e[o].isFile||(e[o].fullPath in i?delete i[e[o].fullPath]:this._folders[e[o].fullPath]={created:!1,root:!1});a(++l)}},this),readError:Ink.bind(function(t,e){i[e.fullPath]={},i[e.fullPath].error=t},this)}):(this._files=this._files.concat(n),s.call(this,e),!1)},this);return a(0),n},_addFilesToQueue:function(t){for(var e,i,o,s=0,a=t.length;a>s;s++)e=t[s],e.isDirectory||null!==e&&(e.type||e.size%4096!==0||n.CHROME&&this._options.foldersEnabled)?e.size>this._options.maxFilesize?this.publish("MaxSizeFailure",e,this._options.maxFilesize):(i=parseInt(Math.round(1e5*Math.random())+""+Math.round(1e5*Math.random()),10),o={id:s,data:e,fileID:i,directory:e.isDirectory},r.add(this._queueId,o),this.publish("FileAddedToQueue",o)):this.publish("InvalidFile",e,"size");this._processQueue(!0),this._files=[]},_processQueue:function(t){if(this._queueRunning)return!1;this.running=0;var e,n=1,i=0,o=r.items.length;this._queueRunning=!0,this.interval=setInterval(Ink.bind(function(){if(r.items.length===i&&0===this.running&&(r.purge(this._queueId,!0),this._queueRunning=!1,clearInterval(this.interval),this.publish("QueueEnd",this._queueId,o)),e=r.getItems(this._queueId),this.running<n&&e[i]){if(e[i].canceled)for(var a=i;e[a]&&e[a].canceled;)i++,a++;else s.call(this,e[i].pid,e[i].item.data,e[i].item.fileID,e[i].item.directory,t),this.running++,i++;return!0}return!1},this),100);var s=function(t,e,n,i,o){var r={file:e,fileID:n,cb:Ink.bind(function(){this.running--},this)};o&&(i?r.cb():this._upload(r))};return!0},_upload:function(t){var e=t.file,n=new XMLHttpRequest,i=t.fileID;this.publish("BeforeUpload",e,this._options.extraData,i,n,this._supportChunks(e.size));var o=function(o){t.cb&&t.cb(),this.publish("OnProgress",{length:e.size,lengthComputable:!0,loaded:e.size,total:e.size},e,i),this.publish("EndUpload",e,i,o?{error:!0}:!0),this.publish("InvalidFile",e,"name"),n.abort()};if(this._options.INVALID_FILE_NAME&&this._options.INVALID_FILE_NAME instanceof RegExp&&this._options.INVALID_FILE_NAME.test(t.file.name))return void o.call(this);if(!e.lastModifiedDate&&!Ink.Dom.Browser.OPERA)return void o.call(this,!0);n.upload.onprogress=Ink.bind(this.publish,this,"OnProgress",e,i);var r,s;this._supportChunks(e.size)?e.size<=e.chunk_offset?(r=this._options.endpointChunkCommit,s="POST"):(r=this._options.endpointChunk,e.chunk_upload_id&&(r+="?upload_id="+e.chunk_upload_id),e.chunk_offset&&(r+="&offset="+e.chunk_offset),s="PUT"):(r=this._options.endpoint,s="POST"),n.open(s,r,!0),n.withCredentials=!0,n.setRequestHeader("x-requested-with","XMLHttpRequest"),this._supportChunks(e.size)&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var a,l=new FormData;if("Blob"in window&&"function"==typeof Blob?(a=new Blob([e],{type:e.type}),this._supportChunks(e.size)?(e.chunk_offset=e.chunk_offset||0,a=a.slice(e.chunk_offset,e.chunk_offset+this._options.chunkSize)):l.append(this._options.fileFormName,a,e.name)):l.append(this._options.fileFormName,e),this._supportChunks(e.size))l.append("upload_id",e.chunk_upload_id),l.append("path",e.upload_path);else for(var h in this._options.extraData)this._options.extraData.hasOwnProperty(h)&&l.append(h,this._options.extraData[h]);e.hasParent?this.publish("cbCreateFolder",e.parentID,e.fullPath,this._options.extraData,this._folders,e.rootPath,Ink.bind(function(){n.send(this._supportChunks(e.size)?e.size<=e.chunk_offset?"upload_id="+e.chunk_upload_id+"&path="+e.upload_path+"/"+e.name:a:l)},this)):n.send(this._supportChunks(e.size)?e.size<=e.chunk_offset?"upload_id="+e.chunk_upload_id+"&path="+e.upload_path+"/"+e.name:a:l),n.onload=Ink.bindEvent(function(){if(this._supportChunks(e.size)&&e.size>e.chunk_offset){if(n.response){var o=JSON.parse(n.response),r=e.chunk_offset&&o.offset!==e.chunk_offset+this._options.chunkSize&&e.size!==o.offset;r?(t.cb&&t.cb(),this.publish("ErrorUpload",e,i)):(e.chunk_upload_id=o.upload_id,e.chunk_offset=o.offset,e.chunk_expires=o.expires,this._upload(t))}else t.cb&&t.cb(),this.publish("ErrorUpload",e,i);return n=null}return t.cb&&t.cb(),n.responseText&&n.status<400?this.publish("EndUpload",e,i,n.responseText):this.publish("ErrorUpload",e,i),n=null},this),n.onerror=Ink.bindEvent(function(){t.cb&&t.cb(),this.publish("ErrorUpload",e,i)},this),n.onabort=Ink.bindEvent(function(){t.cb&&t.cb(),this.publish("AbortUpload",e,i,{abortAll:Ink.bind(this.abortAll,this),abortOne:Ink.bind(this.abortOne,this)})},this)},abortAll:function(){return this._queueRunning?(clearInterval(this.interval),this._queueRunning=!1,r.purge(this._queueId,!0),!0):!1},abortOne:function(t,e){for(var n,i=r.getItems(0),o=0,s=i.length;s>o;o++)if(i[o].item.fileID===t)return n={id:i[o].item.fileID,name:i[o].item.data.name,size:i[o].item.data.size,hasParent:i[o].item.data.hasParent},r.remove(0,i[o].pid),e&&e(n),!0;return!1},subscribe:function(t,e){return this._events[t]||(this._events[t]=[]),this._events[t].push(e),this._events[t]},publish:function(t){var e=this._events[t],n=Array.prototype.slice.call(arguments||[],0);if(e)for(var i=0,o=e.length;o>i;i++)try{e[i].apply(this,n.splice(1,n.length))}catch(r){Ink.error(t+": "+r)}}},a}),Ink.createModule("Ink.UI.Animate",1,["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(t,e,n){"use strict";function i(){t.BaseUIComponent.apply(this,arguments)}var o=function(t){return"animationName"in t.style?"animation":"webkitAnimationName"in t.style?"webkitAnimation":null}(document.createElement("div")),r={animation:"animationend",webkitAnimation:"webkitAnimationEnd"}[o];return i._name="Animate_1",i._optionDefinition={trigger:["Element",null],duration:["String","slow"],animation:["String"],removeClass:["Boolean",!0],onEnd:["Function",function(){}]},i.prototype._init=function(){isNaN(parseInt(this._options.duration,10))||(this._options.duration=parseInt(this._options.duration,10)),this._options.trigger?e.observe(this._options.trigger,"click",Ink.bind(function(){this.animate()},this)):this.animate()},i.prototype.animate=function(){i.animate(this._element,this._options.animation,this._options)},Ink.extendObj(i,{_animationPrefix:o,animationSupported:!!o,animationEndEventName:r,animate:function(e,s,a){function l(t){t.target===e&&t.animationName===s&&(a.onEnd&&a.onEnd(t),a.removeClass&&n.removeClassName(e,s),"string"==typeof a.duration&&n.removeClassName(e,a.duration),e.removeEventListener(r,l,!1))}return e=t.elOrSelector(e),"number"==typeof a||"string"==typeof a?a={duration:a}:a||(a={}),"function"==typeof arguments[3]&&(a.onEnd=arguments[3]),"number"!=typeof a.duration&&"string"!=typeof a.duration&&(a.duration=400),i.animationSupported?("number"==typeof a.duration?e.style[o+"Duration"]=a.duration+"ms":"string"==typeof a.duration&&n.addClassName(e,a.duration),n.addClassName(e,["animated",s]),void e.addEventListener(r,l,!1)):void(a.onEnd&&setTimeout(function(){a.onEnd(null)},0))}}),t.createUIComponent(i),i}),Ink.createModule("Ink.UI.Carousel","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.UI.Pagination_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";function s(t,e,n){return Math.min(n,Math.max(e,t))}function a(){t.BaseUIComponent.apply(this,arguments)}function l(t,e){t.style.transitionProperty=t.style.oTransitionProperty=t.style.msTransitionProperty=t.style.mozTransitionProperty=t.style.webkitTransitionProperty=e}var h=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/30)};return a._name="Carousel_1",a._optionDefinition={autoAdvance:["Integer",0],axis:["String","x"],initialPage:["Integer",0],spaceAfterLastSlide:["Boolean",!0],keyboardSupport:["Boolean",!1],pagination:["String",null],onChange:["Function",null],onInit:["Function",function(){}],swipe:["Boolean",!0]},a.prototype={_init:function(){this._handlers={paginationChange:Ink.bindMethod(this,"_onPaginationChange"),windowResize:e.throttle(Ink.bindMethod(this,"refit"),200)},e.observe(window,"resize",this._handlers.windowResize),this._isY="y"===this._options.axis;var t=Ink.s("ul.stage",this._element);t.style.width="100%",this._ulEl=t,i.removeTextNodeChildren(t),null==this._options.pagination&&(this._currentPage=this._options.initialPage),this.refit(),this._isY&&(this._ulEl.style.whiteSpace="normal"),this._options.swipe&&(e.observe(this._element,"touchstart",Ink.bindMethod(this,"_onTouchStart")),e.observe(this._element,"touchmove",Ink.bindMethod(this,"_onTouchMove")),e.observe(this._element,"touchend",Ink.bindMethod(this,"_onTouchEnd"))),this._setUpPagination(),this._setUpAutoAdvance(),this._options.onInit.call(this,this)},refit:function(){var t=this._isY,e=function(e,n){return e?n?i.outerDimensions(e)[t?0:1]:i.outerDimensions(e)[t?1:0]:0};this._liEls=Ink.ss("li.slide",this._ulEl);var n=this._liEls.length,o=this._ulEl.getBoundingClientRect();this._ctnLength=t?o.bottom-o.top:o.right-o.left,this._elLength=e(this._liEls[0]),this._slidesPerPage=Math.floor(this._ctnLength/this._elLength)||1,isFinite(this._slidesPerPage)||(this._slidesPerPage=1);var r=Math.ceil(n/this._slidesPerPage),a=this._numPages!==r;this._numPages=r,this._deltaLength=this._slidesPerPage*this._elLength,this._IE7(),this._pagination&&a&&this._pagination.setSize(this._numPages),this.setPage(s(this.getPage(),0,this._numPages-1))},_setUpPagination:function(){this._options.pagination?(t.isDOMElement(this._options.pagination)||"string"==typeof this._options.pagination?this._pagination=new o(this._options.pagination,{size:this._numPages,onChange:this._handlers.paginationChange}):(this._pagination=this._options.pagination,this._pagination.setOnChange(this._handlers.paginationChange),this._pagination.setSize(this._numPages)),this._pagination.setCurrent(this._options.initialPage||0)):this._currentPage=this._options.initialPage||0},_setUpAutoAdvance:function(){this._options.autoAdvance&&this.autoAdvance(this._options.autoAdvance)},autoAdvance:function(t){function e(){n.nextPage(!0),n._autoAdvanceSto=setTimeout(e,t)}if(!this._autoAdvanceSto){var n=this;this._autoAdvanceSto=setTimeout(e,t)}},stopAutoAdvance:function(){this._autoAdvanceSto&&(clearTimeout(this._autoAdvanceSto),this._autoAdvanceSto=null)},_IE7:function(){if(r.IE&&""+r.version.split(".")[0]=="7")for(var t=Ink.ss("li.slide",this._ulEl),e=function(e,i){t[n].style[e]=i},n=0,i=t.length;i>n;n++)e("position","absolute"),e(this._isY?"top":"left",n*this._elLength+"px")},_onTouchStart:function(t){if(!(t.touches.length>1)){this._swipeData={x:e.pointerX(t),y:e.pointerY(t)};var n=this._ulEl.getBoundingClientRect();this._swipeData.firstUlPos=n[this._isY?"top":"left"],this._swipeData.inUlX=this._swipeData.x-n.left,this._swipeData.inUlY=this._swipeData.y-n.top,l(this._ulEl,"none"),this._touchMoveIsFirstTouchMove=!0}},_onTouchMove:function(t){if(!(t.touches.length>1)){var n=e.pointerX(t),i=e.pointerY(t),o=this._swipeData.y-i,r=this._swipeData.x-n;if(this._touchMoveIsFirstTouchMove){var s=Math.abs(o),a=Math.abs(r);this._touchMoveIsFirstTouchMove=void 0,this._scrolling=this._isY?a>s:s>a,this._scrolling||this._onAnimationFrame()}!this._scrolling&&this._swipeData&&(e.stopDefault(t),this._swipeData.pointerDelta=this._isY?o:r,this._swipeData.pointerPos=this._isY?i:n)}},_onAnimationFrame:function(){var t=this._swipeData;if(t&&!this._scrolling&&!this._touchMoveIsFirstTouchMove){var e,n=this._element.getBoundingClientRect();e=this._isY?t.pointerPos-t.inUlY-n.top:t.pointerPos-t.inUlX-n.left,this._ulEl.style[this._isY?"top":"left"]=e+"px",h(Ink.bindMethod(this,"_onAnimationFrame"))}},_onTouchEnd:function(t){if(this._swipeData&&this._swipeData.pointerPos&&!this._scrolling&&!this._touchMoveIsFirstTouchMove){var n=.1,i=this._swipeData.pointerDelta,o=this.getPage(),r=i/this._elLength/this._slidesPerPage;Math.abs(r)>n&&(o+=Math[0>i?"floor":"ceil"](r)),o=s(o,0,this._numPages-1),isNaN(o)||this.setPage(o),e.stopDefault(t)}l(this._ulEl,null),this._swipeData=null,this._touchMoveIsFirstTouchMove=void 0,this._scrolling=void 0},_onPaginationChange:function(t){this._setPage(t.getCurrent())},getPage:function(){return this._pagination?this._pagination.getCurrent():this._currentPage||0},getPagination:function(){return this._pagination||null},setPage:function(t,e){return e&&(t%=this._numPages,0>t&&(t=this._numPages-t)),t=s(t,0,this._numPages-1),t===this._currentPage?void(this._swipeData&&this._setPage(t)):void(this._pagination?this._pagination.setCurrent(t):this._setPage(t))},_setPage:function(t){var e=t*this._deltaLength,n=t===this._numPages-1;if(!this._options.spaceAfterLastSlide&&n&&t>0){var i=this._liEls.length-t*this._slidesPerPage;i<this._slidesPerPage&&(e=(t-1)*this._deltaLength+i*this._elLength)}this._ulEl.style[this._isY?"top":"left"]=["-",e/this._ctnLength*100,"%"].join(""),this._options.onChange&&this._options.onChange.call(this,t),this._currentPage=t},nextPage:function(t){this.setPage(this.getPage()+1,t)},previousPage:function(t){this.setPage(this.getPage()-1,t)},getSlidesPerPage:function(){return this._slidesPerPage},getTotalPages:function(){return this._numPages},getStageElm:function(){return this._ulEl},getSlidesList:function(){return this._liEls},getTotalSlides:function(){return this.getSlidesList().length}},t.createUIComponent(a),a}),Ink.createModule("Ink.UI.Close","1",["Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e){"use strict";function n(){t.observe(document.body,"click",function(n){var i=t.element(n);if(i=e.findUpwardsByClass(i,"ink-close")||e.findUpwardsByClass(i,"ink-dismiss")){var o=e.findUpwardsByClass(i,"ink-alert")||e.findUpwardsByClass(i,"ink-alert-block")||i;o&&(t.stop(n),e.remove(o))}})}return n._name="Close_1",n}),Ink.createModule("Ink.UI.Common","1",["Ink.Dom.Element_1","Ink.Net.Ajax_1","Ink.Dom.Css_1","Ink.Dom.Selector_1","Ink.Util.Url_1"],function(t,e,n,i,o){"use strict";function r(){this&&this!==window&&"function"==typeof this.constructor&&Ink.warn("You called a method on an incorrectly instantiated "+this.constructor._name+" component. Check the warnings above to see what went wrong.")}function s(t,e){for(var n in t)if(t.hasOwnProperty(n)){if("constructor"===n)continue;"function"==typeof e[n]&&(e[n]=r)}}function a(t,e){var n=this.constructor,i=n._name;if(!this||this===window)throw new Error('Use "new InkComponent()" instead of "InkComponent()"');if(this&&!(this instanceof a))throw new Error("You forgot to call Ink.UI.Common.createUIComponent() on this module!");if(!t&&!n._componentOptions.elementIsOptional)return void Ink.error(new Error(i+': You need to pass an element or a selector as the first argument to "new '+i+'()"'));this._element=f.elsOrSelector(t,i+': An element with the selector "'+t+'" was not found!')[0],this._element||n._componentOptions.elementIsOptional||(o=!1,Ink.error(new Error(t+' does not match an element on the page. You need to pass a valid selector to "new '+i+'".'))),this._options=f.options(i,n._optionDefinition,e,this._element);var o=a._validateInstance(this)===!0;if(o&&"function"==typeof this._init)try{this._init.apply(this,arguments)}catch(r){o=!1,Ink.error(r)}o?this._element&&f.registerInstance(this):a._stubInstance(this,n,i)}var l={},h=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},u="WeakMap"in window,c=u?new WeakMap:null,d=[],p={get:function(t){return u?c.get(t):d[t.getAttribute("__InkInstance")]},set:function(t,e){u?c.set(t,e):t.setAttribute("__InkInstance",d.push(e)-1)}},f={Layouts:{TINY:"tiny",SMALL:"small",MEDIUM:"medium",LARGE:"large",XLARGE:"xlarge"},isDOMElement:t.isDOMElement,isInteger:function(t){return"number"==typeof t&&t%1===0},elOrSelector:function(t,e){if(!f.isDOMElement(t)){var n=i.select(t);return 0===n.length?(Ink.warn(e+" must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself."),null):n[0]}return t},elsOrSelector:function(t,e,n){var o;if("string"==typeof t?o=i.select(t):f.isDOMElement(t)?o=[t]:t&&"object"==typeof t&&"number"==typeof t.length&&(o=t),o&&o.length)return o;if(n)throw new TypeError(e+" must either be a DOM Element, an Array of elements, or a selector expression!\nThe script element must also be after the DOM Element itself.");return[]},options:function(e,n,i,o){function r(t){return a=n[t][0],u=a.toLowerCase(),c=2===n[t].length?n[t][1]:l,a||g("Ink.UI.Common.options: Always specify a type!"),u in f._coerce_funcs||g("Ink.UI.Common.options: "+n[t][0]+" is not a valid type. Use one of "+h(f._coerce_funcs).join(", ")),(!n[t].length||n[t].length>2)&&g('the "defaults" argument must be an object mapping option names to [typestring, optional] arrays.'),s=t in p?f._coerce_from_string(u,p[t],t,e):l,s!==l?f._options_validate(s,u)?s:(v("("+t+" option) Invalid "+u+" "+_(s)),c):t in i?i[t]:c!==l?c:void g("Option "+t+" is required!")}"string"!=typeof e&&(o=i,i=n,n=e,e=""),i=i||{};var s,a,u,c,d={},p=o?t.data(o):{},m=function(t){return e&&(t=e+': "'+(""+t).replace(/"/,'\\"')+'"'),t},_=function(t){return'"'+(""+t).replace(/"/,'\\"')+'"'},g=function(t){throw new Error(m(t))},v=function(t){Ink.error(m(t)+". Ignoring option.")};for(var y in n)n.hasOwnProperty(y)&&(d[y]=r(y));return d},_coerce_from_string:function(t,e,n,i){return t in f._coerce_funcs?f._coerce_funcs[t](e,n,i):e},_options_validate:function(t,e){return e in f._options_validate_types?f._options_validate_types[e].call(f,t):!1},_coerce_funcs:function(){var t={element:function(t){return f.elOrSelector(t,"")},elements:function(t){return f.elsOrSelector(t,"",!1)},object:function(t){return t},number:function(t){return parseFloat(t)},"boolean":function(t){return!("false"===t||""===t||null===t)},string:function(t){return t},"function":function(t,e,n){return Ink.error(n+': You cannot specify the option "'+e+"\" through data-attributes because it's a function"),l}};return t["float"]=t.integer=t.number,t}(),_options_validate_types:function(){var t={string:function(t){return"string"==typeof t},number:function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)},integer:function(t){return t===Math.round(t)},element:function(t){return f.isDOMElement(t)},elements:function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&t.length},"boolean":function(t){return"boolean"==typeof t},object:function(){return!0}};return t["float"]=t.number,t}(),clone:function(t){try{return JSON.parse(JSON.stringify(t))}catch(e){throw new Error("Given object cannot have loops!")}},childIndex:t.parentIndexOf,ajaxJSON:function(t,n,i){new e(t,{evalJS:"force",method:"POST",parameters:n,onSuccess:function(t){try{if(t=t.responseJSON,"ok"!==t.status)throw"server error: "+t.message;i(null,t)}catch(e){i(e)}},onFailure:function(){i("communication failure")}})},currentLayout:function(){var t,e,o,r,s,a=i.select("#ink-layout-detector")[0];if(!a){a=document.createElement("div"),a.id="ink-layout-detector";for(o in f.Layouts)f.Layouts.hasOwnProperty(o)&&(r=f.Layouts[o],s=document.createElement("div"),s.className="show-"+r+" hide-all",s.setAttribute("data-ink-layout",r),a.appendChild(s));document.body.appendChild(a)}for(t=0,e=a.children.length;e>t;++t)if(s=a.children[t],"block"===n.getStyle(s,"display"))return s.getAttribute("data-ink-layout");return"large"},hashSet:function(t){if("object"!=typeof t)throw new TypeError("o should be an object!");var e=o.getAnchorString();e=Ink.extendObj(e,t),window.location.hash=o.genQueryString("",e).substring(1)},cleanChildren:function(e){if(!f.isDOMElement(e))throw new Error("Please provide a valid DOMElement");t.clear(e)},storeIdAndClasses:function(t,e){if(!f.isDOMElement(t))throw"Please provide a valid Element as first parameter";var n=t.id;n&&(e._id=n);var i=t.className;i&&(e._classes=i)},restoreIdAndClasses:function(t,e){if(!f.isDOMElement(t))throw"Please provide a valid Element as first parameter";e._id&&t.id!==e._id&&(t.id=e._id),e._classes&&-1===t.className.indexOf(e._classes)&&(t.className?t.className+=" "+e._classes:t.className=e._classes),e._instanceId&&!t.getAttribute("data-instance")&&t.setAttribute("data-instance",e._instanceId)},_warnDoubleInstantiation:function(t,e){function n(t){return(t.constructor&&t.constructor._name||t._name||"").replace(/_.*?$/,"")}var i=f.getInstance(t);if(""!==n(e)&&i){var o=n(e);if(o){for(var r=0,s=i.length;s>r;r++)if(o===n(i[r]))return Ink.warn("Creating more than one "+o+"for the same element.","(Was creating a "+o+" on:",t,")."),!1;return!0}}},registerInstance:function(t,e){if(t){if(e||(e=t._element),!f.isDOMElement(e))throw new TypeError("Ink.UI.Common.registerInstance: The element passed in is not a DOM element!");if(f._warnDoubleInstantiation(e,t)===!1)return!1;var n=p.get(e);return n||(n=[],p.set(e,n)),n.push(t),!0}},unregisterInstance:function(t){if(t&&t._element)for(var e=p.get(t._element),n=0,i=e.length;i>n;n++)e[n]===t&&e.splice(n,1)},getInstance:function(t,e){var n=t;if(t=f.elOrSelector(t),!f.isDOMElement(t))return Ink.warn("Ink.UI.Common: getInstance called on non-element ("+n+")"),[];var i=p.get(t);if(i||(i=[]),"function"!=typeof e)return i;for(var o=0,r=i.length;r>o;o++)if(i[o]instanceof e)return i[o];return null},getInstanceFromSelector:function(t){return f.getInstance(t)},getInstanceIds:function(){if(d.length>0)return d;var t=[];for(var e in c)c.hasOwnProperty(e)&&t.push(e);return t},getInstances:function(){if(d.length>0)return d;var t=[];for(var e in c)c.hasOwnProperty(e)&&t.push(c[e]);return t},destroyComponent:function(){f.unregisterInstance(this),this._element.parentNode.removeChild(this._element)}};return a._validateInstance=function(t){var e;if("function"!=typeof t._validate)return!0;try{e=t._validate()}catch(n){e=n}return e instanceof Error?(t._validationError=e,!1):!0},a._stubInstance=function(t,e,n){s(e.prototype,t),s(a.prototype,t),Ink.warn(n+" was not correctly created. "+(t._validationError||""))},a.getInstance=function(t){return t=f.elOrSelector(t),f.getInstance(t,this)},Ink.extendObj(a.prototype,{getOption:function(t){return!this.constructor||t in this.constructor._optionDefinition?this._options[t]:void Ink.error('"'+t+'" is not an option for '+this.constructor._name)},setOption:function(t,e){return!this.constructor||t in this.constructor._optionDefinition?void(this._options[t]=e):void Ink.error('"'+t+" is not an option for "+this.constructor._name)},getElement:function(){return this._element}}),f.BaseUIComponent=a,f.createUIComponent=function(t,e){function n(t,e){if(!t)throw new Error("Ink.UI_1.createUIComponent: "+e)}function i(e,i,o){var r=t[e];n("undefined"!=typeof r,t+" doesn't have a \""+e+'" property. '+o),n(i&&typeof r===i,"typeof "+t+"."+e+' is not "'+i+'". '+o)}t._componentOptions=e||{},n("function"==typeof t,"constructor argument is not a function!"),i("_name","string","This property is used for error messages. Set it to the full module path and version (Ink.My.Module_1)."),i("_optionDefinition","object","This property contains the option names, types and defaults. See Ink.UI.Common.options() for reference.");var o=t.prototype;t.prototype="function"==typeof Object.create?Object.create(a.prototype):function(){function t(){}return t.prototype=a.prototype,new t}(),Ink.extendObj(t.prototype,o),t.prototype.constructor=t,Ink.extendObj(t,a)},f}),Ink.createModule("Ink.UI.DatePicker","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.Date_1","Ink.Util.I18n_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(t,e,n){return t>n&&(t=n),e>t&&(t=e),t}function h(t){var e=t.split("-");return c(+e[0],+e[1]-1,+e[2])}function u(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function c(t,e,n){return{_year:t,_month:e,_day:n}}function d(t){return{_year:t.getFullYear(),_month:t.getMonth(),_day:t.getDate()}}function p(t){return 10*Math.floor(t/10)}function f(){t.BaseUIComponent.apply(this,arguments)}var m=new a({pt_PT:{"datepicker.clean":"Limpar","datepicker.close":"Fechar","datepicker.format":"dd-mm-yyyy","datepicker.of":" de ","datepicker.next_button":"\xbb","datepicker.prev_button":"\xab","datepicker.months":{1:"Janeiro",2:"Fevereiro",3:"Mar\xe7o",4:"Abril",5:"Maio",6:"Junho",7:"Julho",8:"Agosto",9:"Setembro",10:"Outubro",11:"Novembro",12:"Dezembro"},"datepicker.week_days":{0:"Domingo",1:"Segunda-feira",2:"Ter\xe7a-feira",3:"Quarta-feira",4:"Quinta-feira",5:"Sexta-feira",6:"S\xe1bado"}},en_US:{"datepicker.clean":"Clear","datepicker.close":"Close","datepicker.format":"dd-mm-yyyy","datepicker.of":" of ","datepicker.next_button":"\xbb","datepicker.prev_button":"\xab","datepicker.months":{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},"datepicker.week_days":{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}}},"en_US");return f._name="DatePicker_1",f._optionDefinition={autoOpen:["Boolean",!1],pickerField:["Element",null],containerElement:["Element",null],cssClass:["String","ink-calendar bottom"],dateRange:["String",null],displayInSelect:["Boolean",!1],dayField:["Element",null],monthField:["Element",null],yearField:["Element",null],format:["String","yyyy-mm-dd"],onFocus:["Boolean",!0],onMonthSelected:["Function",null],onSetDate:["Function",null],onYearSelected:["Function",null],position:["String","right"],showClean:["Boolean",!0],showClose:["Boolean",!0],shy:["Boolean",!0],startDate:["String",null],startWeekDay:["Number",1],validDayFn:["Function",null],validMonthFn:["Function",null],validYearFn:["Function",null],nextValidDateFn:["Function",null],prevValidDateFn:["Function",null],yearRange:["String",null],lang:["String",null],month:["Object",null],wDay:["Object",null],nextLinkText:["String",null],prevLinkText:["String",null],ofText:["String",null],cleanText:["String",null],closeText:["String",null]},f.prototype={_init:function(){this.i18n=m.clone(),this._options.lang&&this.i18n.lang(this._options.lang);var t=this._options.lang||m.lang(),e={};e[t]={},this._options.month&&(e[t]["datepicker.months"]=this._options.month),this._options.wDay&&(e[t]["datepicker.week_days"]=this._options.wDay),this._options.nextLinkText&&(e[t]["datepicker.next_button"]=this._options.nextLinkText),this._options.prevLinkText&&(e[t]["datepicker.prev_button"]=this._options.prevLinkText),this._options.ofText&&(e[t]["datepicker.of"]=this._options.ofText),this._options.cleanText&&(e[t]["datepicker.clean"]=this._options.cleanText),this._options.closeText&&(e[t]["datepicker.close"]=this._options.closeText),u(e[t]).length&&this.i18n.append(e),this._options.format=this._dateParsers[this._options.format]||this._options.format,this._hoverPicker=!1,this._picker=this._options.pickerField||null,this._setMinMax(this._options.dateRange||this._options.yearRange),this.setDate(this._options.startDate?this._options.startDate:this._element&&this._element.value?this._element.value:new Date),(this._options.startWeekDay<0||this._options.startWeekDay>6)&&(Ink.warn('Ink.UI.DatePicker_1: option "startWeekDay" must be between 0 (sunday) and 6 (saturday)'),this._options.startWeekDay=l(this._options.startWeekDay,0,6)),Ink.extendObj(this._options,this._lang||{}),this._render(),this._listenToContainerObjectEvents()},_validate:function(){if(this._options.displayInSelect&&!(this._options.dayField&&this._options.monthField&&this._options.yearField))throw new Error("Ink.UI.DatePicker: displayInSelect option enabled.Please specify dayField, monthField and yearField selectors.")},_render:function(){this._containerObject=document.createElement("div"),this._containerObject.className=this._options.cssClass+" ink-datepicker-calendar hide-all",this._renderSuperTopBar();var e=document.createElement("div");e.className="ink-calendar-top",this._monthDescContainer=document.createElement("div"),this._monthDescContainer.className="ink-calendar-month_desc",this._monthPrev=document.createElement("div"),this._monthPrev.className="ink-calendar-prev",this._monthPrev.appendChild(i.create("a",{href:"#prev",className:"change_month_prev",setHTML:this.i18n.text("datepicker.prev_button")})),this._monthNext=document.createElement("div"),this._monthNext.className="ink-calendar-next",this._monthNext.appendChild(i.create("a",{href:"#next",className:"change_month_next",setHTML:this.i18n.text("datepicker.next_button")})),e.appendChild(this._monthPrev),e.appendChild(this._monthDescContainer),e.appendChild(this._monthNext),this._monthContainer=document.createElement("div"),this._monthContainer.className="ink-calendar-month",this._containerObject.appendChild(e),this._containerObject.appendChild(this._monthContainer),this._monthSelector=this._renderMonthSelector(),this._containerObject.appendChild(this._monthSelector),this._yearSelector=document.createElement("ul"),this._yearSelector.className="ink-calendar-year-selector",this._containerObject.appendChild(this._yearSelector),(!this._options.onFocus||this._options.displayInSelect)&&(this._picker=this._options.pickerField?t.elOrSelector(this._options.pickerField,"pickerField"):i.create("a",{href:"#open_cal",setHTML:"open",insertBottom:this._element.parentNode,className:"ink-datepicker-picker-field"})),this._appendDatePickerToDom(),this._renderMonth(),this._monthChanger=i.create("a",{href:"#monthchanger",className:"ink-calendar-link-month",setTextContent:this.i18n.getKey("datepicker.months")[this._month+1]}),this._ofText=i.create("span",{className:"ink-calendar-of-text",setTextContent:this.i18n.text("datepicker.of")}),this._yearChanger=i.create("a",{href:"#yearchanger",className:"ink-calendar-link-year",setTextContent:this._year}),this._monthDescContainer.appendChild(this._monthChanger),this._monthDescContainer.appendChild(this._ofText),this._monthDescContainer.appendChild(this._yearChanger),this._options.inline?this.show():this._addOpenCloseEvents(),this._addDateChangeHandlersToInputs()
},_addDateChangeHandlersToInputs:function(){var t=this._element;this._options.displayInSelect&&(t=[this._options.dayField,this._options.monthField,this._options.yearField]),e.observeMulti(t,"change",Ink.bindEvent(function(){this._updateDate(),this._showDefaultView(),this.setDate(),this._inline||this._hoverPicker||this._hide(!0)},this))},show:function(){this._updateDate(),this._renderMonth(),n.removeClassName(this._containerObject,"hide-all")},_addOpenCloseEvents:function(){var t=this._picker||this._element;e.observe(t,"click",Ink.bindEvent(function(t){e.stop(t),this.show()},this)),this._options.autoOpen&&this.show(),this._options.displayInSelect||e.observe(t,"blur",Ink.bindEvent(function(){this._hoverPicker||this._hide(!0)},this)),this._options.shy&&e.observe(document,"click",Ink.bindEvent(function(t){for(var n=e.element(t),o=[this._options.dayField,this._options.monthField,this._options.yearField,this._picker,this._element],r=0,s=o.length;s>r;r++)if(o[r]&&i.descendantOf(o[r],n))return;this._hide(!0)},this))},_renderMonthSelector:function(){var t=document.createElement("ul");t.className="ink-calendar-month-selector";for(var e=document.createElement("ul"),n=1;12>=n;n++)e.appendChild(this._renderMonthButton(n)),n%4===0&&(t.appendChild(e),e=document.createElement("ul"));return t},_renderMonthButton:function(t){var e=document.createElement("li");return e.appendChild(i.create("a",{"data-cal-month":t,setTextContent:this.i18n.getKey("datepicker.months")[t].substring(0,3)})),e},_appendDatePickerToDom:function(){if(this._options.containerElement){var e=t.elOrSelector(this._options.containerElement);e.appendChild(this._containerObject)}var n=o.matchesSelector(this._element.parentNode,".ink-form .control-group .control, .ink-form .control-group .control > *");n?(this._wrapper=this._element.parentNode,this._wrapperIsControl=!0):(this._wrapper=i.create("div",{className:"ink-datepicker-wrapper"}),i.wrap(this._element,this._wrapper)),i.insertAfter(this._containerObject,this._element)},_renderSuperTopBar:function(){this._options.showClose&&this._options.showClean&&(this._superTopBar=document.createElement("div"),this._superTopBar.className="ink-calendar-top-options",this._options.showClean&&this._superTopBar.appendChild(i.create("a",{className:"clean",setHTML:this.i18n.text("datepicker.clean")})),this._options.showClose&&this._superTopBar.appendChild(i.create("a",{className:"close",setHTML:this.i18n.text("datepicker.close")})),this._containerObject.appendChild(this._superTopBar))},_listenToContainerObjectEvents:function(){e.observe(this._containerObject,"mouseover",Ink.bindEvent(function(t){e.stop(t),this._hoverPicker=!0},this)),e.observe(this._containerObject,"mouseout",Ink.bindEvent(function(t){e.stop(t),this._hoverPicker=!1},this)),e.observe(this._containerObject,"click",Ink.bindEvent(this._onClick,this))},_onClick:function(t){var i=e.element(t);return n.hasClassName(i,"ink-calendar-off")?(e.stopDefault(t),null):(e.stop(t),this._onRelativeChangerClick(i),this._onAbsoluteChangerClick(i),n.hasClassName(i,"ink-calendar-link-month")?this._showMonthSelector():n.hasClassName(i,"ink-calendar-link-year")?this._showYearSelector():n.hasClassName(i,"clean")?this._clean():n.hasClassName(i,"close")&&this._hide(!1),void this._updateDescription())},_onRelativeChangerClick:function(t){var e={change_year_next:1,change_year_prev:-1},n={change_month_next:1,change_month_prev:-1};t.className in n?this._updateCal(n[t.className]):t.className in e&&this._showYearSelector(e[t.className])},_onAbsoluteChangerClick:function(t){var e=i.data(t);Number(e.calDay)?(this.setDate(new Date(this._year,this._month,e.calDay)),this._options.shy?this._hide():this._updateCal()):Number(e.calMonth)?(this._month=Number(e.calMonth)-1,this._showDefaultView(),this._updateCal()):Number(e.calYear)&&this._changeYear(Number(e.calYear))},_changeYear:function(t){t=+t,isNaN(t)||(this._year=t,"function"==typeof this._options.onYearSelected&&this._options.onYearSelected(this,{year:this._year}),this._showMonthSelector())},_clean:function(){this._options.displayInSelect?(this._options.yearField.selectedIndex=0,this._options.monthField.selectedIndex=0,this._options.dayField.selectedIndex=0):this._element.value=""},_hide:function(t){t=void 0===t?!0:t,(t===!1||t&&this._options.shy)&&n.addClassName(this._containerObject,"hide-all")},_setMinMax:function(t){function e(){n._min=i,n._max=o}var n=this,i={_year:-Number.MAX_VALUE,_month:0,_day:1},o={_year:Number.MAX_VALUE,_month:11,_day:31};if(!t)return e();var s=t.split(":"),a=/^(\d{4})((\-)(\d{1,2})((\-)(\d{1,2}))?)?$/;r.each([{name:"_min",date:s[0],noLim:i},{name:"_max",date:s[1],noLim:o}],Ink.bind(function(t){var e=t.noLim;if("NOW"===t.date.toUpperCase()){var n=new Date;e=d(n)}else"EVER"===t.date.toUpperCase()?e=t.noLim:a.test(t.date)&&(e=h(t.date),e._month=l(e._month,0,11),e._day=l(e._day,1,this._daysInMonth(e._year,e._month+1)));this[t.name]=e},this));var u=-1!==this._dateCmp(this._max,this._min);u||e()},_fitDateToRange:function(t){return this._isValidDate(t)||(t=d(new Date)),-1===this._dateCmp(t,this._min)?Ink.extendObj({},this._min):1===this._dateCmp(t,this._max)?Ink.extendObj({},this._max):Ink.extendObj({},t)},_dateWithinRange:function(t){return arguments.length||(t=this),!this._dateAboveMax(t)&&!this._dateBelowMin(t)},_dateAboveMax:function(t){return 1===this._dateCmp(t,this._max)},_dateBelowMin:function(t){return-1===this._dateCmp(t,this._min)},_dateCmp:function(t,e){return this._dateCmpUntil(t,e,"_day")},_dateCmpUntil:function(t,e,n){var i=["_year","_month","_day"],o=-1;do{if(o++,t[i[o]]>e[i[o]])return 1;if(t[i[o]]<e[i[o]])return-1}while(i[o]!==n&&void 0!==t[i[o+1]]&&void 0!==e[i[o+1]]);return 0},_showDefaultView:function(){this._yearSelector.style.display="none",this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._getPrevMonth()||(this._monthPrev.childNodes[0].className="action_inactive"),this._getNextMonth()||(this._monthNext.childNodes[0].className="action_inactive"),this._monthContainer.style.display="block"},_updateDate:function(){var t;!this._options.displayInSelect&&this._element.value?t=this._parseDate(this._element.value):this._options.displayInSelect&&(t={_year:this._options.yearField[this._options.yearField.selectedIndex].value,_month:this._options.monthField[this._options.monthField.selectedIndex].value-1,_day:this._options.dayField[this._options.dayField.selectedIndex].value}),t&&(t=this._fitDateToRange(t),this._year=t._year,this._month=t._month,this._day=t._day),this._setDate(),this._updateDescription(),this._renderMonth()},_updateDescription:function(){i.setTextContent(this._monthChanger,this.i18n.getKey("datepicker.months")[this._month+1]),i.setTextContent(this._ofText,this.i18n.text("datepicker.of")),i.setTextContent(this._yearChanger,this._year)},_showYearSelector:function(t){this._incrementViewingYear(t);var e=this._year-this._year%10,n=e-1;i.setHTML(this._yearSelector,"");var o=i.create("ul");if(this._yearSelector.appendChild(o),n>this._min._year){var r=i.create("li");r.appendChild(i.create("a",{href:"#year_prev",className:"change_year_prev",setHTML:this.i18n.text("datepicker.prev_button")})),o.appendChild(r)}else o.appendChild(i.create("li",{setHTML:"&nbsp;"}));for(var s=1;11>s;s++)s%4===0&&(o=i.create("ul"),this._yearSelector.appendChild(o)),n=e+s-1,o.appendChild(this._getYearButton(n));if(n<this._max._year){var a=i.create("li");a.appendChild(i.create("a",{href:"#year_next",className:"change_year_next",setHTML:this.i18n.text("datepicker.next_button")})),o.appendChild(a)}else o.appendChild(i.create("li",{setHTML:"&nbsp;"}));this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._monthSelector.style.display="none",this._monthContainer.style.display="none",this._yearSelector.style.display="block"},_incrementViewingYear:function(t){if(t){var e=+this._year+10*t;e-=e%10,e>this._max._year||e+9<this._min._year||(this._year=+this._year+10*t)}},_getYearButton:function(t){var e="";this._acceptableYear({_year:t})?t===this._year&&(e="ink-calendar-on"):e="ink-calendar-off";var n=i.create("li");return n.appendChild(i.create("a",{href:"#","data-cal-year":t,className:e,setTextContent:t})),n},_showMonthSelector:function(){this._yearSelector.style.display="none",this._monthContainer.style.display="none",this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._addMonthClassNames(),this._monthSelector.style.display="block"},_parseDate:function(t){var e=s.set(this._options.format,t);return e?d(e):null},_isValidDate:function(t){var e=/^\d{4}$/,n=/^\d{1,2}$/;return e.test(t._year)&&n.test(t._month)&&n.test(t._day)&&+t._month+1>=1&&+t._month+1<=12&&+t._day>=1&&+t._day<=this._daysInMonth(t._year,t._month+1)},_isDate:function(t,e){try{if("undefined"==typeof t)return!1;var n=s.set(t,e);if(n&&this._isValidDate(d(n)))return!0}catch(i){}return!1},_acceptableDay:function(t){return this._acceptableDateComponent(t,"validDayFn")},_acceptableMonth:function(t){return this._acceptableDateComponent(t,"validMonthFn")},_acceptableYear:function(t){return this._acceptableDateComponent(t,"validYearFn")},_acceptableDateComponent:function(t,e){return this._options[e]?this._callUserCallbackBool(this._options[e],t):this._dateWithinRange(t)},_writeDateInFormat:function(){return s.get(this._options.format,this.getDate())},setDate:function(t){if(t&&"function"==typeof t.getDate&&(t=[t.getFullYear(),t.getMonth()+1,t.getDate()].join("-")),/\d{4}-\d{1,2}-\d{1,2}/.test(t)){var e=t.split("-");this._year=+e[0],this._month=+e[1]-1,this._day=+e[2]}this._setDate()},getDate:function(){if(!this._day)throw"Ink.UI.DatePicker: Still picking a date. Cannot getDate now!";return new Date(this._year,this._month,this._day)},_setDate:function(t){if(t){var e=i.data(t);this._day=+e.calDay||this._day,this._options.onSetDate&&this._options.onSetDate(this,{date:this.getDate()})}var n=this._fitDateToRange(this);this._year=n._year,this._month=n._month,this._day=n._day,this._options.displayInSelect?(this._options.dayField.value=this._day,this._options.monthField.value=this._month+1,this._options.yearField.value=this._year):this._element.value=this._writeDateInFormat()},_updateCal:function(t){"function"==typeof this._options.onMonthSelected&&this._options.onMonthSelected(this,{year:this._year,month:this._month}),t&&null===this._updateMonth(t)||this._renderMonth()},_daysInMonth:function(t,e){var n={2:t%400===0||t%4===0&&t%100!==0?29:28,4:30,6:30,9:30,11:30};return n[e]||31},_updateMonth:function(t){var e;return t>0?e=this._getNextMonth():0>t&&(e=this._getPrevMonth()),e?(this._year=e._year,this._month=e._month,void(this._day=e._day)):null},_getNextMonth:function(t){return this._tryLeap(t,"Month","next",function(t){return t._month+=1,t._month>11&&(t._month=0,t._year+=1),t})},_getPrevMonth:function(t){return this._tryLeap(t,"Month","prev",function(t){return t._month-=1,t._month<0&&(t._month=11,t._year-=1),t})},_getPrevYear:function(t){return this._tryLeap(t,"Year","prev",function(t){return t._year-=1,t})},_getNextYear:function(t){return this._tryLeap(t,"Year","next",function(t){return t._year+=1,t})},_tryLeap:function(t,e,n,i){t=t||{_year:this._year,_month:this._month,_day:this._day};var o="prev"===n?"_min":"_max",r=this[o];if(0===this._dateCmpUntil(t,r,e))return null;var s=this._options[n+"ValidDateFn"];if(s)return this._callUserCallbackDate(s,t);t=i(t);var a=this._daysInMonth(t._year,t._month+1);return t._day>a&&(t._day=a),t=this._fitDateToRange(t),this["_acceptable"+e](t)?t:null},_getNextDecade:function(t){t=t||{_year:this._year,_month:this._month,_day:this._day};var e=this._getCurrentDecade(t);return e+10>this._max._year?null:e+10},_getPrevDecade:function(t){t=t||{_year:this._year,_month:this._month,_day:this._day};var e=this._getCurrentDecade(t);return p(e-10)<p(this._min._year)?null:e-10},_getCurrentDecade:function(t){return t=t?t._year||t:this._year,p(this._year)},_callUserCallbackBase:function(t,e){return t.call(this,e._year,e._month+1,e._day)},_callUserCallbackBool:function(t,e){return!!this._callUserCallbackBase(t,e)},_callUserCallbackDate:function(t,e){var n=this._callUserCallbackBase(t,e);return n?d(n):null},_dateParsers:{"yyyy-mm-dd":"Y-m-d","yyyy/mm/dd":"Y/m/d","yy-mm-dd":"y-m-d","yy/mm/dd":"y/m/d","dd-mm-yyyy":"d-m-Y","dd/mm/yyyy":"d/m/Y","dd-mm-yy":"d-m-y","dd/mm/yy":"d/m/y","mm/dd/yyyy":"m/d/Y","mm-dd-yyyy":"m-d-Y"},_renderMonth:function(){var t=this._month,e=this._year;this._showDefaultView(),i.setHTML(this._monthContainer,""),this._monthContainer.appendChild(this._getMonthCalendarHeader(this._options.startWeekDay)),this._monthContainer.appendChild(this._getDayButtons(e,t))},_getFirstDayIndex:function(t,e){var n=new Date(t,e,1).getDay(),i=this._options.startWeekDay||0,o=n-i;return o%=7,0>o&&(o+=7),o},_getDayButtons:function(t,e){var n=this._daysInMonth(t,e+1),o=document.createDocumentFragment(),r=i.create("ul");o.appendChild(r);for(var s=this._getFirstDayIndex(t,e),a=0;s>a;a++)r.appendChild(i.create("li",{className:"ink-calendar-empty",setHTML:"&nbsp;"}));for(var l=1;n>=l;l++)(l-1+s)%7===0&&(r=i.create("ul"),o.appendChild(r)),r.appendChild(this._getDayButton(t,e,l));return o},_getDayButton:function(t,e,n){var o={},r=c(t,e,n);this._acceptableDay(r)?(o["data-cal-day"]=n,this._day&&0===this._dateCmp(r,this)&&(o.className="ink-calendar-on")):o.className="ink-calendar-off",o.setTextContent=n;var s=i.create("li");return s.appendChild(i.create("a",o)),s},_getMonthCalendarHeader:function(t){for(var e,n=i.create("ul",{className:"ink-calendar-header"}),o=0;7>o;o++)e=(t+o)%7,n.appendChild(i.create("li",{setTextContent:this.i18n.getKey("datepicker.week_days")[e].substring(0,1)}));return n},_addMonthClassNames:function(t){r.forEach((t||this._monthSelector).getElementsByTagName("a"),Ink.bindMethod(this,"_addMonthButtonClassNames"))},_addMonthButtonClassNames:function(t){var e=i.data(t);if(!e.calMonth)throw"not a calendar month button!";var o=+e.calMonth-1;if(o===this._month)n.addClassName(t,"ink-calendar-on"),n.removeClassName(t,"ink-calendar-off");else{n.removeClassName(t,"ink-calendar-on");var r=!this._acceptableMonth({_year:this._year,_month:o});n.addRemoveClassName(t,"ink-calendar-off",r)}},setI18n:function(t){t.clone&&(t=t.clone()),this.i18n=t},getI18n:function(){return this.i18n||m},setLanguage:function(t){this.i18n||this.setI18n(m),this.i18n.lang(t)},getLanguage:function(){return this.i18n?this.i18n.lang():m.lang()},showMonth:function(){this._renderMonth()},isMonthRendered:function(){var t=o.select(".ink-calendar-header",this._containerObject)[0];return"none"!==n.getStyle(t.parentNode,"display")&&"none"!==n.getStyle(t.parentNode.parentNode,"display")},destroy:function(){i.unwrap(this._element),i.remove(this._wrapper),i.remove(this._containerObject),t.unregisterInstance.call(this)}},t.createUIComponent(f),f}),Ink.createModule("Ink.UI.DragDrop",1,["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.UI.Common_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";function s(t){t.exceptFor.style.display="none";var e=document.elementFromPoint(t.x,t.y);return t.exceptFor.style.display="",e}function a(){o.BaseUIComponent.apply(this,arguments)}return a._name="DragDrop_1",a._optionDefinition={dragItem:["String",".drag-item"],dragHandle:["String",".drag-handle"],dropZone:["String",".drop-zone"],ignoreDrag:["String",".drag-ignore"],draggedCloneClass:["String","drag-cloned-item"],placeholderClass:["String","drag-placeholder-item"],onDrag:["Function",null],onDrop:["Function",null]},a.prototype={_init:function(){this._dragActive=!1,this._draggedElm=null,this._clonedElm=null,this._placeholderElm=null,this._originalDrop=null,this._mouseDelta=[0,0],this._addEvents()},_addEvents:function(){e.on(this._element,"mousedown touchstart",Ink.bindEvent(this._onMouseDown,this))},_onMouseDown:function(n){var i=e.element(n),o=t.findUpwardsBySelector(i,this._options.dragItem),r=t.findUpwardsBySelector(i,this._options.ignoreDrag);if(o&&!r){e.stopDefault(n);var s=Ink.s(this._options.dragHandle,o);s&&t.findUpwardsBySelector(i,this._options.dragHandle)?this._dragActive=!0:s||(this._dragActive=!0),this._dragActive&&this._startDrag(n,o)}},_startDrag:function(i,o){this._clonedElm=o.cloneNode(!0),this._placeholderElm=o.cloneNode(!1),n.addClassName(this._clonedElm,this._options.draggedCloneClass),this._clonedElm.removeAttribute("id"),n.addClassName(this._placeholderElm,this._options.placeholderClass),this._placeholderElm.removeAttribute("id");var r=o.getBoundingClientRect(),s=[r.right-r.left,r.bottom-r.top];this._clonedElm.style.width=s[0]+"px",this._clonedElm.style.height=s[1]+"px",this._placeholderElm.style.width=s[0]+"px",this._placeholderElm.style.height=s[1]+"px",this._placeholderElm.style.visibility="hidden",this._clonedElm.style.position="fixed",this._clonedElm.style.zIndex="1000",this._clonedElm.style.left=r.left+"px",this._clonedElm.style.top=r.top+"px";var a=e.pointer(i),l=t.offset(o);this._mouseDelta=[a.x-l[0],a.y-l[1]],this._clonedElm.style.opacity="0.6",o.parentNode.insertBefore(this._clonedElm,o),this._draggedElm=o,o.parentNode.insertBefore(this._placeholderElm,o),n.addClassName(o,"hide-all");var h="function"==typeof this._options.onDrag,u="function"==typeof this._options.onDrop;if(h||u){var c={dragItem:this._draggedElm,dropZone:this.getDropZone(this._draggedElm)};h&&this._options.onDrag.call(this,c),u&&(this._originalDrop=c.dropZone)}var d=e.throttle(this._onMouseMove,50,{preventDefault:!0,bind:this});e.on(document,"mousemove.inkdraggable touchmove.inkdraggable",d),e.on(document,"mouseup.inkdraggable touchend.inkdraggable",Ink.bindEvent(this._onMouseUp,this))},_onMouseMove:function(n){if(this._dragActive){var i=e.pointer(n),o=t.scrollWidth(),r=t.scrollHeight();this._clonedElm.style.left=i.x-this._mouseDelta[0]-o+"px",this._clonedElm.style.top=i.y-this._mouseDelta[1]-r+"px";var a=s({x:i.x-o,y:i.y-r,exceptFor:this._clonedElm}),l=this.getDropZone(a),h=l&&(t.isAncestorOf(this._element,l)||this._element===l);if(l&&h){var u=t.findUpwardsBySelector(a,this._options.dragItem);u&&this.isDragItem(u)?this._insertPlaceholder(u):this._dropZoneIsEmpty(l)&&l.appendChild(this._placeholderElm)}}},isDragItem:function(t){return r.matchesSelector(t,this._options.dragItem)&&t!==this._draggedElm&&t!==this._placeholderElm&&t!==this._clonedElm},_dropZoneIsEmpty:function(t){var e=Ink.ss(this._options.dragItem,t);return!i.some(e,Ink.bindMethod(this,"isDragItem"))},_onMouseUp:function(){this._dragActive&&(t.insertBefore(this._draggedElm,this._placeholderElm),t.remove(this._placeholderElm),t.remove(this._clonedElm),n.removeClassName(this._draggedElm,"hide-all"),e.off(document,".inkdraggable"),this._dragActive=!1,"function"==typeof this._options.onDrop&&this._options.onDrop.call(this,{origin:this._originalDrop,dragItem:this._draggedElm,dropZone:this.getDropZone(this._draggedElm)}),this._placeholderElm=null,this._clonedElm=null,this._draggedElm=null,this._originalDrop=null)},getDropZone:function(e){var n=t.findUpwardsBySelector(e,this._options.dropZone)||this._element;return t.isAncestorOf(this._element,n)||n===this._element?n:null},getDraggedElement:function(){return this.dragActive?this._draggedElm:null},_insertPlaceholder:function(e){var n=!0;i.inArray(this._placeholderElm,t.previousSiblings(e))||(n=!1),n?t.insertAfter(this._placeholderElm,e):t.insertBefore(this._placeholderElm,e)},destroy:function(){this._dragActive&&e.off(document,".inkdraggable"),o.destroyComponent.call(this)}},o.createUIComponent(a),a}),Ink.createModule("Ink.UI.Draggable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1","Ink.UI.Common_1"],function(t,e,n,i,o,r){"use strict";function s(t,e,n){return t=Math.min(t,n),t=Math.max(t,e)}function a(){r.BaseUIComponent.apply(this,arguments)}var l=0,h=1;return a._name="Draggable_1",a._optionDefinition={constraint:["String",!1],constraintElm:["Element",!1],top:["Number",!1],right:["Number",!1],bottom:["Number",!1],left:["Number",!1],handle:["Element",!1],revert:["Boolean",!1],cursor:["String","move"],zIndex:["Number",9999],fps:["Number",0],droppableProxy:["Element",!1],mouseAnchor:["String",void 0],dragClass:["String","drag"],skipChildren:["Boolean",!0],onStart:["Function",!1],onEnd:["Function",!1],onDrag:["Function",!1],onChange:["Function",!1]},a.prototype={_init:function(){var t=this._options;this.constraintElm=t.constraintElm&&r.elOrSelector(t.constraintElm),this.handle=!1,this.elmStartPosition=!1,this.active=!1,this.dragged=!1,this.prevCoords=!1,this.placeholder=!1,this.position=!1,this.zindex=!1,this.firstDrag=!0,t.fps&&(this.deltaMs=1e3/t.fps,this.lastRunAt=0),this.handlers={},this.handlers.start=Ink.bindEvent(this._onStart,this),this.handlers.dragFacade=Ink.bindEvent(this._onDragFacade,this),this.handlers.drag=Ink.bindEvent(this._onDrag,this),this.handlers.end=Ink.bindEvent(this._onEnd,this),this.handlers.selectStart=function(t){return e.stop(t),!1},this.handle=this._options.handle?r.elOrSelector(this._options.handle):this._element,this.handle.style.cursor=t.cursor,e.observe(this.handle,"touchstart",this.handlers.start),e.observe(this.handle,"mousedown",this.handlers.start),i.IE&&e.observe(this._element,"selectstart",this.handlers.selectStart)},destroy:function(){e.stopObserving(this.handle,"touchstart",this.handlers.start),e.stopObserving(this.handle,"mousedown",this.handlers.start),i.IE&&e.stopObserving(this._element,"selectstart",this.handlers.selectStart)},_getCoords:function(e){var n=[t.scrollWidth(),t.scrollHeight()];return{x:(e.touches?e.touches[0].clientX:e.clientX)+n[l],y:(e.touches?e.touches[0].clientY:e.clientY)+n[h]}},_cloneStyle:function(e,i){i.className=e.className,i.style.borderWidth="0",i.style.padding="0",i.style.position="absolute",i.style.width=t.elementWidth(e)+"px",i.style.height=t.elementHeight(e)+"px",i.style.left=t.elementLeft(e)+"px",i.style.top=t.elementTop(e)+"px",i.style.cssFloat=n.getStyle(e,"float"),i.style.display=n.getStyle(e,"display")},_onStart:function(i){if(!this.active&&e.isLeftClick(i)||"undefined"==typeof i.button){var o=e.element(i);if(this._options.skipChildren&&o!==this.handle)return;e.stop(i),n.addClassName(this._element,this._options.dragClass),this.elmStartPosition=[t.elementLeft(this._element),t.elementTop(this._element)];var r=[parseInt(n.getStyle(this._element,"left"),10),parseInt(n.getStyle(this._element,"top"),10)],s=t.elementDimensions(this._element);this.originalPosition=[r[l]?r[l]:null,r[h]?r[h]:null],this.delta=this._getCoords(i),this.active=!0,this.position=n.getStyle(this._element,"position"),this.zindex=n.getStyle(this._element,"zIndex");var a=document.createElement("div");if(a.style.position=this.position,a.style.width=s[l]+"px",a.style.height=s[h]+"px",a.style.marginTop=n.getStyle(this._element,"margin-top"),a.style.marginBottom=n.getStyle(this._element,"margin-bottom"),a.style.marginLeft=n.getStyle(this._element,"margin-left"),a.style.marginRight=n.getStyle(this._element,"margin-right"),a.style.borderWidth="0",a.style.padding="0",a.style.cssFloat=n.getStyle(this._element,"float"),a.style.display=n.getStyle(this._element,"display"),a.style.visibility="hidden",this.delta2=[this.delta.x-this.elmStartPosition[l],this.delta.y-this.elmStartPosition[h]],this._options.mouseAnchor){var u=this._options.mouseAnchor.split(" "),c=[s[l],s[h]];"left"===u[0]?c[l]=0:"center"===u[0]&&(c[l]=parseInt(c[l]/2,10)),"top"===u[1]?c[h]=0:"center"===u[1]&&(c[h]=parseInt(c[h]/2,10)),this.applyDelta=[this.delta2[l]-c[l],this.delta2[h]-c[h]]}var d=this._options.fps?"dragFacade":"drag";if(this.placeholder=a,this._options.onStart&&this._options.onStart(this._element,i),this._options.droppableProxy){this.proxy=document.createElement("div"),s=[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight];var p=this.proxy.style;p.width=s[l]+"px",p.height=s[h]+"px",p.position="fixed",p.left="0",p.top="0",p.zIndex=this._options.zIndex+1,p.backgroundColor="#FF0000",n.setOpacity(this.proxy,0);for(var f=document.body.firstChild;f&&1!==f.nodeType;)f=f.nextSibling;document.body.insertBefore(this.proxy,f),e.observe(this.proxy,"mousemove",this.handlers[d]),e.observe(this.proxy,"touchmove",this.handlers[d])}else e.observe(document,"mousemove",this.handlers[d]);return this._element.style.position="absolute",this._element.style.zIndex=this._options.zIndex,this._element.parentNode.insertBefore(this.placeholder,this._element),this._onDrag(i),e.observe(document,"mouseup",this.handlers.end),e.observe(document,"touchend",this.handlers.end),!1}},_onDragFacade:function(t){var e=+new Date;(!this.lastRunAt||e>this.lastRunAt+this.deltaMs)&&(this.lastRunAt=e,this._onDrag(t))},_onDrag:function(n){if(this.active){e.stop(n),this.dragged=!0;var i=this._getCoords(n),o=i.x,r=i.y,a=this._options,u=!1,c=!1;if(this.prevCoords&&o!==this.prevCoords.x||r!==this.prevCoords.y){a.onDrag&&a.onDrag(this._element,n),this.prevCoords=i,u=this.elmStartPosition[l]+o-this.delta.x,c=this.elmStartPosition[h]+r-this.delta.y;var d=t.elementDimensions(this._element);if(this.constraintElm){var p=t.offset(this.constraintElm),f=t.elementDimensions(this.constraintElm),m=p[h]+(a.top||0),_=p[h]+f[h]-(a.bottom||0),g=p[l]+(a.left||0),v=p[l]+f[l]-(a.right||0);c=s(c,m,_-d[h]),u=s(u,g,v-d[l])}else if(a.constraint){var y=a.right===!1?t.pageWidth()-d[l]:a.right,b=a.left===!1?0:a.left,k=a.top===!1?0:a.top,C=a.bottom===!1?t.pageHeight()-d[h]:a.bottom;("horizontal"===a.constraint||"both"===a.constraint)&&(u=s(u,b,y)),("vertical"===a.constraint||"both"===a.constraint)&&(c=s(c,k,C))}var I=Ink.getModule("Ink.UI.Droppable_1");if(this.firstDrag&&(I&&I.updateAll(),this.firstDrag=!1),u&&(this._element.style.left=u+"px"),c&&(this._element.style.top=c+"px"),I){var w=this._options.mouseAnchor?{x:o-this.applyDelta[l],y:r-this.applyDelta[h]}:i;I.action(w,"drag",n,this._element)}a.onChange&&a.onChange(this)}}},_onEnd:function(i){if(e.stopObserving(document,"mousemove",this.handlers.drag),e.stopObserving(document,"touchmove",this.handlers.drag),this._options.fps&&this._onDrag(i),n.removeClassName(this._element,this._options.dragClass),this.active&&this.dragged){this._options.droppableProxy&&document.body.removeChild(this.proxy),this.pt&&(t.remove(this.pt),this.pt=void 0),this.placeholder&&t.remove(this.placeholder),this._options.revert&&(this._element.style.position=this.position,this._element.style.zIndex=null!==this.zindex?this.zindex:"auto",this._element.style.left=this.originalPosition[l]?this.originalPosition[l]+"px":"",this._element.style.top=this.originalPosition[h]?this.originalPosition[h]+"px":""),this._options.onEnd&&this._options.onEnd(this._element,i);var o=Ink.getModule("Ink.UI.Droppable_1");o&&o.action(this._getCoords(i),"drop",i,this._element),this.position=!1,this.zindex=!1,this.firstDrag=!0}this.active=!1,this.dragged=!1}},r.createUIComponent(a),a}),Ink.createModule("Ink.UI.Drawer","1",["Ink.UI.Common_1","Ink.Dom.Loaded_1","Ink.Dom.Selector_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(t,e,n,i,o,r){"use strict";function s(t){if(document.addEventListener){d&&a();var e=!1;d=function(n){return"mousedown"===n.type||"mouseup"===n.type?void(e="mousedown"===n.type):void(e||t(n.target))},document.addEventListener("focus",d,!0),document.addEventListener("mousedown",d,!0),document.addEventListener("mouseup",d,!0)}}function a(){document.addEventListener&&d&&(document.removeEventListener("focus",d,!0),document.removeEventListener("mousedown",d,!0),document.removeEventListener("mouseup",d,!0),d=null)}function l(t){for(var e=Ink.ss("[tabindex]",t),n=null,i=null,o=0;o<e.length;o++){var r=+e[o].tabIndex;r||e.splice(o,1),(null===n||n>r)&&(n=r,i=e[o])}if(i)return i.focus(),!0;var s=Ink.s(c,t);return s?(s.focus(),!0):!1}function h(t){return'Ink.UI.Drawer_1: Could not find the "'+t+'" element on this page. Please make sure it exists.'}function u(e,n){t.isDOMElement(e)||(n=e),t.BaseUIComponent.apply(this,[document.body,n])}var c=['[tabindex]:not([tabindex="-1"])',"input","select","textarea","button","object","a[href]","area"].join(","),d=null,p=function(t){var e={WebkitTransitionProperty:"webkitTransitionEnd",transitionProperty:"transitionend"};for(var n in e)if(e.hasOwnProperty(n)&&void 0!==t.style[n])return{styleProp:n,eventName:e[n]};return!1}(document.createElement("div"));return u.transitionSupport=p,u._name="Drawer_1",u._optionDefinition={parentSelector:["String",".ink-drawer"],leftDrawer:["String",".left-drawer"],leftTrigger:["String",".left-drawer-trigger"],rightDrawer:["String",".right-drawer"],rightTrigger:["String",".right-drawer-trigger"],contentDrawer:["String",".content-drawer"],mode:["String","push"],sides:["String","both"]},u.prototype={_init:function(){function t(t){t.drawer&&t.triggers.length?e=!0:n=h(t.drawer?t.drawerOption:t.triggerOption)}if(this._contentDrawers=Ink.ss(this._options.contentDrawer),this._leftDrawer=Ink.s(this._options.leftDrawer),this._leftTriggers=Ink.ss(this._options.leftTrigger),this._rightDrawer=Ink.s(this._options.rightDrawer),this._rightTriggers=Ink.ss(this._options.rightTrigger),r.addClassName(document.body,"ink-drawer"),0===this._contentDrawers.length)throw new Error('Ink.UI.Drawer_1: Could not find any "'+this._options.contentDrawer+'" elements on this page. Please make sure you have at least one.');switch(this._options.sides){case"both":this._triggers=this._options.leftTrigger+", "+this._options.rightTrigger+", "+this._options.contentDrawer;break;case"left":this._triggers=this._options.leftTrigger+", "+this._options.contentDrawer;break;case"right":this._triggers=this._options.rightTrigger+", "+this._options.contentDrawer}var e=!1,n=null;("left"===this._options.sides||"both"===this._options.sides)&&t({name:"left",drawer:this._leftDrawer,drawerOption:this._options.leftDrawer,triggers:this._leftTriggers,triggerOption:this._options.leftTrigger}),("right"===this._options.sides||"both"===this._options.sides)&&t({name:"right",drawer:this._rightDrawer,drawerOption:this._options.rightDrawer,triggers:this._rightTriggers,triggerOption:this._options.rightTrigger}),e||Ink.warn(n),this._isOpen=!1,this._direction=void 0,this._handlers={click:Ink.bindEvent(this._onClick,this),afterTransition:Ink.bindEvent(this._afterTransition,this)},this._addEvents()},_onClick:function(t){var e=i.findUpwardsBySelector(t.currentTarget,this._options.leftTrigger)?"left":i.findUpwardsBySelector(t.currentTarget,this._options.rightTrigger)?"right":null;if(e)return void this._onTriggerClicked(t,e);if(this._isOpen){var n=i.findUpwardsBySelector(t.currentTarget,this._options.contentDrawer),o=i.isLink(t.target);(n||o)&&this.close(),n&&t.preventDefault()}},_onTriggerClicked:function(t,e){this._isOpen?this.close():this.open(e),t.preventDefault()},_afterTransition:function(){this._isOpen||r.removeClassName(this._getRecentDrawer(),"show")},_addEvents:function(){o.on(document.body,"click",this._triggers+', a[href*="#"]',this._handlers.click)},_getRecentDrawer:function(){return"left"===this._direction?this._leftDrawer:"right"===this._direction?this._rightDrawer:null},open:function(t){this._isOpen=!0,this._direction=t;var e=this._getRecentDrawer();r.addClassName(e,"show"),setTimeout(Ink.bind(function(){r.addClassName(document.body,[this._options.mode,t])},this),0),p&&this._transitionWillOccur(e)&&o.one(e,p.eventName,function(){r.removeClassName(e,"show");+e.offsetWidth;r.addClassName(e,"show")});var n=document.activeElement,h=l(e);s(Ink.bind(function(t){var o=i.isAncestorOf(e,t);o||(this.close(),a(),h&&n&&n.focus())},this))},_transitionWillOccur:function(t){return!(!p||!r.getStyle(t,p.styleProp))},close:function(){if(this._isOpen!==!1){var t=this._getRecentDrawer();if(t){a(),this._isOpen=!1;var e=null;p&&(e=this._transitionWillOccur(this._getRecentDrawer())),r.removeClassName(document.body,[this._options.mode,this._direction]),e?o.one(document.body,p.eventName,this._handlers.afterTransition):this._handlers.afterTransition()}}}},t.createUIComponent(u),u}),Ink.createModule("Ink.UI.Dropdown","1",["Ink.UI.Common_1","Ink.UI.Toggle_1","Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="Dropdown_1",o._optionDefinition={target:["Element"],hoverOpen:["Number",null],dismissOnInsideClick:["Boolean",!1],dismissOnOutsideClick:["Boolean",!0],dismissAfter:["Number",null],onInsideClick:["Function",null],onOutsideClick:["Function",null],onOpen:["Function",null],onDismiss:["Function",null]},o.prototype={_init:function(){this._toggle=new e(this._element,{target:this._options.target,closeOnInsideClick:null,closeOnClick:!1,onChangeState:Ink.bind(function(t){return this._openOrDismiss(t,!0,!0)
},this)}),n.observeMulti([this._options.target,this._element],"mouseout",Ink.bindMethod(this,"_onMouseOut")),n.observeMulti([this._options.target,this._element],"mouseover",Ink.bindMethod(this,"_onMouseOver")),n.observe(this._options.target,"click",Ink.bindMethod(this,"_onInsideClick")),n.observe(document,"click",Ink.bindMethod(this,"_onOutsideClick"))},_onMouseOver:function(){"number"==typeof this._options.hoverOpen&&this._toggle.getState()===!1&&(clearTimeout(this._openTimeout),this._openTimeout=setTimeout(Ink.bindMethod(this,"open",!0),1e3*this._options.hoverOpen)),"number"==typeof this._options.dismissAfter&&clearTimeout(this._dismissTimeout)},_onMouseOut:function(){"number"==typeof this._options.dismissAfter&&this._toggle.getState()===!0&&(clearTimeout(this._dismissTimeout),this._dismissTimeout=setTimeout(Ink.bindMethod(this,"dismiss",!0),1e3*this._options.dismissAfter)),"number"==typeof this._options.hoverOpen&&clearTimeout(this._openTimeout)},_onInsideClick:function(t){var e=this._handlerCall("onInsideClick",n.element(t));e!==!1&&this._options.dismissOnInsideClick&&this.dismiss(!0)},_onOutsideClick:function(t){var e=n.element(t),o=i.findUpwardsHaving(e,Ink.bind(function(t){return t===this._element},this)),r=i.findUpwardsHaving(e,Ink.bind(function(t){return t===this._options.target},this));if(!o&&!r){var s=this._handlerCall("onOutsideClick",e);if(s===!1)return;this._options.dismissOnOutsideClick&&this.dismiss(!0)}},dismiss:function(t){this._openOrDismiss(!1,t,arguments[1])},open:function(t){this._openOrDismiss(!0,t,arguments[1])},_openOrDismiss:function(t,e,n){if(!this._toggle||this._toggle.getState()!==t){if(e&&this._handlerCall(t?"onOpen":"onDismiss")===!1)return!1;n||this._toggle.setState(t),clearTimeout(this._dismissTimeout),clearTimeout(this._openTimeout)}},_handlerCall:function(t){return this._options[t]?this._options[t].call(this,[].slice.call(arguments,1)):void 0}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Droppable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.UI.Common_1","Ink.Util.Array_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";var s=function(t){return function(e){return n.addClassName(t,e)}},a=function(t){return function(e){return n.removeClassName(t,e)}},l={debug:!1,_droppables:[],_draggables:[],add:function(e,n){function o(t){t.style.position="inherit"}e=i.elOrSelector(e,"Droppable.add target element");var r=Ink.extendObj({hoverClass:n.hoverclass||!1,accept:!1,onHover:!1,onDrop:!1,onDropOut:!1},n||{},t.data(e));"string"==typeof r.hoverClass&&(r.hoverClass=r.hoverClass.split(/\s+/));var s,a=this,l={move:function(t,e){o(t),e.appendChild(t)},copy:function(t,e){o(t),e.appendChild(t.cloneNode(!0))},revert:function(t){a._findDraggable(t).originalParent.appendChild(t),o(t)}};if("string"==typeof r.onHover&&(s=r.onHover,r.onHover=l[s],void 0===r.onHover))throw new Error("Unknown hover event handler: "+s);if("string"==typeof r.onDrop&&(s=r.onDrop,r.onDrop=l[s],void 0===r.onDrop))throw new Error("Unknown drop event handler: "+s);if("string"==typeof r.onDropOut&&(s=r.onDropOut,r.onDropOut=l[s],void 0===r.onDropOut))throw new Error("Unknown dropOut event handler: "+s);var h={element:e,data:{},options:r};this._droppables.push(h),this._update(h)},_findData:function(t){for(var e=this._droppables,n=0,i=e.length;i>n;n++)if(e[n].element===t)return e[n]},_findDraggable:function(t){for(var e=this._draggables,n=0,i=e.length;i>n;n++)if(e[n].element===t)return e[n]},updateAll:function(){o.each(this._droppables,l._update)},update:function(t){this._update(this._findData(t))},_update:function(e){var n=e.data,i=e.element;n.left=t.offsetLeft(i),n.top=t.offsetTop(i),n.right=n.left+t.elementWidth(i),n.bottom=n.top+t.elementHeight(i)},remove:function(t){t=i.elOrSelector(t);for(var e=this._droppables.length,n=0;e>n;n++)if(this._droppables[n].element===t){this._droppables.splice(n,1);break}return e!==this._droppables.length},action:function(t,e,n,i){o.each(this._droppables,Ink.bind(function(l){var h=l.data,u=l.options,c=l.element;(!u.accept||r.matches(u.accept,[i]).length)&&("drag"!==e||this._findDraggable(i)||this._draggables.push({element:i,originalParent:i.parentNode}),t.x>=h.left&&t.x<=h.right&&t.y>=h.top&&t.y<=h.bottom?"drag"===e?(u.hoverClass&&o.each(u.hoverClass,s(c)),u.onHover&&u.onHover(i,c)):"drop"===e&&(u.hoverClass&&o.each(u.hoverClass,a(c)),u.onDrop&&u.onDrop(i,c,n)):"drag"===e&&u.hoverClass?o.each(u.hoverClass,a(c)):"drop"===e&&u.onDropOut&&u.onDropOut(i,c,n))},this))}};return l}),Ink.createModule("Ink.UI.FormValidator","2",["Ink.UI.Common_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.Util.I18n_1","Ink.Util.Validator_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(t){switch(t.nodeName.toLowerCase()){case"select":return Ink.s("option:selected",t).value;case"textarea":return t.value;case"input":if(!("type"in t))return t.value;if("radio"===t.type||"checkbox"===t.type){if(t.checked)return t.value}else if("file"!==t.type)return t.value;return;default:return t.innerHTML}}function h(){t.BaseUIComponent.apply(this,arguments)}function u(){t.BaseUIComponent.apply(this,arguments)}var c={required:function(t){return"undefined"!=typeof t&&!/^\s*$/.test(t)},min_length:function(t,e){return"string"==typeof t&&t.length>=parseInt(e,10)},max_length:function(t,e){return"string"==typeof t&&t.length<=parseInt(e,10)},exact_length:function(t,e){return"string"==typeof t&&t.length===parseInt(e,10)},email:function(t){return"string"==typeof t&&a.mail(t)},url:function(t,e){return e=e||!1,"string"==typeof t&&a.url(t,e)},ip:function(t,e){return"string"!=typeof t?!1:a.isIP(t,e)},phone:function(t,e){if("string"!=typeof t)return!1;var n=e?e.toUpperCase():"";return a["is"+n+"Phone"](t)},credit_card:function(t,e){return"string"!=typeof t?!1:a.isCreditCard(t,e||"default")},date:function(t,e){return"string"==typeof t&&a.isDate(e,t)},alpha:function(t,e){return a.ascii(t,{singleLineWhitespace:e})},text:function(t,e,n){return a.unicode(t,{singleLineWhitespace:e,unicodePunctuation:n})},latin:function(t,e,n){return"string"!=typeof t?!1:a.latin1(t,{latin1Punctuation:e,singleLineWhitespace:n})},alpha_numeric:function(t){return a.ascii(t,{numbers:!0})},alpha_dash:function(t){return a.ascii(t,{dash:!0,underscore:!0})},digit:function(t){return"string"==typeof t&&/^[0-9]{1}$/.test(t)},integer:function(t,e){return a.number(t,{negative:!e,decimalPlaces:0})},decimal:function(t,e,n,i){return a.number(t,{decimalSep:e||".",decimalPlaces:+n||null,maxDigits:+i})},numeric:function(t,e,n,i){return e=e||".",-1!==t.indexOf(e)?c.decimal(t,e,n,i):c.integer(t)},range:function(t,e,n,i){return t=+t,e=+e,n=+n,isNaN(t)||isNaN(e)||isNaN(n)?!1:e>t||t>n?!1:i?(t-e)%i===0:!0},color:function(t){return a.isColor(t)},matches:function(t,e){var n=this.getFormElements()[e];if(!n){for(var i=Ink.ss("input, select, textarea, .control-group",this._options.form._element),o=0;o<i.length;o++)if((i[o].name||i[o].id)===e)return l(i[o])===t;return!1}n=n[0];var r=n.getValue();return n._rules.required&&""===r?!1:t===r},ean:function(t){return a.isEAN(t.replace(/[^\d]/g,""),"ean-13")}},d=new s({en_US:{"formvalidator.required":"Filling {field} is mandatory","formvalidator.min_length":"The {field} must have a minimum size of {param1} characters","formvalidator.max_length":"The {field} must have a maximum size of {param1} characters","formvalidator.exact_length":"The {field} must have an exact size of {param1} characters","formvalidator.email":"The {field} must have a valid e-mail address","formvalidator.url":"The {field} must have a valid URL","formvalidator.ip":"The {field} does not contain a valid {param1} IP address","formvalidator.phone":"The {field} does not contain a valid {param1} phone number","formvalidator.credit_card":"The {field} does not contain a valid {param1} credit card","formvalidator.date":"The {field} should contain a date in the {param1} format","formvalidator.alpha":"The {field} should only contain letters","formvalidator.text":"The {field} should only contain alphabetic characters","formvalidator.latin":"The {field} should only contain alphabetic characters","formvalidator.alpha_numeric":"The {field} should only contain letters or numbers","formvalidator.alpha_dash":"The {field} should only contain letters or dashes","formvalidator.digit":"The {field} should only contain a digit","formvalidator.integer":"The {field} should only contain an integer","formvalidator.decimal":"The {field} should contain a valid decimal number","formvalidator.numeric":"The {field} should contain a number","formvalidator.range":"The {field} should contain a number between {param1} and {param2}","formvalidator.color":"The {field} should contain a valid color","formvalidator.matches":"The {field} should match the field {param1}"},pt_PT:{"formvalidator.required":"Preencher {field} \xe9 obrigat\xf3rio","formvalidator.min_length":"{field} deve ter no m\xednimo {param1} caracteres","formvalidator.max_length":"{field} tem um tamanho m\xe1ximo de {param1} caracteres","formvalidator.exact_length":"{field} devia ter exactamente {param1} caracteres","formvalidator.email":"{field} deve ser um e-mail v\xe1lido","formvalidator.url":"O {field} deve ser um URL v\xe1lido","formvalidator.ip":"{field} n\xe3o tem um endere\xe7o IP {param1} v\xe1lido","formvalidator.phone":"{field} deve ser preenchido com um n\xfamero de telefone {param1} v\xe1lido.","formvalidator.credit_card":"{field} n\xe3o tem um cart\xe3o de cr\xe9dito {param1} v\xe1lido","formvalidator.date":"{field} deve conter uma data no formato {param1}","formvalidator.alpha":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.text":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.latin":"O campo {field} deve conter apenas caracteres alfab\xe9ticos","formvalidator.alpha_numeric":"{field} deve conter apenas letras e n\xfameros","formvalidator.alpha_dash":"{field} deve conter apenas letras e tra\xe7os","formvalidator.digit":"{field} destina-se a ser preenchido com apenas um d\xedgito","formvalidator.integer":"{field} deve conter um n\xfamero inteiro","formvalidator.decimal":"{field} deve conter um n\xfamero v\xe1lido","formvalidator.numeric":"{field} deve conter um n\xfamero v\xe1lido","formvalidator.range":"{field} deve conter um n\xfamero entre {param1} e {param2}","formvalidator.color":"{field} deve conter uma cor v\xe1lida","formvalidator.matches":"{field} deve corresponder ao campo {param1}"}},"en_US");return h._name="FormElement_1",h._optionDefinition={label:["String",null],rules:["String",null],error:["String",null],form:["Object"]},h.prototype={_init:function(){this._errors={},this._rules={},this._value=null,null===this._options.label&&(this._options.label=this._getLabel())},_getLabel:function(){var t=e.findUpwardsBySelector(this._element,".control-group label");return t?e.textContent(t):this._element.name||this._element.id||""},_parseRules:function(t){this._rules={},t=t.split("|");var e,n,i,o,r=t.length;if(r>0)for(e=0;r>e;e++)if(n=t[e])if(-1!==(o=n.indexOf("["))){i=n.substr(o+1),i=i.split("]"),i=i[0],i=i.split(",");for(var s=0,a=i.length;a>s;s++)i[s]="true"===i[s]?!0:"false"===i[s]?!1:i[s];i.splice(0,0,this.getValue()),n=n.substr(0,o),this._rules[n]=i}else this._rules[n]=[this.getValue()]},_addError:function(t){for(var e=this._rules[t]||[],n={field:this._options.label,value:this.getValue()},i=1;i<e.length;i++)n["param"+i]=e[i];var o,r="formvalidator."+t;this._options.error?o=this._options.error:(o=d.text(r,n),o===r&&(o="[Validation message not found for rule ]"+t)),this._errors[t]=o},getValue:function(){return l(this._element)},getErrors:function(){return this._errors},getElement:function(){return this._element},getFormElements:function(){return this._options.form._formElements},validate:function(){this._errors={},this._parseRules(this._options.rules);var t=""!==this.getValue()||"required"in this._rules||"matches"in this._rules;if(t)for(var e in this._rules)if(this._rules.hasOwnProperty(e)){if("function"!=typeof c[e])return Ink.warn('Rule "'+e+'" not found. Used in element:',this._element),this._addError(null),!1;if(c[e].apply(this,this._rules[e])===!1)return this._addError(e),!1}return!0}},t.createUIComponent(h),u._name="FormValidator_1",u._optionDefinition={eventTrigger:["String","submit"],neverSubmit:["Boolean",!1],searchFor:["String","input, select, textarea, .control-group"],beforeValidation:["Function",void 0],onError:["Function",void 0],onSuccess:["Function",void 0]},u.setRule=function(t,e,n){if(c[t]=n,d.getKey("formvalidator."+t)!==e){var i={};i["formvalidator."+t]=e;var o={};o[d.lang()]=i,d.append(o)}},u.getI18n=function(){return d},u.setI18n=function(t){d=t},u.appendI18n=function(){d.append.apply(d,[].slice.call(arguments))},u.setLanguage=function(t){d.lang(t)},u.getRules=function(){return c},u.prototype={_init:function(){this._rootElement=this._element,this._formElements={},this._errorMessages=[],this._markedErrorElements=[],"string"==typeof this._options.eventTrigger&&n.observe(this._rootElement,this._options.eventTrigger,Ink.bindEvent(this.validate,this))},getElements:function(){this._formElements||(this._formElements={});for(var t=i.select(this._options.searchFor,this._rootElement),n=0;n<t.length;n+=1){var o=t[n],r=e.data(o);if("rules"in r){var s,a={form:this};"name"in o&&o.name?s=o.name:"id"in o&&o.id?s=o.id:(s="element_"+Math.floor(100*Math.random()),o.id=s),s in this._formElements||(this._formElements[s]=[]);var l=this._getOrCreateFormElementInstance(s,o,a);l&&this._formElements[s].push(l)}}return this._formElements},_getOrCreateFormElementInstance:function(t,e,n){for(var i=0;i<this._formElements[t].length;i++)if(this._formElements[t][i].getElement()===e)return null;return new h(e,n)},setI18n:function(t){t.clone&&(t=t.clone()),this.i18n=t},getI18n:function(){return this.i18n||d},setLanguage:function(t){this.i18n||this.setI18n(d),this.i18n.lang(t)},getLanguage:function(){return this.i18n?this.i18n.lang():d.lang()},validate:function(t){this._options.neverSubmit&&t&&n.stopDefault(t),"function"==typeof this._options.beforeValidation&&this._options.beforeValidation(),r.each(this._markedErrorElements,function(t){o.removeClassName(t,["validation","error"])}),r.each(this._errorMessages,e.remove),this.getElements();var i=[];for(var s in this._formElements)if(this._formElements.hasOwnProperty(s))for(var a=0;a<this._formElements[s].length;a+=1)this._formElements[s][a].validate()||i.push(this._formElements[s][a]);return 0===i.length?("function"==typeof this._options.onSuccess&&this._options.onSuccess(),!0):(t&&n.stopDefault(t),"function"==typeof this._options.onError&&this._options.onError(i),this._errorMessages=[],this._markedErrorElements=[],r.each(i,Ink.bind(function(t){var n,i;o.hasClassName(t.getElement(),"control-group")?(n=t.getElement(),i=Ink.s(".control",t.getElement())):(n=e.findUpwardsByClass(t.getElement(),"control-group"),i=e.findUpwardsByClass(t.getElement(),"control")),n&&(o.addClassName(n,["validation","error"]),this._markedErrorElements.push(n));var r=document.createElement("p");o.addClassName(r,"tip"),i||n?(i||n).appendChild(r):e.insertAfter(r,t.getElement());var s=t.getErrors(),a=[];for(var l in s)s.hasOwnProperty(l)&&a.push(s[l]);r.innerHTML=a.join("<br/>"),this._errorMessages.push(r)},this)),!1)}},t.createUIComponent(u),u.FormElement=h,u.validationFunctions=c,u}),Ink.createModule("Ink.UI.FormValidator","1",["Ink.Dom.Element_1","Ink.Dom.Css_1","Ink.Util.Validator_1","Ink.Dom.Selector_1"],function(t,e,n,i){"use strict";function o(t){if(!t.name)return[];if(!t.form)return i.select('[name="'+t.name+'"]');var e=t.form[t.name];return e?("undefined"==typeof e.length&&(e=[e]),e):function(){for(var e=[],n=Ink.ss("*",t.form),i=0;i<n.length;i++)n[i].name===t.name&&e.push(n[i]);return e}()}var r={version:"1",_flagMap:{"ink-fv-required":{msg:"Required field"},"ink-fv-email":{msg:"Invalid e-mail address"},"ink-fv-url":{msg:"Invalid URL"},"ink-fv-number":{msg:"Invalid number"},"ink-fv-phone_pt":{msg:"Invalid phone number"},"ink-fv-phone_cv":{msg:"Invalid phone number"},"ink-fv-phone_mz":{msg:"Invalid phone number"},"ink-fv-phone_ao":{msg:"Invalid phone number"},"ink-fv-date":{msg:"Invalid date"},"ink-fv-confirm":{msg:"Confirmation does not match"},"ink-fv-custom":{msg:""}},elements:{},confirmElms:{},hasConfirm:{},_errorClassName:"tip error",_errorValidationClassName:"validaton",_errorTypeWarningClassName:"warning",_errorTypeErrorClassName:"error",validate:function(t,e){if(this._free(),e=Ink.extendObj({onSuccess:!1,onError:!1,customFlag:!1,confirmGroup:[]},e||{}),"string"==typeof t&&(t=document.getElementById(t)),null===t)return!1;this.element=t,("undefined"==typeof this.element.id||null===this.element.id||""===this.element.id)&&(this.element.id="ink-fv_randomid_"+Math.round(99999*Math.random())),this.custom=e.customFlag,this.confirmGroup=e.confirmGroup;var n=this._validateElements();return n.length>0?(e.onError?e.onError(n):this._showError(t,n),!1):(e.onError||this._clearError(t),this._clearCache(),e.onSuccess&&e.onSuccess(),!0)},reset:function(){this._clearError(),this._clearCache()},_free:function(){this.element=null,this.custom=!1,this.confirmGroup=!1},_clearCache:function(){this.element=null,this.elements=[],this.custom=!1,this.confirmGroup=!1},_getElements:function(){var t=this.elements[this.element.id]=[];this.confirmElms[this.element.id]=[];for(var n=i.select(":input",this.element),o=!1,r=0,s=n.length;s>r;r++){o=n[r];var a=(o.getAttribute("type")+"").toLowerCase();if("radio"===a||"checkbox"===a){if(0===t.length||o.getAttribute("type")!==t[t.length-1].getAttribute("type")&&o.getAttribute("name")!==t[t.length-1].getAttribute("name"))for(var l in this._flagMap)if(e.hasClassName(o,l)){t.push(o);break}}else{for(var h in this._flagMap)if(e.hasClassName(o,h)&&"ink-fv-confirm"!==h){t.push(o);break}e.hasClassName(o,"ink-fv-confirm")&&(this.confirmElms[this.element.id].push(o),this.hasConfirm[this.element.id]=!0)}}},_validateElements:function(){var t;this._getElements(),this.hasConfirm[this.element.id]===!0&&(t=this._makeConfirmGroups());for(var n,i=[],o=!1,r=!1,s=0,a=this.elements[this.element.id].length;a>s;s++)if(n=!1,o=this.elements[this.element.id][s],!o.disabled)for(var l in this._flagMap)if(e.hasClassName(o,l))if("ink-fv-custom"!==l&&"ink-fv-confirm"!==l)this._isValid(o,l)||(n?i[i.length-1].errors.push(l):(i.push({elm:o,errors:[l]}),n=!0));else if("ink-fv-confirm"!==l)r=this._isCustomValid(o),r.length>0&&i.push({elm:o,errors:[l],custom:r});else if("ink-fv-confirm"===l)continue;return i=this._validateConfirmGroups(t,i)},_validateConfirmGroups:function(t,e){var n=!1;for(var i in t)t.hasOwnProperty(i)&&(n=t[i],2===n.length&&n[0].value!==n[1].value&&e.push({elm:n[1],errors:["ink-fv-confirm"]}));return e},_makeConfirmGroups:function(){var t;if(this.confirmGroup&&this.confirmGroup.length>0){t={};for(var n=!1,i=!1,o=0,r=this.confirmElms[this.element.id].length;r>o;o++){n=this.confirmElms[this.element.id][o];for(var s=0,a=this.confirmGroup.length;a>s;s++)i=this.confirmGroup[s],e.hasClassName(n,i)&&("undefined"==typeof t[i]?t[i]=[n]:t[i].push(n))}return t}return 2===this.confirmElms[this.element.id].length&&(t={"ink-fv-confirm":[this.confirmElms[this.element.id][0],this.confirmElms[this.element.id][1]]}),t},_isCustomValid:function(t){for(var n=[],i=!1,o=0,r=this.custom.length;r>o;o++)i=this.custom[o],e.hasClassName(t,i.flag)&&(i.callback(t,i.msg)||n.push({flag:i.flag,msg:i.msg}));return n},_isValid:function(t,i){var r=t.nodeName.toLowerCase(),s=(t.getAttribute("type")||"").toLowerCase(),a=this._trim(t.value);if("ink-fv-required"!==i&&"checkbox"!==s&&"radio"!==s&&""===a)return!e.hasClassName(t,"ink-fv-required");switch(i){case"ink-fv-required":if("select"===r)return t.selectedIndex>0?!0:!1;if("checkbox"!==s&&"radio"!==s)return""!==a;if("checkbox"===s||"radio"===s){for(var l=o(t),h=0,u=l.length;u>h;h++)if(l[h].checked===!0)return!0;return!1}return!1;case"ink-fv-email":return n.mail(t.value);case"ink-fv-url":return n.url(t.value);case"ink-fv-number":return!isNaN(Number(t.value))&&isFinite(Number(t.value));case"ink-fv-phone_pt":return n.isPTPhone(t.value);case"ink-fv-phone_cv":return n.isCVPhone(t.value);case"ink-fv-phone_ao":return n.isAOPhone(t.value);case"ink-fv-phone_mz":return n.isMZPhone(t.value);case"ink-fv-date":var c=Ink.getModule("Ink.Dom.Element",1),d=c.data(t),p="yyyy-mm-dd";if(e.hasClassName(t,"ink-datepicker")&&"format"in d?p=d.format:"validFormat"in d&&(p=d.validFormat),!(p in n._dateParsers)){var f=[];for(var m in n._dateParsers)n._dateParsers.hasOwnProperty(m)&&f.push(m);throw new Error("The attribute data-valid-format must be one of the following values: "+f.join(", "))}return n.isDate(p,t.value);case"ink-fv-custom":}return!1},_showError:function(t,e){this._clearError(t);for(var n=!1,i=0,o=e.length;o>i;i++)n=e[i].elm,n&&this._showAnErrorOnElement(n,e[i])},_showAnErrorOnElement:function(n,i){var o=t.findUpwardsByClass(n,"control-group"),r=t.findUpwardsByClass(n,"control"),s=[this._errorClassName,this._errorTypeClassName].join(" "),a=t.create("p",{className:s});a.innerHTML="ink-fv-custom"!==i.errors[0]?this._flagMap[i.errors[0]].msg:i.custom[0].msg;var l=r||o;l?l.appendChild(a):t.insertAfter(a,n),r&&("ink-fv-required"===i.errors[0]?e.addClassName(o,"validation error"):e.addClassName(o,"validation warning"))},_clearError:function(n){for(var i,o,r=n.getElementsByTagName("p"),s=r.length-1;s>=0;s--)i=r[s],e.hasClassName(i,this._errorClassName)&&(o=t.findUpwardsBySelector(i,".control-group"),o&&e.removeClassName(o,["validation","error","warning"]),e.hasClassName(i,this._errorClassName,!0)&&t.remove(i));var a=n.getElementsByTagName("ul");for(s=a.length-1;s>=0;s--)i=a[s],e.hasClassName(i,"control-group")&&e.removeClassName(i,"validation error")},_trim:function(t){return"string"==typeof t?t.replace(/^\s+|\s+$|\n+$/g,""):void 0}};return r}),Ink.createModule("Ink.UI.ImageQuery","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Util.Array_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="ImageQuery_1",o._optionDefinition={src:["String"],retina:["String",void 0],queries:["Object"],onLoad:["Function",null]},o.prototype={_init:function(){var t;if(-1!==(t=this._element.src.lastIndexOf("?"))){var n=this._element.src.substr(t);this._filename=this._element.src.replace(n,"").split("/").pop()+n}else this._filename=this._element.src.split("/").pop();this._options.queries||(this._options.queries=[]),this._options.queries=i.sortMulti(this._options.queries,"width").reverse(),"function"==typeof this._options.onLoad&&e.observe(this._element,"load",Ink.bindEvent(this._onLoad,this)),this._onResize(),e.observe(window,"resize",e.throttle(Ink.bindMethod(this,"_onResize"),400))},_onResize:function(){if(this._options.queries.length){var t=this._findCurrentQuery();this._element.src=this.getQuerySrc(t)}},_findCurrentQuery:function(){for(var t=n.viewportWidth(),e=this._options.queries,i=e.length-1,o=0;i>o;o+=1)if(e[o].width<=t)return e[o];return e[i]},getQuerySrc:function(t){var e=t.src||this._options.src;if(window.devicePixelRatio>1&&void 0!==this._options.retina&&(e=t.retina||this._options.retina),t.file=this._filename,"function"==typeof e&&(e=e.apply(this,[this._element,t]),"string"!=typeof e))throw'[ImageQuery] :: "src" callback does not return a string';return e=e.replace(/{:(.*?)}/g,function(e,n){return t[n]}),delete t.file,e},_onLoad:function(){this._options.onLoad.call(this)}},t.createUIComponent(o),o}),function(t,e){"use strict";if(!("Ink"in t)){var n={},i={},o=[],r={},s=[],a={},l=Function.prototype.apply,h=function(t){if("object"!=typeof t)return!1;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};t.Ink={VERSION:"3.1.7",_checkPendingRequireModules:function(){var t,e,n,o,r,a,l=[],h=[];for(t=0,e=s.length;e>t;++t)if(n=s[t]){for(o in n.left)n.left.hasOwnProperty(o)&&(r=i[o],r&&(n.args[n.left[o]]=r,delete n.left[o],--n.remaining));if(n.remaining>0)l.push(n);else{if(a=n.cb,!a)continue;delete n.cb,h.push([a,n.args])}}s=l;for(var u=0;u<h.length;u++)h[u][0].apply(!1,h[u][1]);s.length>0&&setTimeout(function(){Ink._checkPendingRequireModules()},0)},getPath:function(t,e){var i,o,r,s,a=t.split(/[._]/g);for(o=a.length;o>=0;o-=1)if(i=a.slice(0,o+1).join("."),n[i]){r=i;break}return r in n?(s=n[r],/\/$/.test(s)||(s+="/"),o<a.length&&(s+=a.slice(o+1).join("/")+"/"),e||(s+="lib.js"),s):null},setPath:function(t,e){n[t.replace(/_/,".")]=e},loadScript:function(t,n){if(-1===t.indexOf("/")){var i=t;if(t=this.getPath(t),null===t)throw new Error('Could not load script "'+i+'". Path not found in the registry. Did you misspell the name, or forgot to call setPath()?')}var o=e.createElement("script");o.setAttribute("type",n||"text/javascript"),o.setAttribute("src",t),"onerror"in o&&(o.onerror=function(){Ink.error(["Failed to load script from ",t,"."].join(""))});var r=e.head||e.getElementsByTagName("head")[0];return r?r.appendChild(o):void 0},_loadLater:function(t){setTimeout(function(){i[t]||r[t]||a[t]||(r[t]=!0,Ink.loadScript(t))},0)},namespace:function(e,n){if(!e||!e.length)return null;for(var i,o=e.split("."),r=t,s=0,a=o.length;a>s;++s)r[o[s]]=r[o[s]]||{},i=r,r=r[o[s]];return n?[i,o[s-1]]:r},getModule:function(t,e){var n=e?[t,"_",e].join(""):t;return i[n]},createModule:function(e,n,s,l){if("string"!=typeof e)throw new Error("module name must be a string!");if(!("number"==typeof n||"string"==typeof n&&n.length>0))throw new Error("version number missing!");var u=[e,"_",n].join("");a[u]=!0;var c=function(){if(!i[u]){delete r[u],delete r[e];var s=Array.prototype.slice.call(arguments),c=l.apply(t,s);o.push(u),"object"==typeof c?c._version=n:"function"==typeof c&&(c.prototype._version=n,c._version=n);var d,p=0===e.indexOf("Ink.");p&&(d=Ink.namespace(e,!0)),i[u]=c,delete a[u],p&&(d[0][d[1]+"_"+n]=c),i[e]=c,p&&h(d[0][d[1]])&&(d[0][d[1]]=c),this&&Ink._checkPendingRequireModules()}};this.requireModules(s,c)},requireModules:function(t,e){var n,o,a,l,h;if(o=t&&t.length,a={args:new Array(o),left:{},remaining:o,cb:e},"object"!=typeof t||void 0===t.length)throw new Error("Dependency list should be an array!");if("function"!=typeof e)throw new Error("Callback should be a function!");for(n=0;o>n;++n)Ink._moduleRenames[t[n]]?(Ink.warn(t[n]+" was renamed to "+Ink._moduleRenames[t[n]]),l=Ink._moduleRenames[t[n]]):l=t[n],l?(h=i[l],h?(a.args[n]=h,--a.remaining):(r[l]||Ink._loadLater(l),a.left[l]=n)):--a.remaining;a.remaining>0?s.push(a):e.apply(!0,a.args)},_moduleRenames:{"Ink.UI.Aux_1":"Ink.UI.Common_1"},getModulesLoadOrder:function(){return o.slice()},getModuleScripts:function(){var t=this.getModulesLoadOrder();return t.unshift("Ink_1"),t=t.map(function(t){return["<scr",'ipt type="text/javascript" src="',Ink.getModuleURL(t),'"></scr',"ipt>"].join("")}),t.join("\n")},createExt:function(t,e,n,i){return Ink.createModule("Ink.Ext."+t,e,n,i)},bind:function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments),o=n.concat(i);return t.apply(e===!1?this:e,o)}},bindMethod:function(t,e){return Ink.bind.apply(Ink,[t[e],t].concat([].slice.call(arguments,2)))},bindEvent:function(e,n){var i=Array.prototype.slice.call(arguments,2);return function(o){var r=i.slice();return r.unshift(o||t.event),e.apply(n===!1?this:n,r)}},i:function(t){return"string"==typeof t?e.getElementById(t)||null:t},ss:function(t,n){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(t,n||e)},s:function(t,n){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(t,n||e)[0]||null},extendObj:function(t){for(var e=[].slice.call(arguments,1),n=0,i=e.length;i>n;n++)if(e[n])for(var o in e[n])Object.prototype.hasOwnProperty.call(e[n],o)&&(t[o]=e[n][o]);return t},log:function(){var e=t.console;e&&e.log&&l.call(e.log,e,arguments)},warn:function(){var e=t.console;e&&e.warn&&l.call(e.warn,e,arguments)},error:function(){var e=t.console;e&&e.error&&l.call(e.error,e,arguments)}}}}(window,document),Ink.createModule("Ink.Net.Ajax","1",[],function(){"use strict";var Ajax=function(t,e){this.init(t,e)};Ajax.globalOptions={parameters:{},requestHeaders:{}};var xMLHttpRequestWithCredentials="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest;return Ajax.prototype={init:function(t,e){if(!t)throw new Error("new Ink.Net.Ajax: Pass a url as the first argument!");var n=Ink.extendObj({asynchronous:!0,contentType:"application/x-www-form-urlencoded",cors:!1,validateCors:!1,debug:!1,delay:0,evalJS:!0,method:"POST",parameters:null,postBody:"",requestHeaders:null,sanitizeJSON:!1,signRequest:!1,timeout:0,useCredentials:!1,xhrProxy:"",onComplete:null,onCreate:null,onException:null,onFailure:null,onHeaders:null,onInit:null,onSuccess:null,onTimeout:null},Ajax.globalOptions);if(e&&"object"==typeof e){if(n=Ink.extendObj(n,e),"object"==typeof e.parameters)n.parameters=Ink.extendObj(Ink.extendObj({},Ajax.globalOptions.parameters),e.parameters);else if(null!==e.parameters){var i=this.paramsObjToStr(Ajax.globalOptions.parameters);i&&(n.parameters=e.parameters+"&"+i)}n.requestHeaders=Ink.extendObj({},Ajax.globalOptions.requestHeaders),n.requestHeaders=Ink.extendObj(n.requestHeaders,e.requestHeaders)}this.options=n,this.safeCall("onInit"),this.url=t;var o=this._locationFromURL(t);this.isHTTP=this._locationIsHTTP(o),this.isCrossDomain=this._locationIsCrossDomain(o,location),this.requestHasBody=n.method.search(/^get|head$/i)<0,this.options.validateCors===!0&&(this.options.cors=this.isCrossDomain),this.options.cors&&(this.isCrossDomain=!1),this.transport=this.getTransport(),this.request()},_locationFromURL:function(t){var e=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","a"):document.createElement("a");return e.setAttribute("href",t),e},_locationIsHTTP:function(t){return t.href.match(/^https?:/i)?!0:!1},_locationIsCrossDomain:function(t,e){if(e=e||window.location,Ajax.prototype._locationIsHTTP(t)&&"widget:"!==e.protocol&&"object"!=typeof window.widget){var n=t.href.split("//"),i=e.href.split("//");if(1===n.length||1===i.length)return!1;var o=n[0],r=i[0],s=/:|\//,a=n[1].split(s)[0],l=i[1].split(s)[0];return o!==r||a!==l}return!1},getTransport:function(){if(!xMLHttpRequestWithCredentials&&this.options.cors&&"XDomainRequest"in window)return this.usingXDomainReq=!0,new XDomainRequest;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"==typeof ActiveXObject)return null;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){return new ActiveXObject("Microsoft.XMLHTTP")}},setHeaders:function(){if(this.transport)try{var t={Accept:"text/javascript,text/xml,application/xml,application/xhtml+xml,text/html,application/json;q=0.9,text/plain;q=0.8,video/x-mng,image/png,image/jpeg,image/gif;q=0.2,*/*;q=0.1","Accept-Language":navigator.language,"X-Requested-With":"XMLHttpRequest","X-Ink-Version":"3"};if(this.options.cors&&(this.options.signRequest||delete t["X-Requested-With"],delete t["X-Ink-Version"]),this.options.requestHeaders&&"object"==typeof this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&(t[e]=this.options.requestHeaders[e]);this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005&&(t.Connection="close");for(var n in t)t.hasOwnProperty(n)&&this.transport.setRequestHeader(n,t[n])}catch(i){}},paramsObjToStr:function(t){var e,n,i,o,r=[];if("object"!=typeof t)return t;for(i in t)if(t.hasOwnProperty(i))if(o=t[i],"[object Array]"!==Object.prototype.toString.call(o)||isNaN(o.length))r=r.concat([encodeURIComponent(i),"=",encodeURIComponent(o),"&"]);else for(e=0,n=o.length;n>e;e++)r=r.concat([encodeURIComponent(i),"[]","=",encodeURIComponent(o[e]),"&"]);return r.length>0&&r.pop(),r.join("")},setParams:function(){var t=null,e=this.options.parameters;t="object"==typeof e?this.paramsObjToStr(e):""+e,t&&(this.url=this.url.indexOf("?")>-1?this.url.split("#")[0]+"&"+t:this.url.split("#")[0]+"?"+t)},getHeader:function(t){if(this.usingXDomainReq&&"Content-Type"===t)return this.transport.contentType;try{return this.transport.getResponseHeader(t)}catch(e){return null}},getAllHeaders:function(){try{return this.transport.getAllResponseHeaders()}catch(t){return null}},getResponse:function(){var t=this.transport,e={headerJSON:null,responseJSON:null,getHeader:this.getHeader,getAllHeaders:this.getAllHeaders,request:this,transport:t,timeTaken:new Date-this.startTime,requestedUrl:this.url};e.readyState=t.readyState;try{e.responseText=t.responseText}catch(n){}try{e.responseXML=t.responseXML
}catch(n){}try{e.status=t.status}catch(n){e.status=0}try{e.statusText=t.statusText}catch(n){e.statusText=""}return e},abort:function(){if(this.transport){clearTimeout(this.delayTimeout),clearTimeout(this.stoTimeout),this._aborted=!0;try{this.transport.abort()}catch(t){}this.finish()}},runStateChange:function(){if(!this._aborted){var t=this.transport.readyState;if(3===t)this.isHTTP&&this.safeCall("onHeaders");else if(4===t||this.usingXDomainReq){if(this.options.asynchronous&&this.options.delay&&this.startTime+this.options.delay>(new Date).getTime())return void(this.delayTimeout=setTimeout(Ink.bind(this.runStateChange,this),this.options.delay+this.startTime-(new Date).getTime()));var e,n=this.transport.responseText,i=this.getResponse(),o=this.transport.status;this.isHTTP&&!this.options.asynchronous&&this.safeCall("onHeaders"),clearTimeout(this.stoTimeout),0===o?this.isHTTP?this.safeCall("onException",new Error("Ink.Net.Ajax: network error! (HTTP status 0)")):o=n?200:404:304===o&&(o=200);var r=this.usingXDomainReq||o>=200&&300>o,s=this.getHeader("Content-Type")||"";if(this.options.evalJS&&(s.indexOf("application/json")>=0||"force"===this.options.evalJS))try{e=this.evalJSON(n,this.sanitizeJSON),e&&(n=i.responseJSON=e)}catch(a){r&&this.safeCall("onException",a)}if(this.usingXDomainReq&&-1!==s.indexOf("xml")&&"DOMParser"in window){var l;switch(s){case"application/xml":case"application/xhtml+xml":case"image/svg+xml":l=s;break;default:l="text/xml"}var h=(new DOMParser).parseFromString(this.transport.responseText,l);this.transport.responseXML=h,i.responseXML=h}null!=this.transport.responseXML&&null==i.responseJSON&&""!==this.transport.responseXML.xml&&(n=this.transport.responseXML),(o||this.usingXDomainReq)&&(r?this.safeCall("onSuccess",i,n):this.safeCall("onFailure",i,n),this.safeCall("on"+o,i,n)),this.finish(i,n)}}},finish:function(t,e){if(t&&this.safeCall("onComplete",t,e),clearTimeout(this.stoTimeout),this.transport){try{this.transport.onreadystatechange=null}catch(n){}"function"==typeof this.transport.destroy&&this.transport.destroy(),this.transport=null}},safeCall:function(t){var e=arguments[1]instanceof Error?arguments[1]:null;if("function"==typeof this.options[t])try{this.options[t].apply(this,[].slice.call(arguments,1))}catch(n){Ink.error("Ink.Net.Ajax: an error was raised while executing "+t+".",n)}else e&&Ink.error("Ink.Net.Ajax: "+e)},setRequestHeader:function(t,e){this.options.requestHeaders||(this.options.requestHeaders={}),this.options.requestHeaders[t]=e},request:function(){if(this.transport){var t=null;this.requestHasBody?(null!==this.options.postBody&&""!==this.options.postBody?(t=this.options.postBody,this.setParams()):null!==this.options.parameters&&""!==this.options.parameters&&(t=this.options.parameters),"object"!=typeof t||t.nodeType?"object"!=typeof t&&null!==t&&(t=""+t):t=this.paramsObjToStr(t),this.options.contentType&&this.setRequestHeader("Content-Type",this.options.contentType)):this.setParams();var e=this.url,n=this.options.method,i=this.isCrossDomain;i&&this.options.xhrProxy&&(this.setRequestHeader("X-Url",e),e=this.options.xhrProxy+encodeURIComponent(e),i=!1);try{this.transport.open(n,e,this.options.asynchronous)}catch(o){return this.safeCall("onException",o),this.finish(this.getResponse(),null)}this.setHeaders(),this.safeCall("onCreate"),this.options.timeout&&!isNaN(this.options.timeout)&&(this.stoTimeout=setTimeout(Ink.bind(function(){this.options.onTimeout&&(this.safeCall("onTimeout"),this.abort())},this),1e3*this.options.timeout)),this.options.useCredentials&&!this.usingXDomainReq&&(this.transport.withCredentials=!0),this.options.asynchronous&&!this.usingXDomainReq?this.transport.onreadystatechange=Ink.bind(this.runStateChange,this):this.usingXDomainReq&&(this.transport.onload=Ink.bind(this.runStateChange,this));try{if(i)return void Ink.error("Ink.Net.Ajax: You are attempting to request a URL which is cross-domain from this one. To do this, you *must* enable the `cors` option!");this.startTime=(new Date).getTime(),this.transport.send(t)}catch(o){return this.safeCall("onException",o),this.finish(this.getResponse(),null)}this.options.asynchronous||this.runStateChange()}},isJSON:function(t){return"string"==typeof t&&t?(t=t.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(t)):!1},evalJSON:function(strJSON,sanitize){if(strJSON&&(!sanitize||this.isJSON(strJSON)))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("Ink.Net.Ajax: Bad JSON string. "+e)}return null}},Ajax.load=function(t,e){var n=Ajax.prototype._locationIsCrossDomain(window.location,Ajax.prototype._locationFromURL(t));return new Ajax(t,{method:"GET",cors:n,onSuccess:function(t){e(t.responseJSON||t.responseText,t)}})},Ajax.ping=function(t,e){var n=Ajax.prototype._locationIsCrossDomain(window.location,Ajax.prototype._locationFromURL(t));return new Ajax(t,{method:"HEAD",cors:n,onSuccess:function(t){"function"==typeof e&&e(t)}})},Ajax}),Ink.createModule("Ink.Net.JsonP","1",[],function(){"use strict";var t=function(t,e){this.init(t,e)};return t.prototype={init:function(t,e){if(this.options=Ink.extendObj({onSuccess:void 0,onFailure:void 0,failureObj:{},timeout:10,params:{},callbackParam:"jsoncallback",internalCallback:"_cb",randVar:!1},e||{}),this.randVar=this.options.randVar!==!1?this.options.randVar:parseInt(1e5*Math.random(),10),this.options.internalCallback+=this.randVar,this.uri=t,"function"==typeof this.options.onComplete&&(this.options.onSuccess=this.options.onComplete),"string"!=typeof this.uri)throw new Error("Ink.Net.JsonP: Please define an URI");if("function"!=typeof this.options.onSuccess)throw new Error("Ink.Net.JsonP: please define a callback function on option onSuccess!");Ink.Net.JsonP[this.options.internalCallback]=Ink.bind(function(){this.options.onSuccess(arguments[0]),this._cleanUp()},this),this.timeout=setTimeout(Ink.bind(function(){this.abort(),"function"==typeof this.options.onFailure&&this.options.onFailure(this.options.failureObj)},this),1e3*this.options.timeout),this._addScriptTag()},abort:function(){Ink.Net.JsonP[this.options.internalCallback]=Ink.bindMethod(this,"_cleanUp")},_addParamsToGet:function(t,e){var n,i,o,r=-1!==t.indexOf("?"),s=[t];for(i in e)e.hasOwnProperty(i)&&(r?n="&":(n="?",r=!0),o=e[i],"number"==typeof o||o||(o=""),s=s.concat([n,i,"=",encodeURIComponent(o)]));return s.join("")},_getScriptContainer:function(){return document.body||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement},_addScriptTag:function(){this.options.params[this.options.callbackParam]="Ink.Net.JsonP."+this.options.internalCallback,this.options.params.rnd_seed=this.randVar,this.uri=this._addParamsToGet(this.uri,this.options.params),this._scriptEl=document.createElement("script"),this._scriptEl.type="text/javascript",this._scriptEl.src=this.uri;var t=this._getScriptContainer();t.appendChild(this._scriptEl)},_cleanUp:function(){this.timeout&&window.clearTimeout(this.timeout),delete this.options.onSuccess,delete this.options.onFailure,delete Ink.Net.JsonP[this.options.internalCallback],this._removeScriptTag()},_removeScriptTag:function(){this._scriptEl&&(this._scriptEl.parentNode.removeChild(this._scriptEl),delete this._scriptEl)}},t}),Ink.createModule("Ink.Dom.Browser","1",[],function(){"use strict";var t={IE:!1,GECKO:!1,OPERA:!1,SAFARI:!1,KONQUEROR:!1,CHROME:!1,model:!1,version:!1,userAgent:!1,cssPrefix:!1,domPrefix:!1,init:function(){this.detectBrowser(),this.setDimensions(),this.setReferrer()},setDimensions:function(){var t=0,e=0;"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(t=document.body.clientWidth,e=document.body.clientHeight),this.windowWidth=t,this.windowHeight=e},setReferrer:function(){this.referrer=document.referrer&&document.referrer.length?window.escape(document.referrer):!1},detectBrowser:function(){this._sniffUserAgent(navigator.userAgent)},_sniffUserAgent:function(t){if(this.userAgent=t,t=t.toLowerCase(),/applewebkit\//.test(t))if(this.cssPrefix="-webkit-",this.domPrefix="Webkit",/(chrome|crios)\//.test(t))this.CHROME=!0,this.model="chrome",this.version=t.replace(/(.*)chrome\/([^\s]+)(.*)/,"$2");else{this.SAFARI=!0,this.model="safari";var e=/version\/([^) ]+)/;this.version=e.test(t)?t.match(e)[1]:t.replace(/(.*)applewebkit\/([^\s]+)(.*)/,"$2")}else if(/opera/.test(t))this.OPERA=!0,this.model="opera",this.version=t.replace(/(.*)opera.([^\s$]+)(.*)/,"$2"),this.cssPrefix="-o-",this.domPrefix="O";else if(/konqueror/.test(t))this.KONQUEROR=!0,this.model="konqueror",this.version=t.replace(/(.*)konqueror\/([^;]+);(.*)/,"$2"),this.cssPrefix="-khtml-",this.domPrefix="Khtml";else if(/(msie|trident)/i.test(t))this.IE=!0,this.model="ie",this.version=/rv:((?:\d|\.)+)/.test(t)?t.match(/rv:((?:\d|\.)+)/)[1]:t.replace(/(.*)\smsie\s([^;]+);(.*)/,"$2"),this.cssPrefix="-ms-",this.domPrefix="ms";else if(/gecko/.test(t)){this.cssPrefix="-moz-",this.domPrefix="Moz",this.GECKO=!0;var n=/(camino|chimera|epiphany|minefield|firefox|firebird|phoenix|galeon|iceweasel|k\-meleon|seamonkey|netscape|songbird|sylera)/;if(n.test(t))this.model=t.match(n)[1],this.version=t.replace(new RegExp("(.*)"+this.model+"/([^;\\s$]+)(.*)"),"$2");else{this.model="mozilla";var i=/(.*)rv:([^)]+)(.*)/;i.test(t)&&(this.version=t.replace(i,"$2"))}}},debug:function(){var t="known browsers: (ie, gecko, opera, safari, konqueror) \n";t+=[this.IE,this.GECKO,this.OPERA,this.SAFARI,this.KONQUEROR]+"\n",t+="cssPrefix -> "+this.cssPrefix+"\n",t+="domPrefix -> "+this.domPrefix+"\n",t+="model -> "+this.model+"\n",t+="version -> "+this.version+"\n",t+="\n",t+="original UA -> "+this.userAgent,alert(t)}};return t.init(),t}),Ink.createModule("Ink.Dom.Css",1,[],function(){"use strict";var t="defaultView"in document&&"getComputedStyle"in document.defaultView?document.defaultView.getComputedStyle:window.getComputedStyle,e={addRemoveClassName:function(t,e,n){return n?this.addClassName(t,e):void this.removeClassName(t,e)},addClassName:function(t,n){if(t=Ink.i(t),!t||!n)return null;n=(""+n).split(/[, ]+/);for(var i=0,o=n.length;o>i;i++)n[i].replace(/^\s+|\s+$/g,"")&&("undefined"!=typeof t.classList?t.classList.add(n[i]):e.hasClassName(t,n[i])||(t.className+=(t.className?" ":"")+n[i]))},removeClassName:function(t,e){if(t=Ink.i(t),!t||!e)return null;e=(""+e).split(/[, ]+/);var n=0,i=e.length;if("undefined"!=typeof t.classList)for(;i>n;n++)t.classList.remove(e[n]);else{for(var o,r=t.className||"";i>n;n++)o=new RegExp("(^|\\s+)"+e[n]+"(\\s+|$)"),r=r.replace(o," ");t.className=r.replace(/^\s+/,"").replace(/\s+$/,"")}},setClassName:function(t,e,n){this.addRemoveClassName(t,e,n||!1)},hasClassName:function(t,e,n){if(t=Ink.i(t),!t||!e)return!1;e=(""+e).split(/[, ]+/);for(var i,o,r=0,s=e.length;s>r;r++){if("undefined"!=typeof t.classList)i=t.classList.contains(e[r]);else{var a=t.className;a===e[r]?i=!0:(o=new RegExp("(^|\\s)"+e[r]+"(\\s|$)"),i=o.test(a))}if(i&&!n)return!0;if(!i&&n)return!1}return n?!0:!1},blinkClass:function(t,n,i,o){t=Ink.i(t),e.addRemoveClassName(t,n,!o),setTimeout(function(){e.addRemoveClassName(t,n,o)},Number(i)||100)},toggleClassName:function(t,n,i){return t&&n?"undefined"!=typeof i?e.addRemoveClassName(t,n,i):void("undefined"==typeof t.classList||/[, ]/.test(n)?e.hasClassName(t,n)?e.removeClassName(t,n):e.addClassName(t,n):(t=Ink.i(t),null!==t&&t.classList.toggle(n))):!1},setOpacity:function(t,e){if(t=Ink.i(t),null!==t){var n=1;isNaN(Number(e))||(n=0>=e?0:1>=e?e:100>=e?e/100:1),"undefined"!=typeof t.style.opacity?t.style.opacity=n:t.style.filter="alpha(opacity:"+(100*n|0)+")"}},_camelCase:function(t){return t?t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}):t},getStyle:function(e,n){if(e=Ink.i(e),null!==e&&e.style){n="float"===n?"cssFloat":this._camelCase(n);var i=e.style[n];if(!t||i&&"auto"!==i)!i&&e.currentStyle&&(i=e.currentStyle[n],"auto"!==i||"width"!==n&&"height"!==n||(i=e["offset"+n.charAt(0).toUpperCase()+n.slice(1)]+"px"));else{var o=t(e,null);i=o?o[n]:null}if("opacity"===n)return i?parseFloat(i,10):1;if("borderTopWidth"===n||"borderBottomWidth"===n||"borderRightWidth"===n||"borderLeftWidth"===n){if("thin"===i)return"1px";if("medium"===i)return"3px";if("thick"===i)return"5px"}return"auto"===i?null:i}},setStyle:function(t,e){if(t=Ink.i(t),null!==t)if("string"==typeof e)t.style.cssText+="; "+e,-1!==e.indexOf("opacity")&&this.setOpacity(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]);else for(var n in e)e.hasOwnProperty(n)&&("opacity"===n?this.setOpacity(t,e[n]):"float"===n||"cssFloat"===n?"undefined"==typeof t.style.styleFloat?t.style.cssFloat=e[n]:t.style.styleFloat=e[n]:t.style[n]=e[n])},show:function(t,e){t=Ink.i(t),null!==t&&(t.style.display=e||"")},hide:function(t){t=Ink.i(t),null!==t&&(t.style.display="none")},showHide:function(t,e){t=Ink.i(t),t&&(t.style.display=e?"":"none")},toggle:function(t,e){t=Ink.i(t),null!==t&&("undefined"!=typeof e?e===!0?this.show(t):this.hide(t):"none"===this.getStyle(t,"display").toLowerCase()?this.show(t):this.hide(t))},_getRefTag:function(t){if(t.firstElementChild)return t.firstElementChild;for(var e=t.firstChild;e;e=e.nextSibling)if(1===e.nodeType)return e;return null},appendStyleTag:function(t,e,n){n=Ink.extendObj({type:"text/css",force:!1},n||{});var i,o,r=document.getElementsByTagName("style"),s=!1,a=!0;for(i=0,o=r.length;o>i;i++)s=r[i].innerHTML,s.indexOf(t)>=0&&(a=!1);if(a){var l=document.createElement("style"),h=document.getElementsByTagName("head")[0],u=!1,c="";l.type=n.type,c+=t+" {",c+=e,c+="} ","undefined"!=typeof l.styleSheet?l.styleSheet.cssText=c:l.appendChild(document.createTextNode(c)),n.force?h.appendChild(l):(u=this._getRefTag(h),u&&h.insertBefore(l,u))}},appendStylesheet:function(t,e){e=Ink.extendObj({media:"screen",type:"text/css",force:!1},e||{});var n,i=document.createElement("link"),o=document.getElementsByTagName("head")[0];i.media=e.media,i.type=e.type,i.href=t,i.rel="Stylesheet",e.force?o.appendChild(i):(n=this._getRefTag(o),n&&o.insertBefore(i,n))},_loadingCSSFiles:{},_loadedCSSFiles:{},appendStylesheetCb:function(t,e){if(!t)return e(t);if(this._loadedCSSFiles[t])return e(t);var n=this._loadingCSSFiles[t];if(n)return n.push(e);this._loadingCSSFiles[t]=[e];var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t;var o=document.getElementsByTagName("head")[0];o.appendChild(i);var r=document.createElement("img");r.onerror=Ink.bindEvent(function(t,e){var n=e;this._loadedCSSFiles[n]=!0;for(var i=this._loadingCSSFiles[n],o=0,r=i.length;r>o;++o)i[o](n);delete this._loadingCSSFiles[n]},this,t),r.src=t},decToHex:function(t){var e=function(t){return 1===t.length&&(t="0"+t),t=t.toUpperCase()};if("object"==typeof t){var n=e(parseInt(t.r,10).toString(16)),i=e(parseInt(t.g,10).toString(16)),o=e(parseInt(t.b,10).toString(16));return n+i+o}t+="";var r=t.match(/\((\d+),\s?(\d+),\s?(\d+)\)/);return null!==r?e(parseInt(r[1],10).toString(16))+e(parseInt(r[2],10).toString(16))+e(parseInt(r[3],10).toString(16)):e(parseInt(t,10).toString(16))},hexToDec:function(t){return 0===t.indexOf("#")&&(t=t.substr(1)),6===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16)}:3===t.length?{r:parseInt(t.charAt(0)+t.charAt(0),16),g:parseInt(t.charAt(1)+t.charAt(1),16),b:parseInt(t.charAt(2)+t.charAt(2),16)}:t.length<=2?parseInt(t,16):void 0},getPropertyFromStylesheet:function(t,e){var n=this.getRuleFromStylesheet(t);return n?n.style[e]:null},getPropertyFromStylesheet2:function(t,e){for(var n,i=this.getRulesFromStylesheet(t),o=0,r=i.length;r>o;o++)if(n=i[o].style[e],null!==n&&void 0!==n)return n;return null},getRuleFromStylesheet:function(t){var e,n,i,o,r,s=document.styleSheets;if(!s)return null;for(var a=0,l=document.styleSheets.length;l>a;++a){if(e=document.styleSheets[a],n=e.rules?e.rules:e.cssRules,!n)return null;for(i=0,o=n.length;o>i;++i)if(r=n[i],r.selectorText&&r.selectorText===t)return r}return null},getRulesFromStylesheet:function(t){var e,n,i,o,r,s=[],a=document.styleSheets;if(!a)return s;for(var l=0,h=document.styleSheets.length;h>l;++l){if(e=document.styleSheets[l],n=e.rules?e.rules:e.cssRules,!n)return null;for(i=0,o=n.length;o>i;++i)r=n[i],r.selectorText&&r.selectorText===t&&s.push(r)}return s},getPropertiesFromRule:function(t){var e,n,i,o=this.getRuleFromStylesheet(t),r={};o=o.style.cssText;var s,a,l,h,u=o.split(";");for(n=0,i=u.length;i>n;++n)" "===u[n].charAt(0)&&(u[n]=u[n].substring(1)),s=u[n].split(":"),e=this._camelCase(s[0].toLowerCase()),a=s[1],a&&(a=a.substring(1),"padding"===e||"margin"===e||"borderWidth"===e?("borderWidth"===e?(l="border",h="Width"):(l=e,h=""),-1!==a.indexOf(" ")?(a=a.split(" "),r[l+"Top"+h]=a[0],r[l+"Bottom"+h]=a[0],r[l+"Left"+h]=a[1],r[l+"Right"+h]=a[1]):(r[l+"Top"+h]=a,r[l+"Bottom"+h]=a,r[l+"Left"+h]=a,r[l+"Right"+h]=a)):"borderRadius"===e?-1!==a.indexOf(" ")?(a=a.split(" "),r.borderTopLeftRadius=a[0],r.borderBottomRightRadius=a[0],r.borderTopRightRadius=a[1],r.borderBottomLeftRadius=a[1]):(r.borderTopLeftRadius=a,r.borderTopRightRadius=a,r.borderBottomLeftRadius=a,r.borderBottomRightRadius=a):r[e]=a);return r},changeFontSize:function(t,e,n,i,o){var r=this;Ink.requireModules(["Ink.Dom.Selector_1"],function(s){var a;if("string"!=typeof t?a="1st argument must be a CSS selector rule.":"number"!=typeof e?a="2nd argument must be a number.":void 0!==n&&"+"!==n&&"*"!==n?a='3rd argument must be one of "+", "*".':void 0!==i&&("number"!=typeof i||0>=i)?a="4th argument must be a positive number.":void 0!==o&&("number"!=typeof o||o>o)&&(a="5th argument must be a positive number greater than minValue."),a)throw new TypeError(a);var l,h,u=s.select(t);void 0===i&&(i=1),n="*"===n?function(t,e){return t*e}:function(t,e){return t+e};for(var c=0,d=u.length;d>c;++c)h=u[c],l=parseFloat(r.getStyle(h,"fontSize")),l=n(l,e),i>l||"number"==typeof o&&l>o||(h.style.fontSize=l+"px")})}};return e}),Ink.createModule("Ink.Dom.Element",1,[],function(){"use strict";function t(t){var e={};try{e=t.getBoundingClientRect()}catch(n){e={top:t.offsetTop,left:t.offsetLeft}}return e}var e="function"==typeof document.createRange&&"function"==typeof window.Range.prototype.createContextualFragment,n="Ink.Dom.Element tbody: "+Math.random(),i=function(){var t=document.createElement("div");return t.innerHTML="<table>",0!==t.getElementsByTagName("tbody").length}(),o={isDOMElement:function(t){return null!==t&&"object"==typeof t&&"nodeType"in t&&1===t.nodeType},get:function(t){return"undefined"!=typeof t?"string"==typeof t?document.getElementById(t):t:null},create:function(t,e){var n=document.createElement(t);if(e)for(var i in e)e.hasOwnProperty(i)&&(i in o?o[i](n,e[i]):"className"===i||"class"===i?n.className=e.className||e["class"]:n.setAttribute(i,e[i]));return n},remove:function(t){t=Ink.i(t);var e;t&&(e=t.parentNode)&&e.removeChild(t)},scrollTo:function(t){if(t=o.get(t)){if(t.scrollIntoView)return t.scrollIntoView();var e={},n=0,i=0;do n+=t.offsetTop||0,i+=t.offsetLeft||0,t=t.offsetParent;while(t);e={x:i,y:n},window.scrollTo(e.x,e.y)}},offsetTop:function(t){return o.offset(t)[1]},offsetLeft:function(t){return o.offset(t)[0]},positionedOffset:function(t){var e=0,n=0;t=o.get(t);do if(e+=t.offsetTop||0,n+=t.offsetLeft||0,t=t.offsetParent){if("body"===t.tagName.toLowerCase())break;var i=t.style.position;if(!i&&t.currentStyle&&(i=t.currentStyle.position),(!i||"auto"===i)&&"undefined"!=typeof getComputedStyle){var r=getComputedStyle(t,null);i=r?r.position:null}if("relative"===i||"absolute"===i)break}while(t);return[n,e]},offset:function(e){e=Ink.i(e);var n=[0,0],i=e.ownerDocument,o=i.documentElement,r=t(e),s=i.body,a=o.clientTop||s.clientTop||0,l=o.clientLeft||s.clientLeft||0,h=i.pageYOffset||o.scrollTop||s.scrollTop,u=i.pageXOffset||o.scrollLeft||s.scrollLeft,c=r.top+h-a,d=r.left+u-l;return n=[d,c]},scroll:function(t){return t=t?Ink.i(t):document.body,[window.pageXOffset?window.pageXOffset:t.scrollLeft,window.pageYOffset?window.pageYOffset:t.scrollTop]},_getPropPx:function(t,e){var n,i,o=t.getPropertyValue?t.getPropertyValue(e):t[e];return o?(i=o.indexOf("px"),n=-1===i?0:parseFloat(o,10)):n=0,n},offset2:function(t){return o.offset(t)},hasAttribute:function(t,e){return t=Ink.i(t),t.hasAttribute?t.hasAttribute(e):!!t.getAttribute(e)},insertAfter:function(t,e){(e=o.get(e))&&(null!==e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t))},insertBefore:function(t,e){(e=o.get(e))&&e.parentNode.insertBefore(t,e)},insertTop:function(t,e){(e=o.get(e))&&(e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t))},insertBottom:function(t,e){e=Ink.i(e),e.appendChild(t)},textContent:function(t){t=Ink.i(t);var e,n,i,r;switch(t&&t.nodeType){case 9:return o.textContent(t.documentElement||t.body&&t.body.parentNode||t.body);case 1:if(e="textContent"in t?t.textContent:t.innerText,"undefined"!=typeof e)return e;case 11:if(e=t.textContent,"undefined"!=typeof e)return e;if(t.firstChild===t.lastChild)return o.textContent(t.firstChild);for(e=[],i=t.childNodes,n=0,r=i.length;r>n;++n)e.push(o.textContent(i[n]));return e.join("");case 3:case 4:return t.nodeValue}return""},setTextContent:function(t,e){switch(t=Ink.i(t),t&&t.nodeType){case 1:if("innerText"in t){t.innerText=e;break}case 11:if("textContent"in t){t.textContent=e;break}case 9:for(;t.firstChild;)t.removeChild(t.firstChild);if(""!==e){var n=t.ownerDocument||t;t.appendChild(n.createTextNode(e))}break;case 3:case 4:t.nodeValue=e}},isLink:function(t){var e=t&&1===t.nodeType&&(/^a|area$/i.test(t.tagName)||t.hasAttributeNS&&t.hasAttributeNS("http://www.w3.org/1999/xlink","href"));return!!e},isAncestorOf:function(t,e){if(!e||!t)return!1;if(e.compareDocumentPosition)return 0!==(16&t.compareDocumentPosition(e));for(;e=e.parentNode;)if(e===t)return!0;return!1},descendantOf:function(t,e){return t!==e&&o.isAncestorOf(t,e)},firstElementChild:function(t){if(!t)return null;if("firstElementChild"in t)return t.firstElementChild;for(var e=t.firstChild;e&&1!==e.nodeType;)e=e.nextSibling;return e},lastElementChild:function(t){if(!t)return null;if("lastElementChild"in t)return t.lastElementChild;for(var e=t.lastChild;e&&1!==e.nodeType;)e=e.previousSibling;return e},nextElementSibling:function(t){var e=null;if(!t)return e;if("nextElementSibling"in t)return t.nextElementSibling;for(e=t.nextSibling;e&&1!==e.nodeType;)e=e.nextSibling;return e},previousElementSibling:function(t){var e=null;if(!t)return e;if("previousElementSibling"in t)return t.previousElementSibling;for(e=t.previousSibling;e&&1!==e.nodeType;)e=e.previousSibling;return e},elementWidth:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.offsetWidth},elementHeight:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.offsetHeight},elementLeft:function(t){return o.offsetLeft(t)},elementTop:function(t){return o.offsetTop(t)},elementDimensions:function(t){return t=Ink.i(t),[t.offsetWidth,t.offsetHeight]},outerDimensions:function(e){var n=t(e),i=Ink.getModule("Ink.Dom.Css_1"),o=Ink.bindMethod(i,"getStyle",e);return[n.right-n.left+parseFloat(o("marginLeft")||0)+parseFloat(o("marginRight")||0),n.bottom-n.top+parseFloat(o("marginTop")||0)+parseFloat(o("marginBottom")||0)]},inViewport:function(e,n){var i=t(Ink.i(e));return"boolean"==typeof n&&(n={partial:n,margin:0}),n=Ink.extendObj({partial:!1,margin:0},n||{}),n.partial?i.bottom+n.margin>0&&i.left-n.margin<o.viewportWidth()&&i.top-n.margin<o.viewportHeight()&&i.right+n.margin>0:i.top+n.margin>0&&i.right-n.margin<o.viewportWidth()&&i.bottom-n.margin<o.viewportHeight()&&i.left+n.margin>0},isHidden:function(t){var e=t.offsetWidth,n=t.offsetHeight,i="tr"===t.tagName.toLowerCase(),o=Ink.getModule("Ink.Dom.Css_1");return 0!==e||0!==n||i?0===e||0===n||i?"none"===o.getStyle(t,"display").toLowerCase():!1:!0},isVisible:function(t){return!this.isHidden(t)},clonePosition:function(t,e){var n=o.offset(e);return t.style.left=n[0]+"px",t.style.top=n[1]+"px",t},ellipsizeText:function(t){(t=Ink.i(t))&&(t.style.overflow="hidden",t.style.whiteSpace="nowrap",t.style.textOverflow="ellipsis")},findUpwardsHaving:function(t,e){for(;t&&1===t.nodeType;){if(e(t))return t;t=t.parentNode}return!1},findUpwardsByClass:function(t,e){var n=new RegExp("(^|\\s)"+e+"(\\s|$)"),i=function(t){var e=t.className;return e&&n.test(e)};return o.findUpwardsHaving(t,i)},findUpwardsByTag:function(t,e){e=e.toUpperCase();var n=function(t){return t.nodeName&&t.nodeName.toUpperCase()===e};return o.findUpwardsHaving(t,n)},findUpwardsById:function(t,e){var n=function(t){return t.id===e};return o.findUpwardsHaving(t,n)},findUpwardsBySelector:function(t,e){var n=Ink.getModule("Ink.Dom.Selector","1");if(!n)throw new Error("This method requires Ink.Dom.Selector");var i=function(t){return n.matchesSelector(t,e)};return o.findUpwardsHaving(t,i)},getChildrenText:function(t,e){var n,i,r,s=t.childNodes,a=s.length,l="";if(!t)return l;for(i=0;a>i;++i)n=s[i],n&&3===n.nodeType&&(r=o._trimString(String(n.data)),r.length>0?(l+=r,e&&t.removeChild(n)):t.removeChild(n));return l},_trimString:function(t){return String.prototype.trim?t.trim():t.replace(/^\s*/,"").replace(/\s*$/,"")},getSelectValues:function(t){for(var e=Ink.i(t),n=[],i=0;i<e.options.length;++i)n.push(e.options[i].value);return n},_normalizeData:function(t){for(var e,n=[],i=0,o=t.length;o>i;++i)e=t[i],e instanceof Array?1===e.length&&e.push(e[0]):e=[e,e],n.push(e);return n},fillSelect:function(t,e,n,i){var r=Ink.i(t);if(r){r.innerHTML="";var s,a;n||(a=document.createElement("option"),a.setAttribute("value",""),r.appendChild(a)),e=o._normalizeData(e);for(var l=0,h=e.length;h>l;++l)s=e[l],a=document.createElement("option"),a.setAttribute("value",s[0]),s.length>2&&a.setAttribute("extra",s[2]),a.appendChild(document.createTextNode(s[1])),s[0]===i&&a.setAttribute("selected","selected"),r.appendChild(a)}},fillRadios:function(t,e,n,i,r,s){t=Ink.i(t);var a=document.createElement("span");o.insertAfter(a,t),n=o._normalizeData(n);var l,h;i||(h=document.createElement("input"),h.setAttribute("type","radio"),h.setAttribute("name",e),h.setAttribute("value",""),a.appendChild(h),s&&a.appendChild(document.createElement(s)));for(var u=0;u<n.length;++u)l=n[u],h=document.createElement("input"),h.setAttribute("type","radio"),h.setAttribute("name",e),h.setAttribute("value",l[0]),a.appendChild(h),a.appendChild(document.createTextNode(l[1])),s&&a.appendChild(document.createElement(s)),l[0]===r&&(h.checked=!0);return a},fillChecks:function(t,e,n,i,r){t=Ink.i(t);var s=document.createElement("span");o.insertAfter(s,t),n=o._normalizeData(n),"]"!==e.substring(e.length-1)&&(e+="[]");for(var a,l,h=0;h<n.length;++h)a=n[h],l=document.createElement("input"),l.setAttribute("type","checkbox"),l.setAttribute("name",e),l.setAttribute("value",a[0]),s.appendChild(l),s.appendChild(document.createTextNode(a[1])),r&&s.appendChild(document.createElement(r)),a[0]===i&&(l.checked=!0);return s},parentIndexOf:function(t,e){if(e||(e=t,t=t.parentNode),!t)return!1;for(var n=0,i=t.children.length;i>n;++n)if(t.children[n]===e)return n;return!1},nextSiblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=o.parentIndexOf(t.parentNode,t),r=++i,s=n.length;s>r;r++)e.push(n[r]);return e}return[]},previousSiblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=o.parentIndexOf(t.parentNode,t),r=0,s=i;s>r;r++)e.push(n[r]);return e}return[]},siblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=0,o=n.length;o>i;i++)t!==n[i]&&e.push(n[i]);return e}return[]},childElementCount:function(t){return t=Ink.i(t),"childElementCount"in t?t.childElementCount:t?o.siblings(t).length+1:0},_wrapElements:{TABLE:function(t,e){return t.innerHTML=i?"<table>"+e+"<tbody><tr><td>"+n+"</tr></td></tbody></table>":"<table>"+e+"</table>",t.firstChild},TBODY:function(t,e){return t.innerHTML="<table><tbody>"+e+"</tbody></table>",t.firstChild.getElementsByTagName("tbody")[0]},THEAD:function(t,e){return t.innerHTML="<table><thead>"+e+"</thead><tbody></tbody></table>",t.firstChild.getElementsByTagName("thead")[0]},TFOOT:function(t,e){return t.innerHTML="<table><tfoot>"+e+"</tfoot><tbody></tbody></table>",t.firstChild.getElementsByTagName("tfoot")[0]},TR:function(t,e){return t.innerHTML="<table><tbody><tr>"+e+"</tr></tbody></table>",t.firstChild.firstChild.firstChild}},_getWrapper:function(t,e){var r=t.nodeName&&t.nodeName.toUpperCase(),s=document.createElement("div"),a=o._wrapElements[r];if(!a)return s.innerHTML=e,s;if(s=a(s,e),i&&"TABLE"===r)for(var l=s.getElementsByTagName("td"),h=0,u=l.length;u>h;h++)if(l[h].innerHTML===n){var c=l[h].parentNode.parentNode;c.parentNode.removeChild(c)}return s},appendHTML:function(t,e){if(t=Ink.i(t),null!==t)for(var n=o._getWrapper(t,e);n.firstChild;)t.appendChild(n.firstChild)},prependHTML:function(t,e){if(t=Ink.i(t),null!==t)for(var n=o._getWrapper(t,e);n.lastChild;)t.insertBefore(n.lastChild,t.firstChild)},setHTML:function(t,e){if(t=Ink.i(t),null!==t)try{t.innerHTML=e}catch(n){o.clear(t),o.appendHTML(t,e)}},wrap:function(t,e){t=Ink.i(t),e=Ink.i(e);var n=t.nextSibling,i=t.parentNode;return e.appendChild(t),null!==n?i.insertBefore(e,n):i.appendChild(e),e},unwrap:function(t,e){t=Ink.i(t);var n;n="string"==typeof e?o.findUpwardsBySelector(t,e):"object"==typeof e&&e.tagName?o.findUpwardsHaving(t,function(t){return t===e}):t.parentNode,n&&n.parentNode&&o.insertBefore(t,n)},replace:function(t,e){t=Ink.i(t),null!==t&&t.parentNode.replaceChild(e,t)},removeTextNodeChildren:function(t){if(t=Ink.i(t),null!==t){var e,n,i=t;for(t=t.firstChild;t;)n=3===t.nodeType,e=t,t=t.nextSibling,n&&i.removeChild(e)}},htmlToFragment:e?function(t){var e;return"string"!=typeof t?document.createDocumentFragment():(e=document.createRange(),e.selectNode(document.body),e.createContextualFragment(t))}:function(t){var e,n,i=document.createDocumentFragment();if("string"!=typeof t)return i;for(e=document.createElement("div"),e.innerHTML=t;n=e.firstChild;)i.appendChild(n);return i},_camelCase:function(t){return t?t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}):t},data:function(t){var e;if("object"!=typeof t&&"string"!=typeof t)throw"[Ink.Dom.Element.data] :: Invalid selector defined";if("object"==typeof t)e=t;else{var n=Ink.getModule("Ink.Dom.Selector",1);if(!n)throw"[Ink.Dom.Element.data] :: this method requires Ink.Dom.Selector - v1";if(e=n.select(t),e.length<=0)throw"[Ink.Dom.Element.data] :: Can't find any element with the specified selector";e=e[0]}var i,r,s,a={},l=e.attributes||[];if(l)for(var h=0,u=l.length;u>h;++h)i=l[h],r=i.name,s=i.value,r&&0===r.indexOf("data-")&&(a[o._camelCase(r.replace("data-",""))]=s);return a},clear:function(t,e){for(;e=t.lastChild;)t.removeChild(e)},moveCursorTo:function(t,e){if(t=Ink.i(t),null!==t)if(t.setSelectionRange)t.setSelectionRange(e,e);else{var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}},pageWidth:function(){var t;t=window.innerWidth&&window.scrollMaxX?window.innerWidth+window.scrollMaxX:document.body.scrollWidth>document.body.offsetWidth?document.body.scrollWidth:document.body.offsetWidth;var e;return window.self.innerWidth?e=document.documentElement.clientWidth?document.documentElement.clientWidth:window.self.innerWidth:document.documentElement&&document.documentElement.clientWidth?e=document.documentElement.clientWidth:document.body&&(e=document.body.clientWidth),e>t?t:e},pageHeight:function(){var t;t=window.innerHeight&&window.scrollMaxY?window.innerHeight+window.scrollMaxY:document.body.scrollHeight>document.body.offsetHeight?document.body.scrollHeight:document.body.offsetHeight;var e;return window.self.innerHeight?e=window.self.innerHeight:document.documentElement&&document.documentElement.clientHeight?e=document.documentElement.clientHeight:document.body&&(e=document.body.clientHeight),e>t?e:t},viewportWidth:function(){return"undefined"!=typeof window.innerWidth?window.innerWidth:document.documentElement&&"undefined"!=typeof document.documentElement.offsetWidth?document.documentElement.offsetWidth:void 0},viewportHeight:function(){return"undefined"!=typeof window.innerHeight?window.innerHeight:document.documentElement&&"undefined"!=typeof document.documentElement.offsetHeight?document.documentElement.offsetHeight:void 0},scrollWidth:function(){return"undefined"!=typeof window.self.pageXOffset?window.self.pageXOffset:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft
},scrollHeight:function(){return"undefined"!=typeof window.self.pageYOffset?window.self.pageYOffset:"undefined"!=typeof document.body&&"undefined"!=typeof document.body.scrollTop&&"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollTop?document.body.scrollTop||document.documentElement.scrollTop:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}};return o}),Ink.createModule("Ink.Dom.Event",1,[],function(){/*!
      * Bean - copyright (c) Jacob Thornton 2011-2012
      * https://github.com/fat/bean
      * MIT license
      */
var t=function(t,e,n){return n()}("bean",this,function(t,e){t=t||"bean",e=e||this;var n,i=window,o=e[t],r=/[^\.]*(?=\..*)\.|.*/,s=/\..*/,a="addEventListener",l="removeEventListener",h=document||{},u=h.documentElement||{},c=u[a],d=c?a:"attachEvent",p={},f=Array.prototype.slice,m=function(t,e){return t.split(e||" ")},_=function(t){return"string"==typeof t},g=function(t){return"function"==typeof t},v="click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll ",y="show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinputreadystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ",b=function(t,e,n){for(n=0;n<e.length;n++)e[n]&&(t[e[n]]=1);return t}({},m(v+(c?y:""))),k=function(){var t="compareDocumentPosition"in u?function(t,e){return e.compareDocumentPosition&&16===(16&e.compareDocumentPosition(t))}:"contains"in u?function(t,e){return e=9===e.nodeType||e===window?u:e,e!==t&&e.contains(t)}:function(t,e){for(;t=t.parentNode;)if(t===e)return 1;return 0},e=function(e){var n=e.relatedTarget;return n?n!==this&&"xul"!==n.prefix&&!/document/.test(this.toString())&&!t(n,this):null==n};return{mouseenter:{base:"mouseover",condition:e},mouseleave:{base:"mouseout",condition:e},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),C=function(){var t=m("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName path"),e=t.concat(m("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement movementX movementY region")),n=e.concat(m("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),o=t.concat(m("char charCode key keyCode keyIdentifier keyLocation location isComposing code")),r=t.concat(m("data")),s=t.concat(m("touches targetTouches changedTouches scale rotation")),a=t.concat(m("data origin source")),l=t.concat(m("state")),c=/over|out/,d=[{reg:/key/i,fix:function(t,e){return e.keyCode=t.keyCode||t.which,o}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(t,n,i){return n.rightClick=3===t.which||2===t.button,n.pos={x:0,y:0},t.pageX||t.pageY?(n.clientX=t.pageX,n.clientY=t.pageY):(t.clientX||t.clientY)&&(n.clientX=t.clientX+h.body.scrollLeft+u.scrollLeft,n.clientY=t.clientY+h.body.scrollTop+u.scrollTop),c.test(i)&&(n.relatedTarget=t.relatedTarget||t[("mouseover"==i?"from":"to")+"Element"]),e}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return n}},{reg:/^text/i,fix:function(){return r}},{reg:/^touch|^gesture/i,fix:function(){return s}},{reg:/^message$/i,fix:function(){return a}},{reg:/^popstate$/i,fix:function(){return l}},{reg:/.*/,fix:function(){return t}}],p={},f=function(t,e,n){if(arguments.length&&(t=t||((e.ownerDocument||e.document||e).parentWindow||i).event,this.originalEvent=t,this.isNative=n,this.isBean=!0,t)){var o,r,s,a,l,h=t.type,u=t.target||t.srcElement;if(this.target=u&&3===u.nodeType?u.parentNode:u,n){if(l=p[h],!l)for(o=0,r=d.length;r>o;o++)if(d[o].reg.test(h)){p[h]=l=d[o].fix;break}for(a=l(t,this,h),o=a.length;o--;)!((s=a[o])in this)&&s in t&&(this[s]=t[s])}}};return f.prototype.preventDefault=function(){if(this.originalEvent.preventDefault)this.originalEvent.preventDefault();else try{this.originalEvent.returnValue=!1}catch(t){}},f.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},f.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},f.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},f.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},f.prototype.clone=function(t){var e=new f(this,this.element,this.isNative);return e.currentTarget=t,e},f}(),I=function(t,e){return c||e||t!==h&&t!==i?t:u},w=function(){var t=function(t,e,n,i){var o=function(n,o){return e.apply(t,i?f.call(o,n?0:1).concat(i):o)},r=function(n,i){return e.__beanDel?e.__beanDel.ft(n.target,t):i},s=n?function(t){var e=r(t,this);return n.apply(e,arguments)?(t&&(t.currentTarget=e),o(t,arguments)):void 0}:function(t){return e.__beanDel&&(t=t.clone(r(t))),o(t,arguments)};return s.__beanDel=e.__beanDel,s},e=function(e,n,i,o,r,s,a){var l,h=k[n];"unload"==n&&(i=T(N,e,n,i,o)),h&&(h.condition&&(i=t(e,i,h.condition,s)),n=h.base||n),this.isNative=l=b[n]&&!!e[d],this.customType=!c&&!l&&n,this.element=e,this.type=n,this.original=o,this.namespaces=r,this.eventType=c||l?n:"propertychange",this.target=I(e,l),this[d]=!!this.target[d],this.root=a,this.handler=t(e,i,null,s)};return e.prototype.inNamespaces=function(t){var e,n,i=0;if(!t)return!0;if(!this.namespaces)return!1;for(e=t.length;e--;)for(n=this.namespaces.length;n--;)t[e]==this.namespaces[n]&&i++;return t.length===i},e.prototype.matches=function(t,e,n){return!(this.element!==t||e&&this.original!==e||n&&this.handler!==n)},e}(),E=function(){var t={},e=function(n,i,o,r,s,a){var l=s?"r":"$";if(i&&"*"!=i){var h,u=0,c=t[l+i],d="*"==n;if(!c)return;for(h=c.length;h>u;u++)if((d||c[u].matches(n,o,r))&&!a(c[u],c,u,i))return}else for(var p in t)p.charAt(0)==l&&e(n,p.substr(1),o,r,s,a)},n=function(e,n,i,o){var r,s=t[(o?"r":"$")+n];if(s)for(r=s.length;r--;)if(!s[r].root&&s[r].matches(e,i,null))return!0;return!1},i=function(t,n,i,o){var r=[];return e(t,n,i,null,o,function(t){return r.push(t)}),r},o=function(e){var n=!e.root&&!this.has(e.element,e.type,null,!1),i=(e.root?"r":"$")+e.type;return(t[i]||(t[i]=[])).push(e),n},r=function(n){e(n.element,n.type,null,n.handler,n.root,function(e,n,i){return n.splice(i,1),e.removed=!0,0===n.length&&delete t[(e.root?"r":"$")+e.type],!1})},s=function(){var e,n=[];for(e in t)"$"==e.charAt(0)&&(n=n.concat(t[e]));return n};return{has:n,get:i,put:o,del:r,entries:s}}(),S=function(t){n=arguments.length?t:h.querySelectorAll?function(t,e){return e.querySelectorAll(t)}:function(){throw new Error("Bean: No selector engine installed")}},x=function(t,e){if(c||!e||!t||t.propertyName=="_on"+e){var n=E.get(this,e||t.type,null,!1),i=n.length,o=0;for(t=new C(t,this,!0),e&&(t.type=e);i>o&&!t.isImmediatePropagationStopped();o++)n[o].removed||n[o].handler.call(this,t)}},D=c?function(t,e,n){t[n?a:l](e,x,!1)}:function(t,e,n,i){var o;n?(E.put(o=new w(t,i||e,function(e){x.call(t,e,i)},x,null,null,!0)),i&&null==t["_on"+i]&&(t["_on"+i]=0),o.target.attachEvent("on"+o.eventType,o.handler)):(o=E.get(t,i||e,x,!0)[0],o&&(o.target.detachEvent("on"+o.eventType,o.handler),E.del(o)))},T=function(t,e,n,i,o){return function(){i.apply(this,arguments),t(e,n,o)}},N=function(t,e,n,i){var o,r,a=e&&e.replace(s,""),l=E.get(t,a,null,!1),h={};for(o=0,r=l.length;r>o;o++)n&&l[o].original!==n||!l[o].inNamespaces(i)||(E.del(l[o]),!h[l[o].eventType]&&l[o][d]&&(h[l[o].eventType]={t:l[o].eventType,c:l[o].type}));for(o in h)h.hasOwnProperty(o)&&(E.has(t,h[o].t,null,!1)||D(t,h[o].t,!1,h[o].c))},O=function(t,e){var i=function(e,i){for(var o,r=_(t)?n(t,i):t;e&&e!==i;e=e.parentNode)for(o=r.length;o--;)if(r[o]===e)return e},o=function(t){var n=i(t.target,this);n&&e.apply(n,arguments)};return o.__beanDel={ft:i,selector:t},o},M=c?function(t,e,n){var o=h.createEvent(t?"HTMLEvents":"UIEvents");o[t?"initEvent":"initUIEvent"](e,!0,!0,i,1),n.dispatchEvent(o)}:function(t,e,n){n=I(n,t),t?n.fireEvent("on"+e,h.createEventObject()):n["_on"+e]++},A=function(t,e,n){var i,o,a,l,h=_(e);if(h&&e.indexOf(" ")>0){for(e=m(e),l=e.length;l--;)A(t,e[l],n);return t}if(o=h&&e.replace(s,""),o&&k[o]&&(o=k[o].base),!e||h)(a=h&&e.replace(r,""))&&(a=m(a,".")),N(t,o,n,a);else if(g(e))N(t,null,e);else for(i in e)e.hasOwnProperty(i)&&A(t,i,e[i]);return t},P=function(t,e,i,o){var a,l,h,u,c,_,v;{if(void 0!==i||"object"!=typeof e){for(g(i)?(c=f.call(arguments,3),o=a=i):(a=o,c=f.call(arguments,4),o=O(i,a,n)),h=m(e),this===p&&(o=T(A,t,e,o,a)),u=h.length;u--;)v=E.put(_=new w(t,h[u].replace(s,""),o,a,m(h[u].replace(r,""),"."),c,!1)),_[d]&&v&&D(t,_.eventType,!0,_.customType);return t}for(l in e)e.hasOwnProperty(l)&&P.call(this,t,l,e[l])}},L=function(t,e,n,i){return P.apply(null,_(n)?[t,n,e,i].concat(arguments.length>3?f.call(arguments,5):[]):f.call(arguments))},U=function(){return P.apply(p,arguments)},F=function(t,e,n){var i,o,a,l,h,u=m(e);for(i=u.length;i--;)if(e=u[i].replace(s,""),(l=u[i].replace(r,""))&&(l=m(l,".")),l||n||!t[d])for(h=E.get(t,e,null,!1),n=[!1].concat(n),o=0,a=h.length;a>o;o++)h[o].inNamespaces(l)&&h[o].handler.apply(t,n);else M(b[e],e,t);return t},B=function(t,e,n){for(var i,o,r=E.get(e,n,null,!1),s=r.length,a=0;s>a;a++)r[a].original&&(i=[t,r[a].type],(o=r[a].handler.__beanDel)&&i.push(o.selector),i.push(r[a].original),P.apply(null,i));return t},R={on:P,add:L,one:U,off:A,remove:A,clone:B,fire:F,Event:C,setSelectorEngine:S,noConflict:function(){return e[t]=o,this}};if(i.attachEvent){var H=function(){var t,e=E.entries();for(t in e)e[t].type&&"unload"!==e[t].type&&A(e[t].element,e[t].type);i.detachEvent("onunload",H),i.CollectGarbage&&i.CollectGarbage()};i.attachEvent("onunload",H)}return S(Ink.ss),R}),e={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_SPACE:32,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,throttle:function(t,e,n){function i(s){var a=+new Date,l=a-r;if(n.preventDefault&&s&&"function"==typeof s.preventDefault&&s.preventDefault(),l>=e)return r=a,t.apply("bind"in n?n.bind:this,[].slice.call(arguments));var h=this,u=[].slice.call(arguments);o&&clearTimeout(o),o=setTimeout(function(){return o=null,i.apply(h,u)},e-l)}e=e||0,n=n||{};var o,r=0;return i},element:function(t){var e=t.delegationTarget||t.target||"mouseout"===t.type&&t.fromElement||"mouseleave"===t.type&&t.fromElement||"mouseover"===t.type&&t.toElement||"mouseenter"===t.type&&t.toElement||t.srcElement||null;return!e||3!==e.nodeType&&4!==e.nodeType?e:e.parentNode},relatedTarget:function(t){var e=t.relatedTarget||"mouseout"===t.type&&t.toElement||"mouseleave"===t.type&&t.toElement||"mouseover"===t.type&&t.fromElement||"mouseenter"===t.type&&t.fromElement||null;return!e||3!==e.nodeType&&4!==e.nodeType?e:e.parentNode},findElement:function(t,e,n){for(var i=this.element(t);;){if(i.nodeName.toLowerCase()===e.toLowerCase())return i;if(i=i.parentNode,!i)return n?!1:document;if(!i.parentNode)return n?!1:document}},observe:function(t,e,n,i){return t=Ink.i(t),t?(t.addEventListener?t.addEventListener(e,n,!!i):t.attachEvent("on"+e,n=Ink.bind(n,t)),n):void 0},observeOnce:function(t,n,i,o){var r=function(){return e.stopObserving(t,n,s),i.apply(this,arguments)},s=e.observe(t,n,r,o);return s},observeMulti:function(t,e,n,i){if("string"==typeof t?t=Ink.ss(t):t&&1===t.nodeType&&(t=[t]),!t[0])return!1;for(var o=0,r=t.length;r>o;o++)this.observe(t[o],e,n,i);return n},observeDelegated:function(t,n,i,o){return e.observe(t,n,function(n){var r=e.element(n);if(r&&r!==t)for(var s=r;s!==t&&s!==document&&s;){if(Ink.Dom.Selector_1.matchesSelector(s,i))return n.delegationTarget=s,o(n);s=s.parentNode}})},stopObserving:function(t,e,n,i){t=Ink.i(t),t&&(t.removeEventListener?t.removeEventListener(e,n,!!i):t.detachEvent("on"+e,n))},stop:function(t){null!==t.cancelBubble&&(t.cancelBubble=!0),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),window.attachEvent&&(t.returnValue=!1),null!==t.cancel&&(t.cancel=!0)},stopPropagation:function(t){null!==t.cancelBubble&&(t.cancelBubble=!0),t.stopPropagation&&t.stopPropagation()},stopDefault:function(t){t.preventDefault&&t.preventDefault(),window.attachEvent&&(t.returnValue=!1),null!==t.cancel&&(t.cancel=!0)},pointer:function(t){return{x:this.pointerX(t),y:this.pointerY(t)}},pointerX:function(t){return t.touches&&t.touches[0]&&t.touches[0].pageX||t.pageX||t.clientX},pointerY:function(t){return t.touches&&t.touches[0]&&t.touches[0].pageY||t.pageY||t.clientY},isLeftClick:function(t){if(window.addEventListener){if(0===t.button)return!0;if("touchend"===t.type&&null===t.button)return!0}else if(1===t.button)return!0;return!1},isRightClick:function(t){return 2===t.button},isMiddleClick:function(t){return window.addEventListener?1===t.button:4===t.button},getCharFromKeyboardEvent:function(t,e){var n=t.keyCode,i=String.fromCharCode(n),o=t.shiftKey;if(n>=65&&90>=n)return"boolean"==typeof e&&(o=e),o?i:i.toLowerCase();if(n>=96&&105>=n)return String.fromCharCode(48+(n-96));switch(n){case 109:case 189:return"-";case 107:case 187:return"+"}return i},debug:function(){}};return Ink.extendObj(e,t)}),Ink.createModule("Ink.Dom.FormSerialize",1,["Ink.Util.Array_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n){"use strict";function i(n){return null!=n&&!e.isDOMElement(n)&&(t.isArray(n)||"string"!=typeof n&&"number"==typeof n.length)}function o(t){return i(t)?t:[t]}var r={serialize:function(e,n){n=n||{};var i={},o={},s=this.asPairs(e,{elements:!0,emptyArray:o,outputUnchecked:n.outputUnchecked});return null==s?s:(t.forEach(s,function(t){var e=/\[\]$/.test(t[0]),n=t[0].replace(/\[\]$/,""),s=t[1],a=t[2];s===o?i[n]=[]:r._resultsInArray(a)||e?n in i?(i[n]instanceof Array||(i[n]=[i[n]]),i[n].push(s)):i[n]=e?[s]:s:i[n]=s}),i)},asPairs:function(e,i){function o(t,e,n){a.push(i.elements?[t,e,n]:[t,e])}function s(e){var r=e.nodeName.toLowerCase(),s=(e.type+"").toLowerCase();if("select"===r&&e.multiple){var a=!1;t.forEach(n.select("option:checked",e),function(t){o(e.name,t.value,e),a=!0}),!a&&"emptyArray"in i&&o(e.name,i.emptyArray,e)}else"input"!==r||"checkbox"!==s&&"radio"!==s||!i.outputUnchecked?o(e.name,e.value,e):o(e.name,null,e)}var a=[];if(i=i||{},e=Ink.i(e)){for(var l=t.filter(e.elements,function(t){return r._isSerialized(t,i)}),h=0,u=l.length;u>h;h++)s(l[h]);return a}return null},fillIn:function(t,e){if(!(t=Ink.i(t)))return null;var n;if("object"!=typeof e||i(e)){if(!i(e))return null;n=e}else n=r._objToPairs(e);return r._fillInPairs(t,n)},_objToPairs:function(t){var e,n=[];for(var i in t)if(t.hasOwnProperty(i)){e=o(t[i]);for(var r=0,s=e.length;s>r;r++)n.push([i,e[r]]);0===s&&n.push([i,[]])}return n},_fillInPairs:function(e,n){n=t.groupBy(n,{key:function(t){return t[0].replace(/\[\]$/,"")},adjacentGroups:!0}),n=t.map(n,function(e){var n=t.reduce(e,function(t,e){return[null,t[1].concat([e[1]])]},[null,[]])[1];return[e[0][0],n]});for(var i,s,a,l=0,h=n.length;h>l;l++){if(i=n[l][0],i in e)s=e[i];else{if(!(i+"[]"in e))continue;s=e[i+"[]"],i+="[]"}s=o(s),a=n[l][1],r._fillInOne(i,s,a)}},_fillInOne:function(t,n,i){var o=n[0],s=o.nodeName.toLowerCase(),a=o.getAttribute("type");a=a&&a.toLowerCase();var l="select"===s&&e.hasAttribute(o,"multiple");if("checkbox"===a||"radio"===a)r._fillInBoolean(n,i,"checked");else if(l)r._fillInBoolean(n[0].options,i,"selected");else{n.length!==i.length&&Ink.warn("Form had "+n.length+' inputs named "'+t+'", but received '+i.length+" values.");for(var h=0,u=Math.min(n.length,i.length);u>h;h+=1)n[h].value=i[h]}},_fillInBoolean:function(e,n,i){t.forEach(e,function(e){var o=t.inArray(e.value,n);e[i]=o})},_resultsInArray:function(t){var n=t.getAttribute("type"),i=t.nodeName.toLowerCase();return"checkbox"===n||"select"===i&&e.hasAttribute(t,"multiple")},_isSerialized:function(t,n){if(n=n||{},!e.isDOMElement(t))return!1;if(!e.hasAttribute(t,"name"))return!1;var i=t.nodeName.toLowerCase();return i&&"fieldset"!==i?"checkbox"===t.type||"radio"===t.type?n.outputUnchecked?!0:!!t.checked:!0:!1}};return r}),Ink.createModule("Ink.Dom.Loaded",1,[],function(){"use strict";var t={_contexts:[],run:function(t,e){e||(e=t,t=window);for(var n,i=0,o=this._contexts.length;o>i;i++)if(this._contexts[i][0]===t){n=this._contexts[i][1];break}n||(n={cbQueue:[],win:t,doc:t.document,root:t.document.documentElement,done:!1,top:!0},n.handlers={checkState:Ink.bindEvent(this._checkState,this,n),poll:Ink.bind(this._poll,this,n)},this._contexts.push([t,n]));var r=n.doc.addEventListener;n.add=r?"addEventListener":"attachEvent",n.rem=r?"removeEventListener":"detachEvent",n.pre=r?"":"on",n.det=r?"DOMContentLoaded":"onreadystatechange",n.wet=n.pre+"load";var s=n.handlers.checkState,a=/complete|loaded/.test(n.doc.readyState)&&"about:blank"!==n.win.location.toString();if(a)setTimeout(Ink.bind(function(){e.call(n.win,"lazy")},this),0);else{n.cbQueue.push(e),n.doc[n.add](n.det,s),n.win[n.add](n.wet,s);var l=1;try{l=n.win.frameElement}catch(h){}if(!r&&n.root&&n.root.doScroll){try{n.top=!l}catch(h){}n.top&&this._poll(n)}}},_checkState:function(t,e){if(t&&("readystatechange"!==t.type||/complete|loaded/.test(e.doc.readyState))){var n="load"===t.type?e.win:e.doc;n[e.rem](e.pre+t.type,e.handlers.checkState,!1),this._ready(e)}},_poll:function(t){try{t.root.doScroll("left")}catch(e){return setTimeout(t.handlers.poll,50)}this._ready(t)},_ready:function(t){if(!t.done){t.done=!0;for(var e=0;e<t.cbQueue.length;++e)t.cbQueue[e].call(t.win);t.cbQueue=[]}}};return t}),Ink.createModule("Ink.Dom.Selector",1,[],function(){"use strict";function t(t){return fe.test(t+"")}function e(){var t,e=[];return t=function(n,i){return e.push(n+=" ")>C.cacheLength&&delete t[e.shift()],t[n]=i}}function n(t){return t[F]=!0,t}function i(t){var e=N.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e=null}}function o(t,e,n,i){var o,r,s,a,l,c,d,p,f,m;if((e?e.ownerDocument||e:B)!==N&&T(e),e=e||N,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(M&&!i){if(o=me.exec(t))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&U(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((s=o[3])&&R.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(s)),n}if(R.qsa&&!A.test(t)){if(d=!0,p=F,f=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=h(t),(d=e.getAttribute("id"))?p=d.replace(ve,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+u(c[l]);f=pe.test(t)&&e.parentNode||e,m=c.join(",")}if(m)try{return Q.apply(n,f.querySelectorAll(m)),n}catch(_){}finally{d||e.removeAttribute("id")}}}return v(t.replace(ae,"$1"),e,n,i)}function r(t,e){var n=e&&t,i=n&&(~e.sourceIndex||J)-(~t.sourceIndex||J);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function a(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function l(t){return n(function(e){return e=+e,n(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function h(t,e){var n,i,r,s,a,l,h,u=q[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],h=C.preFilter;a;){(!n||(i=le.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),l.push(r=[])),n=!1,(i=he.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(ae," ")}),a=a.slice(n.length));for(s in C.filter)!(i=de[s].exec(a))||h[s]&&!(i=h[s](i))||(n=i.shift(),r.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?o.error(t):q(t,l).slice(0)}function u(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function c(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=j++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,s){var a,l,h,u=H+" "+r;if(s){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(h=e[F]||(e[F]={}),(l=h[i])&&l[0]===u){if((a=l[1])===!0||a===k)return a===!0}else if(l=h[i]=[u],l[1]=t(e,n,s)||k,l[1]===!0)return!0}}function d(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function p(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,h=null!=e;l>a;a++)(r=t[a])&&(!n||n(r,i,o))&&(s.push(r),h&&e.push(a));return s}function f(t,e,i,o,r,s){return o&&!o[F]&&(o=f(o)),r&&!r[F]&&(r=f(r,s)),n(function(n,s,a,l){var h,u,c,d=[],f=[],m=s.length,_=n||g(e||"*",a.nodeType?[a]:a,[]),v=!t||!n&&e?_:p(_,d,t,a,l),y=i?r||(n?t:m||o)?[]:s:v;if(i&&i(v,y,a,l),o)for(h=p(y,f),o(h,[],a,l),u=h.length;u--;)(c=h[u])&&(y[f[u]]=!(v[f[u]]=c));if(n){if(r||t){if(r){for(h=[],u=y.length;u--;)(c=y[u])&&h.push(v[u]=c);r(null,y=[],h,l)}for(u=y.length;u--;)(c=y[u])&&(h=r?te.call(n,c):d[u])>-1&&(n[h]=!(s[h]=c))}}else y=p(y===s?y.splice(m,y.length):y),r?r(null,s,y,l):Q.apply(s,y)})}function m(t){for(var e,n,i,o=t.length,r=C.relative[t[0].type],s=r||C.relative[" "],a=r?1:0,l=c(function(t){return t===e},s,!0),h=c(function(t){return te.call(e,t)>-1},s,!0),p=[function(t,n,i){return!r&&(i||n!==S)||((e=n).nodeType?l(t,n,i):h(t,n,i))}];o>a;a++)if(n=C.relative[t[a].type])p=[c(d(p),n)];else{if(n=C.filter[t[a].type].apply(null,t[a].matches),n[F]){for(i=++a;o>i&&!C.relative[t[i].type];i++);return f(a>1&&d(p),a>1&&u(t.slice(0,a-1)).replace(ae,"$1"),n,i>a&&m(t.slice(a,i)),o>i&&m(t=t.slice(i)),o>i&&u(t))}p.push(n)}return d(p)}function _(t,e){var i=0,r=e.length>0,s=t.length>0,a=function(n,a,l,h,u){var c,d,f,m=[],_=0,g="0",v=n&&[],y=null!=u,b=S,I=n||s&&C.find.TAG("*",u&&a.parentNode||a),w=H+=null==b?1:Math.random()||.1;for(y&&(S=a!==N&&a,k=i);null!=(c=I[g]);g++){if(s&&c){for(d=0;f=t[d++];)if(f(c,a,l)){h.push(c);break}y&&(H=w,k=++i)}r&&((c=!f&&c)&&_--,n&&v.push(c))}if(_+=g,r&&g!==_){for(d=0;f=e[d++];)f(v,m,a,l);if(n){if(_>0)for(;g--;)v[g]||m[g]||(m[g]=G.call(h));m=p(m)}Q.apply(h,m),y&&!n&&m.length>0&&_+e.length>1&&o.uniqueSort(h)}return y&&(H=w,S=b),v};return r?n(a):a}function g(t,e,n){for(var i=0,r=e.length;r>i;i++)o(t,e[i],n);return n}function v(t,e,n,i){var o,r,s,a,l,c=h(t);if(!i&&1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===e.nodeType&&M&&C.relative[r[1].type]){if(e=(C.find.ID(s.matches[0].replace(be,ke),e)||[])[0],!e)return n;t=t.slice(r.shift().value.length)}for(o=de.needsContext.test(t)?0:r.length;o--&&(s=r[o],!C.relative[a=s.type]);)if((l=C.find[a])&&(i=l(s.matches[0].replace(be,ke),pe.test(r[0].type)&&e.parentNode||e))){if(r.splice(o,1),t=i.length&&u(r),!t)return Q.apply(n,i),n;break}}return E(t,c)(i,e,!M,n,pe.test(t)),n}function y(){}/*!
 * Sizzle CSS Selector Engine
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
var b,k,C,I,w,E,S,x,D,T,N,O,M,A,P,L,U,F="sizzle"+-new Date,B=window.document,R={},H=0,j=0,z=e(),q=e(),V=e(),W=!1,$=function(){return 0},Y="undefined",J=1<<31,X=[],G=X.pop,K=X.push,Q=X.push,Z=X.slice,te=X.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ee="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=ne.replace("w","w#"),oe="([*^$|!~]?=)",re="\\["+ee+"*("+ne+")"+ee+"*(?:"+oe+ee+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ie+")|)|)"+ee+"*\\]",se=":("+ne+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+re.replace(3,8)+")*)|.*)\\)|)",ae=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),le=new RegExp("^"+ee+"*,"+ee+"*"),he=new RegExp("^"+ee+"*([\\x20\\t\\r\\n\\f>+~])"+ee+"*"),ue=new RegExp(se),ce=new RegExp("^"+ie+"$"),de={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),NAME:new RegExp("^\\[name=['\"]?("+ne+")['\"]?\\]"),TAG:new RegExp("^("+ne.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},pe=/[\x20\t\r\n\f]*[+~]/,fe=/^[^{]+\{\s*\[native code/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/'|\\/g,ye=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,be=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,ke=function(t,e){var n="0x"+e-65536;return n!==n?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Q.apply(X=Z.call(B.childNodes),B.childNodes),X[B.childNodes.length].nodeType}catch(Ce){Q={apply:X.length?function(t,e){K.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=o.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},T=o.setDocument=function(e){var n=e?e.ownerDocument||e:B;return n!==N&&9===n.nodeType&&n.documentElement?(N=n,O=n.documentElement,M=!w(n),R.getElementsByTagName=i(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),R.attributes=i(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),R.getElementsByClassName=i(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",t.getElementsByClassName&&t.getElementsByClassName("e").length?(t.lastChild.className="e",2===t.getElementsByClassName("e").length):!1}),R.getByName=i(function(t){t.id=F+0,t.appendChild(N.createElement("a")).setAttribute("name",F),t.appendChild(N.createElement("i")).setAttribute("name",F),O.appendChild(t);var e=n.getElementsByName&&n.getElementsByName(F).length===2+n.getElementsByName(F+0).length;return O.removeChild(t),e}),R.sortDetached=i(function(t){return t.compareDocumentPosition&&1&t.compareDocumentPosition(N.createElement("div"))}),C.attrHandle=i(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==Y&&"#"===t.firstChild.getAttribute("href")})?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},R.getByName?(C.find.ID=function(t,e){if(typeof e.getElementById!==Y&&M){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(t){var e=t.replace(be,ke);return function(t){return t.getAttribute("id")===e}}):(C.find.ID=function(t,e){if(typeof e.getElementById!==Y&&M){var n=e.getElementById(t);return n?n.id===t||typeof n.getAttributeNode!==Y&&n.getAttributeNode("id").value===t?[n]:void 0:[]}},C.filter.ID=function(t){var e=t.replace(be,ke);return function(t){var n=typeof t.getAttributeNode!==Y&&t.getAttributeNode("id");return n&&n.value===e}}),C.find.TAG=R.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==Y?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},C.find.NAME=R.getByName&&function(t,e){return typeof e.getElementsByName!==Y?e.getElementsByName(name):void 0},C.find.CLASS=R.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==Y&&M?e.getElementsByClassName(t):void 0},P=[],A=[":focus"],(R.qsa=t(n.querySelectorAll))&&(i(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||A.push("\\["+ee+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||A.push(":checked")}),i(function(t){t.innerHTML="<input type='hidden' i=''/>",t.querySelectorAll("[i^='']").length&&A.push("[*^$]="+ee+"*(?:\"\"|'')"),t.querySelectorAll(":enabled").length||A.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),A.push(",.*:")})),(R.matchesSelector=t(L=O.matchesSelector||O.mozMatchesSelector||O.webkitMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&i(function(t){R.disconnectedMatch=L.call(t,"div"),L.call(t,"[s!='']:x"),P.push("!=",se)}),A=new RegExp(A.join("|")),P=P.length&&new RegExp(P.join("|")),U=t(O.contains)||O.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},$=O.compareDocumentPosition?function(t,e){if(t===e)return W=!0,0;var i=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return i?1&i||x&&e.compareDocumentPosition(t)===i?t===n||U(B,t)?-1:e===n||U(B,e)?1:D?te.call(D,t)-te.call(D,e):0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var i,o=0,s=t.parentNode,a=e.parentNode,l=[t],h=[e];if(t===e)return W=!0,0;if(!s||!a)return t===n?-1:e===n?1:s?-1:a?1:0;if(s===a)return r(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)h.unshift(i);for(;l[o]===h[o];)o++;return o?r(l[o],h[o]):l[o]===B?-1:h[o]===B?1:0},N):N},o.matches=function(t,e){return o(t,null,null,e)},o.matchesSelector=function(t,e){if((t.ownerDocument||t)!==N&&T(t),e=e.replace(ye,"='$1']"),R.matchesSelector&&M&&(!P||!P.test(e))&&!A.test(e))try{var n=L.call(t,e);if(n||R.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(i){}return o(e,N,null,[t]).length>0},o.contains=function(t,e){return(t.ownerDocument||t)!==N&&T(t),U(t,e)},o.attr=function(t,e){var n;return(t.ownerDocument||t)!==N&&T(t),M&&(e=e.toLowerCase()),(n=C.attrHandle[e])?n(t):!M||R.attributes?t.getAttribute(e):((n=t.getAttributeNode(e))||t.getAttribute(e))&&t[e]===!0?e:n&&n.specified?n.value:null},o.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},o.uniqueSort=function(t){var e,n=[],i=0,o=0;if(W=!R.detectDuplicates,x=!R.sortDetached,D=!R.sortStable&&t.slice(0),t.sort($),W){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return t},I=o.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=I(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i];i++)n+=I(e);return n},C=o.selectors={cacheLength:50,createPseudo:n,match:de,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(be,ke),t[3]=(t[4]||t[5]||"").replace(be,ke),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||o.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&o.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return de.CHILD.test(t[0])?null:(t[4]?t[2]=t[4]:n&&ue.test(n)&&(e=h(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(be,ke).toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+ee+")"+t+"("+ee+"|$)"))&&z(t,function(t){return e.test(t.className||typeof t.getAttribute!==Y&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=o.attr(i,t);return null==r?"!="===e:e?(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r+" ").indexOf(n)>-1:"|="===e?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var h,u,c,d,p,f,m=r!==s?"nextSibling":"previousSibling",_=e.parentNode,g=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(_){if(r){for(;m;){for(c=e;c=c[m];)if(a?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?_.firstChild:_.lastChild],s&&v){for(u=_[F]||(_[F]={}),h=u[t]||[],p=h[0]===H&&h[1],d=h[0]===H&&h[2],c=p&&_.childNodes[p];c=++p&&c&&c[m]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){u[t]=[H,p,d];break}}else if(v&&(h=(e[F]||(e[F]={}))[t])&&h[0]===H)d=h[1];else for(;(c=++p&&c&&c[m]||(d=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==g:1!==c.nodeType)||!++d||(v&&((c[F]||(c[F]={}))[t]=[H,d]),c!==e)););return d-=o,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,e){var i,r=C.pseudos[t]||C.setFilters[t.toLowerCase()]||o.error("unsupported pseudo: "+t);return r[F]?r(e):r.length>1?(i=[t,t,"",e],C.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,n){for(var i,o=r(t,e),s=o.length;s--;)i=te.call(t,o[s]),t[i]=!(n[i]=o[s])}):function(t){return r(t,0,i)}):r}},pseudos:{not:n(function(t){var e=[],i=[],o=E(t.replace(ae,"$1"));return o[F]?n(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,n,r){return e[0]=t,o(e,null,r,i),!i.pop()}}),has:n(function(t){return function(e){return o(t,e).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||I(e)).indexOf(t)>-1}}),lang:n(function(t){return ce.test(t||"")||o.error("unsupported lang: "+t),t=t.replace(be,ke).toLowerCase(),function(e){var n;do if(n=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(t){var e=window.location&&window.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===O},focus:function(t){return t===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return _e.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[0>n?n+e:n]}),even:l(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:l(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}};for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})C.pseudos[b]=a(b);return E=o.compile=function(t,e){var n,i=[],o=[],r=V[t+" "];if(!r){for(e||(e=h(t)),n=e.length;n--;)r=m(e[n]),r[F]?i.push(r):o.push(r);r=V(t,_(o,i))}return r},C.pseudos.nth=C.pseudos.eq,y.prototype=C.filters=C.pseudos,C.setFilters=new y,R.sortStable=F.split("").sort($).join("")===F,T(),[0,0].sort($),R.detectDuplicates=W,{select:o,matches:o.matches,matchesSelector:o.matchesSelector}}),Ink.createModule("Ink.Util.Array","1",[],function(){"use strict";var t=Array.prototype,e={isArray:Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},groupBy:function(t,n){function i(t){return"function"==typeof n.key?n.key(t):"string"==typeof n.key?t[n.key]:t}function o(t){var e=n.pairs?[t,[]]:[];return a.push(e),s.push(t),e}n=n||{};for(var r,s=[],a=[],l=0,h=t.length;h>l;l++){r=i(t[l]);var u;u=n.adjacentGroups?s[s.length-1]===r?a[a.length-1]:o(r):a[e.keyValue(r,s,!0)]||o(r),n.pairs?u[1].push(t[l]):u.push(t[l])}return a},reduce:function(e,n,i){if(t.reduce)return t.reduce.apply(e,t.slice.call(arguments,1));var o,r=Object(e),s=r.length>>>0,a=0;if(arguments.length>=3)o=i;else{for(;s>a&&!(a in r);)a++;if(a>=s)throw new TypeError("Reduce of empty array with no initial value");o=r[a++]}for(;s>a;a++)a in r&&(o=n(o,r[a],a,r));return o},inArray:function(t,e){if("object"==typeof e)for(var n=0,i=e.length;i>n;++n)if(e[n]===t)return!0;return!1},sortMulti:function(t,e){if("undefined"==typeof t||t.constructor!==Array)return!1;if("string"!=typeof e)return t.sort();if(t.length>0){if("undefined"==typeof t[0][e])return!1;t.sort(function(t,n){var i=t[e],o=n[e];return o>i?-1:i>o?1:0})}return t},keyValue:function(t,e,n){if("undefined"!=typeof t&&"object"==typeof e&&this.inArray(t,e)){for(var i=[],o=0,r=e.length;r>o;++o)if(e[o]===t){if("undefined"!=typeof n&&n===!0)return o;i.push(o)}return i}return!1},shuffle:function(t){if("undefined"!=typeof t&&t.constructor!==Array)return!1;for(var e=t.length,n=!1,i=!1;e--;)i=Math.floor(Math.random()*(e+1)),n=t[e],t[e]=t[i],t[i]=n;return t},forEach:function(e,n,i){if(t.forEach)return t.forEach.call(e,n,i);for(var o=0,r=e.length>>>0;r>o;o++)n.call(i,e[o],o,e)},each:function(){e.forEach.apply(e,t.slice.call(arguments))},map:function(e,n,i){if(t.map)return t.map.call(e,n,i);for(var o=new Array(s),r=0,s=e.length>>>0;s>r;r++)o[r]=n.call(i,e[r],r,e);return o},filter:function(e,n,i){if(t.filter)return t.filter.call(e,n,i);for(var o=[],r=null,s=0,a=e.length;a>s;s++)r=e[s],n.call(i,r,s,e)&&o.push(r);return o},some:function(t,e,n){if(null===t)throw new TypeError("First argument is invalid.");var i=Object(t),o=i.length>>>0;if("function"!=typeof e)throw new TypeError("Second argument must be a function.");for(var r=0;o>r;r++)if(r in i&&e.call(n,i[r],r,i))return!0;return!1},intersect:function(t,e){if(!t||!e||t instanceof Array==!1||e instanceof Array==!1)return[];for(var n=[],i=0,o=t.length;o>i;++i)for(var r=0,s=e.length;s>r;++r)t[i]===e[r]&&n.push(t[i]);return n},convert:function(e){return t.slice.call(e||[],0)},unique:function(t){if(!Array.prototype.lastIndexOf){var n=[];return e.forEach(e.convert(t),function(t){e.inArray(t,n)||n.push(t)}),n}return e.filter(e.convert(t),function(t,e,n){return n.lastIndexOf(t)===e})},range:function(t,e,n){n||(n=1);var i,o=[];if(n>0)for(i=t;e>i;i+=n)o.push(i);else for(i=t;i>e;i+=n)o.push(i);return o},insert:function(t,e,n){t.splice(e,0,n)},remove:function(t,e,n){for(var i=[],o=0,r=t.length;r>o;o++)o>=e&&e+n>o||i.push(t[o]);return i}};return e}),Ink.createModule("Ink.Util.BinPack","1",[],function(){"use strict";/*
        Copyright (c) 2011, 2012, 2013 Jake Gordon and contributors

        Permission is hereby granted, free of charge, to any person obtaining a copy
        of this software and associated documentation files (the "Software"), to deal
        in the Software without restriction, including without limitation the rights
        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        copies of the Software, and to permit persons to whom the Software is
        furnished to do so, subject to the following conditions:

        The above copyright notice and this permission notice shall be included in all
        copies or substantial portions of the Software.

        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
        SOFTWARE.
    */
var t=function(t,e){this.init(t,e)};t.prototype={init:function(t,e){this.root={x:0,y:0,w:t,h:e}},fit:function(t){var e,n,i;for(e=0;e<t.length;++e)i=t[e],(n=this.findNode(this.root,i.w,i.h))&&(i.fit=this.splitNode(n,i.w,i.h))},findNode:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.w&&n<=t.h?t:null},splitNode:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,w:t.w,h:t.h-n},t.right={x:t.x+e,y:t.y,w:t.w-e,h:n},t}};var e=function(){};e.prototype={fit:function(t){var e,n,i,o=t.length,r=o>0?t[0].w:0,s=o>0?t[0].h:0;for(this.root={x:0,y:0,w:r,h:s},e=0;o>e;e++)i=t[e],i.fit=(n=this.findNode(this.root,i.w,i.h))?this.splitNode(n,i.w,i.h):this.growNode(i.w,i.h)},findNode:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.w&&n<=t.h?t:null},splitNode:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,w:t.w,h:t.h-n},t.right={x:t.x+e,y:t.y,w:t.w-e,h:n},t},growNode:function(t,e){var n=t<=this.root.w,i=e<=this.root.h,o=i&&this.root.h>=this.root.w+t,r=n&&this.root.w>=this.root.h+e;return o?this.growRight(t,e):r?this.growDown(t,e):i?this.growRight(t,e):n?this.growDown(t,e):null},growRight:function(t,e){this.root={used:!0,x:0,y:0,w:this.root.w+t,h:this.root.h,down:this.root,right:{x:this.root.w,y:0,w:t,h:this.root.h}};var n;return(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null},growDown:function(t,e){this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+e,down:{x:0,y:this.root.h,w:this.root.w,h:e},right:this.root};var n;return(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null}};var n={random:function(){return Math.random()-.5},w:function(t,e){return e.w-t.w},h:function(t,e){return e.h-t.h},a:function(t,e){return e.area-t.area},max:function(t,e){return Math.max(e.w,e.h)-Math.max(t.w,t.h)},min:function(t,e){return Math.min(e.w,e.h)-Math.min(t.w,t.h)},height:function(t,e){return n.msort(t,e,["h","w"])},width:function(t,e){return n.msort(t,e,["w","h"])},area:function(t,e){return n.msort(t,e,["a","h","w"])},maxside:function(t,e){return n.msort(t,e,["max","min","h","w"])},msort:function(t,e,i){var o,r;for(r=0;r<i.length;++r)if(o=n[i[r]](t,e),0!==o)return o;return 0}},i=function(){return[this.w," x ",this.h].join("")},o={binPack:function(o){var r,s,a;for(r=0,s=o.blocks.length;s>r;++r)a=o.blocks[r],"area"in a||(a.area=a.w*a.h);var l=o.dimensions?new t(o.dimensions[0],o.dimensions[1]):new e;o.sorter||(o.sorter="maxside"),o.blocks.sort(n[o.sorter]),l.fit(o.blocks);var h=[l.root.w,l.root.h],u=[],c=[];for(r=0,s=o.blocks.length;s>r;++r)a=o.blocks[r],a.fit?u.push(a):(a.toString=i,c.push(a));var d=h[0]*h[1],p=0;for(r=0,s=u.length;s>r;++r)a=u[r],p+=a.area;return{dimensions:h,filled:p/d,blocks:o.blocks,fitted:u,unfitted:c}}};return o}),Ink.createModule("Ink.Util.Cookie","1",[],function(){"use strict";var t={get:function(t){var e=document.cookie||!1,n={};if(e){e=e.replace(new RegExp("; ","g"),";");var i=e.split(";"),o=[];if(i.length>0)for(var r=0;r<i.length;r++)o=i[r].split("="),2===o.length&&(n[o[0]]=decodeURIComponent(o[1]));if(t)return"undefined"!=typeof n[t]?n[t]:null}return n},set:function(t,e,n,i,o,r){var s;if(!t||e===!1||"undefined"==typeof t||"undefined"==typeof e)return!1;s=t+"="+encodeURIComponent(e);var a=!1,l=!1,h=!1,u=!1;if(n&&"undefined"!=typeof n&&!isNaN(n)){var c=new Date,d=parseInt(Number(c.valueOf()),10)+1e3*Number(parseInt(n,10)),p=new Date(d),f=p.toGMTString(),m=new RegExp("([^\\s]+)(\\s\\d\\d)\\s(\\w\\w\\w)\\s(.*)");f=f.replace(m,"$1$2-$3-$4"),a="expires="+f}else a="undefined"==typeof n||isNaN(n)||0!==Number(parseInt(n,10))?"expires=Thu, 01-Jan-2037 00:00:01 GMT":"";l=i&&"undefined"!=typeof i?"path="+i:"path=/",o?h="domain="+o:/\./.test(window.location.hostname)&&(h="domain="+window.location.hostname),u=r&&"undefined"!=typeof r?r:!1,document.cookie=s+"; "+a+"; "+l+(h?"; "+h:"")+"; "+u},remove:function(t,e,n){var i=-1;this.set(t,"deleted",i,e,n)}};return t}),Ink.createModule("Ink.Util.Date","1",[],function(){"use strict";var t={_months:function(t){var e=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return e[t]},_iMonth:function(t){return Number(t)?+t-1:{janeiro:0,jan:0,fevereiro:1,fev:1,"mar\xe7o":2,mar:2,abril:3,abr:3,maio:4,mai:4,junho:5,jun:5,julho:6,jul:6,agosto:7,ago:7,setembro:8,set:8,outubro:9,out:9,novembro:10,nov:10,dezembro:11,dez:11}[t.toLowerCase()]},_wDays:function(t){var e=["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"];return e[t]},_iWeek:function(t){return Number(t)?+t||7:{segunda:1,seg:1,"ter\xe7a":2,ter:2,quarta:3,qua:3,quinta:4,qui:4,sexta:5,sex:5,"s\xe1bado":6,"s\xe1b":6,domingo:7,dom:7}[t.toLowerCase()]},_daysInMonth:function(t,e){var n;return n=1===t||3===t||5===t||7===t||8===t||10===t||12===t?31:4===t||6===t||9===t||11===t?30:e%400===0||e%4===0&&e%100!==0?29:28},get:function(t,e){("undefined"==typeof t||""===t)&&(t="Y-m-d");var n,i=t.split(""),o=new Array(i.length),r="\\";n="undefined"==typeof e?new Date:new Date("number"==typeof e?1e3*e:e);for(var s,a,l,h=0;h<i.length;h++)switch(i[h]){case r:o[h]=i[h+1],h++;break;case"d":var u=n.getDate();o[h]=String(u).length>1?u:"0"+u;break;case"D":o[h]=this._wDays(n.getDay()).substring(0,3);break;case"j":o[h]=n.getDate();break;case"l":o[h]=this._wDays(n.getDay());break;case"N":o[h]=n.getDay()||7;break;case"S":var c=n.getDate(),d=["st","nd","rd"],p="";o[h]=c>=11&&13>=c?"th":(p=d[String(c).substr(-1)-1])?p:"th";break;case"w":o[h]=n.getDay();break;case"z":s=Date.UTC(n.getFullYear(),0,0),a=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),o[h]=Math.floor((a-s)/864e5);break;case"W":var f=new Date(n.getFullYear(),0,1);s=f.getDay()||7;var m=Math.floor((n-f)/864e5+1);o[h]=Math.ceil((m-(8-s))/7)+1;break;case"F":o[h]=this._months(n.getMonth());break;case"m":var _=String(n.getMonth()+1);o[h]=_.length>1?_:"0"+_;break;case"M":o[h]=this._months(n.getMonth()).substring(0,3);break;case"n":o[h]=n.getMonth()+1;break;case"t":o[h]=this._daysInMonth(n.getMonth()+1,n.getYear());break;case"L":var g=n.getFullYear();o[h]=g%4?!1:g%100?!0:g%400?!1:!0;break;case"o":throw'"o" not implemented!';case"Y":o[h]=n.getFullYear();break;case"y":o[h]=String(n.getFullYear()).substring(2);break;case"a":o[h]=n.getHours()<12?"am":"pm";break;case"A":o[h]=n.getHours<12?"AM":"PM";break;case"B":throw'"B" not implemented!';case"g":l=n.getHours(),o[h]=12>=l?l:l-12;break;case"G":o[h]=String(n.getHours());break;case"h":l=String(n.getHours()),l=12>=l?l:l-12,o[h]=l.length>1?l:"0"+l;break;case"H":l=String(n.getHours()),o[h]=l.length>1?l:"0"+l;break;case"i":var v=String(n.getMinutes());o[h]=v.length>1?v:"0"+v;break;case"s":var y=String(n.getSeconds());o[h]=y.length>1?y:"0"+y;break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":s=new Date(n.getFullYear(),0,1),o[h]=n.getTimezoneOffset()!==s.getTimezoneOffset()?1:0;break;case"O":var b=n.getTimezoneOffset(),k=b%60;l=String((b-k)/60*-1),"-"!==l.charAt(0)&&(l="+"+l),l=3===l.length?l:l.replace(/([+\-])(\d)/,"$10$2"),o[h]=l+k+"0";break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":o[h]=60*n.getTimezoneOffset();break;case"c":throw'"c" not implemented!';case"r":var C=this._wDays(n.getDay()).substr(0,3),I=this._months(n.getMonth()).substr(0,3);o[h]=C+", "+n.getDate()+" "+I+this.get(" Y H:i:s O",n);break;case"U":o[h]=Math.floor(n.getTime()/1e3);break;default:o[h]=i[h]}return o.join("")},set:function(t,e){if("undefined"!=typeof e){("undefined"==typeof t||""===t)&&(t="Y-m-d");for(var n,i=t.split(""),o=new Array(i.length),r="\\",s={year:void 0,month:void 0,day:void 0,dayY:void 0,dayW:void 0,week:void 0,hour:void 0,hourD:void 0,min:void 0,sec:void 0,msec:void 0,ampm:void 0,diffM:void 0,diffH:void 0,date:void 0},a=0,l=0;l<i.length;l++)switch(i[l]){case r:o[l]=i[l+1],l++;break;case"d":o[l]="(\\d{2})",s.day={original:l,match:a++};break;case"j":o[l]="(\\d{1,2})",s.day={original:l,match:a++};break;case"D":o[l]="([\\w\xe1]{3})",s.dayW={original:l,match:a++};break;case"l":o[l]="([\\w\xe1]{5,7})",s.dayW={original:l,match:a++};break;case"N":o[l]="(\\d)",s.dayW={original:l,match:a++};break;case"w":o[l]="(\\d)",s.dayW={original:l,match:a++};break;case"S":o[l]="\\w{2}";break;case"z":o[l]="(\\d{1,3})",s.dayY={original:l,match:a++};break;case"W":o[l]="(\\d{1,2})",s.week={original:l,match:a++};break;case"F":o[l]="([\\w\xe7]{4,9})",s.month={original:l,match:a++};break;case"M":o[l]="(\\w{3})",s.month={original:l,match:a++};break;case"m":o[l]="(\\d{2})",s.month={original:l,match:a++};break;case"n":o[l]="(\\d{1,2})",s.month={original:l,match:a++};break;case"t":o[l]="\\d{2}";break;case"L":o[l]="\\w{4,5}";break;case"o":throw'"o" not implemented!';case"Y":o[l]="(\\d{4})",s.year={original:l,match:a++};break;case"y":o[l]="(\\d{2})",("undefined"==typeof s.year||"Y"!==i[s.year.original])&&(s.year={original:l,match:a++});break;case"a":o[l]="(am|pm)",s.ampm={original:l,match:a++};break;case"A":o[l]="(AM|PM)",s.ampm={original:l,match:a++};break;case"B":throw'"B" not implemented!';case"g":o[l]="(\\d{1,2})",s.hourD={original:l,match:a++};break;case"G":o[l]="(\\d{1,2})",s.hour={original:l,match:a++};break;case"h":o[l]="(\\d{2})",s.hourD={original:l,match:a++};break;case"H":o[l]="(\\d{2})",s.hour={original:l,match:a++};break;case"i":o[l]="(\\d{2})",s.min={original:l,match:a++};break;case"s":o[l]="(\\d{2})",s.sec={original:l,match:a++};break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":o[l]="\\d";break;case"O":o[l]="([-+]\\d{4})",s.diffH={original:l,match:a++};break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":o[l]="(\\-?\\d{1,5})",s.diffM={original:l,match:a++};break;case"c":throw'"c" not implemented!';case"r":o[l]="([\\w\xe1]{3}, \\d{1,2} \\w{3} \\d{4} \\d{2}:\\d{2}:\\d{2} [+\\-]\\d{4})",s.date={original:l,match:a++};break;case"U":o[l]="(\\d{1,13})",s.date={original:l,match:a++};break;default:o[l]=i[l]}var h=new RegExp(o.join(""));try{if(n=e.match(h),!n)return}catch(u){return}var c,d,p="undefined"!=typeof s.date,f="undefined"!=typeof s.year,m="undefined"!=typeof s.dayY,_="undefined"!=typeof s.day,g="undefined"!=typeof s.month,v=g&&_,y=!g&&_,b="undefined"!=typeof s.dayW,k="undefined"!=typeof s.week,C=k&&b,I=!k&&b,w=m||v||!f&&y||C||!f&&I,E=!(f||m||_||g||b||k),S="undefined"!=typeof s.hourD&&"undefined"!=typeof s.ampm,x="undefined"!=typeof s.hour,D=S||x,T="undefined"!=typeof s.min,N="undefined"!=typeof s.sec,O="undefined"!=typeof s.msec,M=!E||D,A=M||T,P="undefined"!=typeof s.diffM,L="undefined"!=typeof s.diffH;if(p){if("U"===i[s.date.original])return new Date(1e3*+n[s.date.match+1]);var U=n[s.date.match+1].match(/\w{3}, (\d{1,2}) (\w{3}) (\d{4}) (\d{2}):(\d{2}):(\d{2}) ([+\-]\d{4})/);return c=+U[4]+ +U[7].slice(0,3),d=+U[5]+(U[7].slice(0,1)+U[7].slice(3))/100*60,new Date(U[3],this._iMonth(U[2]),U[1],c,d,U[6])}var F,B,R,H,j,z,q=new Date;if(w||E){if(w){if(f){var V=q.getFullYear()-50+"";F=n[s.year.match+1],"y"===i[s.year.original]&&(F=+V.slice(0,2)+(F>=V.slice(2)?0:1)+F)}else F=q.getFullYear();if(m)B=0,R=n[s.dayY.match+1];else if(_)B=g?this._iMonth(n[s.month.match+1]):q.getMonth(),R=n[s.day.match+1];else{B=0;var W;W=k?n[s.week.match+1]:this.get("W",q),R=7*(W-2)+(8-(new Date(F,0,1).getDay()||7))+this._iWeek(n[s.week.match+1])}if(0===B&&R>31){var $=new Date(F,B,R);B=$.getMonth(),R=$.getDate()}}else F=q.getFullYear(),B=q.getMonth(),R=q.getDate();return c=S?+n[s.hourD.match+1]+("pm"===n[s.ampm.match+1]?12:0):x?n[s.hour.match+1]:E?q.getHours():"00",d=T?n[s.min.match+1]:M?"00":q.getMinutes(),H=N?n[s.sec.match+1]:A?"00":q.getSeconds(),j=O?n[s.msec.match+1]:"000",z=L?n[s.diffH.match+1]:P?String(-1*n[s.diffM.match+1]/60*100).replace(/^(\d)/,"+$1").replace(/(^[\-+])(\d{3}$)/,"$10$2"):"+0000",new Date(F,B,R,c,d,H)}}}};return t}),Ink.createModule("Ink.Util.Dumper","1",[],function(){"use strict";var t={_tab:"\xa0\xa0\xa0\xa0",_formatParam:function(t){var e="";switch(typeof t){case"string":e="(string) "+t;break;case"number":e="(number) "+t;break;case"boolean":e="(boolean) "+t;break;case"object":e=null!==t?t.constructor===Array?"Array \n{\n"+this._outputFormat(t,0)+"\n}":"Object \n{\n"+this._outputFormat(t,0)+"\n}":"null";break;default:e=!1}return e},_getTabs:function(t){for(var e="",n=0;t>n;n++)e+=this._tab;return e},_outputFormat:function(t,e){var n="",i=!1;for(var o in t)if(null!==t[o])if("object"!=typeof t[o]||t[o].constructor!==Array&&t[o].constructor!==Object){if(t[o].constructor===Function)continue;n=n+this._tab+this._getTabs(e)+"["+o+"] => "+t[o]+"\n"}else t[o].constructor===Array?i="Array":t[o].constructor===Object&&(i="Object"),n+=this._tab+this._getTabs(e)+"["+o+"] => <b>"+i+"</b>\n",n+=this._tab+this._getTabs(e)+"{\n",n+=this._outputFormat(t[o],e+1)+this._tab+this._getTabs(e)+"}\n";else n=n+this._tab+this._getTabs(e)+"["+o+"] => null \n";return n},printDump:function(t,e){if(e&&"undefined"!=typeof e)if("string"==typeof e)document.getElementById(e).innerHTML="<pre>"+this._formatParam(t)+"</pre>";else{if("object"!=typeof e)throw"TARGET must be an element or an element ID";e.innerHTML="<pre>"+this._formatParam(t)+"</pre>"}else document.write("<pre>"+this._formatParam(t)+"</pre>")},returnDump:function(t){return this._formatParam(t)},alertDump:function(t){window.alert(this._formatParam(t).replace(/(<b>)(Array|Object)(<\/b>)/g,"$2"))},windowDump:function(t){var e="dumperwindow_"+1e4*Math.random(),n=window.open("",e,"width=400,height=300,left=50,top=50,status,menubar,scrollbars,resizable");n.document.open(),n.document.write("<pre>"+this._formatParam(t)+"</pre>"),n.document.close(),n.focus()}};return t}),Ink.createModule("Ink.Util.I18n","1",[],function(){"use strict";var t=/\{(?:(\{.*?})|(?:%s:)?(\d+)|(?:%s)?|([\w-]+))}/g,e=function(t,e){return"function"==typeof t?t.apply(this,e):"undefined"!=typeof t?t:""},n=function(t,e,i){return this instanceof n?void this.reset().lang(e).testMode(i).append(t||{},e):new n(t,e,i)};return n.prototype={reset:function(){return this._dicts=[],this._dict={},this._testMode=!1,this._lang=this._gLang,this},clone:function(){for(var t=new n,e=0,i=this._dicts.length;i>e;e++)t.append(this._dicts[e]);return t.testMode(this.testMode()),t.lang(this.lang()),t},append:function(t){return this._dicts.push(t),this._dict=Ink.extendObj(this._dict,t[this._lang]),this},lang:function(t){if(!arguments.length)return this._lang;if(t&&this._lang!==t){this._lang=t,this._dict={};for(var e=0,n=this._dicts.length;n>e;e++)this._dict=Ink.extendObj(this._dict,this._dicts[e][t]||{})}return this},testMode:function(t){return arguments.length?(void 0!==t&&(this._testMode=!!t),this):!!this._testMode},getKey:function(t){var e,i=this._gLang,o=this._lang;return t in this._dict?e=this._dict[t]:(n.langGlobal(o),e=this._gDict[t],n.langGlobal(i)),e},text:function(n){if("string"==typeof n){var i=Array.prototype.slice.call(arguments,1),o=0,r="object"==typeof i[0],s=this.getKey(n);return void 0===s&&(s=this._testMode?"["+n+"]":n),"number"==typeof s&&(s+=""),"string"==typeof s?s=s.replace(t,function(t,n,s,a){var l=n?n:s?i[s-(r?0:1)]:a?i[0][a]||"":i[o++ +(r?1:0)];return e(l,[o].concat(i))}):"function"==typeof s?s.apply(this,i):s instanceof Array?e(s[i[0]],i):"object"==typeof s?e(s[i[0]],i):""}},ntext:function(t,e,n){var i,o=Array.prototype.slice.apply(arguments);if(2===o.length&&"number"==typeof e){if(i=this.getKey(t),!(i instanceof Array))return"";o.splice(0,1),i=i[1===e?0:1]}else o.splice(0,2),i=1===n?t:e;return this.text.apply(this,[i].concat(o))},ordinal:function(t){if(void 0===t)return"";var n=+t.toString().slice(-1),i=this.getKey("_ordinals");if(void 0===i)return"";if("string"==typeof i)return i;var o;return"function"==typeof i&&(o=i(t,n),"string"==typeof o)?o:"exceptions"in i&&(o="function"==typeof i.exceptions?i.exceptions(t,n):t in i.exceptions?e(i.exceptions[t],[t,n]):void 0,"string"==typeof o)?o:"byLastDigit"in i&&(o="function"==typeof i.byLastDigit?i.byLastDigit(n,t):n in i.byLastDigit?e(i.byLastDigit[n],[n,t]):void 0,"string"==typeof o)?o:"default"in i&&(o=e(i["default"],[t,n]),"string"==typeof o)?o:""},alias:function(){var t=Ink.bind(n.prototype.text,this);return t.ntext=Ink.bind(n.prototype.ntext,this),t.append=Ink.bind(n.prototype.append,this),t.ordinal=Ink.bind(n.prototype.ordinal,this),t.testMode=Ink.bind(n.prototype.testMode,this),t}},n.reset=function(){n.prototype._gDicts=[],n.prototype._gDict={},n.prototype._gLang="pt_PT"},n.reset(),n.appendGlobal=function(t,e){if(e){if(!(e in t)){var i={};i[e]=t,t=i}e!==n.prototype._gLang&&n.langGlobal(e)}n.prototype._gDicts.push(t),Ink.extendObj(n.prototype._gDict,t[n.prototype._gLang])},n.langGlobal=function(t){if(!arguments.length)return n.prototype._gLang;if(t&&n.prototype._gLang!==t){n.prototype._gLang=t,n.prototype._gDict={};for(var e=0,i=n.prototype._gDicts.length;i>e;e++)Ink.extendObj(n.prototype._gDict,n.prototype._gDicts[e][t]||{})}},n}),Ink.createModule("Ink.Util.Json","1",[],function(){"use strict";function twoDigits(t){var e=""+t;return 1===e.length?"0"+e:e}var function_call=Function.prototype.call,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,dateToISOString=Date.prototype.toISOString?Ink.bind(function_call,Date.prototype.toISOString):function(t){return t.getUTCFullYear()+"-"+twoDigits(t.getUTCMonth()+1)+"-"+twoDigits(t.getUTCDate())+"T"+twoDigits(t.getUTCHours())+":"+twoDigits(t.getUTCMinutes())+":"+twoDigits(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},InkJson={_nativeJSON:window.JSON||null,_convertToUnicode:!1,_escape:function(t){var e={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)&&(t=t.replace(/([\x00-\x1f\\"])/g,function(t,n){var i=e[n];return i?i:(i=n.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})),t},_toUnicode:function(t){if(this._convertToUnicode){for(var e="",n=!1,i=!1,o=0,r=t.length;r>o;){if(n=t.charCodeAt(o),n>=32&&126>=n||8===n||9===n||10===n||12===n||13===n||32===n||34===n||47===n||58===n||92===n)i=34===n||92===n||47===n?"\\"+t.charAt(o):8===n?"\\b":9===n?"\\t":10===n?"\\n":12===n?"\\f":13===n?"\\r":t.charAt(o);else if(this._convertToUnicode){for(i=t.charCodeAt(o).toString(16)+"".toUpperCase();i.length<4;)i="0"+i;i="\\u"+i}else i=t.charAt(o);e+=i,o++}return e}return this._escape(t)},_stringifyValue:function(t){if("string"==typeof t)return'"'+this._toUnicode(t)+'"';if("number"!=typeof t||!isNaN(t)&&isFinite(t)){if("undefined"==typeof t||null===t)return"null";if("function"==typeof t.toJSON){var e=t.toJSON();return"string"==typeof e?'"'+this._escape(e)+'"':this._escape(e.toString())}if("number"==typeof t||"boolean"==typeof t)return""+t;if("function"==typeof t)return"null";if(t.constructor===Date)return'"'+this._escape(dateToISOString(t))+'"';if(t.constructor===Array){for(var n="",i=0,o=t.length;o>i;i++)i>0&&(n+=","),n+=this._stringifyValue(t[i]);return"["+n+"]"}var r="";for(var s in t)({}).hasOwnProperty.call(t,s)&&(""!==r&&(r+=","),r+='"'+this._escape(s)+'": '+this._stringifyValue(t[s]));return"{"+r+"}"}return"null"},stringify:function(t,e){return this._convertToUnicode=!!e,!this._convertToUnicode&&this._nativeJSON?this._nativeJSON.stringify(t):this._stringifyValue(t)},parse:function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}};return InkJson}),Ink.createModule("Ink.Util.String","1",[],function(){"use strict";var InkUtilString={_chars:["&","\xe0","\xe1","\xe2","\xe3","\xe4","\xe5","\xe6","\xe7","\xe8","\xe9","\xea","\xeb","\xec","\xed","\xee","\xef","\xf0","\xf1","\xf2","\xf3","\xf4","\xf5","\xf6","\xf8","\xf9","\xfa","\xfb","\xfc","\xfd","\xfe","\xff","\xc0","\xc1","\xc2","\xc3","\xc4","\xc5","\xc6","\xc7","\xc8","\xc9","\xca","\xcb","\xcc","\xcd","\xce","\xcf","\xd0","\xd1","\xd2","\xd3","\xd4","\xd5","\xd6","\xd8","\xd9","\xda","\xdb","\xdc","\xdd","\xde","\u20ac",'"',"\xdf","<",">","\xa2","\xa3","\xa4","\xa5","\xa6","\xa7","\xa8","\xa9","\xaa","\xab","\xac","\xad","\xae","\xaf","\xb0","\xb1","\xb2","\xb3","\xb4","\xb5","\xb6","\xb7","\xb8","\xb9","\xba","\xbb","\xbc","\xbd","\xbe"],_entities:["amp","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","euro","quot","szlig","lt","gt","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34"],_accentedChars:["\xe0","\xe1","\xe2","\xe3","\xe4","\xe5","\xe8","\xe9","\xea","\xeb","\xec","\xed","\xee","\xef","\xf2","\xf3","\xf4","\xf5","\xf6","\xf9","\xfa","\xfb","\xfc","\xe7","\xf1","\xc0","\xc1","\xc2","\xc3","\xc4","\xc5","\xc8","\xc9","\xca","\xcb","\xcc","\xcd","\xce","\xcf","\xd2","\xd3","\xd4","\xd5","\xd6","\xd9","\xda","\xdb","\xdc","\xc7","\xd1"],_accentedRemovedChars:["a","a","a","a","a","a","e","e","e","e","i","i","i","i","o","o","o","o","o","u","u","u","u","c","n","A","A","A","A","A","A","E","E","E","E","I","I","I","I","O","O","O","O","O","U","U","U","U","C","N"],_htmlUnsafeChars:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},ucFirst:function(t,e){var n=e?/(^|\s)(\w)(\S{2,})/:/(^|\s)(\w)(\S{2,})/g;return t?String(t).replace(n,function(t,e,n,i){return e+n.toUpperCase()+i.toLowerCase()}):t},trim:function(t){return"string"==typeof t?t.replace(/^\s+|\s+$|\n+$/g,""):t},stripTags:function(t,e){if(e&&"string"==typeof e){for(var n=InkUtilString.trim(e).split(","),i=[],o=!1,r=0;r<n.length;r++)""!==InkUtilString.trim(n[r])&&(o=InkUtilString.trim(n[r].replace(/(<|\>)/g,"").replace(/\s/,"")),i.push("(<"+o+"\\s[^>]+>|<(\\s|\\/)?(\\s|\\/)?"+o+">)"));for(var s=i.join("|"),a=new RegExp(s,"i"),l=t.match(new RegExp("<[^>]*>","g")),h=0;h<l.length;h++)l[h].match(a)||(t=t.replace(new RegExp(l[h],"gm"),""));return t}return t.replace(/<[^\>]+\>/g,"")},htmlEntitiesEncode:function(t){if(t&&t.replace)for(var e=!1,n=0;n<InkUtilString._chars.length;n++)e=new RegExp(InkUtilString._chars[n],"gm"),t=t.replace(e,"&"+InkUtilString._entities[n]+";");return t},htmlEntitiesDecode:function(t){if(t&&t.replace){for(var e=!1,n=0;n<InkUtilString._entities.length;n++)e=new RegExp("&"+InkUtilString._entities[n]+";","gm"),t=t.replace(e,InkUtilString._chars[n]);t=t.replace(/&#[^;]+;?/g,function(t){return String.fromCharCode("x"===t.charAt(2)?parseInt(t.substring(3),16):parseInt(t.substring(2),10))})}return t},utf8Encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e+=String.fromCharCode(i):i>127&&2048>i?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e},shortString:function(t,e){for(var n=t.split(" "),i="",o=0;o<n.length;o++){if((i+n[o]+" ").length>=e){i+="&hellip;";break}i+=n[o]+" "}return i},truncateString:function(t,e){return t.length-1>e?t.substr(0,e-1)+"\u2026":t},utf8Decode:function(t){for(var e="",n=0,i=0,o=0,r=0;n<t.length;)i=t.charCodeAt(n),128>i?(e+=String.fromCharCode(i),n++):i>191&&224>i?(o=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&o),n+=2):(o=t.charCodeAt(n+1),r=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&r),n+=3);return e},removeAccentedChars:function(t){for(var e=t,n=!1,i=0;i<InkUtilString._accentedChars.length;i++)n=new RegExp(InkUtilString._accentedChars[i],"gm"),e=e.replace(n,""+InkUtilString._accentedRemovedChars[i]);return e},substrCount:function(t,e){return t?t.split(e).length-1:0},evalJSON:function(strJSON,sanitize){if("undefined"==typeof sanitize||null===sanitize||InkUtilString.isJSON(strJSON))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("ERROR: Bad JSON string...")}},isJSON:function(t){return t=t.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(t)},htmlEscapeUnsafe:function(t){var e=InkUtilString._htmlUnsafeChars;return null!==t?String(t).replace(/[<>&'"]/g,function(t){return e[t]}):t},normalizeWhitespace:function(t){return null!==t?InkUtilString.trim(String(t).replace(/\s+/g," ")):t},toUnicode:function(t){if("string"==typeof t){for(var e="",n=!1,i=!1,o=t.length,r=0;o>r;){if(n=t.charCodeAt(r),n>=32&&126>=n||8===n||9===n||10===n||12===n||13===n||32===n||34===n||47===n||58===n||92===n)i=8===n?"\\b":9===n?"\\t":10===n?"\\n":12===n?"\\f":13===n?"\\r":t.charAt(r);else{for(i=t.charCodeAt(r).toString(16)+"".toUpperCase();i.length<4;)i="0"+i;i="\\u"+i}e+=i,r++}return e}},escape:function(t){var e=t.charCodeAt(0).toString(16).split("");if(e.length<3){for(;e.length<2;)e.unshift("0");e.unshift("x")}else{for(;e.length<4;)e.unshift("0");e.unshift("u")}return e.unshift("\\"),e.join("")},unescape:function(t){var e=t.lastIndexOf("0");e=-1===e?2:Math.min(e,2);var n=t.substring(e),i=parseInt(n,16);return String.fromCharCode(i)},escapeText:function(t,e){void 0===e&&(e=["[","]","'",","]);for(var n,i,o=[],r=0,s=t.length;s>r;++r)n=t[r],i=n.charCodeAt(0),(32>i||i>126&&-1===e.indexOf(n))&&(n=InkUtilString.escape(n)),o.push(n);return o.join("")},escapedCharRegex:/(\\x[0-9a-fA-F]{2})|(\\u[0-9a-fA-F]{4})/g,unescapeText:function(t){for(var e;e=InkUtilString.escapedCharRegex.exec(t);)e=e[0],t=t.replace(e,InkUtilString.unescape(e)),InkUtilString.escapedCharRegex.lastIndex=0;return t},strcmp:function(t,e){return t===e?0:t>e?1:-1},packetize:function(t,e){for(var n,i=t.length,o=new Array(Math.ceil(i/e)),r=t.split(""),s=0;i;)n=Math.min(e,i),o[s++]=r.splice(0,n).join(""),i-=n;return o}};return InkUtilString}),Ink.createModule("Ink.Util.Url","1",[],function(){"use strict";var t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",getUrl:function(){return window.location.href},genQueryString:function(t,e){var n,i,o,r=-1!==t.indexOf("?"),s=[t];for(i in e)e.hasOwnProperty(i)&&(r?n="&":(n="?",r=!0),o=e[i],"number"==typeof o||o||(o=""),s=s.concat([n,encodeURIComponent(i),"=",encodeURIComponent(o)]));return s.join("")},getQueryString:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n={};if(e.match(/\?(.+)/i)){var i=e.replace(/^(.*)\?([^\#]+)(\#(.*))?/g,"$2");if(i.length>0)for(var o=i.split(/[;&]/),r=0;r<o.length;r++){var s=o[r].split("=");n[decodeURIComponent(s[0])]="undefined"!=typeof s[1]&&s[1]?decodeURIComponent(s[1]):!1}}return n},getAnchor:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n=!1;return e.match(/#(.+)/)&&(n=e.replace(/([^#]+)#(.*)/,"$2")),n},getAnchorString:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n={};if(e.match(/#(.+)/i)){var i=e.replace(/^([^#]+)#(.*)?/g,"$2");if(i.length>0)for(var o=i.split(/[;&]/),r=0;r<o.length;r++){var s=o[r].split("=");n[decodeURIComponent(s[0])]="undefined"!=typeof s[1]&&s[1]?decodeURIComponent(s[1]):!1}}return n},parseUrl:function(t){var e={};if(t&&"string"==typeof t){if(t.match(/^([^:]+):\/\//i)){var n=/^([^:]+):\/\/([^\/]*)\/?([^\?#]*)\??([^#]*)#?(.*)/i;t.match(n)&&(e.scheme=t.replace(n,"$1"),e.host=t.replace(n,"$2"),e.path="/"+t.replace(n,"$3"),e.query=t.replace(n,"$4")||!1,e.fragment=t.replace(n,"$5")||!1)}else{var i=new RegExp("^([^\\?]+)\\?([^#]+)#(.*)","i"),o=new RegExp("^([^\\?]+)\\?([^#]+)#?","i"),r=new RegExp("^([^\\?]+)\\??","i");t.match(i)?(e.scheme=!1,e.host=!1,e.path=t.replace(i,"$1"),e.query=t.replace(i,"$2"),e.fragment=t.replace(i,"$3")):t.match(o)?(e.scheme=!1,e.host=!1,e.path=t.replace(o,"$1"),e.query=t.replace(o,"$2"),e.fragment=!1):t.match(r)&&(e.scheme=!1,e.host=!1,e.path=t.replace(r,"$1"),e.query=!1,e.fragment=!1)}if(e.host){var s=/^(.*?)\\:(\\d+)$/i;if(e.host.match(s)){var a=e.host;e.host=a.replace(s,"$1"),e.port=a.replace(s,"$2")}else e.port=!1;if(e.host.match(/@/i)){var l=e.host;e.host=l.split("@")[1];var h=l.split("@")[0];h.match(/\:/)?(e.user=h.split(":")[0],e.pass=h.split(":")[1]):(e.user=h,e.pass=!1)}}}return e},format:function(t){var e="",n="",i="",o="",r="";return"string"==typeof t.protocol?e=t.protocol+"//":"string"==typeof t.scheme&&(e=t.scheme+"://"),n=t.host||t.hostname||"",i=t.path||"","string"==typeof t.query?r=t.query:"string"==typeof t.search&&(r=t.search.replace(/^\?/,"")),"string"==typeof t.fragment?o=t.fragment:"string"==typeof t.hash&&(o=t.hash.replace(/#$/,"")),[e,n,i,r&&"?"+r,o&&"#"+o].join("")},currentScriptElement:function(t){var e=document.getElementsByTagName("script");if("undefined"==typeof t)return e.length>0?e[e.length-1]:!1;for(var n=!1,i=new RegExp(""+t,"i"),o=0,r=e.length;r>o;o++)if(n=e[o],i.test(n.src))return n;return!1}};return t}),Ink.createModule("Ink.Util.Validator","1",[],function(){"use strict";var t={_countryCodes:["AO","CV","MZ","TL","PT"],_internacionalPT:351,_indicativosPT:{21:"lisboa",22:"porto",231:"mealhada",232:"viseu",233:"figueira da foz",234:"aveiro",235:"arganil",236:"pombal",238:"seia",239:"coimbra",241:"abrantes",242:"ponte de s\xf4r",243:"santar\xe9m",244:"leiria",245:"portalegre",249:"torres novas",251:"valen\xe7a",252:"vila nova de famalic\xe3o",253:"braga",254:"peso da r\xe9gua",255:"penafiel",256:"s\xe3o jo\xe3o da madeira",258:"viana do castelo",259:"vila real",261:"torres vedras",262:"caldas da ra\xednha",263:"vila franca de xira",265:"set\xfabal",266:"\xe9vora",268:"estremoz",269:"santiago do cac\xe9m",271:"guarda",272:"castelo branco",273:"bragan\xe7a",274:"proen\xe7a-a-nova",275:"covilh\xe3",276:"chaves",277:"idanha-a-nova",278:"mirandela",279:"moncorvo",281:"tavira",282:"portim\xe3o",283:"odemira",284:"beja",285:"moura",286:"castro verde",289:"faro",291:"funchal, porto santo",292:"corvo, faial, flores, horta, pico",295:"angra do hero\xedsmo, graciosa, s\xe3o jorge, terceira",296:"ponta delgada, s\xe3o miguel, santa maria",91:"rede m\xf3vel 91 (Vodafone / Yorn)",93:"rede m\xf3vel 93 (Optimus)",96:"rede m\xf3vel 96 (TMN)",92:"rede m\xf3vel 92 (TODOS)",707:"n\xfamero \xfanico",760:"n\xfamero \xfanico",800:"n\xfamero gr\xe1tis",808:"chamada local",30:"voip"},_internacionalCV:238,_indicativosCV:{2:"fixo",91:"m\xf3vel 91",95:"m\xf3vel 95",97:"m\xf3vel 97",98:"m\xf3vel 98",99:"m\xf3vel 99"},_internacionalAO:244,_indicativosAO:{2:"fixo",91:"m\xf3vel 91",92:"m\xf3vel 92"},_internacionalMZ:258,_indicativosMZ:{2:"fixo",82:"m\xf3vel 82",84:"m\xf3vel 84"},_internacionalTL:670,_indicativosTL:{3:"fixo",7:"m\xf3vel 7"},_characterGroups:{numbers:["0-9"],asciiAlpha:["a-zA-Z"],latin1Alpha:["a-zA-Z","\xc0-\xff"],unicodeAlpha:["a-zA-Z","\xc0-\xff","\u0100-\u1fff","\u2c00-\ud7ff"],space:[" "],dash:["-"],underscore:["_"],nicknamePunctuation:["_.-"],singleLineWhitespace:["	 "],newline:["\n"],whitespace:["	\n\f\r\xa0 "],asciiPunctuation:["!-/",":-@","[-`","{-~"],latin1Punctuation:["!-/",":-@","[-`","{-~","\xa1-\xbf","\xd7","\xf7"],unicodePunctuation:["!-/",":-@","[-`","{-~","\xa1-\xbf","\xd7","\xf7","\u2000-\u206f","\u2e00-\u2e7f","\u3000-\u303f"]},createRegExp:function(e){var n="^[";for(var i in e)if(e.hasOwnProperty(i)){if(!(i in t._characterGroups))throw new Error("group "+i+" is not a valid character group");e[i]&&(n+=t._characterGroups[i].join(""))}return new RegExp("^["===n?"$^":n+"]*?$")},checkCharacterGroups:function(e,n){return t.createRegExp(n).test(e)},unicode:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({unicodeAlpha:!0},n))},latin1:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({latin1Alpha:!0},n))},ascii:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({asciiAlpha:!0},n))},number:function(e,n){if(e+="",n=Ink.extendObj({decimalSep:".",thousandSep:"",negative:!0,decimalPlaces:null,maxDigits:null,max:null,min:null,returnNumber:!1},n||{}),n.thousandSep)return e=e.replace(new RegExp("\\"+n.thousandSep,"g"),""),n.thousandSep="",t.number(e,n);if(n.negative===!1)return n.min=0,n.negative=!0,t.number(e,n);if("."!==n.decimalSep&&(e=e.replace(new RegExp("\\"+n.decimalSep,"g"),".")),!/^(-)?(\d+)?(\.\d+)?$/.test(e)||""===e)return!1;
var i;if(n.decimalSep&&-1!==e.indexOf(n.decimalSep)){if(i=e.split(n.decimalSep),null!==n.decimalPlaces&&i[1].length>n.decimalPlaces)return!1}else i=[""+e,""];if(null!==n.maxDigits&&i[0].replace(/-/g,"").length>n.maxDigits)return i;var o=parseFloat(e);return null!==n.maxExcl&&o>=n.maxExcl||null!==n.minExcl&&o<=n.minExcl?!1:null!==n.max&&o>n.max||null!==n.min&&o<n.min?!1:n.returnNumber?o:!0},_isLeapYear:function(t){var e=/^\d{4}$/;return e.test(t)?t%4?!1:t%100?!0:t%400?!1:!0:!1},_dateParsers:{"yyyy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{4})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yyyy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{4})(\/)(\d{1,2})(\/)(\d{1,2})$/},"yy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{2})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{2})(\/)(\d{1,2})(\/)(\d{1,2})$/},"dd-mm-yyyy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{4})$/},"dd/mm/yyyy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{4})$/},"dd-mm-yy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{2})$/},"dd/mm/yy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{2})$/}},_daysInMonth:function(t,e){var n=0;return t=parseInt(t,10),e=parseInt(e,10),1===t||3===t||5===t||7===t||8===t||10===t||12===t?n=31:4===t||6===t||9===t||11===t?n=30:2===t&&(n=e%400===0||e%4===0&&e%100!==0?29:28),n},_isValidDate:function(t,e,n){var i=/^\d{4}$/,o=/^\d{1,2}$/;return i.test(t)&&o.test(e)&&o.test(n)&&e>=1&&12>=e&&n>=1&&this._daysInMonth(e,t)>=n?!0:!1},email:function(t){var e=new RegExp("^[_a-z0-9-]+((\\.|\\+)[_a-z0-9-]+)*@([\\w]*-?[\\w]*\\.)+[a-z]{2,4}$","i");return!!e.test(t)},mail:function(e){return t.email(e)},url:function(t,e){if("undefined"==typeof e||e===!1){var n=new RegExp("(^(http\\:\\/\\/|https\\:\\/\\/)(.+))","i");n.test(t)===!1&&(t="http://"+t)}var i=new RegExp("^(http:\\/\\/|https:\\/\\/)([\\w]*(-?[\\w]*)*\\.)+[a-z]{2,4}","i");return i.test(t)===!1?!1:!0},isPTPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosPT)"string"==typeof this._indicativosPT[n]&&e.push(n);var i=e.join("|"),o=/^(00351|\+351)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{9}/i;if(9===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isPortuguesePhone:function(t){return this.isPTPhone(t)},isCVPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosCV)"string"==typeof this._indicativosCV[n]&&e.push(n);var i=e.join("|"),o=/^(00238|\+238)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{7}/i;if(7===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isAOPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosAO)"string"==typeof this._indicativosAO[n]&&e.push(n);var i=e.join("|"),o=/^(00244|\+244)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{9}/i;if(9===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isMZPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosMZ)"string"==typeof this._indicativosMZ[n]&&e.push(n);var i=e.join("|"),o=/^(00258|\+258)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{8,9}/i;if((9===t.length||8===t.length)&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t)){if(0===t.indexOf("2")&&8===t.length)return!0;if(0===t.indexOf("8")&&9===t.length)return!0}}return!1},isTLPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosTL)"string"==typeof this._indicativosTL[n]&&e.push(n);var i=e.join("|"),o=/^(00670|\+670)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{7}/i;if(7===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isPhone:function(){var t;if(0===arguments.length)return!1;var e=arguments[0];if(arguments.length>1){if(arguments[1].constructor!==Array){if("function"==typeof this["is"+arguments[1].toUpperCase()+"Phone"])return this["is"+arguments[1].toUpperCase()+"Phone"](e);throw"Invalid Country Code!"}var n;for(t=0;t<arguments[1].length;t++){if("function"!=typeof(n=this["is"+arguments[1][t].toUpperCase()+"Phone"]))throw"Invalid Country Code!";if(n(e))return!0}}else for(t=0;t<this._countryCodes.length;t++)if(this["is"+this._countryCodes[t]+"Phone"](e))return!0;return!1},codPostal:function(t,e,n){var i=/^(\s*\-\s*|\s+)$/,o=/^\s+|\s+$/g,r=/^[1-9]\d{3}$/,s=/^\d{3}$/,a=/^(.{4})(.*)(.{3})$/;if(t=t.replace(o,""),"undefined"!=typeof e){if(e=e.replace(o,""),r.test(t)&&s.test(e))return n?[!0,!0]:!0}else{if(r.test(t))return n?[!0,!1]:!0;var l=t.match(a);if(null!==l&&r.test(l[1])&&i.test(l[2])&&s.test(l[3]))return n?[!0,!1]:!0}return n?[!1,!1]:!1},isDate:function(t,e){if("undefined"==typeof this._dateParsers[t])return!1;var n=this._dateParsers[t].year,i=this._dateParsers[t].month,o=this._dateParsers[t].day,r=this._dateParsers[t].parser,s=this._dateParsers[t].sep,a=e.match(r);if(null!==a&&a[2]===a[4]&&a[2]===s){var l=2===a[n].length?"20"+a[n].toString():a[n];if(this._isValidDate(l,a[i].toString(),a[o].toString()))return!0}return!1},isColor:function(t){var e,n=!1,i=/^[a-zA-Z]+$/,o=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,r=/^rgb\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,s=/^rgba\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/,a=/^hsl\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,l=/^hsla\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/;if(i.test(t)||o.test(t))return!0;var h;if(null!==(e=r.exec(t))||null!==(e=s.exec(t)))for(h=e.length;h--;){if((2===h||4===h||6===h)&&"undefined"!=typeof e[h]&&""!==e[h]){if(!("undefined"!=typeof e[h-1]&&e[h-1]>=0&&e[h-1]<=100))return!1;n=!0}if(1===h||3===h||5===h&&("undefined"==typeof e[h+1]||""===e[h+1])){if(!("undefined"!=typeof e[h]&&e[h]>=0&&e[h]<=255))return!1;n=!0}}if(null!==(e=a.exec(t))||null!==(e=l.exec(t)))for(h=e.length;h--;){if(3===h||5===h){if(!("undefined"!=typeof e[h-1]&&"undefined"!=typeof e[h]&&""!==e[h]&&e[h-1]>=0&&e[h-1]<=100))return!1;n=!0}if(1===h){if(!("undefined"!=typeof e[h]&&e[h]>=0&&e[h]<=360))return!1;n=!0}}return n},isIP:function(t,e){if("string"!=typeof t)return!1;switch(e=(e||"ipv4").toLowerCase()){case"ipv4":return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t);case"ipv6":return/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(t);default:return!1}},_creditCardSpecs:{"default":{length:"13,14,15,16,17,18,19",prefix:/^.+/,luhn:!0},"american express":{length:"15",prefix:/^3[47]/,luhn:!0},"diners club":{length:"14,16",prefix:/^36|55|30[0-5]/,luhn:!0},discover:{length:"16",prefix:/^6(?:5|011)/,luhn:!0},jcb:{length:"15,16",prefix:/^3|1800|2131/,luhn:!0},maestro:{length:"16,18",prefix:/^50(?:20|38)|6(?:304|759)/,luhn:!0},mastercard:{length:"16",prefix:/^5[1-5]/,luhn:!0},visa:{length:"13,16",prefix:/^4/,luhn:!0}},_luhn:function(t){if(t=parseInt(t,10),"number"!=typeof t&&t%1!==0)return!1;t+="";var e,n=t.length,i=0;for(e=n-1;e>=0;e-=2)i+=parseInt(t.substr(e,1),10);for(e=n-2;e>=0;e-=2){var o=parseInt(2*t.substr(e,1),10);i+=o>=10?o-9:o}return i%10===0},isCreditCard:function(t,e){if(/\d+/.test(t)===!1)return!1;if("undefined"==typeof e)e="default";else if(e instanceof Array){var n,i=e.length;for(n=0;i>n;n++)if(this.isCreditCard(t,e[n]))return!0;return!1}if(e=e.toLowerCase(),"undefined"==typeof this._creditCardSpecs[e])return!1;var o=t.length+"";return-1===this._creditCardSpecs[e].length.split(",").indexOf(o)?!1:this._creditCardSpecs[e].prefix.test(t)?this._creditCardSpecs[e].luhn===!1?!0:this._luhn(t):!1},getEANCheckDigit:function(t){var e,n,i=0;for(t=String(t);t.length<12;)t="00000"+t;for(e=t.length,n=e-1;n>=0;n--)i+=(n%2*2+1)*Number(t.charAt(n));return 10-i%10},isEAN:function(e,n){switch(void 0===n&&(n="ean-13"),n){case"ean-13":if(13!==e.length)return!1;break;case"ean-8":if(8!==e.length)return!1;break;default:return!1}var i=e.substr(0,e.length-1),o=e.charAt(e.length-1),r=t.getEANCheckDigit(i);return String(r)===o}};return t}),Ink.createModule("Ink.UI.LazyLoad","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Css_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="LazyLoad_1",o._optionDefinition={item:["String",".lazyload-item"],placeholder:["String",null],loadedClass:["String",null],source:["String","data-src"],destination:["String","src"],delay:["Number",100],delta:["Number",0],image:["Boolean",!0],scrollElement:["Element",window],touchEvents:["Boolean",!0],onInsideViewport:["Function",!1],onAfterAttributeChange:["Function",!1],autoInit:["Boolean",!0]},o.prototype={_init:function(){this._aData=[],this._hasEvents=!1,this._options.autoInit&&this._activate()},_activate:function(){this._getData(),this._hasEvents||this._addEvents(),this._onScrollThrottled()},_getData:function(){for(var t=Ink.ss(this._options.item,this._element),e=null,i=0,o=t.length;o>i;i++)null==this._options.placeholder||n.hasAttribute(t[i],this._options.destination)||t[i].setAttribute(this._options.destination,this._options.placeholder),e=t[i].getAttribute(this._options.source),null===e&&this._options.image||this._aData.push({elm:t[i],original:e})},_addEvents:function(){this._onScrollThrottled=e.throttle(Ink.bindEvent(this._onScroll,this),this._options.delay),"ontouchmove"in document.documentElement&&this._options.touchEvents&&e.observe(document.documentElement,"touchmove",this._onScrollThrottled),e.observe(this._options.scrollElement,"scroll",this._onScrollThrottled),this._hasEvents=!0},_removeEvents:function(){"ontouchmove"in document.documentElement&&this._options.touchEvents&&e.stopObserving(document.documentElement,"touchmove",this._onScrollThrottled),e.stopObserving(this._options.scrollElement,"scroll",this._onScrollThrottled),this._hasEvents=!1},_onScroll:function(){for(var t,e=0;e<this._aData.length;e++)t=this._aData[e],n.inViewport(t.elm,{partial:!0,margin:this._options.delta})&&(this._elInViewport(t),this._aData.splice(e,1),e-=1);0===this._aData.length&&this._removeEvents()},_elInViewport:function(t){this._userCallback("onInsideViewport",{element:t.elm}),this._options.image&&(t.elm.setAttribute(this._options.destination,t.original),this._options.loadedClass&&i.addClassName(t.elm,this._options.loadedClass),t.elm.removeAttribute(this._options.source)),this._userCallback("onAfterAttributeChange",{element:t.elm})},_userCallback:function(t){"function"==typeof this._options[t]&&this._options[t].apply(this,[].slice.call(arguments,1))},reload:function(){this._activate()},destroy:function(){this._hasEvents&&this._removeEvents(),t.destroyComponent.call(this)}},t.createUIComponent(o),o}),!function(t,e){"use strict";if(!("Ink"in t)){var n={},i={},o=[],r={},s=[],a={},l=Function.prototype.apply,h=function(t){if("object"!=typeof t)return!1;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};t.Ink={VERSION:"3.1.7",_checkPendingRequireModules:function(){var t,e,n,o,r,a,l=[],h=[];for(t=0,e=s.length;e>t;++t)if(n=s[t]){for(o in n.left)n.left.hasOwnProperty(o)&&(r=i[o],r&&(n.args[n.left[o]]=r,delete n.left[o],--n.remaining));if(n.remaining>0)l.push(n);else{if(a=n.cb,!a)continue;delete n.cb,h.push([a,n.args])}}s=l;for(var u=0;u<h.length;u++)h[u][0].apply(!1,h[u][1]);s.length>0&&setTimeout(function(){Ink._checkPendingRequireModules()},0)},getPath:function(t,e){var i,o,r,s,a=t.split(/[._]/g);for(o=a.length;o>=0;o-=1)if(i=a.slice(0,o+1).join("."),n[i]){r=i;break}return r in n?(s=n[r],/\/$/.test(s)||(s+="/"),o<a.length&&(s+=a.slice(o+1).join("/")+"/"),e||(s+="lib.js"),s):null},setPath:function(t,e){n[t.replace(/_/,".")]=e},loadScript:function(t,n){if(-1===t.indexOf("/")){var i=t;if(t=this.getPath(t),null===t)throw new Error('Could not load script "'+i+'". Path not found in the registry. Did you misspell the name, or forgot to call setPath()?')}var o=e.createElement("script");o.setAttribute("type",n||"text/javascript"),o.setAttribute("src",t),"onerror"in o&&(o.onerror=function(){Ink.error(["Failed to load script from ",t,"."].join(""))});var r=e.head||e.getElementsByTagName("head")[0];return r?r.appendChild(o):void 0},_loadLater:function(t){setTimeout(function(){i[t]||r[t]||a[t]||(r[t]=!0,Ink.loadScript(t))},0)},namespace:function(e,n){if(!e||!e.length)return null;for(var i,o=e.split("."),r=t,s=0,a=o.length;a>s;++s)r[o[s]]=r[o[s]]||{},i=r,r=r[o[s]];return n?[i,o[s-1]]:r},getModule:function(t,e){var n=e?[t,"_",e].join(""):t;return i[n]},createModule:function(e,n,s,l){if("string"!=typeof e)throw new Error("module name must be a string!");if(!("number"==typeof n||"string"==typeof n&&n.length>0))throw new Error("version number missing!");var u=[e,"_",n].join("");a[u]=!0;var c=function(){if(!i[u]){delete r[u],delete r[e];var s=Array.prototype.slice.call(arguments),c=l.apply(t,s);o.push(u),"object"==typeof c?c._version=n:"function"==typeof c&&(c.prototype._version=n,c._version=n);var d,p=0===e.indexOf("Ink.");p&&(d=Ink.namespace(e,!0)),i[u]=c,delete a[u],p&&(d[0][d[1]+"_"+n]=c),i[e]=c,p&&h(d[0][d[1]])&&(d[0][d[1]]=c),this&&Ink._checkPendingRequireModules()}};this.requireModules(s,c)},requireModules:function(t,e){var n,o,a,l,h;if(o=t&&t.length,a={args:new Array(o),left:{},remaining:o,cb:e},"object"!=typeof t||void 0===t.length)throw new Error("Dependency list should be an array!");if("function"!=typeof e)throw new Error("Callback should be a function!");for(n=0;o>n;++n)Ink._moduleRenames[t[n]]?(Ink.warn(t[n]+" was renamed to "+Ink._moduleRenames[t[n]]),l=Ink._moduleRenames[t[n]]):l=t[n],l?(h=i[l],h?(a.args[n]=h,--a.remaining):(r[l]||Ink._loadLater(l),a.left[l]=n)):--a.remaining;a.remaining>0?s.push(a):e.apply(!0,a.args)},_moduleRenames:{"Ink.UI.Aux_1":"Ink.UI.Common_1"},getModulesLoadOrder:function(){return o.slice()},getModuleScripts:function(){var t=this.getModulesLoadOrder();return t.unshift("Ink_1"),t=t.map(function(t){return["<scr",'ipt type="text/javascript" src="',Ink.getModuleURL(t),'"></scr',"ipt>"].join("")}),t.join("\n")},createExt:function(t,e,n,i){return Ink.createModule("Ink.Ext."+t,e,n,i)},bind:function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments),o=n.concat(i);return t.apply(e===!1?this:e,o)}},bindMethod:function(t,e){return Ink.bind.apply(Ink,[t[e],t].concat([].slice.call(arguments,2)))},bindEvent:function(e,n){var i=Array.prototype.slice.call(arguments,2);return function(o){var r=i.slice();return r.unshift(o||t.event),e.apply(n===!1?this:n,r)}},i:function(t){return"string"==typeof t?e.getElementById(t)||null:t},ss:function(t,n){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(t,n||e)},s:function(t,n){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(t,n||e)[0]||null},extendObj:function(t){for(var e=[].slice.call(arguments,1),n=0,i=e.length;i>n;n++)if(e[n])for(var o in e[n])Object.prototype.hasOwnProperty.call(e[n],o)&&(t[o]=e[n][o]);return t},log:function(){var e=t.console;e&&e.log&&l.call(e.log,e,arguments)},warn:function(){var e=t.console;e&&e.warn&&l.call(e.warn,e,arguments)},error:function(){var e=t.console;e&&e.error&&l.call(e.error,e,arguments)}}}}(window,document),Ink.createModule("Ink.Net.Ajax","1",[],function(){"use strict";var Ajax=function(t,e){this.init(t,e)};Ajax.globalOptions={parameters:{},requestHeaders:{}};var xMLHttpRequestWithCredentials="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest;return Ajax.prototype={init:function(t,e){if(!t)throw new Error("new Ink.Net.Ajax: Pass a url as the first argument!");var n=Ink.extendObj({asynchronous:!0,contentType:"application/x-www-form-urlencoded",cors:!1,validateCors:!1,debug:!1,delay:0,evalJS:!0,method:"POST",parameters:null,postBody:"",requestHeaders:null,sanitizeJSON:!1,signRequest:!1,timeout:0,useCredentials:!1,xhrProxy:"",onComplete:null,onCreate:null,onException:null,onFailure:null,onHeaders:null,onInit:null,onSuccess:null,onTimeout:null},Ajax.globalOptions);if(e&&"object"==typeof e){if(n=Ink.extendObj(n,e),"object"==typeof e.parameters)n.parameters=Ink.extendObj(Ink.extendObj({},Ajax.globalOptions.parameters),e.parameters);else if(null!==e.parameters){var i=this.paramsObjToStr(Ajax.globalOptions.parameters);i&&(n.parameters=e.parameters+"&"+i)}n.requestHeaders=Ink.extendObj({},Ajax.globalOptions.requestHeaders),n.requestHeaders=Ink.extendObj(n.requestHeaders,e.requestHeaders)}this.options=n,this.safeCall("onInit"),this.url=t;var o=this._locationFromURL(t);this.isHTTP=this._locationIsHTTP(o),this.isCrossDomain=this._locationIsCrossDomain(o,location),this.requestHasBody=n.method.search(/^get|head$/i)<0,this.options.validateCors===!0&&(this.options.cors=this.isCrossDomain),this.options.cors&&(this.isCrossDomain=!1),this.transport=this.getTransport(),this.request()},_locationFromURL:function(t){var e=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","a"):document.createElement("a");return e.setAttribute("href",t),e},_locationIsHTTP:function(t){return t.href.match(/^https?:/i)?!0:!1},_locationIsCrossDomain:function(t,e){if(e=e||window.location,Ajax.prototype._locationIsHTTP(t)&&"widget:"!==e.protocol&&"object"!=typeof window.widget){var n=t.href.split("//"),i=e.href.split("//");if(1===n.length||1===i.length)return!1;var o=n[0],r=i[0],s=/:|\//,a=n[1].split(s)[0],l=i[1].split(s)[0];return o!==r||a!==l}return!1},getTransport:function(){if(!xMLHttpRequestWithCredentials&&this.options.cors&&"XDomainRequest"in window)return this.usingXDomainReq=!0,new XDomainRequest;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"==typeof ActiveXObject)return null;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){return new ActiveXObject("Microsoft.XMLHTTP")}},setHeaders:function(){if(this.transport)try{var t={Accept:"text/javascript,text/xml,application/xml,application/xhtml+xml,text/html,application/json;q=0.9,text/plain;q=0.8,video/x-mng,image/png,image/jpeg,image/gif;q=0.2,*/*;q=0.1","Accept-Language":navigator.language,"X-Requested-With":"XMLHttpRequest","X-Ink-Version":"3"};if(this.options.cors&&(this.options.signRequest||delete t["X-Requested-With"],delete t["X-Ink-Version"]),this.options.requestHeaders&&"object"==typeof this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&(t[e]=this.options.requestHeaders[e]);this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005&&(t.Connection="close");for(var n in t)t.hasOwnProperty(n)&&this.transport.setRequestHeader(n,t[n])}catch(i){}},paramsObjToStr:function(t){var e,n,i,o,r=[];if("object"!=typeof t)return t;for(i in t)if(t.hasOwnProperty(i))if(o=t[i],"[object Array]"!==Object.prototype.toString.call(o)||isNaN(o.length))r=r.concat([encodeURIComponent(i),"=",encodeURIComponent(o),"&"]);else for(e=0,n=o.length;n>e;e++)r=r.concat([encodeURIComponent(i),"[]","=",encodeURIComponent(o[e]),"&"]);return r.length>0&&r.pop(),r.join("")},setParams:function(){var t=null,e=this.options.parameters;t="object"==typeof e?this.paramsObjToStr(e):""+e,t&&(this.url=this.url.indexOf("?")>-1?this.url.split("#")[0]+"&"+t:this.url.split("#")[0]+"?"+t)},getHeader:function(t){if(this.usingXDomainReq&&"Content-Type"===t)return this.transport.contentType;try{return this.transport.getResponseHeader(t)}catch(e){return null}},getAllHeaders:function(){try{return this.transport.getAllResponseHeaders()}catch(t){return null}},getResponse:function(){var t=this.transport,e={headerJSON:null,responseJSON:null,getHeader:this.getHeader,getAllHeaders:this.getAllHeaders,request:this,transport:t,timeTaken:new Date-this.startTime,requestedUrl:this.url};e.readyState=t.readyState;try{e.responseText=t.responseText}catch(n){}try{e.responseXML=t.responseXML}catch(n){}try{e.status=t.status}catch(n){e.status=0}try{e.statusText=t.statusText}catch(n){e.statusText=""}return e},abort:function(){if(this.transport){clearTimeout(this.delayTimeout),clearTimeout(this.stoTimeout),this._aborted=!0;try{this.transport.abort()}catch(t){}this.finish()}},runStateChange:function(){if(!this._aborted){var t=this.transport.readyState;if(3===t)this.isHTTP&&this.safeCall("onHeaders");else if(4===t||this.usingXDomainReq){if(this.options.asynchronous&&this.options.delay&&this.startTime+this.options.delay>(new Date).getTime())return void(this.delayTimeout=setTimeout(Ink.bind(this.runStateChange,this),this.options.delay+this.startTime-(new Date).getTime()));var e,n=this.transport.responseText,i=this.getResponse(),o=this.transport.status;this.isHTTP&&!this.options.asynchronous&&this.safeCall("onHeaders"),clearTimeout(this.stoTimeout),0===o?this.isHTTP?this.safeCall("onException",new Error("Ink.Net.Ajax: network error! (HTTP status 0)")):o=n?200:404:304===o&&(o=200);var r=this.usingXDomainReq||o>=200&&300>o,s=this.getHeader("Content-Type")||"";if(this.options.evalJS&&(s.indexOf("application/json")>=0||"force"===this.options.evalJS))try{e=this.evalJSON(n,this.sanitizeJSON),e&&(n=i.responseJSON=e)}catch(a){r&&this.safeCall("onException",a)}if(this.usingXDomainReq&&-1!==s.indexOf("xml")&&"DOMParser"in window){var l;switch(s){case"application/xml":case"application/xhtml+xml":case"image/svg+xml":l=s;break;default:l="text/xml"}var h=(new DOMParser).parseFromString(this.transport.responseText,l);this.transport.responseXML=h,i.responseXML=h}null!=this.transport.responseXML&&null==i.responseJSON&&""!==this.transport.responseXML.xml&&(n=this.transport.responseXML),(o||this.usingXDomainReq)&&(r?this.safeCall("onSuccess",i,n):this.safeCall("onFailure",i,n),this.safeCall("on"+o,i,n)),this.finish(i,n)}}},finish:function(t,e){if(t&&this.safeCall("onComplete",t,e),clearTimeout(this.stoTimeout),this.transport){try{this.transport.onreadystatechange=null}catch(n){}"function"==typeof this.transport.destroy&&this.transport.destroy(),this.transport=null}},safeCall:function(t){var e=arguments[1]instanceof Error?arguments[1]:null;if("function"==typeof this.options[t])try{this.options[t].apply(this,[].slice.call(arguments,1))}catch(n){Ink.error("Ink.Net.Ajax: an error was raised while executing "+t+".",n)}else e&&Ink.error("Ink.Net.Ajax: "+e)},setRequestHeader:function(t,e){this.options.requestHeaders||(this.options.requestHeaders={}),this.options.requestHeaders[t]=e},request:function(){if(this.transport){var t=null;this.requestHasBody?(null!==this.options.postBody&&""!==this.options.postBody?(t=this.options.postBody,this.setParams()):null!==this.options.parameters&&""!==this.options.parameters&&(t=this.options.parameters),"object"!=typeof t||t.nodeType?"object"!=typeof t&&null!==t&&(t=""+t):t=this.paramsObjToStr(t),this.options.contentType&&this.setRequestHeader("Content-Type",this.options.contentType)):this.setParams();var e=this.url,n=this.options.method,i=this.isCrossDomain;i&&this.options.xhrProxy&&(this.setRequestHeader("X-Url",e),e=this.options.xhrProxy+encodeURIComponent(e),i=!1);try{this.transport.open(n,e,this.options.asynchronous)}catch(o){return this.safeCall("onException",o),this.finish(this.getResponse(),null)}this.setHeaders(),this.safeCall("onCreate"),this.options.timeout&&!isNaN(this.options.timeout)&&(this.stoTimeout=setTimeout(Ink.bind(function(){this.options.onTimeout&&(this.safeCall("onTimeout"),this.abort())},this),1e3*this.options.timeout)),this.options.useCredentials&&!this.usingXDomainReq&&(this.transport.withCredentials=!0),this.options.asynchronous&&!this.usingXDomainReq?this.transport.onreadystatechange=Ink.bind(this.runStateChange,this):this.usingXDomainReq&&(this.transport.onload=Ink.bind(this.runStateChange,this));try{if(i)return void Ink.error("Ink.Net.Ajax: You are attempting to request a URL which is cross-domain from this one. To do this, you *must* enable the `cors` option!");this.startTime=(new Date).getTime(),this.transport.send(t)}catch(o){return this.safeCall("onException",o),this.finish(this.getResponse(),null)}this.options.asynchronous||this.runStateChange()}},isJSON:function(t){return"string"==typeof t&&t?(t=t.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(t)):!1},evalJSON:function(strJSON,sanitize){if(strJSON&&(!sanitize||this.isJSON(strJSON)))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("Ink.Net.Ajax: Bad JSON string. "+e)}return null}},Ajax.load=function(t,e){var n=Ajax.prototype._locationIsCrossDomain(window.location,Ajax.prototype._locationFromURL(t));return new Ajax(t,{method:"GET",cors:n,onSuccess:function(t){e(t.responseJSON||t.responseText,t)}})},Ajax.ping=function(t,e){var n=Ajax.prototype._locationIsCrossDomain(window.location,Ajax.prototype._locationFromURL(t));return new Ajax(t,{method:"HEAD",cors:n,onSuccess:function(t){"function"==typeof e&&e(t)}})},Ajax}),Ink.createModule("Ink.Net.JsonP","1",[],function(){"use strict";var t=function(t,e){this.init(t,e)};return t.prototype={init:function(t,e){if(this.options=Ink.extendObj({onSuccess:void 0,onFailure:void 0,failureObj:{},timeout:10,params:{},callbackParam:"jsoncallback",internalCallback:"_cb",randVar:!1},e||{}),this.randVar=this.options.randVar!==!1?this.options.randVar:parseInt(1e5*Math.random(),10),this.options.internalCallback+=this.randVar,this.uri=t,"function"==typeof this.options.onComplete&&(this.options.onSuccess=this.options.onComplete),"string"!=typeof this.uri)throw new Error("Ink.Net.JsonP: Please define an URI");if("function"!=typeof this.options.onSuccess)throw new Error("Ink.Net.JsonP: please define a callback function on option onSuccess!");Ink.Net.JsonP[this.options.internalCallback]=Ink.bind(function(){this.options.onSuccess(arguments[0]),this._cleanUp()},this),this.timeout=setTimeout(Ink.bind(function(){this.abort(),"function"==typeof this.options.onFailure&&this.options.onFailure(this.options.failureObj)},this),1e3*this.options.timeout),this._addScriptTag()},abort:function(){Ink.Net.JsonP[this.options.internalCallback]=Ink.bindMethod(this,"_cleanUp")},_addParamsToGet:function(t,e){var n,i,o,r=-1!==t.indexOf("?"),s=[t];for(i in e)e.hasOwnProperty(i)&&(r?n="&":(n="?",r=!0),o=e[i],"number"==typeof o||o||(o=""),s=s.concat([n,i,"=",encodeURIComponent(o)]));return s.join("")},_getScriptContainer:function(){return document.body||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement},_addScriptTag:function(){this.options.params[this.options.callbackParam]="Ink.Net.JsonP."+this.options.internalCallback,this.options.params.rnd_seed=this.randVar,this.uri=this._addParamsToGet(this.uri,this.options.params),this._scriptEl=document.createElement("script"),this._scriptEl.type="text/javascript",this._scriptEl.src=this.uri;var t=this._getScriptContainer();t.appendChild(this._scriptEl)},_cleanUp:function(){this.timeout&&window.clearTimeout(this.timeout),delete this.options.onSuccess,delete this.options.onFailure,delete Ink.Net.JsonP[this.options.internalCallback],this._removeScriptTag()},_removeScriptTag:function(){this._scriptEl&&(this._scriptEl.parentNode.removeChild(this._scriptEl),delete this._scriptEl)}},t}),Ink.createModule("Ink.Dom.Browser","1",[],function(){"use strict";var t={IE:!1,GECKO:!1,OPERA:!1,SAFARI:!1,KONQUEROR:!1,CHROME:!1,model:!1,version:!1,userAgent:!1,cssPrefix:!1,domPrefix:!1,init:function(){this.detectBrowser(),this.setDimensions(),this.setReferrer()},setDimensions:function(){var t=0,e=0;"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(t=document.body.clientWidth,e=document.body.clientHeight),this.windowWidth=t,this.windowHeight=e},setReferrer:function(){this.referrer=document.referrer&&document.referrer.length?window.escape(document.referrer):!1},detectBrowser:function(){this._sniffUserAgent(navigator.userAgent)},_sniffUserAgent:function(t){if(this.userAgent=t,t=t.toLowerCase(),/applewebkit\//.test(t))if(this.cssPrefix="-webkit-",this.domPrefix="Webkit",/(chrome|crios)\//.test(t))this.CHROME=!0,this.model="chrome",this.version=t.replace(/(.*)chrome\/([^\s]+)(.*)/,"$2");else{this.SAFARI=!0,this.model="safari";var e=/version\/([^) ]+)/;this.version=e.test(t)?t.match(e)[1]:t.replace(/(.*)applewebkit\/([^\s]+)(.*)/,"$2")}else if(/opera/.test(t))this.OPERA=!0,this.model="opera",this.version=t.replace(/(.*)opera.([^\s$]+)(.*)/,"$2"),this.cssPrefix="-o-",this.domPrefix="O";else if(/konqueror/.test(t))this.KONQUEROR=!0,this.model="konqueror",this.version=t.replace(/(.*)konqueror\/([^;]+);(.*)/,"$2"),this.cssPrefix="-khtml-",this.domPrefix="Khtml";else if(/(msie|trident)/i.test(t))this.IE=!0,this.model="ie",this.version=/rv:((?:\d|\.)+)/.test(t)?t.match(/rv:((?:\d|\.)+)/)[1]:t.replace(/(.*)\smsie\s([^;]+);(.*)/,"$2"),this.cssPrefix="-ms-",this.domPrefix="ms";else if(/gecko/.test(t)){this.cssPrefix="-moz-",this.domPrefix="Moz",this.GECKO=!0;var n=/(camino|chimera|epiphany|minefield|firefox|firebird|phoenix|galeon|iceweasel|k\-meleon|seamonkey|netscape|songbird|sylera)/;if(n.test(t))this.model=t.match(n)[1],this.version=t.replace(new RegExp("(.*)"+this.model+"/([^;\\s$]+)(.*)"),"$2");else{this.model="mozilla";var i=/(.*)rv:([^)]+)(.*)/;i.test(t)&&(this.version=t.replace(i,"$2"))}}},debug:function(){var t="known browsers: (ie, gecko, opera, safari, konqueror) \n";t+=[this.IE,this.GECKO,this.OPERA,this.SAFARI,this.KONQUEROR]+"\n",t+="cssPrefix -> "+this.cssPrefix+"\n",t+="domPrefix -> "+this.domPrefix+"\n",t+="model -> "+this.model+"\n",t+="version -> "+this.version+"\n",t+="\n",t+="original UA -> "+this.userAgent,alert(t)}};return t.init(),t}),Ink.createModule("Ink.Dom.Css",1,[],function(){"use strict";var t="defaultView"in document&&"getComputedStyle"in document.defaultView?document.defaultView.getComputedStyle:window.getComputedStyle,e={addRemoveClassName:function(t,e,n){return n?this.addClassName(t,e):void this.removeClassName(t,e)},addClassName:function(t,n){if(t=Ink.i(t),!t||!n)return null;n=(""+n).split(/[, ]+/);for(var i=0,o=n.length;o>i;i++)n[i].replace(/^\s+|\s+$/g,"")&&("undefined"!=typeof t.classList?t.classList.add(n[i]):e.hasClassName(t,n[i])||(t.className+=(t.className?" ":"")+n[i]))},removeClassName:function(t,e){if(t=Ink.i(t),!t||!e)return null;e=(""+e).split(/[, ]+/);var n=0,i=e.length;if("undefined"!=typeof t.classList)for(;i>n;n++)t.classList.remove(e[n]);else{for(var o,r=t.className||"";i>n;n++)o=new RegExp("(^|\\s+)"+e[n]+"(\\s+|$)"),r=r.replace(o," ");t.className=r.replace(/^\s+/,"").replace(/\s+$/,"")}},setClassName:function(t,e,n){this.addRemoveClassName(t,e,n||!1)},hasClassName:function(t,e,n){if(t=Ink.i(t),!t||!e)return!1;e=(""+e).split(/[, ]+/);for(var i,o,r=0,s=e.length;s>r;r++){if("undefined"!=typeof t.classList)i=t.classList.contains(e[r]);else{var a=t.className;a===e[r]?i=!0:(o=new RegExp("(^|\\s)"+e[r]+"(\\s|$)"),i=o.test(a))}if(i&&!n)return!0;if(!i&&n)return!1}return n?!0:!1},blinkClass:function(t,n,i,o){t=Ink.i(t),e.addRemoveClassName(t,n,!o),setTimeout(function(){e.addRemoveClassName(t,n,o)},Number(i)||100)},toggleClassName:function(t,n,i){return t&&n?"undefined"!=typeof i?e.addRemoveClassName(t,n,i):void("undefined"==typeof t.classList||/[, ]/.test(n)?e.hasClassName(t,n)?e.removeClassName(t,n):e.addClassName(t,n):(t=Ink.i(t),null!==t&&t.classList.toggle(n))):!1
},setOpacity:function(t,e){if(t=Ink.i(t),null!==t){var n=1;isNaN(Number(e))||(n=0>=e?0:1>=e?e:100>=e?e/100:1),"undefined"!=typeof t.style.opacity?t.style.opacity=n:t.style.filter="alpha(opacity:"+(100*n|0)+")"}},_camelCase:function(t){return t?t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}):t},getStyle:function(e,n){if(e=Ink.i(e),null!==e&&e.style){n="float"===n?"cssFloat":this._camelCase(n);var i=e.style[n];if(!t||i&&"auto"!==i)!i&&e.currentStyle&&(i=e.currentStyle[n],"auto"!==i||"width"!==n&&"height"!==n||(i=e["offset"+n.charAt(0).toUpperCase()+n.slice(1)]+"px"));else{var o=t(e,null);i=o?o[n]:null}if("opacity"===n)return i?parseFloat(i,10):1;if("borderTopWidth"===n||"borderBottomWidth"===n||"borderRightWidth"===n||"borderLeftWidth"===n){if("thin"===i)return"1px";if("medium"===i)return"3px";if("thick"===i)return"5px"}return"auto"===i?null:i}},setStyle:function(t,e){if(t=Ink.i(t),null!==t)if("string"==typeof e)t.style.cssText+="; "+e,-1!==e.indexOf("opacity")&&this.setOpacity(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]);else for(var n in e)e.hasOwnProperty(n)&&("opacity"===n?this.setOpacity(t,e[n]):"float"===n||"cssFloat"===n?"undefined"==typeof t.style.styleFloat?t.style.cssFloat=e[n]:t.style.styleFloat=e[n]:t.style[n]=e[n])},show:function(t,e){t=Ink.i(t),null!==t&&(t.style.display=e||"")},hide:function(t){t=Ink.i(t),null!==t&&(t.style.display="none")},showHide:function(t,e){t=Ink.i(t),t&&(t.style.display=e?"":"none")},toggle:function(t,e){t=Ink.i(t),null!==t&&("undefined"!=typeof e?e===!0?this.show(t):this.hide(t):"none"===this.getStyle(t,"display").toLowerCase()?this.show(t):this.hide(t))},_getRefTag:function(t){if(t.firstElementChild)return t.firstElementChild;for(var e=t.firstChild;e;e=e.nextSibling)if(1===e.nodeType)return e;return null},appendStyleTag:function(t,e,n){n=Ink.extendObj({type:"text/css",force:!1},n||{});var i,o,r=document.getElementsByTagName("style"),s=!1,a=!0;for(i=0,o=r.length;o>i;i++)s=r[i].innerHTML,s.indexOf(t)>=0&&(a=!1);if(a){var l=document.createElement("style"),h=document.getElementsByTagName("head")[0],u=!1,c="";l.type=n.type,c+=t+" {",c+=e,c+="} ","undefined"!=typeof l.styleSheet?l.styleSheet.cssText=c:l.appendChild(document.createTextNode(c)),n.force?h.appendChild(l):(u=this._getRefTag(h),u&&h.insertBefore(l,u))}},appendStylesheet:function(t,e){e=Ink.extendObj({media:"screen",type:"text/css",force:!1},e||{});var n,i=document.createElement("link"),o=document.getElementsByTagName("head")[0];i.media=e.media,i.type=e.type,i.href=t,i.rel="Stylesheet",e.force?o.appendChild(i):(n=this._getRefTag(o),n&&o.insertBefore(i,n))},_loadingCSSFiles:{},_loadedCSSFiles:{},appendStylesheetCb:function(t,e){if(!t)return e(t);if(this._loadedCSSFiles[t])return e(t);var n=this._loadingCSSFiles[t];if(n)return n.push(e);this._loadingCSSFiles[t]=[e];var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t;var o=document.getElementsByTagName("head")[0];o.appendChild(i);var r=document.createElement("img");r.onerror=Ink.bindEvent(function(t,e){var n=e;this._loadedCSSFiles[n]=!0;for(var i=this._loadingCSSFiles[n],o=0,r=i.length;r>o;++o)i[o](n);delete this._loadingCSSFiles[n]},this,t),r.src=t},decToHex:function(t){var e=function(t){return 1===t.length&&(t="0"+t),t=t.toUpperCase()};if("object"==typeof t){var n=e(parseInt(t.r,10).toString(16)),i=e(parseInt(t.g,10).toString(16)),o=e(parseInt(t.b,10).toString(16));return n+i+o}t+="";var r=t.match(/\((\d+),\s?(\d+),\s?(\d+)\)/);return null!==r?e(parseInt(r[1],10).toString(16))+e(parseInt(r[2],10).toString(16))+e(parseInt(r[3],10).toString(16)):e(parseInt(t,10).toString(16))},hexToDec:function(t){return 0===t.indexOf("#")&&(t=t.substr(1)),6===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16)}:3===t.length?{r:parseInt(t.charAt(0)+t.charAt(0),16),g:parseInt(t.charAt(1)+t.charAt(1),16),b:parseInt(t.charAt(2)+t.charAt(2),16)}:t.length<=2?parseInt(t,16):void 0},getPropertyFromStylesheet:function(t,e){var n=this.getRuleFromStylesheet(t);return n?n.style[e]:null},getPropertyFromStylesheet2:function(t,e){for(var n,i=this.getRulesFromStylesheet(t),o=0,r=i.length;r>o;o++)if(n=i[o].style[e],null!==n&&void 0!==n)return n;return null},getRuleFromStylesheet:function(t){var e,n,i,o,r,s=document.styleSheets;if(!s)return null;for(var a=0,l=document.styleSheets.length;l>a;++a){if(e=document.styleSheets[a],n=e.rules?e.rules:e.cssRules,!n)return null;for(i=0,o=n.length;o>i;++i)if(r=n[i],r.selectorText&&r.selectorText===t)return r}return null},getRulesFromStylesheet:function(t){var e,n,i,o,r,s=[],a=document.styleSheets;if(!a)return s;for(var l=0,h=document.styleSheets.length;h>l;++l){if(e=document.styleSheets[l],n=e.rules?e.rules:e.cssRules,!n)return null;for(i=0,o=n.length;o>i;++i)r=n[i],r.selectorText&&r.selectorText===t&&s.push(r)}return s},getPropertiesFromRule:function(t){var e,n,i,o=this.getRuleFromStylesheet(t),r={};o=o.style.cssText;var s,a,l,h,u=o.split(";");for(n=0,i=u.length;i>n;++n)" "===u[n].charAt(0)&&(u[n]=u[n].substring(1)),s=u[n].split(":"),e=this._camelCase(s[0].toLowerCase()),a=s[1],a&&(a=a.substring(1),"padding"===e||"margin"===e||"borderWidth"===e?("borderWidth"===e?(l="border",h="Width"):(l=e,h=""),-1!==a.indexOf(" ")?(a=a.split(" "),r[l+"Top"+h]=a[0],r[l+"Bottom"+h]=a[0],r[l+"Left"+h]=a[1],r[l+"Right"+h]=a[1]):(r[l+"Top"+h]=a,r[l+"Bottom"+h]=a,r[l+"Left"+h]=a,r[l+"Right"+h]=a)):"borderRadius"===e?-1!==a.indexOf(" ")?(a=a.split(" "),r.borderTopLeftRadius=a[0],r.borderBottomRightRadius=a[0],r.borderTopRightRadius=a[1],r.borderBottomLeftRadius=a[1]):(r.borderTopLeftRadius=a,r.borderTopRightRadius=a,r.borderBottomLeftRadius=a,r.borderBottomRightRadius=a):r[e]=a);return r},changeFontSize:function(t,e,n,i,o){var r=this;Ink.requireModules(["Ink.Dom.Selector_1"],function(s){var a;if("string"!=typeof t?a="1st argument must be a CSS selector rule.":"number"!=typeof e?a="2nd argument must be a number.":void 0!==n&&"+"!==n&&"*"!==n?a='3rd argument must be one of "+", "*".':void 0!==i&&("number"!=typeof i||0>=i)?a="4th argument must be a positive number.":void 0!==o&&("number"!=typeof o||o>o)&&(a="5th argument must be a positive number greater than minValue."),a)throw new TypeError(a);var l,h,u=s.select(t);void 0===i&&(i=1),n="*"===n?function(t,e){return t*e}:function(t,e){return t+e};for(var c=0,d=u.length;d>c;++c)h=u[c],l=parseFloat(r.getStyle(h,"fontSize")),l=n(l,e),i>l||"number"==typeof o&&l>o||(h.style.fontSize=l+"px")})}};return e}),Ink.createModule("Ink.Dom.Element",1,[],function(){"use strict";function t(t){var e={};try{e=t.getBoundingClientRect()}catch(n){e={top:t.offsetTop,left:t.offsetLeft}}return e}var e="function"==typeof document.createRange&&"function"==typeof window.Range.prototype.createContextualFragment,n="Ink.Dom.Element tbody: "+Math.random(),i=function(){var t=document.createElement("div");return t.innerHTML="<table>",0!==t.getElementsByTagName("tbody").length}(),o={isDOMElement:function(t){return null!==t&&"object"==typeof t&&"nodeType"in t&&1===t.nodeType},get:function(t){return"undefined"!=typeof t?"string"==typeof t?document.getElementById(t):t:null},create:function(t,e){var n=document.createElement(t);if(e)for(var i in e)e.hasOwnProperty(i)&&(i in o?o[i](n,e[i]):"className"===i||"class"===i?n.className=e.className||e["class"]:n.setAttribute(i,e[i]));return n},remove:function(t){t=Ink.i(t);var e;t&&(e=t.parentNode)&&e.removeChild(t)},scrollTo:function(t){if(t=o.get(t)){if(t.scrollIntoView)return t.scrollIntoView();var e={},n=0,i=0;do n+=t.offsetTop||0,i+=t.offsetLeft||0,t=t.offsetParent;while(t);e={x:i,y:n},window.scrollTo(e.x,e.y)}},offsetTop:function(t){return o.offset(t)[1]},offsetLeft:function(t){return o.offset(t)[0]},positionedOffset:function(t){var e=0,n=0;t=o.get(t);do if(e+=t.offsetTop||0,n+=t.offsetLeft||0,t=t.offsetParent){if("body"===t.tagName.toLowerCase())break;var i=t.style.position;if(!i&&t.currentStyle&&(i=t.currentStyle.position),(!i||"auto"===i)&&"undefined"!=typeof getComputedStyle){var r=getComputedStyle(t,null);i=r?r.position:null}if("relative"===i||"absolute"===i)break}while(t);return[n,e]},offset:function(e){e=Ink.i(e);var n=[0,0],i=e.ownerDocument,o=i.documentElement,r=t(e),s=i.body,a=o.clientTop||s.clientTop||0,l=o.clientLeft||s.clientLeft||0,h=i.pageYOffset||o.scrollTop||s.scrollTop,u=i.pageXOffset||o.scrollLeft||s.scrollLeft,c=r.top+h-a,d=r.left+u-l;return n=[d,c]},scroll:function(t){return t=t?Ink.i(t):document.body,[window.pageXOffset?window.pageXOffset:t.scrollLeft,window.pageYOffset?window.pageYOffset:t.scrollTop]},_getPropPx:function(t,e){var n,i,o=t.getPropertyValue?t.getPropertyValue(e):t[e];return o?(i=o.indexOf("px"),n=-1===i?0:parseFloat(o,10)):n=0,n},offset2:function(t){return o.offset(t)},hasAttribute:function(t,e){return t=Ink.i(t),t.hasAttribute?t.hasAttribute(e):!!t.getAttribute(e)},insertAfter:function(t,e){(e=o.get(e))&&(null!==e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t))},insertBefore:function(t,e){(e=o.get(e))&&e.parentNode.insertBefore(t,e)},insertTop:function(t,e){(e=o.get(e))&&(e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t))},insertBottom:function(t,e){e=Ink.i(e),e.appendChild(t)},textContent:function(t){t=Ink.i(t);var e,n,i,r;switch(t&&t.nodeType){case 9:return o.textContent(t.documentElement||t.body&&t.body.parentNode||t.body);case 1:if(e="textContent"in t?t.textContent:t.innerText,"undefined"!=typeof e)return e;case 11:if(e=t.textContent,"undefined"!=typeof e)return e;if(t.firstChild===t.lastChild)return o.textContent(t.firstChild);for(e=[],i=t.childNodes,n=0,r=i.length;r>n;++n)e.push(o.textContent(i[n]));return e.join("");case 3:case 4:return t.nodeValue}return""},setTextContent:function(t,e){switch(t=Ink.i(t),t&&t.nodeType){case 1:if("innerText"in t){t.innerText=e;break}case 11:if("textContent"in t){t.textContent=e;break}case 9:for(;t.firstChild;)t.removeChild(t.firstChild);if(""!==e){var n=t.ownerDocument||t;t.appendChild(n.createTextNode(e))}break;case 3:case 4:t.nodeValue=e}},isLink:function(t){var e=t&&1===t.nodeType&&(/^a|area$/i.test(t.tagName)||t.hasAttributeNS&&t.hasAttributeNS("http://www.w3.org/1999/xlink","href"));return!!e},isAncestorOf:function(t,e){if(!e||!t)return!1;if(e.compareDocumentPosition)return 0!==(16&t.compareDocumentPosition(e));for(;e=e.parentNode;)if(e===t)return!0;return!1},descendantOf:function(t,e){return t!==e&&o.isAncestorOf(t,e)},firstElementChild:function(t){if(!t)return null;if("firstElementChild"in t)return t.firstElementChild;for(var e=t.firstChild;e&&1!==e.nodeType;)e=e.nextSibling;return e},lastElementChild:function(t){if(!t)return null;if("lastElementChild"in t)return t.lastElementChild;for(var e=t.lastChild;e&&1!==e.nodeType;)e=e.previousSibling;return e},nextElementSibling:function(t){var e=null;if(!t)return e;if("nextElementSibling"in t)return t.nextElementSibling;for(e=t.nextSibling;e&&1!==e.nodeType;)e=e.nextSibling;return e},previousElementSibling:function(t){var e=null;if(!t)return e;if("previousElementSibling"in t)return t.previousElementSibling;for(e=t.previousSibling;e&&1!==e.nodeType;)e=e.previousSibling;return e},elementWidth:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.offsetWidth},elementHeight:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.offsetHeight},elementLeft:function(t){return o.offsetLeft(t)},elementTop:function(t){return o.offsetTop(t)},elementDimensions:function(t){return t=Ink.i(t),[t.offsetWidth,t.offsetHeight]},outerDimensions:function(e){var n=t(e),i=Ink.getModule("Ink.Dom.Css_1"),o=Ink.bindMethod(i,"getStyle",e);return[n.right-n.left+parseFloat(o("marginLeft")||0)+parseFloat(o("marginRight")||0),n.bottom-n.top+parseFloat(o("marginTop")||0)+parseFloat(o("marginBottom")||0)]},inViewport:function(e,n){var i=t(Ink.i(e));return"boolean"==typeof n&&(n={partial:n,margin:0}),n=Ink.extendObj({partial:!1,margin:0},n||{}),n.partial?i.bottom+n.margin>0&&i.left-n.margin<o.viewportWidth()&&i.top-n.margin<o.viewportHeight()&&i.right+n.margin>0:i.top+n.margin>0&&i.right-n.margin<o.viewportWidth()&&i.bottom-n.margin<o.viewportHeight()&&i.left+n.margin>0},isHidden:function(t){var e=t.offsetWidth,n=t.offsetHeight,i="tr"===t.tagName.toLowerCase(),o=Ink.getModule("Ink.Dom.Css_1");return 0!==e||0!==n||i?0===e||0===n||i?"none"===o.getStyle(t,"display").toLowerCase():!1:!0},isVisible:function(t){return!this.isHidden(t)},clonePosition:function(t,e){var n=o.offset(e);return t.style.left=n[0]+"px",t.style.top=n[1]+"px",t},ellipsizeText:function(t){(t=Ink.i(t))&&(t.style.overflow="hidden",t.style.whiteSpace="nowrap",t.style.textOverflow="ellipsis")},findUpwardsHaving:function(t,e){for(;t&&1===t.nodeType;){if(e(t))return t;t=t.parentNode}return!1},findUpwardsByClass:function(t,e){var n=new RegExp("(^|\\s)"+e+"(\\s|$)"),i=function(t){var e=t.className;return e&&n.test(e)};return o.findUpwardsHaving(t,i)},findUpwardsByTag:function(t,e){e=e.toUpperCase();var n=function(t){return t.nodeName&&t.nodeName.toUpperCase()===e};return o.findUpwardsHaving(t,n)},findUpwardsById:function(t,e){var n=function(t){return t.id===e};return o.findUpwardsHaving(t,n)},findUpwardsBySelector:function(t,e){var n=Ink.getModule("Ink.Dom.Selector","1");if(!n)throw new Error("This method requires Ink.Dom.Selector");var i=function(t){return n.matchesSelector(t,e)};return o.findUpwardsHaving(t,i)},getChildrenText:function(t,e){var n,i,r,s=t.childNodes,a=s.length,l="";if(!t)return l;for(i=0;a>i;++i)n=s[i],n&&3===n.nodeType&&(r=o._trimString(String(n.data)),r.length>0?(l+=r,e&&t.removeChild(n)):t.removeChild(n));return l},_trimString:function(t){return String.prototype.trim?t.trim():t.replace(/^\s*/,"").replace(/\s*$/,"")},getSelectValues:function(t){for(var e=Ink.i(t),n=[],i=0;i<e.options.length;++i)n.push(e.options[i].value);return n},_normalizeData:function(t){for(var e,n=[],i=0,o=t.length;o>i;++i)e=t[i],e instanceof Array?1===e.length&&e.push(e[0]):e=[e,e],n.push(e);return n},fillSelect:function(t,e,n,i){var r=Ink.i(t);if(r){r.innerHTML="";var s,a;n||(a=document.createElement("option"),a.setAttribute("value",""),r.appendChild(a)),e=o._normalizeData(e);for(var l=0,h=e.length;h>l;++l)s=e[l],a=document.createElement("option"),a.setAttribute("value",s[0]),s.length>2&&a.setAttribute("extra",s[2]),a.appendChild(document.createTextNode(s[1])),s[0]===i&&a.setAttribute("selected","selected"),r.appendChild(a)}},fillRadios:function(t,e,n,i,r,s){t=Ink.i(t);var a=document.createElement("span");o.insertAfter(a,t),n=o._normalizeData(n);var l,h;i||(h=document.createElement("input"),h.setAttribute("type","radio"),h.setAttribute("name",e),h.setAttribute("value",""),a.appendChild(h),s&&a.appendChild(document.createElement(s)));for(var u=0;u<n.length;++u)l=n[u],h=document.createElement("input"),h.setAttribute("type","radio"),h.setAttribute("name",e),h.setAttribute("value",l[0]),a.appendChild(h),a.appendChild(document.createTextNode(l[1])),s&&a.appendChild(document.createElement(s)),l[0]===r&&(h.checked=!0);return a},fillChecks:function(t,e,n,i,r){t=Ink.i(t);var s=document.createElement("span");o.insertAfter(s,t),n=o._normalizeData(n),"]"!==e.substring(e.length-1)&&(e+="[]");for(var a,l,h=0;h<n.length;++h)a=n[h],l=document.createElement("input"),l.setAttribute("type","checkbox"),l.setAttribute("name",e),l.setAttribute("value",a[0]),s.appendChild(l),s.appendChild(document.createTextNode(a[1])),r&&s.appendChild(document.createElement(r)),a[0]===i&&(l.checked=!0);return s},parentIndexOf:function(t,e){if(e||(e=t,t=t.parentNode),!t)return!1;for(var n=0,i=t.children.length;i>n;++n)if(t.children[n]===e)return n;return!1},nextSiblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=o.parentIndexOf(t.parentNode,t),r=++i,s=n.length;s>r;r++)e.push(n[r]);return e}return[]},previousSiblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=o.parentIndexOf(t.parentNode,t),r=0,s=i;s>r;r++)e.push(n[r]);return e}return[]},siblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=0,o=n.length;o>i;i++)t!==n[i]&&e.push(n[i]);return e}return[]},childElementCount:function(t){return t=Ink.i(t),"childElementCount"in t?t.childElementCount:t?o.siblings(t).length+1:0},_wrapElements:{TABLE:function(t,e){return t.innerHTML=i?"<table>"+e+"<tbody><tr><td>"+n+"</tr></td></tbody></table>":"<table>"+e+"</table>",t.firstChild},TBODY:function(t,e){return t.innerHTML="<table><tbody>"+e+"</tbody></table>",t.firstChild.getElementsByTagName("tbody")[0]},THEAD:function(t,e){return t.innerHTML="<table><thead>"+e+"</thead><tbody></tbody></table>",t.firstChild.getElementsByTagName("thead")[0]},TFOOT:function(t,e){return t.innerHTML="<table><tfoot>"+e+"</tfoot><tbody></tbody></table>",t.firstChild.getElementsByTagName("tfoot")[0]},TR:function(t,e){return t.innerHTML="<table><tbody><tr>"+e+"</tr></tbody></table>",t.firstChild.firstChild.firstChild}},_getWrapper:function(t,e){var r=t.nodeName&&t.nodeName.toUpperCase(),s=document.createElement("div"),a=o._wrapElements[r];if(!a)return s.innerHTML=e,s;if(s=a(s,e),i&&"TABLE"===r)for(var l=s.getElementsByTagName("td"),h=0,u=l.length;u>h;h++)if(l[h].innerHTML===n){var c=l[h].parentNode.parentNode;c.parentNode.removeChild(c)}return s},appendHTML:function(t,e){if(t=Ink.i(t),null!==t)for(var n=o._getWrapper(t,e);n.firstChild;)t.appendChild(n.firstChild)},prependHTML:function(t,e){if(t=Ink.i(t),null!==t)for(var n=o._getWrapper(t,e);n.lastChild;)t.insertBefore(n.lastChild,t.firstChild)},setHTML:function(t,e){if(t=Ink.i(t),null!==t)try{t.innerHTML=e}catch(n){o.clear(t),o.appendHTML(t,e)}},wrap:function(t,e){t=Ink.i(t),e=Ink.i(e);var n=t.nextSibling,i=t.parentNode;return e.appendChild(t),null!==n?i.insertBefore(e,n):i.appendChild(e),e},unwrap:function(t,e){t=Ink.i(t);var n;n="string"==typeof e?o.findUpwardsBySelector(t,e):"object"==typeof e&&e.tagName?o.findUpwardsHaving(t,function(t){return t===e}):t.parentNode,n&&n.parentNode&&o.insertBefore(t,n)},replace:function(t,e){t=Ink.i(t),null!==t&&t.parentNode.replaceChild(e,t)},removeTextNodeChildren:function(t){if(t=Ink.i(t),null!==t){var e,n,i=t;for(t=t.firstChild;t;)n=3===t.nodeType,e=t,t=t.nextSibling,n&&i.removeChild(e)}},htmlToFragment:e?function(t){var e;return"string"!=typeof t?document.createDocumentFragment():(e=document.createRange(),e.selectNode(document.body),e.createContextualFragment(t))}:function(t){var e,n,i=document.createDocumentFragment();if("string"!=typeof t)return i;for(e=document.createElement("div"),e.innerHTML=t;n=e.firstChild;)i.appendChild(n);return i},_camelCase:function(t){return t?t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}):t},data:function(t){var e;if("object"!=typeof t&&"string"!=typeof t)throw"[Ink.Dom.Element.data] :: Invalid selector defined";if("object"==typeof t)e=t;else{var n=Ink.getModule("Ink.Dom.Selector",1);if(!n)throw"[Ink.Dom.Element.data] :: this method requires Ink.Dom.Selector - v1";if(e=n.select(t),e.length<=0)throw"[Ink.Dom.Element.data] :: Can't find any element with the specified selector";e=e[0]}var i,r,s,a={},l=e.attributes||[];if(l)for(var h=0,u=l.length;u>h;++h)i=l[h],r=i.name,s=i.value,r&&0===r.indexOf("data-")&&(a[o._camelCase(r.replace("data-",""))]=s);return a},clear:function(t,e){for(;e=t.lastChild;)t.removeChild(e)},moveCursorTo:function(t,e){if(t=Ink.i(t),null!==t)if(t.setSelectionRange)t.setSelectionRange(e,e);else{var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}},pageWidth:function(){var t;t=window.innerWidth&&window.scrollMaxX?window.innerWidth+window.scrollMaxX:document.body.scrollWidth>document.body.offsetWidth?document.body.scrollWidth:document.body.offsetWidth;var e;return window.self.innerWidth?e=document.documentElement.clientWidth?document.documentElement.clientWidth:window.self.innerWidth:document.documentElement&&document.documentElement.clientWidth?e=document.documentElement.clientWidth:document.body&&(e=document.body.clientWidth),e>t?t:e},pageHeight:function(){var t;t=window.innerHeight&&window.scrollMaxY?window.innerHeight+window.scrollMaxY:document.body.scrollHeight>document.body.offsetHeight?document.body.scrollHeight:document.body.offsetHeight;var e;return window.self.innerHeight?e=window.self.innerHeight:document.documentElement&&document.documentElement.clientHeight?e=document.documentElement.clientHeight:document.body&&(e=document.body.clientHeight),e>t?e:t},viewportWidth:function(){return"undefined"!=typeof window.innerWidth?window.innerWidth:document.documentElement&&"undefined"!=typeof document.documentElement.offsetWidth?document.documentElement.offsetWidth:void 0},viewportHeight:function(){return"undefined"!=typeof window.innerHeight?window.innerHeight:document.documentElement&&"undefined"!=typeof document.documentElement.offsetHeight?document.documentElement.offsetHeight:void 0},scrollWidth:function(){return"undefined"!=typeof window.self.pageXOffset?window.self.pageXOffset:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft},scrollHeight:function(){return"undefined"!=typeof window.self.pageYOffset?window.self.pageYOffset:"undefined"!=typeof document.body&&"undefined"!=typeof document.body.scrollTop&&"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollTop?document.body.scrollTop||document.documentElement.scrollTop:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}};return o}),Ink.createModule("Ink.Dom.Event",1,[],function(){var t=function(t,e,n){return n()}("bean",this,function(t,e){t=t||"bean",e=e||this;var n,i=window,o=e[t],r=/[^\.]*(?=\..*)\.|.*/,s=/\..*/,a="addEventListener",l="removeEventListener",h=document||{},u=h.documentElement||{},c=u[a],d=c?a:"attachEvent",p={},f=Array.prototype.slice,m=function(t,e){return t.split(e||" ")},_=function(t){return"string"==typeof t},g=function(t){return"function"==typeof t},v="click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll ",y="show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinputreadystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ",b=function(t,e,n){for(n=0;n<e.length;n++)e[n]&&(t[e[n]]=1);return t}({},m(v+(c?y:""))),k=function(){var t="compareDocumentPosition"in u?function(t,e){return e.compareDocumentPosition&&16===(16&e.compareDocumentPosition(t))}:"contains"in u?function(t,e){return e=9===e.nodeType||e===window?u:e,e!==t&&e.contains(t)}:function(t,e){for(;t=t.parentNode;)if(t===e)return 1;return 0},e=function(e){var n=e.relatedTarget;return n?n!==this&&"xul"!==n.prefix&&!/document/.test(this.toString())&&!t(n,this):null==n};return{mouseenter:{base:"mouseover",condition:e},mouseleave:{base:"mouseout",condition:e},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),C=function(){var t=m("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName path"),e=t.concat(m("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement movementX movementY region")),n=e.concat(m("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),o=t.concat(m("char charCode key keyCode keyIdentifier keyLocation location isComposing code")),r=t.concat(m("data")),s=t.concat(m("touches targetTouches changedTouches scale rotation")),a=t.concat(m("data origin source")),l=t.concat(m("state")),c=/over|out/,d=[{reg:/key/i,fix:function(t,e){return e.keyCode=t.keyCode||t.which,o}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(t,n,i){return n.rightClick=3===t.which||2===t.button,n.pos={x:0,y:0},t.pageX||t.pageY?(n.clientX=t.pageX,n.clientY=t.pageY):(t.clientX||t.clientY)&&(n.clientX=t.clientX+h.body.scrollLeft+u.scrollLeft,n.clientY=t.clientY+h.body.scrollTop+u.scrollTop),c.test(i)&&(n.relatedTarget=t.relatedTarget||t[("mouseover"==i?"from":"to")+"Element"]),e}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return n}},{reg:/^text/i,fix:function(){return r}},{reg:/^touch|^gesture/i,fix:function(){return s}},{reg:/^message$/i,fix:function(){return a}},{reg:/^popstate$/i,fix:function(){return l}},{reg:/.*/,fix:function(){return t}}],p={},f=function(t,e,n){if(arguments.length&&(t=t||((e.ownerDocument||e.document||e).parentWindow||i).event,this.originalEvent=t,this.isNative=n,this.isBean=!0,t)){var o,r,s,a,l,h=t.type,u=t.target||t.srcElement;if(this.target=u&&3===u.nodeType?u.parentNode:u,n){if(l=p[h],!l)for(o=0,r=d.length;r>o;o++)if(d[o].reg.test(h)){p[h]=l=d[o].fix;break}for(a=l(t,this,h),o=a.length;o--;)!((s=a[o])in this)&&s in t&&(this[s]=t[s])}}};return f.prototype.preventDefault=function(){if(this.originalEvent.preventDefault)this.originalEvent.preventDefault();else try{this.originalEvent.returnValue=!1}catch(t){}},f.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},f.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},f.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},f.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},f.prototype.clone=function(t){var e=new f(this,this.element,this.isNative);return e.currentTarget=t,e},f}(),I=function(t,e){return c||e||t!==h&&t!==i?t:u},w=function(){var t=function(t,e,n,i){var o=function(n,o){return e.apply(t,i?f.call(o,n?0:1).concat(i):o)},r=function(n,i){return e.__beanDel?e.__beanDel.ft(n.target,t):i},s=n?function(t){var e=r(t,this);return n.apply(e,arguments)?(t&&(t.currentTarget=e),o(t,arguments)):void 0}:function(t){return e.__beanDel&&(t=t.clone(r(t))),o(t,arguments)};return s.__beanDel=e.__beanDel,s},e=function(e,n,i,o,r,s,a){var l,h=k[n];"unload"==n&&(i=T(N,e,n,i,o)),h&&(h.condition&&(i=t(e,i,h.condition,s)),n=h.base||n),this.isNative=l=b[n]&&!!e[d],this.customType=!c&&!l&&n,this.element=e,this.type=n,this.original=o,this.namespaces=r,this.eventType=c||l?n:"propertychange",this.target=I(e,l),this[d]=!!this.target[d],this.root=a,this.handler=t(e,i,null,s)};return e.prototype.inNamespaces=function(t){var e,n,i=0;if(!t)return!0;if(!this.namespaces)return!1;for(e=t.length;e--;)for(n=this.namespaces.length;n--;)t[e]==this.namespaces[n]&&i++;return t.length===i},e.prototype.matches=function(t,e,n){return!(this.element!==t||e&&this.original!==e||n&&this.handler!==n)},e}(),E=function(){var t={},e=function(n,i,o,r,s,a){var l=s?"r":"$";if(i&&"*"!=i){var h,u=0,c=t[l+i],d="*"==n;if(!c)return;for(h=c.length;h>u;u++)if((d||c[u].matches(n,o,r))&&!a(c[u],c,u,i))return}else for(var p in t)p.charAt(0)==l&&e(n,p.substr(1),o,r,s,a)},n=function(e,n,i,o){var r,s=t[(o?"r":"$")+n];if(s)for(r=s.length;r--;)if(!s[r].root&&s[r].matches(e,i,null))return!0;return!1},i=function(t,n,i,o){var r=[];return e(t,n,i,null,o,function(t){return r.push(t)}),r},o=function(e){var n=!e.root&&!this.has(e.element,e.type,null,!1),i=(e.root?"r":"$")+e.type;return(t[i]||(t[i]=[])).push(e),n},r=function(n){e(n.element,n.type,null,n.handler,n.root,function(e,n,i){return n.splice(i,1),e.removed=!0,0===n.length&&delete t[(e.root?"r":"$")+e.type],!1})},s=function(){var e,n=[];for(e in t)"$"==e.charAt(0)&&(n=n.concat(t[e]));return n};return{has:n,get:i,put:o,del:r,entries:s}}(),S=function(t){n=arguments.length?t:h.querySelectorAll?function(t,e){return e.querySelectorAll(t)}:function(){throw new Error("Bean: No selector engine installed")}},x=function(t,e){if(c||!e||!t||t.propertyName=="_on"+e){var n=E.get(this,e||t.type,null,!1),i=n.length,o=0;for(t=new C(t,this,!0),e&&(t.type=e);i>o&&!t.isImmediatePropagationStopped();o++)n[o].removed||n[o].handler.call(this,t)}},D=c?function(t,e,n){t[n?a:l](e,x,!1)}:function(t,e,n,i){var o;n?(E.put(o=new w(t,i||e,function(e){x.call(t,e,i)},x,null,null,!0)),i&&null==t["_on"+i]&&(t["_on"+i]=0),o.target.attachEvent("on"+o.eventType,o.handler)):(o=E.get(t,i||e,x,!0)[0],o&&(o.target.detachEvent("on"+o.eventType,o.handler),E.del(o)))},T=function(t,e,n,i,o){return function(){i.apply(this,arguments),t(e,n,o)}},N=function(t,e,n,i){var o,r,a=e&&e.replace(s,""),l=E.get(t,a,null,!1),h={};for(o=0,r=l.length;r>o;o++)n&&l[o].original!==n||!l[o].inNamespaces(i)||(E.del(l[o]),!h[l[o].eventType]&&l[o][d]&&(h[l[o].eventType]={t:l[o].eventType,c:l[o].type}));for(o in h)h.hasOwnProperty(o)&&(E.has(t,h[o].t,null,!1)||D(t,h[o].t,!1,h[o].c))},O=function(t,e){var i=function(e,i){for(var o,r=_(t)?n(t,i):t;e&&e!==i;e=e.parentNode)for(o=r.length;o--;)if(r[o]===e)return e},o=function(t){var n=i(t.target,this);n&&e.apply(n,arguments)};return o.__beanDel={ft:i,selector:t},o},M=c?function(t,e,n){var o=h.createEvent(t?"HTMLEvents":"UIEvents");o[t?"initEvent":"initUIEvent"](e,!0,!0,i,1),n.dispatchEvent(o)}:function(t,e,n){n=I(n,t),t?n.fireEvent("on"+e,h.createEventObject()):n["_on"+e]++},A=function(t,e,n){var i,o,a,l,h=_(e);if(h&&e.indexOf(" ")>0){for(e=m(e),l=e.length;l--;)A(t,e[l],n);return t}if(o=h&&e.replace(s,""),o&&k[o]&&(o=k[o].base),!e||h)(a=h&&e.replace(r,""))&&(a=m(a,".")),N(t,o,n,a);else if(g(e))N(t,null,e);else for(i in e)e.hasOwnProperty(i)&&A(t,i,e[i]);return t},P=function(t,e,i,o){var a,l,h,u,c,_,v;if(void 0!==i||"object"!=typeof e){for(g(i)?(c=f.call(arguments,3),o=a=i):(a=o,c=f.call(arguments,4),o=O(i,a,n)),h=m(e),this===p&&(o=T(A,t,e,o,a)),u=h.length;u--;)v=E.put(_=new w(t,h[u].replace(s,""),o,a,m(h[u].replace(r,""),"."),c,!1)),_[d]&&v&&D(t,_.eventType,!0,_.customType);return t}for(l in e)e.hasOwnProperty(l)&&P.call(this,t,l,e[l])},L=function(t,e,n,i){return P.apply(null,_(n)?[t,n,e,i].concat(arguments.length>3?f.call(arguments,5):[]):f.call(arguments))},U=function(){return P.apply(p,arguments)},F=function(t,e,n){var i,o,a,l,h,u=m(e);for(i=u.length;i--;)if(e=u[i].replace(s,""),(l=u[i].replace(r,""))&&(l=m(l,".")),l||n||!t[d])for(h=E.get(t,e,null,!1),n=[!1].concat(n),o=0,a=h.length;a>o;o++)h[o].inNamespaces(l)&&h[o].handler.apply(t,n);else M(b[e],e,t);return t},B=function(t,e,n){for(var i,o,r=E.get(e,n,null,!1),s=r.length,a=0;s>a;a++)r[a].original&&(i=[t,r[a].type],(o=r[a].handler.__beanDel)&&i.push(o.selector),i.push(r[a].original),P.apply(null,i));return t},R={on:P,add:L,one:U,off:A,remove:A,clone:B,fire:F,Event:C,setSelectorEngine:S,noConflict:function(){return e[t]=o,this}};if(i.attachEvent){var H=function(){var t,e=E.entries();for(t in e)e[t].type&&"unload"!==e[t].type&&A(e[t].element,e[t].type);i.detachEvent("onunload",H),i.CollectGarbage&&i.CollectGarbage()};i.attachEvent("onunload",H)}return S(Ink.ss),R}),e={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_SPACE:32,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,throttle:function(t,e,n){function i(s){var a=+new Date,l=a-r;if(n.preventDefault&&s&&"function"==typeof s.preventDefault&&s.preventDefault(),l>=e)return r=a,t.apply("bind"in n?n.bind:this,[].slice.call(arguments));var h=this,u=[].slice.call(arguments);o&&clearTimeout(o),o=setTimeout(function(){return o=null,i.apply(h,u)},e-l)}e=e||0,n=n||{};var o,r=0;return i},element:function(t){var e=t.delegationTarget||t.target||"mouseout"===t.type&&t.fromElement||"mouseleave"===t.type&&t.fromElement||"mouseover"===t.type&&t.toElement||"mouseenter"===t.type&&t.toElement||t.srcElement||null;return!e||3!==e.nodeType&&4!==e.nodeType?e:e.parentNode},relatedTarget:function(t){var e=t.relatedTarget||"mouseout"===t.type&&t.toElement||"mouseleave"===t.type&&t.toElement||"mouseover"===t.type&&t.fromElement||"mouseenter"===t.type&&t.fromElement||null;return!e||3!==e.nodeType&&4!==e.nodeType?e:e.parentNode
},findElement:function(t,e,n){for(var i=this.element(t);;){if(i.nodeName.toLowerCase()===e.toLowerCase())return i;if(i=i.parentNode,!i)return n?!1:document;if(!i.parentNode)return n?!1:document}},observe:function(t,e,n,i){return t=Ink.i(t),t?(t.addEventListener?t.addEventListener(e,n,!!i):t.attachEvent("on"+e,n=Ink.bind(n,t)),n):void 0},observeOnce:function(t,n,i,o){var r=function(){return e.stopObserving(t,n,s),i.apply(this,arguments)},s=e.observe(t,n,r,o);return s},observeMulti:function(t,e,n,i){if("string"==typeof t?t=Ink.ss(t):t&&1===t.nodeType&&(t=[t]),!t[0])return!1;for(var o=0,r=t.length;r>o;o++)this.observe(t[o],e,n,i);return n},observeDelegated:function(t,n,i,o){return e.observe(t,n,function(n){var r=e.element(n);if(r&&r!==t)for(var s=r;s!==t&&s!==document&&s;){if(Ink.Dom.Selector_1.matchesSelector(s,i))return n.delegationTarget=s,o(n);s=s.parentNode}})},stopObserving:function(t,e,n,i){t=Ink.i(t),t&&(t.removeEventListener?t.removeEventListener(e,n,!!i):t.detachEvent("on"+e,n))},stop:function(t){null!==t.cancelBubble&&(t.cancelBubble=!0),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),window.attachEvent&&(t.returnValue=!1),null!==t.cancel&&(t.cancel=!0)},stopPropagation:function(t){null!==t.cancelBubble&&(t.cancelBubble=!0),t.stopPropagation&&t.stopPropagation()},stopDefault:function(t){t.preventDefault&&t.preventDefault(),window.attachEvent&&(t.returnValue=!1),null!==t.cancel&&(t.cancel=!0)},pointer:function(t){return{x:this.pointerX(t),y:this.pointerY(t)}},pointerX:function(t){return t.touches&&t.touches[0]&&t.touches[0].pageX||t.pageX||t.clientX},pointerY:function(t){return t.touches&&t.touches[0]&&t.touches[0].pageY||t.pageY||t.clientY},isLeftClick:function(t){if(window.addEventListener){if(0===t.button)return!0;if("touchend"===t.type&&null===t.button)return!0}else if(1===t.button)return!0;return!1},isRightClick:function(t){return 2===t.button},isMiddleClick:function(t){return window.addEventListener?1===t.button:4===t.button},getCharFromKeyboardEvent:function(t,e){var n=t.keyCode,i=String.fromCharCode(n),o=t.shiftKey;if(n>=65&&90>=n)return"boolean"==typeof e&&(o=e),o?i:i.toLowerCase();if(n>=96&&105>=n)return String.fromCharCode(48+(n-96));switch(n){case 109:case 189:return"-";case 107:case 187:return"+"}return i},debug:function(){}};return Ink.extendObj(e,t)}),Ink.createModule("Ink.Dom.FormSerialize",1,["Ink.Util.Array_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n){"use strict";function i(n){return null!=n&&!e.isDOMElement(n)&&(t.isArray(n)||"string"!=typeof n&&"number"==typeof n.length)}function o(t){return i(t)?t:[t]}var r={serialize:function(e,n){n=n||{};var i={},o={},s=this.asPairs(e,{elements:!0,emptyArray:o,outputUnchecked:n.outputUnchecked});return null==s?s:(t.forEach(s,function(t){var e=/\[\]$/.test(t[0]),n=t[0].replace(/\[\]$/,""),s=t[1],a=t[2];s===o?i[n]=[]:r._resultsInArray(a)||e?n in i?(i[n]instanceof Array||(i[n]=[i[n]]),i[n].push(s)):i[n]=e?[s]:s:i[n]=s}),i)},asPairs:function(e,i){function o(t,e,n){a.push(i.elements?[t,e,n]:[t,e])}function s(e){var r=e.nodeName.toLowerCase(),s=(e.type+"").toLowerCase();if("select"===r&&e.multiple){var a=!1;t.forEach(n.select("option:checked",e),function(t){o(e.name,t.value,e),a=!0}),!a&&"emptyArray"in i&&o(e.name,i.emptyArray,e)}else"input"!==r||"checkbox"!==s&&"radio"!==s||!i.outputUnchecked?o(e.name,e.value,e):o(e.name,null,e)}var a=[];if(i=i||{},e=Ink.i(e)){for(var l=t.filter(e.elements,function(t){return r._isSerialized(t,i)}),h=0,u=l.length;u>h;h++)s(l[h]);return a}return null},fillIn:function(t,e){if(!(t=Ink.i(t)))return null;var n;if("object"!=typeof e||i(e)){if(!i(e))return null;n=e}else n=r._objToPairs(e);return r._fillInPairs(t,n)},_objToPairs:function(t){var e,n=[];for(var i in t)if(t.hasOwnProperty(i)){e=o(t[i]);for(var r=0,s=e.length;s>r;r++)n.push([i,e[r]]);0===s&&n.push([i,[]])}return n},_fillInPairs:function(e,n){n=t.groupBy(n,{key:function(t){return t[0].replace(/\[\]$/,"")},adjacentGroups:!0}),n=t.map(n,function(e){var n=t.reduce(e,function(t,e){return[null,t[1].concat([e[1]])]},[null,[]])[1];return[e[0][0],n]});for(var i,s,a,l=0,h=n.length;h>l;l++){if(i=n[l][0],i in e)s=e[i];else{if(!(i+"[]"in e))continue;s=e[i+"[]"],i+="[]"}s=o(s),a=n[l][1],r._fillInOne(i,s,a)}},_fillInOne:function(t,n,i){var o=n[0],s=o.nodeName.toLowerCase(),a=o.getAttribute("type");a=a&&a.toLowerCase();var l="select"===s&&e.hasAttribute(o,"multiple");if("checkbox"===a||"radio"===a)r._fillInBoolean(n,i,"checked");else if(l)r._fillInBoolean(n[0].options,i,"selected");else{n.length!==i.length&&Ink.warn("Form had "+n.length+' inputs named "'+t+'", but received '+i.length+" values.");for(var h=0,u=Math.min(n.length,i.length);u>h;h+=1)n[h].value=i[h]}},_fillInBoolean:function(e,n,i){t.forEach(e,function(e){var o=t.inArray(e.value,n);e[i]=o})},_resultsInArray:function(t){var n=t.getAttribute("type"),i=t.nodeName.toLowerCase();return"checkbox"===n||"select"===i&&e.hasAttribute(t,"multiple")},_isSerialized:function(t,n){if(n=n||{},!e.isDOMElement(t))return!1;if(!e.hasAttribute(t,"name"))return!1;var i=t.nodeName.toLowerCase();return i&&"fieldset"!==i?"checkbox"===t.type||"radio"===t.type?n.outputUnchecked?!0:!!t.checked:!0:!1}};return r}),Ink.createModule("Ink.Dom.Loaded",1,[],function(){"use strict";var t={_contexts:[],run:function(t,e){e||(e=t,t=window);for(var n,i=0,o=this._contexts.length;o>i;i++)if(this._contexts[i][0]===t){n=this._contexts[i][1];break}n||(n={cbQueue:[],win:t,doc:t.document,root:t.document.documentElement,done:!1,top:!0},n.handlers={checkState:Ink.bindEvent(this._checkState,this,n),poll:Ink.bind(this._poll,this,n)},this._contexts.push([t,n]));var r=n.doc.addEventListener;n.add=r?"addEventListener":"attachEvent",n.rem=r?"removeEventListener":"detachEvent",n.pre=r?"":"on",n.det=r?"DOMContentLoaded":"onreadystatechange",n.wet=n.pre+"load";var s=n.handlers.checkState,a=/complete|loaded/.test(n.doc.readyState)&&"about:blank"!==n.win.location.toString();if(a)setTimeout(Ink.bind(function(){e.call(n.win,"lazy")},this),0);else{n.cbQueue.push(e),n.doc[n.add](n.det,s),n.win[n.add](n.wet,s);var l=1;try{l=n.win.frameElement}catch(h){}if(!r&&n.root&&n.root.doScroll){try{n.top=!l}catch(h){}n.top&&this._poll(n)}}},_checkState:function(t,e){if(t&&("readystatechange"!==t.type||/complete|loaded/.test(e.doc.readyState))){var n="load"===t.type?e.win:e.doc;n[e.rem](e.pre+t.type,e.handlers.checkState,!1),this._ready(e)}},_poll:function(t){try{t.root.doScroll("left")}catch(e){return setTimeout(t.handlers.poll,50)}this._ready(t)},_ready:function(t){if(!t.done){t.done=!0;for(var e=0;e<t.cbQueue.length;++e)t.cbQueue[e].call(t.win);t.cbQueue=[]}}};return t}),Ink.createModule("Ink.Dom.Selector",1,[],function(){"use strict";function t(t){return fe.test(t+"")}function e(){var t,e=[];return t=function(n,i){return e.push(n+=" ")>C.cacheLength&&delete t[e.shift()],t[n]=i}}function n(t){return t[F]=!0,t}function i(t){var e=N.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e=null}}function o(t,e,n,i){var o,r,s,a,l,c,d,p,f,m;if((e?e.ownerDocument||e:B)!==N&&T(e),e=e||N,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(M&&!i){if(o=me.exec(t))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&U(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((s=o[3])&&R.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(s)),n}if(R.qsa&&!A.test(t)){if(d=!0,p=F,f=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=h(t),(d=e.getAttribute("id"))?p=d.replace(ve,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+u(c[l]);f=pe.test(t)&&e.parentNode||e,m=c.join(",")}if(m)try{return Q.apply(n,f.querySelectorAll(m)),n}catch(_){}finally{d||e.removeAttribute("id")}}}return v(t.replace(ae,"$1"),e,n,i)}function r(t,e){var n=e&&t,i=n&&(~e.sourceIndex||J)-(~t.sourceIndex||J);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function a(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function l(t){return n(function(e){return e=+e,n(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function h(t,e){var n,i,r,s,a,l,h,u=q[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],h=C.preFilter;a;){(!n||(i=le.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),l.push(r=[])),n=!1,(i=he.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(ae," ")}),a=a.slice(n.length));for(s in C.filter)!(i=de[s].exec(a))||h[s]&&!(i=h[s](i))||(n=i.shift(),r.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?o.error(t):q(t,l).slice(0)}function u(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function c(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=j++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,s){var a,l,h,u=H+" "+r;if(s){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(h=e[F]||(e[F]={}),(l=h[i])&&l[0]===u){if((a=l[1])===!0||a===k)return a===!0}else if(l=h[i]=[u],l[1]=t(e,n,s)||k,l[1]===!0)return!0}}function d(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function p(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,h=null!=e;l>a;a++)(r=t[a])&&(!n||n(r,i,o))&&(s.push(r),h&&e.push(a));return s}function f(t,e,i,o,r,s){return o&&!o[F]&&(o=f(o)),r&&!r[F]&&(r=f(r,s)),n(function(n,s,a,l){var h,u,c,d=[],f=[],m=s.length,_=n||g(e||"*",a.nodeType?[a]:a,[]),v=!t||!n&&e?_:p(_,d,t,a,l),y=i?r||(n?t:m||o)?[]:s:v;if(i&&i(v,y,a,l),o)for(h=p(y,f),o(h,[],a,l),u=h.length;u--;)(c=h[u])&&(y[f[u]]=!(v[f[u]]=c));if(n){if(r||t){if(r){for(h=[],u=y.length;u--;)(c=y[u])&&h.push(v[u]=c);r(null,y=[],h,l)}for(u=y.length;u--;)(c=y[u])&&(h=r?te.call(n,c):d[u])>-1&&(n[h]=!(s[h]=c))}}else y=p(y===s?y.splice(m,y.length):y),r?r(null,s,y,l):Q.apply(s,y)})}function m(t){for(var e,n,i,o=t.length,r=C.relative[t[0].type],s=r||C.relative[" "],a=r?1:0,l=c(function(t){return t===e},s,!0),h=c(function(t){return te.call(e,t)>-1},s,!0),p=[function(t,n,i){return!r&&(i||n!==S)||((e=n).nodeType?l(t,n,i):h(t,n,i))}];o>a;a++)if(n=C.relative[t[a].type])p=[c(d(p),n)];else{if(n=C.filter[t[a].type].apply(null,t[a].matches),n[F]){for(i=++a;o>i&&!C.relative[t[i].type];i++);return f(a>1&&d(p),a>1&&u(t.slice(0,a-1)).replace(ae,"$1"),n,i>a&&m(t.slice(a,i)),o>i&&m(t=t.slice(i)),o>i&&u(t))}p.push(n)}return d(p)}function _(t,e){var i=0,r=e.length>0,s=t.length>0,a=function(n,a,l,h,u){var c,d,f,m=[],_=0,g="0",v=n&&[],y=null!=u,b=S,I=n||s&&C.find.TAG("*",u&&a.parentNode||a),w=H+=null==b?1:Math.random()||.1;for(y&&(S=a!==N&&a,k=i);null!=(c=I[g]);g++){if(s&&c){for(d=0;f=t[d++];)if(f(c,a,l)){h.push(c);break}y&&(H=w,k=++i)}r&&((c=!f&&c)&&_--,n&&v.push(c))}if(_+=g,r&&g!==_){for(d=0;f=e[d++];)f(v,m,a,l);if(n){if(_>0)for(;g--;)v[g]||m[g]||(m[g]=G.call(h));m=p(m)}Q.apply(h,m),y&&!n&&m.length>0&&_+e.length>1&&o.uniqueSort(h)}return y&&(H=w,S=b),v};return r?n(a):a}function g(t,e,n){for(var i=0,r=e.length;r>i;i++)o(t,e[i],n);return n}function v(t,e,n,i){var o,r,s,a,l,c=h(t);if(!i&&1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===e.nodeType&&M&&C.relative[r[1].type]){if(e=(C.find.ID(s.matches[0].replace(be,ke),e)||[])[0],!e)return n;t=t.slice(r.shift().value.length)}for(o=de.needsContext.test(t)?0:r.length;o--&&(s=r[o],!C.relative[a=s.type]);)if((l=C.find[a])&&(i=l(s.matches[0].replace(be,ke),pe.test(r[0].type)&&e.parentNode||e))){if(r.splice(o,1),t=i.length&&u(r),!t)return Q.apply(n,i),n;break}}return E(t,c)(i,e,!M,n,pe.test(t)),n}function y(){}var b,k,C,I,w,E,S,x,D,T,N,O,M,A,P,L,U,F="sizzle"+-new Date,B=window.document,R={},H=0,j=0,z=e(),q=e(),V=e(),W=!1,$=function(){return 0},Y="undefined",J=1<<31,X=[],G=X.pop,K=X.push,Q=X.push,Z=X.slice,te=X.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ee="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=ne.replace("w","w#"),oe="([*^$|!~]?=)",re="\\["+ee+"*("+ne+")"+ee+"*(?:"+oe+ee+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ie+")|)|)"+ee+"*\\]",se=":("+ne+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+re.replace(3,8)+")*)|.*)\\)|)",ae=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),le=new RegExp("^"+ee+"*,"+ee+"*"),he=new RegExp("^"+ee+"*([\\x20\\t\\r\\n\\f>+~])"+ee+"*"),ue=new RegExp(se),ce=new RegExp("^"+ie+"$"),de={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),NAME:new RegExp("^\\[name=['\"]?("+ne+")['\"]?\\]"),TAG:new RegExp("^("+ne.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},pe=/[\x20\t\r\n\f]*[+~]/,fe=/^[^{]+\{\s*\[native code/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/'|\\/g,ye=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,be=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,ke=function(t,e){var n="0x"+e-65536;return n!==n?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Q.apply(X=Z.call(B.childNodes),B.childNodes),X[B.childNodes.length].nodeType}catch(Ce){Q={apply:X.length?function(t,e){K.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=o.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},T=o.setDocument=function(e){var n=e?e.ownerDocument||e:B;return n!==N&&9===n.nodeType&&n.documentElement?(N=n,O=n.documentElement,M=!w(n),R.getElementsByTagName=i(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),R.attributes=i(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),R.getElementsByClassName=i(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",t.getElementsByClassName&&t.getElementsByClassName("e").length?(t.lastChild.className="e",2===t.getElementsByClassName("e").length):!1}),R.getByName=i(function(t){t.id=F+0,t.appendChild(N.createElement("a")).setAttribute("name",F),t.appendChild(N.createElement("i")).setAttribute("name",F),O.appendChild(t);var e=n.getElementsByName&&n.getElementsByName(F).length===2+n.getElementsByName(F+0).length;return O.removeChild(t),e}),R.sortDetached=i(function(t){return t.compareDocumentPosition&&1&t.compareDocumentPosition(N.createElement("div"))}),C.attrHandle=i(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==Y&&"#"===t.firstChild.getAttribute("href")})?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},R.getByName?(C.find.ID=function(t,e){if(typeof e.getElementById!==Y&&M){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(t){var e=t.replace(be,ke);return function(t){return t.getAttribute("id")===e}}):(C.find.ID=function(t,e){if(typeof e.getElementById!==Y&&M){var n=e.getElementById(t);return n?n.id===t||typeof n.getAttributeNode!==Y&&n.getAttributeNode("id").value===t?[n]:void 0:[]}},C.filter.ID=function(t){var e=t.replace(be,ke);return function(t){var n=typeof t.getAttributeNode!==Y&&t.getAttributeNode("id");return n&&n.value===e}}),C.find.TAG=R.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==Y?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},C.find.NAME=R.getByName&&function(t,e){return typeof e.getElementsByName!==Y?e.getElementsByName(name):void 0},C.find.CLASS=R.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==Y&&M?e.getElementsByClassName(t):void 0},P=[],A=[":focus"],(R.qsa=t(n.querySelectorAll))&&(i(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||A.push("\\["+ee+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||A.push(":checked")}),i(function(t){t.innerHTML="<input type='hidden' i=''/>",t.querySelectorAll("[i^='']").length&&A.push("[*^$]="+ee+"*(?:\"\"|'')"),t.querySelectorAll(":enabled").length||A.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),A.push(",.*:")})),(R.matchesSelector=t(L=O.matchesSelector||O.mozMatchesSelector||O.webkitMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&i(function(t){R.disconnectedMatch=L.call(t,"div"),L.call(t,"[s!='']:x"),P.push("!=",se)}),A=new RegExp(A.join("|")),P=P.length&&new RegExp(P.join("|")),U=t(O.contains)||O.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},$=O.compareDocumentPosition?function(t,e){if(t===e)return W=!0,0;var i=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return i?1&i||x&&e.compareDocumentPosition(t)===i?t===n||U(B,t)?-1:e===n||U(B,e)?1:D?te.call(D,t)-te.call(D,e):0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var i,o=0,s=t.parentNode,a=e.parentNode,l=[t],h=[e];if(t===e)return W=!0,0;if(!s||!a)return t===n?-1:e===n?1:s?-1:a?1:0;if(s===a)return r(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)h.unshift(i);for(;l[o]===h[o];)o++;return o?r(l[o],h[o]):l[o]===B?-1:h[o]===B?1:0},N):N},o.matches=function(t,e){return o(t,null,null,e)},o.matchesSelector=function(t,e){if((t.ownerDocument||t)!==N&&T(t),e=e.replace(ye,"='$1']"),R.matchesSelector&&M&&(!P||!P.test(e))&&!A.test(e))try{var n=L.call(t,e);if(n||R.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(i){}return o(e,N,null,[t]).length>0},o.contains=function(t,e){return(t.ownerDocument||t)!==N&&T(t),U(t,e)},o.attr=function(t,e){var n;return(t.ownerDocument||t)!==N&&T(t),M&&(e=e.toLowerCase()),(n=C.attrHandle[e])?n(t):!M||R.attributes?t.getAttribute(e):((n=t.getAttributeNode(e))||t.getAttribute(e))&&t[e]===!0?e:n&&n.specified?n.value:null},o.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},o.uniqueSort=function(t){var e,n=[],i=0,o=0;if(W=!R.detectDuplicates,x=!R.sortDetached,D=!R.sortStable&&t.slice(0),t.sort($),W){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return t},I=o.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=I(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i];i++)n+=I(e);return n},C=o.selectors={cacheLength:50,createPseudo:n,match:de,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(be,ke),t[3]=(t[4]||t[5]||"").replace(be,ke),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||o.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&o.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return de.CHILD.test(t[0])?null:(t[4]?t[2]=t[4]:n&&ue.test(n)&&(e=h(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(be,ke).toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+ee+")"+t+"("+ee+"|$)"))&&z(t,function(t){return e.test(t.className||typeof t.getAttribute!==Y&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=o.attr(i,t);return null==r?"!="===e:e?(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r+" ").indexOf(n)>-1:"|="===e?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var h,u,c,d,p,f,m=r!==s?"nextSibling":"previousSibling",_=e.parentNode,g=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(_){if(r){for(;m;){for(c=e;c=c[m];)if(a?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?_.firstChild:_.lastChild],s&&v){for(u=_[F]||(_[F]={}),h=u[t]||[],p=h[0]===H&&h[1],d=h[0]===H&&h[2],c=p&&_.childNodes[p];c=++p&&c&&c[m]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){u[t]=[H,p,d];break}}else if(v&&(h=(e[F]||(e[F]={}))[t])&&h[0]===H)d=h[1];else for(;(c=++p&&c&&c[m]||(d=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==g:1!==c.nodeType)||!++d||(v&&((c[F]||(c[F]={}))[t]=[H,d]),c!==e)););return d-=o,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,e){var i,r=C.pseudos[t]||C.setFilters[t.toLowerCase()]||o.error("unsupported pseudo: "+t);return r[F]?r(e):r.length>1?(i=[t,t,"",e],C.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,n){for(var i,o=r(t,e),s=o.length;s--;)i=te.call(t,o[s]),t[i]=!(n[i]=o[s])}):function(t){return r(t,0,i)}):r}},pseudos:{not:n(function(t){var e=[],i=[],o=E(t.replace(ae,"$1"));return o[F]?n(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,n,r){return e[0]=t,o(e,null,r,i),!i.pop()}}),has:n(function(t){return function(e){return o(t,e).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||I(e)).indexOf(t)>-1}}),lang:n(function(t){return ce.test(t||"")||o.error("unsupported lang: "+t),t=t.replace(be,ke).toLowerCase(),function(e){var n;do if(n=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(t){var e=window.location&&window.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===O},focus:function(t){return t===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return _e.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[0>n?n+e:n]}),even:l(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:l(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}};for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})C.pseudos[b]=a(b);return E=o.compile=function(t,e){var n,i=[],o=[],r=V[t+" "];if(!r){for(e||(e=h(t)),n=e.length;n--;)r=m(e[n]),r[F]?i.push(r):o.push(r);r=V(t,_(o,i))}return r},C.pseudos.nth=C.pseudos.eq,y.prototype=C.filters=C.pseudos,C.setFilters=new y,R.sortStable=F.split("").sort($).join("")===F,T(),[0,0].sort($),R.detectDuplicates=W,{select:o,matches:o.matches,matchesSelector:o.matchesSelector}}),Ink.createModule("Ink.Util.Array","1",[],function(){"use strict";var t=Array.prototype,e={isArray:Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},groupBy:function(t,n){function i(t){return"function"==typeof n.key?n.key(t):"string"==typeof n.key?t[n.key]:t}function o(t){var e=n.pairs?[t,[]]:[];return a.push(e),s.push(t),e}n=n||{};for(var r,s=[],a=[],l=0,h=t.length;h>l;l++){r=i(t[l]);var u;u=n.adjacentGroups?s[s.length-1]===r?a[a.length-1]:o(r):a[e.keyValue(r,s,!0)]||o(r),n.pairs?u[1].push(t[l]):u.push(t[l])}return a},reduce:function(e,n,i){if(t.reduce)return t.reduce.apply(e,t.slice.call(arguments,1));var o,r=Object(e),s=r.length>>>0,a=0;if(arguments.length>=3)o=i;else{for(;s>a&&!(a in r);)a++;if(a>=s)throw new TypeError("Reduce of empty array with no initial value");o=r[a++]}for(;s>a;a++)a in r&&(o=n(o,r[a],a,r));return o},inArray:function(t,e){if("object"==typeof e)for(var n=0,i=e.length;i>n;++n)if(e[n]===t)return!0;return!1},sortMulti:function(t,e){if("undefined"==typeof t||t.constructor!==Array)return!1;if("string"!=typeof e)return t.sort();if(t.length>0){if("undefined"==typeof t[0][e])return!1;t.sort(function(t,n){var i=t[e],o=n[e];return o>i?-1:i>o?1:0})}return t},keyValue:function(t,e,n){if("undefined"!=typeof t&&"object"==typeof e&&this.inArray(t,e)){for(var i=[],o=0,r=e.length;r>o;++o)if(e[o]===t){if("undefined"!=typeof n&&n===!0)return o;i.push(o)}return i}return!1},shuffle:function(t){if("undefined"!=typeof t&&t.constructor!==Array)return!1;for(var e=t.length,n=!1,i=!1;e--;)i=Math.floor(Math.random()*(e+1)),n=t[e],t[e]=t[i],t[i]=n;return t},forEach:function(e,n,i){if(t.forEach)return t.forEach.call(e,n,i);for(var o=0,r=e.length>>>0;r>o;o++)n.call(i,e[o],o,e)},each:function(){e.forEach.apply(e,t.slice.call(arguments))},map:function(e,n,i){if(t.map)return t.map.call(e,n,i);for(var o=new Array(s),r=0,s=e.length>>>0;s>r;r++)o[r]=n.call(i,e[r],r,e);return o},filter:function(e,n,i){if(t.filter)return t.filter.call(e,n,i);for(var o=[],r=null,s=0,a=e.length;a>s;s++)r=e[s],n.call(i,r,s,e)&&o.push(r);return o},some:function(t,e,n){if(null===t)throw new TypeError("First argument is invalid.");var i=Object(t),o=i.length>>>0;if("function"!=typeof e)throw new TypeError("Second argument must be a function.");for(var r=0;o>r;r++)if(r in i&&e.call(n,i[r],r,i))return!0;return!1},intersect:function(t,e){if(!t||!e||t instanceof Array==0||e instanceof Array==0)return[];for(var n=[],i=0,o=t.length;o>i;++i)for(var r=0,s=e.length;s>r;++r)t[i]===e[r]&&n.push(t[i]);return n},convert:function(e){return t.slice.call(e||[],0)},unique:function(t){if(!Array.prototype.lastIndexOf){var n=[];return e.forEach(e.convert(t),function(t){e.inArray(t,n)||n.push(t)}),n}return e.filter(e.convert(t),function(t,e,n){return n.lastIndexOf(t)===e})},range:function(t,e,n){n||(n=1);var i,o=[];if(n>0)for(i=t;e>i;i+=n)o.push(i);else for(i=t;i>e;i+=n)o.push(i);return o},insert:function(t,e,n){t.splice(e,0,n)},remove:function(t,e,n){for(var i=[],o=0,r=t.length;r>o;o++)o>=e&&e+n>o||i.push(t[o]);return i}};return e}),Ink.createModule("Ink.Util.BinPack","1",[],function(){"use strict";var t=function(t,e){this.init(t,e)};t.prototype={init:function(t,e){this.root={x:0,y:0,w:t,h:e}},fit:function(t){var e,n,i;for(e=0;e<t.length;++e)i=t[e],(n=this.findNode(this.root,i.w,i.h))&&(i.fit=this.splitNode(n,i.w,i.h))},findNode:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.w&&n<=t.h?t:null},splitNode:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,w:t.w,h:t.h-n},t.right={x:t.x+e,y:t.y,w:t.w-e,h:n},t}};var e=function(){};e.prototype={fit:function(t){var e,n,i,o=t.length,r=o>0?t[0].w:0,s=o>0?t[0].h:0;for(this.root={x:0,y:0,w:r,h:s},e=0;o>e;e++)i=t[e],i.fit=(n=this.findNode(this.root,i.w,i.h))?this.splitNode(n,i.w,i.h):this.growNode(i.w,i.h)},findNode:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.w&&n<=t.h?t:null},splitNode:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,w:t.w,h:t.h-n},t.right={x:t.x+e,y:t.y,w:t.w-e,h:n},t},growNode:function(t,e){var n=t<=this.root.w,i=e<=this.root.h,o=i&&this.root.h>=this.root.w+t,r=n&&this.root.w>=this.root.h+e;return o?this.growRight(t,e):r?this.growDown(t,e):i?this.growRight(t,e):n?this.growDown(t,e):null},growRight:function(t,e){this.root={used:!0,x:0,y:0,w:this.root.w+t,h:this.root.h,down:this.root,right:{x:this.root.w,y:0,w:t,h:this.root.h}};var n;return(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null},growDown:function(t,e){this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+e,down:{x:0,y:this.root.h,w:this.root.w,h:e},right:this.root};var n;return(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null}};var n={random:function(){return Math.random()-.5},w:function(t,e){return e.w-t.w},h:function(t,e){return e.h-t.h},a:function(t,e){return e.area-t.area},max:function(t,e){return Math.max(e.w,e.h)-Math.max(t.w,t.h)},min:function(t,e){return Math.min(e.w,e.h)-Math.min(t.w,t.h)},height:function(t,e){return n.msort(t,e,["h","w"])},width:function(t,e){return n.msort(t,e,["w","h"])},area:function(t,e){return n.msort(t,e,["a","h","w"])},maxside:function(t,e){return n.msort(t,e,["max","min","h","w"])},msort:function(t,e,i){var o,r;for(r=0;r<i.length;++r)if(o=n[i[r]](t,e),0!==o)return o;return 0}},i=function(){return[this.w," x ",this.h].join("")},o={binPack:function(o){var r,s,a;for(r=0,s=o.blocks.length;s>r;++r)a=o.blocks[r],"area"in a||(a.area=a.w*a.h);var l=o.dimensions?new t(o.dimensions[0],o.dimensions[1]):new e;o.sorter||(o.sorter="maxside"),o.blocks.sort(n[o.sorter]),l.fit(o.blocks);var h=[l.root.w,l.root.h],u=[],c=[];for(r=0,s=o.blocks.length;s>r;++r)a=o.blocks[r],a.fit?u.push(a):(a.toString=i,c.push(a));var d=h[0]*h[1],p=0;for(r=0,s=u.length;s>r;++r)a=u[r],p+=a.area;return{dimensions:h,filled:p/d,blocks:o.blocks,fitted:u,unfitted:c}}};return o}),Ink.createModule("Ink.Util.Cookie","1",[],function(){"use strict";var t={get:function(t){var e=document.cookie||!1,n={};if(e){e=e.replace(new RegExp("; ","g"),";");var i=e.split(";"),o=[];if(i.length>0)for(var r=0;r<i.length;r++)o=i[r].split("="),2===o.length&&(n[o[0]]=decodeURIComponent(o[1]));if(t)return"undefined"!=typeof n[t]?n[t]:null}return n},set:function(t,e,n,i,o,r){var s;if(!t||e===!1||"undefined"==typeof t||"undefined"==typeof e)return!1;s=t+"="+encodeURIComponent(e);var a=!1,l=!1,h=!1,u=!1;if(n&&"undefined"!=typeof n&&!isNaN(n)){var c=new Date,d=parseInt(Number(c.valueOf()),10)+1e3*Number(parseInt(n,10)),p=new Date(d),f=p.toGMTString(),m=new RegExp("([^\\s]+)(\\s\\d\\d)\\s(\\w\\w\\w)\\s(.*)");f=f.replace(m,"$1$2-$3-$4"),a="expires="+f}else a="undefined"==typeof n||isNaN(n)||0!==Number(parseInt(n,10))?"expires=Thu, 01-Jan-2037 00:00:01 GMT":"";l=i&&"undefined"!=typeof i?"path="+i:"path=/",o?h="domain="+o:/\./.test(window.location.hostname)&&(h="domain="+window.location.hostname),u=r&&"undefined"!=typeof r?r:!1,document.cookie=s+"; "+a+"; "+l+(h?"; "+h:"")+"; "+u},remove:function(t,e,n){var i=-1;this.set(t,"deleted",i,e,n)}};return t}),Ink.createModule("Ink.Util.Date","1",[],function(){"use strict";var t={_months:function(t){var e=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return e[t]},_iMonth:function(t){return Number(t)?+t-1:{janeiro:0,jan:0,fevereiro:1,fev:1,"mar\xe7o":2,mar:2,abril:3,abr:3,maio:4,mai:4,junho:5,jun:5,julho:6,jul:6,agosto:7,ago:7,setembro:8,set:8,outubro:9,out:9,novembro:10,nov:10,dezembro:11,dez:11}[t.toLowerCase()]},_wDays:function(t){var e=["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"];return e[t]},_iWeek:function(t){return Number(t)?+t||7:{segunda:1,seg:1,"ter\xe7a":2,ter:2,quarta:3,qua:3,quinta:4,qui:4,sexta:5,sex:5,"s\xe1bado":6,"s\xe1b":6,domingo:7,dom:7}[t.toLowerCase()]},_daysInMonth:function(t,e){var n;return n=1===t||3===t||5===t||7===t||8===t||10===t||12===t?31:4===t||6===t||9===t||11===t?30:e%400===0||e%4===0&&e%100!==0?29:28},get:function(t,e){("undefined"==typeof t||""===t)&&(t="Y-m-d");var n,i=t.split(""),o=new Array(i.length),r="\\";n="undefined"==typeof e?new Date:new Date("number"==typeof e?1e3*e:e);for(var s,a,l,h=0;h<i.length;h++)switch(i[h]){case r:o[h]=i[h+1],h++;break;case"d":var u=n.getDate();o[h]=String(u).length>1?u:"0"+u;break;case"D":o[h]=this._wDays(n.getDay()).substring(0,3);break;case"j":o[h]=n.getDate();
break;case"l":o[h]=this._wDays(n.getDay());break;case"N":o[h]=n.getDay()||7;break;case"S":var c=n.getDate(),d=["st","nd","rd"],p="";o[h]=c>=11&&13>=c?"th":(p=d[String(c).substr(-1)-1])?p:"th";break;case"w":o[h]=n.getDay();break;case"z":s=Date.UTC(n.getFullYear(),0,0),a=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),o[h]=Math.floor((a-s)/864e5);break;case"W":var f=new Date(n.getFullYear(),0,1);s=f.getDay()||7;var m=Math.floor((n-f)/864e5+1);o[h]=Math.ceil((m-(8-s))/7)+1;break;case"F":o[h]=this._months(n.getMonth());break;case"m":var _=String(n.getMonth()+1);o[h]=_.length>1?_:"0"+_;break;case"M":o[h]=this._months(n.getMonth()).substring(0,3);break;case"n":o[h]=n.getMonth()+1;break;case"t":o[h]=this._daysInMonth(n.getMonth()+1,n.getYear());break;case"L":var g=n.getFullYear();o[h]=g%4?!1:g%100?!0:g%400?!1:!0;break;case"o":throw'"o" not implemented!';case"Y":o[h]=n.getFullYear();break;case"y":o[h]=String(n.getFullYear()).substring(2);break;case"a":o[h]=n.getHours()<12?"am":"pm";break;case"A":o[h]=n.getHours<12?"AM":"PM";break;case"B":throw'"B" not implemented!';case"g":l=n.getHours(),o[h]=12>=l?l:l-12;break;case"G":o[h]=String(n.getHours());break;case"h":l=String(n.getHours()),l=12>=l?l:l-12,o[h]=l.length>1?l:"0"+l;break;case"H":l=String(n.getHours()),o[h]=l.length>1?l:"0"+l;break;case"i":var v=String(n.getMinutes());o[h]=v.length>1?v:"0"+v;break;case"s":var y=String(n.getSeconds());o[h]=y.length>1?y:"0"+y;break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":s=new Date(n.getFullYear(),0,1),o[h]=n.getTimezoneOffset()!==s.getTimezoneOffset()?1:0;break;case"O":var b=n.getTimezoneOffset(),k=b%60;l=String((b-k)/60*-1),"-"!==l.charAt(0)&&(l="+"+l),l=3===l.length?l:l.replace(/([+\-])(\d)/,"$10$2"),o[h]=l+k+"0";break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":o[h]=60*n.getTimezoneOffset();break;case"c":throw'"c" not implemented!';case"r":var C=this._wDays(n.getDay()).substr(0,3),I=this._months(n.getMonth()).substr(0,3);o[h]=C+", "+n.getDate()+" "+I+this.get(" Y H:i:s O",n);break;case"U":o[h]=Math.floor(n.getTime()/1e3);break;default:o[h]=i[h]}return o.join("")},set:function(t,e){if("undefined"!=typeof e){("undefined"==typeof t||""===t)&&(t="Y-m-d");for(var n,i=t.split(""),o=new Array(i.length),r="\\",s={year:void 0,month:void 0,day:void 0,dayY:void 0,dayW:void 0,week:void 0,hour:void 0,hourD:void 0,min:void 0,sec:void 0,msec:void 0,ampm:void 0,diffM:void 0,diffH:void 0,date:void 0},a=0,l=0;l<i.length;l++)switch(i[l]){case r:o[l]=i[l+1],l++;break;case"d":o[l]="(\\d{2})",s.day={original:l,match:a++};break;case"j":o[l]="(\\d{1,2})",s.day={original:l,match:a++};break;case"D":o[l]="([\\w\xe1]{3})",s.dayW={original:l,match:a++};break;case"l":o[l]="([\\w\xe1]{5,7})",s.dayW={original:l,match:a++};break;case"N":o[l]="(\\d)",s.dayW={original:l,match:a++};break;case"w":o[l]="(\\d)",s.dayW={original:l,match:a++};break;case"S":o[l]="\\w{2}";break;case"z":o[l]="(\\d{1,3})",s.dayY={original:l,match:a++};break;case"W":o[l]="(\\d{1,2})",s.week={original:l,match:a++};break;case"F":o[l]="([\\w\xe7]{4,9})",s.month={original:l,match:a++};break;case"M":o[l]="(\\w{3})",s.month={original:l,match:a++};break;case"m":o[l]="(\\d{2})",s.month={original:l,match:a++};break;case"n":o[l]="(\\d{1,2})",s.month={original:l,match:a++};break;case"t":o[l]="\\d{2}";break;case"L":o[l]="\\w{4,5}";break;case"o":throw'"o" not implemented!';case"Y":o[l]="(\\d{4})",s.year={original:l,match:a++};break;case"y":o[l]="(\\d{2})",("undefined"==typeof s.year||"Y"!==i[s.year.original])&&(s.year={original:l,match:a++});break;case"a":o[l]="(am|pm)",s.ampm={original:l,match:a++};break;case"A":o[l]="(AM|PM)",s.ampm={original:l,match:a++};break;case"B":throw'"B" not implemented!';case"g":o[l]="(\\d{1,2})",s.hourD={original:l,match:a++};break;case"G":o[l]="(\\d{1,2})",s.hour={original:l,match:a++};break;case"h":o[l]="(\\d{2})",s.hourD={original:l,match:a++};break;case"H":o[l]="(\\d{2})",s.hour={original:l,match:a++};break;case"i":o[l]="(\\d{2})",s.min={original:l,match:a++};break;case"s":o[l]="(\\d{2})",s.sec={original:l,match:a++};break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":o[l]="\\d";break;case"O":o[l]="([-+]\\d{4})",s.diffH={original:l,match:a++};break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":o[l]="(\\-?\\d{1,5})",s.diffM={original:l,match:a++};break;case"c":throw'"c" not implemented!';case"r":o[l]="([\\w\xe1]{3}, \\d{1,2} \\w{3} \\d{4} \\d{2}:\\d{2}:\\d{2} [+\\-]\\d{4})",s.date={original:l,match:a++};break;case"U":o[l]="(\\d{1,13})",s.date={original:l,match:a++};break;default:o[l]=i[l]}var h=new RegExp(o.join(""));try{if(n=e.match(h),!n)return}catch(u){return}var c,d,p="undefined"!=typeof s.date,f="undefined"!=typeof s.year,m="undefined"!=typeof s.dayY,_="undefined"!=typeof s.day,g="undefined"!=typeof s.month,v=g&&_,y=!g&&_,b="undefined"!=typeof s.dayW,k="undefined"!=typeof s.week,C=k&&b,I=!k&&b,w=m||v||!f&&y||C||!f&&I,E=!(f||m||_||g||b||k),S="undefined"!=typeof s.hourD&&"undefined"!=typeof s.ampm,x="undefined"!=typeof s.hour,D=S||x,T="undefined"!=typeof s.min,N="undefined"!=typeof s.sec,O="undefined"!=typeof s.msec,M=!E||D,A=M||T,P="undefined"!=typeof s.diffM,L="undefined"!=typeof s.diffH;if(p){if("U"===i[s.date.original])return new Date(1e3*+n[s.date.match+1]);var U=n[s.date.match+1].match(/\w{3}, (\d{1,2}) (\w{3}) (\d{4}) (\d{2}):(\d{2}):(\d{2}) ([+\-]\d{4})/);return c=+U[4]+ +U[7].slice(0,3),d=+U[5]+(U[7].slice(0,1)+U[7].slice(3))/100*60,new Date(U[3],this._iMonth(U[2]),U[1],c,d,U[6])}var F,B,R,H,j,z,q=new Date;if(w||E){if(w){if(f){var V=q.getFullYear()-50+"";F=n[s.year.match+1],"y"===i[s.year.original]&&(F=+V.slice(0,2)+(F>=V.slice(2)?0:1)+F)}else F=q.getFullYear();if(m)B=0,R=n[s.dayY.match+1];else if(_)B=g?this._iMonth(n[s.month.match+1]):q.getMonth(),R=n[s.day.match+1];else{B=0;var W;W=k?n[s.week.match+1]:this.get("W",q),R=7*(W-2)+(8-(new Date(F,0,1).getDay()||7))+this._iWeek(n[s.week.match+1])}if(0===B&&R>31){var $=new Date(F,B,R);B=$.getMonth(),R=$.getDate()}}else F=q.getFullYear(),B=q.getMonth(),R=q.getDate();return c=S?+n[s.hourD.match+1]+("pm"===n[s.ampm.match+1]?12:0):x?n[s.hour.match+1]:E?q.getHours():"00",d=T?n[s.min.match+1]:M?"00":q.getMinutes(),H=N?n[s.sec.match+1]:A?"00":q.getSeconds(),j=O?n[s.msec.match+1]:"000",z=L?n[s.diffH.match+1]:P?String(-1*n[s.diffM.match+1]/60*100).replace(/^(\d)/,"+$1").replace(/(^[\-+])(\d{3}$)/,"$10$2"):"+0000",new Date(F,B,R,c,d,H)}}}};return t}),Ink.createModule("Ink.Util.Dumper","1",[],function(){"use strict";var t={_tab:"\xa0\xa0\xa0\xa0",_formatParam:function(t){var e="";switch(typeof t){case"string":e="(string) "+t;break;case"number":e="(number) "+t;break;case"boolean":e="(boolean) "+t;break;case"object":e=null!==t?t.constructor===Array?"Array \n{\n"+this._outputFormat(t,0)+"\n}":"Object \n{\n"+this._outputFormat(t,0)+"\n}":"null";break;default:e=!1}return e},_getTabs:function(t){for(var e="",n=0;t>n;n++)e+=this._tab;return e},_outputFormat:function(t,e){var n="",i=!1;for(var o in t)if(null!==t[o])if("object"!=typeof t[o]||t[o].constructor!==Array&&t[o].constructor!==Object){if(t[o].constructor===Function)continue;n=n+this._tab+this._getTabs(e)+"["+o+"] => "+t[o]+"\n"}else t[o].constructor===Array?i="Array":t[o].constructor===Object&&(i="Object"),n+=this._tab+this._getTabs(e)+"["+o+"] => <b>"+i+"</b>\n",n+=this._tab+this._getTabs(e)+"{\n",n+=this._outputFormat(t[o],e+1)+this._tab+this._getTabs(e)+"}\n";else n=n+this._tab+this._getTabs(e)+"["+o+"] => null \n";return n},printDump:function(t,e){if(e&&"undefined"!=typeof e)if("string"==typeof e)document.getElementById(e).innerHTML="<pre>"+this._formatParam(t)+"</pre>";else{if("object"!=typeof e)throw"TARGET must be an element or an element ID";e.innerHTML="<pre>"+this._formatParam(t)+"</pre>"}else document.write("<pre>"+this._formatParam(t)+"</pre>")},returnDump:function(t){return this._formatParam(t)},alertDump:function(t){window.alert(this._formatParam(t).replace(/(<b>)(Array|Object)(<\/b>)/g,"$2"))},windowDump:function(t){var e="dumperwindow_"+1e4*Math.random(),n=window.open("",e,"width=400,height=300,left=50,top=50,status,menubar,scrollbars,resizable");n.document.open(),n.document.write("<pre>"+this._formatParam(t)+"</pre>"),n.document.close(),n.focus()}};return t}),Ink.createModule("Ink.Util.I18n","1",[],function(){"use strict";var t=/\{(?:(\{.*?})|(?:%s:)?(\d+)|(?:%s)?|([\w-]+))}/g,e=function(t,e){return"function"==typeof t?t.apply(this,e):"undefined"!=typeof t?t:""},n=function(t,e,i){return this instanceof n?void this.reset().lang(e).testMode(i).append(t||{},e):new n(t,e,i)};return n.prototype={reset:function(){return this._dicts=[],this._dict={},this._testMode=!1,this._lang=this._gLang,this},clone:function(){for(var t=new n,e=0,i=this._dicts.length;i>e;e++)t.append(this._dicts[e]);return t.testMode(this.testMode()),t.lang(this.lang()),t},append:function(t){return this._dicts.push(t),this._dict=Ink.extendObj(this._dict,t[this._lang]),this},lang:function(t){if(!arguments.length)return this._lang;if(t&&this._lang!==t){this._lang=t,this._dict={};for(var e=0,n=this._dicts.length;n>e;e++)this._dict=Ink.extendObj(this._dict,this._dicts[e][t]||{})}return this},testMode:function(t){return arguments.length?(void 0!==t&&(this._testMode=!!t),this):!!this._testMode},getKey:function(t){var e,i=this._gLang,o=this._lang;return t in this._dict?e=this._dict[t]:(n.langGlobal(o),e=this._gDict[t],n.langGlobal(i)),e},text:function(n){if("string"==typeof n){var i=Array.prototype.slice.call(arguments,1),o=0,r="object"==typeof i[0],s=this.getKey(n);return void 0===s&&(s=this._testMode?"["+n+"]":n),"number"==typeof s&&(s+=""),"string"==typeof s?s=s.replace(t,function(t,n,s,a){var l=n?n:s?i[s-(r?0:1)]:a?i[0][a]||"":i[o++ +(r?1:0)];return e(l,[o].concat(i))}):"function"==typeof s?s.apply(this,i):s instanceof Array?e(s[i[0]],i):"object"==typeof s?e(s[i[0]],i):""}},ntext:function(t,e,n){var i,o=Array.prototype.slice.apply(arguments);if(2===o.length&&"number"==typeof e){if(i=this.getKey(t),!(i instanceof Array))return"";o.splice(0,1),i=i[1===e?0:1]}else o.splice(0,2),i=1===n?t:e;return this.text.apply(this,[i].concat(o))},ordinal:function(t){if(void 0===t)return"";var n=+t.toString().slice(-1),i=this.getKey("_ordinals");if(void 0===i)return"";if("string"==typeof i)return i;var o;return"function"==typeof i&&(o=i(t,n),"string"==typeof o)?o:"exceptions"in i&&(o="function"==typeof i.exceptions?i.exceptions(t,n):t in i.exceptions?e(i.exceptions[t],[t,n]):void 0,"string"==typeof o)?o:"byLastDigit"in i&&(o="function"==typeof i.byLastDigit?i.byLastDigit(n,t):n in i.byLastDigit?e(i.byLastDigit[n],[n,t]):void 0,"string"==typeof o)?o:"default"in i&&(o=e(i["default"],[t,n]),"string"==typeof o)?o:""},alias:function(){var t=Ink.bind(n.prototype.text,this);return t.ntext=Ink.bind(n.prototype.ntext,this),t.append=Ink.bind(n.prototype.append,this),t.ordinal=Ink.bind(n.prototype.ordinal,this),t.testMode=Ink.bind(n.prototype.testMode,this),t}},n.reset=function(){n.prototype._gDicts=[],n.prototype._gDict={},n.prototype._gLang="pt_PT"},n.reset(),n.appendGlobal=function(t,e){if(e){if(!(e in t)){var i={};i[e]=t,t=i}e!==n.prototype._gLang&&n.langGlobal(e)}n.prototype._gDicts.push(t),Ink.extendObj(n.prototype._gDict,t[n.prototype._gLang])},n.langGlobal=function(t){if(!arguments.length)return n.prototype._gLang;if(t&&n.prototype._gLang!==t){n.prototype._gLang=t,n.prototype._gDict={};for(var e=0,i=n.prototype._gDicts.length;i>e;e++)Ink.extendObj(n.prototype._gDict,n.prototype._gDicts[e][t]||{})}},n}),Ink.createModule("Ink.Util.Json","1",[],function(){"use strict";function twoDigits(t){var e=""+t;return 1===e.length?"0"+e:e}var function_call=Function.prototype.call,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,dateToISOString=Date.prototype.toISOString?Ink.bind(function_call,Date.prototype.toISOString):function(t){return t.getUTCFullYear()+"-"+twoDigits(t.getUTCMonth()+1)+"-"+twoDigits(t.getUTCDate())+"T"+twoDigits(t.getUTCHours())+":"+twoDigits(t.getUTCMinutes())+":"+twoDigits(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},InkJson={_nativeJSON:window.JSON||null,_convertToUnicode:!1,_escape:function(t){var e={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)&&(t=t.replace(/([\x00-\x1f\\"])/g,function(t,n){var i=e[n];return i?i:(i=n.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})),t},_toUnicode:function(t){if(this._convertToUnicode){for(var e="",n=!1,i=!1,o=0,r=t.length;r>o;){if(n=t.charCodeAt(o),n>=32&&126>=n||8===n||9===n||10===n||12===n||13===n||32===n||34===n||47===n||58===n||92===n)i=34===n||92===n||47===n?"\\"+t.charAt(o):8===n?"\\b":9===n?"\\t":10===n?"\\n":12===n?"\\f":13===n?"\\r":t.charAt(o);else if(this._convertToUnicode){for(i=t.charCodeAt(o).toString(16)+"".toUpperCase();i.length<4;)i="0"+i;i="\\u"+i}else i=t.charAt(o);e+=i,o++}return e}return this._escape(t)},_stringifyValue:function(t){if("string"==typeof t)return'"'+this._toUnicode(t)+'"';if("number"!=typeof t||!isNaN(t)&&isFinite(t)){if("undefined"==typeof t||null===t)return"null";if("function"==typeof t.toJSON){var e=t.toJSON();return"string"==typeof e?'"'+this._escape(e)+'"':this._escape(e.toString())}if("number"==typeof t||"boolean"==typeof t)return""+t;if("function"==typeof t)return"null";if(t.constructor===Date)return'"'+this._escape(dateToISOString(t))+'"';if(t.constructor===Array){for(var n="",i=0,o=t.length;o>i;i++)i>0&&(n+=","),n+=this._stringifyValue(t[i]);return"["+n+"]"}var r="";for(var s in t)({}).hasOwnProperty.call(t,s)&&(""!==r&&(r+=","),r+='"'+this._escape(s)+'": '+this._stringifyValue(t[s]));return"{"+r+"}"}return"null"},stringify:function(t,e){return this._convertToUnicode=!!e,!this._convertToUnicode&&this._nativeJSON?this._nativeJSON.stringify(t):this._stringifyValue(t)},parse:function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}};return InkJson}),Ink.createModule("Ink.Util.String","1",[],function(){"use strict";var InkUtilString={_chars:["&","\xe0","\xe1","\xe2","\xe3","\xe4","\xe5","\xe6","\xe7","\xe8","\xe9","\xea","\xeb","\xec","\xed","\xee","\xef","\xf0","\xf1","\xf2","\xf3","\xf4","\xf5","\xf6","\xf8","\xf9","\xfa","\xfb","\xfc","\xfd","\xfe","\xff","\xc0","\xc1","\xc2","\xc3","\xc4","\xc5","\xc6","\xc7","\xc8","\xc9","\xca","\xcb","\xcc","\xcd","\xce","\xcf","\xd0","\xd1","\xd2","\xd3","\xd4","\xd5","\xd6","\xd8","\xd9","\xda","\xdb","\xdc","\xdd","\xde","\u20ac",'"',"\xdf","<",">","\xa2","\xa3","\xa4","\xa5","\xa6","\xa7","\xa8","\xa9","\xaa","\xab","\xac","\xad","\xae","\xaf","\xb0","\xb1","\xb2","\xb3","\xb4","\xb5","\xb6","\xb7","\xb8","\xb9","\xba","\xbb","\xbc","\xbd","\xbe"],_entities:["amp","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","euro","quot","szlig","lt","gt","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34"],_accentedChars:["\xe0","\xe1","\xe2","\xe3","\xe4","\xe5","\xe8","\xe9","\xea","\xeb","\xec","\xed","\xee","\xef","\xf2","\xf3","\xf4","\xf5","\xf6","\xf9","\xfa","\xfb","\xfc","\xe7","\xf1","\xc0","\xc1","\xc2","\xc3","\xc4","\xc5","\xc8","\xc9","\xca","\xcb","\xcc","\xcd","\xce","\xcf","\xd2","\xd3","\xd4","\xd5","\xd6","\xd9","\xda","\xdb","\xdc","\xc7","\xd1"],_accentedRemovedChars:["a","a","a","a","a","a","e","e","e","e","i","i","i","i","o","o","o","o","o","u","u","u","u","c","n","A","A","A","A","A","A","E","E","E","E","I","I","I","I","O","O","O","O","O","U","U","U","U","C","N"],_htmlUnsafeChars:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},ucFirst:function(t,e){var n=e?/(^|\s)(\w)(\S{2,})/:/(^|\s)(\w)(\S{2,})/g;return t?String(t).replace(n,function(t,e,n,i){return e+n.toUpperCase()+i.toLowerCase()}):t},trim:function(t){return"string"==typeof t?t.replace(/^\s+|\s+$|\n+$/g,""):t},stripTags:function(t,e){if(e&&"string"==typeof e){for(var n=InkUtilString.trim(e).split(","),i=[],o=!1,r=0;r<n.length;r++)""!==InkUtilString.trim(n[r])&&(o=InkUtilString.trim(n[r].replace(/(<|\>)/g,"").replace(/\s/,"")),i.push("(<"+o+"\\s[^>]+>|<(\\s|\\/)?(\\s|\\/)?"+o+">)"));for(var s=i.join("|"),a=new RegExp(s,"i"),l=t.match(new RegExp("<[^>]*>","g")),h=0;h<l.length;h++)l[h].match(a)||(t=t.replace(new RegExp(l[h],"gm"),""));return t}return t.replace(/<[^\>]+\>/g,"")},htmlEntitiesEncode:function(t){if(t&&t.replace)for(var e=!1,n=0;n<InkUtilString._chars.length;n++)e=new RegExp(InkUtilString._chars[n],"gm"),t=t.replace(e,"&"+InkUtilString._entities[n]+";");return t},htmlEntitiesDecode:function(t){if(t&&t.replace){for(var e=!1,n=0;n<InkUtilString._entities.length;n++)e=new RegExp("&"+InkUtilString._entities[n]+";","gm"),t=t.replace(e,InkUtilString._chars[n]);t=t.replace(/&#[^;]+;?/g,function(t){return String.fromCharCode("x"===t.charAt(2)?parseInt(t.substring(3),16):parseInt(t.substring(2),10))})}return t},utf8Encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e+=String.fromCharCode(i):i>127&&2048>i?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e},shortString:function(t,e){for(var n=t.split(" "),i="",o=0;o<n.length;o++){if((i+n[o]+" ").length>=e){i+="&hellip;";break}i+=n[o]+" "}return i},truncateString:function(t,e){return t.length-1>e?t.substr(0,e-1)+"\u2026":t},utf8Decode:function(t){for(var e="",n=0,i=0,o=0,r=0;n<t.length;)i=t.charCodeAt(n),128>i?(e+=String.fromCharCode(i),n++):i>191&&224>i?(o=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&o),n+=2):(o=t.charCodeAt(n+1),r=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&r),n+=3);return e},removeAccentedChars:function(t){for(var e=t,n=!1,i=0;i<InkUtilString._accentedChars.length;i++)n=new RegExp(InkUtilString._accentedChars[i],"gm"),e=e.replace(n,""+InkUtilString._accentedRemovedChars[i]);return e},substrCount:function(t,e){return t?t.split(e).length-1:0},evalJSON:function(strJSON,sanitize){if("undefined"==typeof sanitize||null===sanitize||InkUtilString.isJSON(strJSON))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("ERROR: Bad JSON string...")}},isJSON:function(t){return t=t.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(t)},htmlEscapeUnsafe:function(t){var e=InkUtilString._htmlUnsafeChars;return null!==t?String(t).replace(/[<>&'"]/g,function(t){return e[t]}):t},normalizeWhitespace:function(t){return null!==t?InkUtilString.trim(String(t).replace(/\s+/g," ")):t},toUnicode:function(t){if("string"==typeof t){for(var e="",n=!1,i=!1,o=t.length,r=0;o>r;){if(n=t.charCodeAt(r),n>=32&&126>=n||8===n||9===n||10===n||12===n||13===n||32===n||34===n||47===n||58===n||92===n)i=8===n?"\\b":9===n?"\\t":10===n?"\\n":12===n?"\\f":13===n?"\\r":t.charAt(r);else{for(i=t.charCodeAt(r).toString(16)+"".toUpperCase();i.length<4;)i="0"+i;i="\\u"+i}e+=i,r++}return e}},escape:function(t){var e=t.charCodeAt(0).toString(16).split("");if(e.length<3){for(;e.length<2;)e.unshift("0");e.unshift("x")}else{for(;e.length<4;)e.unshift("0");e.unshift("u")}return e.unshift("\\"),e.join("")},unescape:function(t){var e=t.lastIndexOf("0");e=-1===e?2:Math.min(e,2);var n=t.substring(e),i=parseInt(n,16);return String.fromCharCode(i)},escapeText:function(t,e){void 0===e&&(e=["[","]","'",","]);for(var n,i,o=[],r=0,s=t.length;s>r;++r)n=t[r],i=n.charCodeAt(0),(32>i||i>126&&-1===e.indexOf(n))&&(n=InkUtilString.escape(n)),o.push(n);return o.join("")},escapedCharRegex:/(\\x[0-9a-fA-F]{2})|(\\u[0-9a-fA-F]{4})/g,unescapeText:function(t){for(var e;e=InkUtilString.escapedCharRegex.exec(t);)e=e[0],t=t.replace(e,InkUtilString.unescape(e)),InkUtilString.escapedCharRegex.lastIndex=0;return t},strcmp:function(t,e){return t===e?0:t>e?1:-1},packetize:function(t,e){for(var n,i=t.length,o=new Array(Math.ceil(i/e)),r=t.split(""),s=0;i;)n=Math.min(e,i),o[s++]=r.splice(0,n).join(""),i-=n;return o}};return InkUtilString}),Ink.createModule("Ink.Util.Url","1",[],function(){"use strict";var t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",getUrl:function(){return window.location.href},genQueryString:function(t,e){var n,i,o,r=-1!==t.indexOf("?"),s=[t];for(i in e)e.hasOwnProperty(i)&&(r?n="&":(n="?",r=!0),o=e[i],"number"==typeof o||o||(o=""),s=s.concat([n,encodeURIComponent(i),"=",encodeURIComponent(o)]));return s.join("")},getQueryString:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n={};if(e.match(/\?(.+)/i)){var i=e.replace(/^(.*)\?([^\#]+)(\#(.*))?/g,"$2");if(i.length>0)for(var o=i.split(/[;&]/),r=0;r<o.length;r++){var s=o[r].split("=");n[decodeURIComponent(s[0])]="undefined"!=typeof s[1]&&s[1]?decodeURIComponent(s[1]):!1}}return n},getAnchor:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n=!1;return e.match(/#(.+)/)&&(n=e.replace(/([^#]+)#(.*)/,"$2")),n},getAnchorString:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n={};if(e.match(/#(.+)/i)){var i=e.replace(/^([^#]+)#(.*)?/g,"$2");if(i.length>0)for(var o=i.split(/[;&]/),r=0;r<o.length;r++){var s=o[r].split("=");n[decodeURIComponent(s[0])]="undefined"!=typeof s[1]&&s[1]?decodeURIComponent(s[1]):!1}}return n},parseUrl:function(t){var e={};if(t&&"string"==typeof t){if(t.match(/^([^:]+):\/\//i)){var n=/^([^:]+):\/\/([^\/]*)\/?([^\?#]*)\??([^#]*)#?(.*)/i;t.match(n)&&(e.scheme=t.replace(n,"$1"),e.host=t.replace(n,"$2"),e.path="/"+t.replace(n,"$3"),e.query=t.replace(n,"$4")||!1,e.fragment=t.replace(n,"$5")||!1)}else{var i=new RegExp("^([^\\?]+)\\?([^#]+)#(.*)","i"),o=new RegExp("^([^\\?]+)\\?([^#]+)#?","i"),r=new RegExp("^([^\\?]+)\\??","i");t.match(i)?(e.scheme=!1,e.host=!1,e.path=t.replace(i,"$1"),e.query=t.replace(i,"$2"),e.fragment=t.replace(i,"$3")):t.match(o)?(e.scheme=!1,e.host=!1,e.path=t.replace(o,"$1"),e.query=t.replace(o,"$2"),e.fragment=!1):t.match(r)&&(e.scheme=!1,e.host=!1,e.path=t.replace(r,"$1"),e.query=!1,e.fragment=!1)}if(e.host){var s=/^(.*?)\\:(\\d+)$/i;if(e.host.match(s)){var a=e.host;e.host=a.replace(s,"$1"),e.port=a.replace(s,"$2")}else e.port=!1;if(e.host.match(/@/i)){var l=e.host;e.host=l.split("@")[1];var h=l.split("@")[0];h.match(/\:/)?(e.user=h.split(":")[0],e.pass=h.split(":")[1]):(e.user=h,e.pass=!1)}}}return e},format:function(t){var e="",n="",i="",o="",r="";return"string"==typeof t.protocol?e=t.protocol+"//":"string"==typeof t.scheme&&(e=t.scheme+"://"),n=t.host||t.hostname||"",i=t.path||"","string"==typeof t.query?r=t.query:"string"==typeof t.search&&(r=t.search.replace(/^\?/,"")),"string"==typeof t.fragment?o=t.fragment:"string"==typeof t.hash&&(o=t.hash.replace(/#$/,"")),[e,n,i,r&&"?"+r,o&&"#"+o].join("")},currentScriptElement:function(t){var e=document.getElementsByTagName("script");if("undefined"==typeof t)return e.length>0?e[e.length-1]:!1;for(var n=!1,i=new RegExp(""+t,"i"),o=0,r=e.length;r>o;o++)if(n=e[o],i.test(n.src))return n;return!1}};return t}),Ink.createModule("Ink.Util.Validator","1",[],function(){"use strict";var t={_countryCodes:["AO","CV","MZ","TL","PT"],_internacionalPT:351,_indicativosPT:{21:"lisboa",22:"porto",231:"mealhada",232:"viseu",233:"figueira da foz",234:"aveiro",235:"arganil",236:"pombal",238:"seia",239:"coimbra",241:"abrantes",242:"ponte de s\xf4r",243:"santar\xe9m",244:"leiria",245:"portalegre",249:"torres novas",251:"valen\xe7a",252:"vila nova de famalic\xe3o",253:"braga",254:"peso da r\xe9gua",255:"penafiel",256:"s\xe3o jo\xe3o da madeira",258:"viana do castelo",259:"vila real",261:"torres vedras",262:"caldas da ra\xednha",263:"vila franca de xira",265:"set\xfabal",266:"\xe9vora",268:"estremoz",269:"santiago do cac\xe9m",271:"guarda",272:"castelo branco",273:"bragan\xe7a",274:"proen\xe7a-a-nova",275:"covilh\xe3",276:"chaves",277:"idanha-a-nova",278:"mirandela",279:"moncorvo",281:"tavira",282:"portim\xe3o",283:"odemira",284:"beja",285:"moura",286:"castro verde",289:"faro",291:"funchal, porto santo",292:"corvo, faial, flores, horta, pico",295:"angra do hero\xedsmo, graciosa, s\xe3o jorge, terceira",296:"ponta delgada, s\xe3o miguel, santa maria",91:"rede m\xf3vel 91 (Vodafone / Yorn)",93:"rede m\xf3vel 93 (Optimus)",96:"rede m\xf3vel 96 (TMN)",92:"rede m\xf3vel 92 (TODOS)",707:"n\xfamero \xfanico",760:"n\xfamero \xfanico",800:"n\xfamero gr\xe1tis",808:"chamada local",30:"voip"},_internacionalCV:238,_indicativosCV:{2:"fixo",91:"m\xf3vel 91",95:"m\xf3vel 95",97:"m\xf3vel 97",98:"m\xf3vel 98",99:"m\xf3vel 99"},_internacionalAO:244,_indicativosAO:{2:"fixo",91:"m\xf3vel 91",92:"m\xf3vel 92"},_internacionalMZ:258,_indicativosMZ:{2:"fixo",82:"m\xf3vel 82",84:"m\xf3vel 84"},_internacionalTL:670,_indicativosTL:{3:"fixo",7:"m\xf3vel 7"},_characterGroups:{numbers:["0-9"],asciiAlpha:["a-zA-Z"],latin1Alpha:["a-zA-Z","\xc0-\xff"],unicodeAlpha:["a-zA-Z","\xc0-\xff","\u0100-\u1fff","\u2c00-\ud7ff"],space:[" "],dash:["-"],underscore:["_"],nicknamePunctuation:["_.-"],singleLineWhitespace:["	 "],newline:["\n"],whitespace:["	\n\f\r\xa0 "],asciiPunctuation:["!-/",":-@","[-`","{-~"],latin1Punctuation:["!-/",":-@","[-`","{-~","\xa1-\xbf","\xd7","\xf7"],unicodePunctuation:["!-/",":-@","[-`","{-~","\xa1-\xbf","\xd7","\xf7","\u2000-\u206f","\u2e00-\u2e7f","\u3000-\u303f"]},createRegExp:function(e){var n="^[";for(var i in e)if(e.hasOwnProperty(i)){if(!(i in t._characterGroups))throw new Error("group "+i+" is not a valid character group");e[i]&&(n+=t._characterGroups[i].join(""))}return new RegExp("^["===n?"$^":n+"]*?$")},checkCharacterGroups:function(e,n){return t.createRegExp(n).test(e)},unicode:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({unicodeAlpha:!0},n))},latin1:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({latin1Alpha:!0},n))},ascii:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({asciiAlpha:!0},n))},number:function(e,n){if(e+="",n=Ink.extendObj({decimalSep:".",thousandSep:"",negative:!0,decimalPlaces:null,maxDigits:null,max:null,min:null,returnNumber:!1},n||{}),n.thousandSep)return e=e.replace(new RegExp("\\"+n.thousandSep,"g"),""),n.thousandSep="",t.number(e,n);if(n.negative===!1)return n.min=0,n.negative=!0,t.number(e,n);if("."!==n.decimalSep&&(e=e.replace(new RegExp("\\"+n.decimalSep,"g"),".")),!/^(-)?(\d+)?(\.\d+)?$/.test(e)||""===e)return!1;var i;if(n.decimalSep&&-1!==e.indexOf(n.decimalSep)){if(i=e.split(n.decimalSep),null!==n.decimalPlaces&&i[1].length>n.decimalPlaces)return!1}else i=[""+e,""];if(null!==n.maxDigits&&i[0].replace(/-/g,"").length>n.maxDigits)return i;var o=parseFloat(e);return null!==n.maxExcl&&o>=n.maxExcl||null!==n.minExcl&&o<=n.minExcl?!1:null!==n.max&&o>n.max||null!==n.min&&o<n.min?!1:n.returnNumber?o:!0},_isLeapYear:function(t){var e=/^\d{4}$/;return e.test(t)?t%4?!1:t%100?!0:t%400?!1:!0:!1},_dateParsers:{"yyyy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{4})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yyyy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{4})(\/)(\d{1,2})(\/)(\d{1,2})$/},"yy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{2})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{2})(\/)(\d{1,2})(\/)(\d{1,2})$/},"dd-mm-yyyy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{4})$/},"dd/mm/yyyy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{4})$/},"dd-mm-yy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{2})$/},"dd/mm/yy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{2})$/}},_daysInMonth:function(t,e){var n=0;return t=parseInt(t,10),e=parseInt(e,10),1===t||3===t||5===t||7===t||8===t||10===t||12===t?n=31:4===t||6===t||9===t||11===t?n=30:2===t&&(n=e%400===0||e%4===0&&e%100!==0?29:28),n},_isValidDate:function(t,e,n){var i=/^\d{4}$/,o=/^\d{1,2}$/;return i.test(t)&&o.test(e)&&o.test(n)&&e>=1&&12>=e&&n>=1&&this._daysInMonth(e,t)>=n?!0:!1},email:function(t){var e=new RegExp("^[_a-z0-9-]+((\\.|\\+)[_a-z0-9-]+)*@([\\w]*-?[\\w]*\\.)+[a-z]{2,4}$","i");return!!e.test(t)},mail:function(e){return t.email(e)},url:function(t,e){if("undefined"==typeof e||e===!1){var n=new RegExp("(^(http\\:\\/\\/|https\\:\\/\\/)(.+))","i");n.test(t)===!1&&(t="http://"+t)}var i=new RegExp("^(http:\\/\\/|https:\\/\\/)([\\w]*(-?[\\w]*)*\\.)+[a-z]{2,4}","i");return i.test(t)===!1?!1:!0},isPTPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosPT)"string"==typeof this._indicativosPT[n]&&e.push(n);var i=e.join("|"),o=/^(00351|\+351)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{9}/i;if(9===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isPortuguesePhone:function(t){return this.isPTPhone(t)},isCVPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosCV)"string"==typeof this._indicativosCV[n]&&e.push(n);var i=e.join("|"),o=/^(00238|\+238)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{7}/i;if(7===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isAOPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosAO)"string"==typeof this._indicativosAO[n]&&e.push(n);var i=e.join("|"),o=/^(00244|\+244)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{9}/i;if(9===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isMZPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosMZ)"string"==typeof this._indicativosMZ[n]&&e.push(n);var i=e.join("|"),o=/^(00258|\+258)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{8,9}/i;if((9===t.length||8===t.length)&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t)){if(0===t.indexOf("2")&&8===t.length)return!0;if(0===t.indexOf("8")&&9===t.length)return!0}}return!1},isTLPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosTL)"string"==typeof this._indicativosTL[n]&&e.push(n);var i=e.join("|"),o=/^(00670|\+670)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{7}/i;if(7===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isPhone:function(){var t;if(0===arguments.length)return!1;var e=arguments[0];if(arguments.length>1){if(arguments[1].constructor!==Array){if("function"==typeof this["is"+arguments[1].toUpperCase()+"Phone"])return this["is"+arguments[1].toUpperCase()+"Phone"](e);throw"Invalid Country Code!"}var n;for(t=0;t<arguments[1].length;t++){if("function"!=typeof(n=this["is"+arguments[1][t].toUpperCase()+"Phone"]))throw"Invalid Country Code!";if(n(e))return!0}}else for(t=0;t<this._countryCodes.length;t++)if(this["is"+this._countryCodes[t]+"Phone"](e))return!0;return!1},codPostal:function(t,e,n){var i=/^(\s*\-\s*|\s+)$/,o=/^\s+|\s+$/g,r=/^[1-9]\d{3}$/,s=/^\d{3}$/,a=/^(.{4})(.*)(.{3})$/;if(t=t.replace(o,""),"undefined"!=typeof e){if(e=e.replace(o,""),r.test(t)&&s.test(e))return n?[!0,!0]:!0}else{if(r.test(t))return n?[!0,!1]:!0;var l=t.match(a);if(null!==l&&r.test(l[1])&&i.test(l[2])&&s.test(l[3]))return n?[!0,!1]:!0}return n?[!1,!1]:!1},isDate:function(t,e){if("undefined"==typeof this._dateParsers[t])return!1;var n=this._dateParsers[t].year,i=this._dateParsers[t].month,o=this._dateParsers[t].day,r=this._dateParsers[t].parser,s=this._dateParsers[t].sep,a=e.match(r);if(null!==a&&a[2]===a[4]&&a[2]===s){var l=2===a[n].length?"20"+a[n].toString():a[n];if(this._isValidDate(l,a[i].toString(),a[o].toString()))return!0}return!1},isColor:function(t){var e,n=!1,i=/^[a-zA-Z]+$/,o=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,r=/^rgb\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,s=/^rgba\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/,a=/^hsl\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,l=/^hsla\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/;
if(i.test(t)||o.test(t))return!0;var h;if(null!==(e=r.exec(t))||null!==(e=s.exec(t)))for(h=e.length;h--;){if((2===h||4===h||6===h)&&"undefined"!=typeof e[h]&&""!==e[h]){if(!("undefined"!=typeof e[h-1]&&e[h-1]>=0&&e[h-1]<=100))return!1;n=!0}if(1===h||3===h||5===h&&("undefined"==typeof e[h+1]||""===e[h+1])){if(!("undefined"!=typeof e[h]&&e[h]>=0&&e[h]<=255))return!1;n=!0}}if(null!==(e=a.exec(t))||null!==(e=l.exec(t)))for(h=e.length;h--;){if(3===h||5===h){if(!("undefined"!=typeof e[h-1]&&"undefined"!=typeof e[h]&&""!==e[h]&&e[h-1]>=0&&e[h-1]<=100))return!1;n=!0}if(1===h){if(!("undefined"!=typeof e[h]&&e[h]>=0&&e[h]<=360))return!1;n=!0}}return n},isIP:function(t,e){if("string"!=typeof t)return!1;switch(e=(e||"ipv4").toLowerCase()){case"ipv4":return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t);case"ipv6":return/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(t);default:return!1}},_creditCardSpecs:{"default":{length:"13,14,15,16,17,18,19",prefix:/^.+/,luhn:!0},"american express":{length:"15",prefix:/^3[47]/,luhn:!0},"diners club":{length:"14,16",prefix:/^36|55|30[0-5]/,luhn:!0},discover:{length:"16",prefix:/^6(?:5|011)/,luhn:!0},jcb:{length:"15,16",prefix:/^3|1800|2131/,luhn:!0},maestro:{length:"16,18",prefix:/^50(?:20|38)|6(?:304|759)/,luhn:!0},mastercard:{length:"16",prefix:/^5[1-5]/,luhn:!0},visa:{length:"13,16",prefix:/^4/,luhn:!0}},_luhn:function(t){if(t=parseInt(t,10),"number"!=typeof t&&t%1!==0)return!1;t+="";var e,n=t.length,i=0;for(e=n-1;e>=0;e-=2)i+=parseInt(t.substr(e,1),10);for(e=n-2;e>=0;e-=2){var o=parseInt(2*t.substr(e,1),10);i+=o>=10?o-9:o}return i%10===0},isCreditCard:function(t,e){if(/\d+/.test(t)===!1)return!1;if("undefined"==typeof e)e="default";else if(e instanceof Array){var n,i=e.length;for(n=0;i>n;n++)if(this.isCreditCard(t,e[n]))return!0;return!1}if(e=e.toLowerCase(),"undefined"==typeof this._creditCardSpecs[e])return!1;var o=t.length+"";return-1===this._creditCardSpecs[e].length.split(",").indexOf(o)?!1:this._creditCardSpecs[e].prefix.test(t)?this._creditCardSpecs[e].luhn===!1?!0:this._luhn(t):!1},getEANCheckDigit:function(t){var e,n,i=0;for(t=String(t);t.length<12;)t="00000"+t;for(e=t.length,n=e-1;n>=0;n--)i+=(n%2*2+1)*Number(t.charAt(n));return 10-i%10},isEAN:function(e,n){switch(void 0===n&&(n="ean-13"),n){case"ean-13":if(13!==e.length)return!1;break;case"ean-8":if(8!==e.length)return!1;break;default:return!1}var i=e.substr(0,e.length-1),o=e.charAt(e.length-1),r=t.getEANCheckDigit(i);return String(r)===o}};return t}),Ink.createModule("Ink.UI.Modal","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}var a=function(t){return t.style.opacity="invalid","invalid"!==t.style.opacity}(i.create("div",{style:"opacity: 1"})),l=function(t){return"10vh"===t.style.height&&"10vw"===t.style.width}(i.create("div",{style:"height:10vh;width:10vw"})),h=function(t){return""!==t.style.display}(i.create("div",{style:"display: flex"})),u=function(t){t=t.replace(/^\s+|\s+$/g,"");var e=-1!==t.indexOf("%"),n=-1!==t.indexOf("px");return e||n?!e&&n?t:!n&&e?t:t+"px":t+"%"},c=function(t,e){for(var n,i=t.split(/\s+/g),o=0;o<i.length;o++){var r=i[o].split("-"),s=r[0].replace(/^\s+|\s+$/g,"");if(s===e)return u(r[1]);"all"===s&&(n=u(r[1]))}return n},d=[];return s._name="Modal_1",s._optionDefinition={width:["String","90%"],height:["String","90%"],shadeClass:["String",void 0],modalClass:["String",void 0],trigger:["String",void 0],triggerEvent:["String","click"],autoDisplay:["Boolean",!0],markup:["String",void 0],onShow:["Function",void 0],onDismiss:["Function",void 0],closeOnClick:["Boolean",!1],closeOnEscape:["Boolean",!0],responsive:["Boolean",!0]},s.prototype={_init:function(){if(this._handlers={click:Ink.bindEvent(this._onShadeClick,this),keyDown:Ink.bindEvent(this._onKeyDown,this),resize:null},this._dimensionIsVariant={width:-1!==(""+this._options.width).indexOf(" "),height:-1!==(""+this._options.height).indexOf(" ")},this._isOpen=!1,this._markupMode=this._element?n.hasClassName(this._element,"ink-modal"):!1,this._markupMode){if(this._modalDiv=this._element,this._modalShadow=this._modalDiv.parentNode,this._contentContainer=o.select(".modal-body",this._modalDiv)[0],!this._contentContainer)throw new Error('Ink.UI.Modal: Missing div with class "modal-body"');this._options.markup=this._contentContainer.innerHTML}else this._modalShadow=i.create("div",{className:"ink-shade"}),this._modalDiv=i.create("div",{className:"ink-modal ink-space"}),this._element&&(this._options.markup=this._element.innerHTML),this._modalShadow.appendChild(this._modalDiv),document.body.appendChild(this._modalShadow);if(this._markupMode||this.setContentMarkup(this._options.markup),"string"==typeof this._options.shadeClass&&n.addClassName(this._modalShadow,this._options.shadeClass),"string"==typeof this._options.modalClass&&n.addClassName(this._modalDiv,this._options.modalClass),this._options.trigger){var r=t.elsOrSelector(this._options.trigger,"");e.observeMulti(r,this._options.triggerEvent,Ink.bindEvent(this.open,this))}else this._options.autoDisplay&&this.open()},_dimensionIsPercentage:function(){var t=this._getDimensions();return{width:-1!==(""+t.width).indexOf("%"),height:-1!==(""+t.height).indexOf("%")}},_getDimensions:function(e){e=e||{};var n,o={width:this._options.width,height:this._options.height};if((this._dimensionIsVariant.width||this._dimensionIsVariant.height)&&(n=t.currentLayout()),this._dimensionIsVariant.width&&(o.width=c(o.width,n)),this._dimensionIsVariant.height&&(o.height=c(o.height,n)),e.dynamic){var r=this._dimensionIsPercentage();if(!r.width){var s=.9*i.viewportWidth();parseFloat(o.width)>=s&&(o.width=s+"px")}if(!r.height){var a=.9*i.viewportHeight();parseFloat(o.height)>=a&&(o.height=a+"px")}}return o},_reposition:function(){var t,e=this._dimensionIsPercentage(),n=this._getDimensions();l&&e.height?this._modalDiv.style.marginTop=-parseFloat(n.height)/2+"vh":l?(t=parseFloat(n.height)>.9*i.viewportHeight(),(t!==this._heightWasLargerThan90Percent||!t||this._dimensionIsVariant.height)&&(this._heightWasLargerThan90Percent=t,t?(this._modalDiv.style.marginTop="0",this._modalDiv.style.top="5vh"):(this._modalDiv.style.marginTop=-parseFloat(n.height)/2+"px",this._modalDiv.style.top=""))):this._modalDiv.style.marginTop=-i.elementHeight(this._modalDiv)/2+"px",l&&e.width?this._modalDiv.style.marginLeft=-parseFloat(n.width)/2+"vw":l?(t=parseFloat(n.width)>.9*i.viewportWidth(),(t!==this._widthWasLargerThan90Percent||!t||this._dimensionIsVariant.width)&&(this._widthWasLargerThan90Percent=t,t?(this._modalDiv.style.marginLeft="0",this._modalDiv.style.left="5vw"):(this._modalDiv.style.marginLeft=-parseFloat(n.width)/2+"px",this._modalDiv.style.left=""))):this._modalDiv.style.marginLeft=-i.elementWidth(this._modalDiv)/2+"px"},_onResize:function(){var t=this._dimensionIsVariant.height||this._dimensionIsVariant.width,e=this._dimensionIsPercentage(),n=!e.height||!e.width;t&&this._resize(),(!l||t)&&this._avoidModalLargerThanScreen(),(!l||n||t)&&this._reposition(),h||this._resizeContainer()},_onShadeClick:function(t){var r=e.element(t);if(r===this._modalShadow&&this._options.closeOnClick)this.dismiss();else if(n.hasClassName(r,"ink-close")||n.hasClassName(r,"ink-dismiss")||i.findUpwardsBySelector(r,".ink-close,.ink-dismiss")||this._options.closeOnClick&&(!i.descendantOf(this._shadeElement,r)||r===this._shadeElement)){for(var s=o.select(".ink-alert",this._shadeElement),a=s.length,l=0;a>l;l++)if(i.descendantOf(s[l],r))return;this.dismiss(),this._isOpen||e.stop(t)}},_onKeyDown:function(t){27===t.keyCode&&this._isOpen&&this._options.closeOnEscape&&d[d.length-1]===this&&(this.dismiss(),this._isOpen||e.stop(t))},_resize:function(){var t=this._getDimensions();this._modalDiv.style.width=t.width,this._modalDiv.style.height=t.height},_resizeContainer:function(){var t=i.elementHeight(this._modalDiv);this._modalHeader=o.select(".modal-header",this._modalDiv)[0],this._modalHeader&&(t-=i.elementHeight(this._modalHeader)),this._modalFooter=o.select(".modal-footer",this._modalDiv)[0],this._modalFooter&&(t-=i.elementHeight(this._modalFooter)),this._contentContainer.style.height=t+"px",this._markupMode},_resizeContainerFlex:function(){this._contentContainer.style.flex="1",this._modalDiv.style.display="flex",this._modalDiv.style.flexDirection="column"},_avoidModalLargerThanScreen:function(){var t=this._dimensionIsPercentage();if(l)t.width||(this._modalDiv.style.maxWidth="90vw"),t.height||(this._modalDiv.style.maxHeight="90vh");else{var e={height:i.viewportHeight(),width:i.viewportWidth()},n=this._getDimensions();r.forEach(["height","width"],Ink.bind(function(i){if(!t[i]){var o=Math.round(.9*e[i]);if(parseFloat(n[i])>o)this._modalDiv.style[i]=o+"px";else{if(isNaN(parseFloat(n[i])))return;this._modalDiv.style[i]=parseFloat(n[i])+"px"}}},this))}},open:function(t){if(this.isOpen())return!1;if(t&&e.stop(t),n.addClassName(this._modalShadow,"ink-shade"),this._modalShadow.style.display=this._modalDiv.style.display="block",this._modalShadow.offsetHeight,n.addClassName(this._modalShadow,"visible"),n.addClassName(this._modalDiv,"visible"),this._contentElement=this._modalDiv,this._shadeElement=this._modalShadow,this._markupMode||this.setContentMarkup(this._options.markup),this._resize(),this._avoidModalLargerThanScreen(),this._reposition(),h?this._resizeContainerFlex():this._resizeContainer(),this._options.responsive){var i=this._dimensionIsPercentage(),o=!(l&&h&&i.height&&i.width&&!this._dimensionIsVariant.height&&!this._dimensionIsVariant.width);o&&(this._handlers.resize=e.throttle(Ink.bind(this._onResize,this),500),e.observe(window,"resize",this._handlers.resize))}this._options.onShow&&this._options.onShow(this),e.observe(this._shadeElement,"click",this._handlers.click),this._options.closeOnEscape&&e.observe(document,"keydown",this._handlers.keyDown),this._isOpen=!0,d.push(this),n.addClassName(document.documentElement,"ink-modal-open")},isOpen:function(){return this._isOpen},dismiss:function(){if(this._isOpen){if(this._options.onDismiss){var t=this._options.onDismiss(this);if(t===!1)return}if(this._isOpen=!1,this._handlers.resize&&e.stopObserving(window,"resize",this._handlers.resize),this._markupMode?(n.removeClassName(this._modalDiv,"visible"),n.removeClassName(this._modalShadow,"visible"),this._waitForFade(this._modalShadow,Ink.bind(function(){this._modalShadow.style.display="none"},this))):(this._modalShadow.parentNode.removeChild(this._modalShadow),this.destroy()),d=r.remove(d,r.keyValue(this,d),1),0===d.length){var i=document.documentElement;n.removeClassName(i,"ink-modal-open")}}},_waitForFade:function(t,e){if(!a)return e();var i=5,o=function(){+n.getStyle(t,"opacity")>0&&i>0?(i--,setTimeout(o,250)):e()};setTimeout(o,500)},destroy:function(){t.unregisterInstance(this._instanceId)},getContentElement:function(){return this._contentContainer},setContentMarkup:function(t){if(this._markupMode)this._contentContainer.innerHTML=t;else{if(this._modalDiv.innerHTML=[t].join(""),this._contentContainer=o.select(".modal-body",this._modalDiv),!this._contentContainer.length){var e=o.select(".modal-header",this._modalDiv),s=o.select(".modal-footer",this._modalDiv);r.each(e,i.remove),r.each(s,i.remove);var a=document.createElement("div");n.addClassName(a,"modal-body"),a.innerHTML=this._modalDiv.innerHTML,this._modalDiv.innerHTML="";var l=e.concat([a]).concat(s);r.each(l,Ink.bindMethod(this._modalDiv,"appendChild")),this._contentContainer=o.select(".modal-body",this._modalDiv)}this._contentContainer=this._contentContainer[0]}this._contentElement=this._modalDiv,this._resizeContainer()}},t.createUIComponent(s,{elementIsOptional:!0}),s}),Ink.createModule("Ink.UI.Pagination","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}var s=function(t,e,n){var i=document.createElement("a");if(i.setAttribute("href","#"),"number"==typeof e&&i.setAttribute("data-index",e),n&&n.wrapText){var o=document.createElement("span");i.appendChild(o),o.innerHTML=t}else i.innerHTML=t;return i};return r._name="Pagination_1",r._optionDefinition={size:["Integer",null],totalItemCount:["Integer",null],itemsPerPage:["Integer",null],maxSize:["Integer",null],start:["Integer",1],sideButtons:["Boolean",1],firstLabel:["String","First"],lastLabel:["String","Last"],previousLabel:["String","Previous"],nextLabel:["String","Next"],previousPageLabel:["String",null],nextPageLabel:["String",null],onChange:["Function",void 0],hashParameter:["String","page"],parentTag:["String","ul"],childTag:["String","li"],wrapperClass:["String","ink-navigation"],paginationClass:["String","pagination"],activeClass:["String","active"],disabledClass:["String","disabled"],hideClass:["String","hide-all"],previousClass:["String","previous"],previousPageClass:["String","previousPage"],nextClass:["String","next"],nextPageClass:["String","nextPage"],firstClass:["String","first"],lastClass:["String","last"],numberFormatter:["Function",function(t){return t+1}],autoWrap:["Boolean",!1]},r.prototype={_init:function(){this._options.previousPageLabel||(this._options.previousPageLabel=this._options.previousLabel+" "+this._options.maxSize),this._options.nextPageLabel||(this._options.nextPageLabel=this._options.nextLabel+" "+this._options.maxSize),this._handlers={click:Ink.bindEvent(this._onClick,this)},t.isInteger(this._options.totalItemCount)&&t.isInteger(this._options.itemsPerPage)?this._size=this._calculateSize(this._options.totalItemCount,this._options.itemsPerPage):t.isInteger(this._options.size)?this._size=this._options.size:(Ink.error("Ink.UI.Pagination: Please supply a size option or totalItemCount and itemsPerPage options."),this._size=0),this._current=this._options.start-1,this._itemLiEls=[],this._generateMarkup(this._element),this._updateItems(),this._observe()},_observe:function(){e.observeDelegated(this._element,"click","."+this._options.paginationClass+" > "+this._options.childTag,this._handlers.click)},_calculateSize:function(t,e){return Math.ceil(t/e)},_updateItems:function(){var t,e,i,o=this._itemLiEls,r=this._size===o.length;if(r)for(t=0,e=this._size;e>t;++t)n.setClassName(o[t],this._options.activeClass,t===this._current);else{for(t=o.length-1;t>=0;--t)this._ulEl.removeChild(o[t]);for(o=[],t=0,e=this._size;e>t;++t)i=document.createElement(this._options.childTag),i.appendChild(s(this._options.numberFormatter(t,this._size),t)),n.setClassName(i,this._options.activeClass,t===this._current),this._nextEl?this._ulEl.insertBefore(i,this._nextEl):this._ulEl.appendChild(i),o.push(i);this._itemLiEls=o}if(this._options.maxSize){var a=Math.floor(this._current/this._options.maxSize),l=this._options.maxSize*a,h=l+this._options.maxSize-1;for(t=0,e=this._size;e>t;++t)i=o[t],n.setClassName(i,this._options.hideClass,l>t||t>h);this._pageStart=l,this._pageEnd=h,this._page=a,n.setClassName(this._prevPageEl,this._options.disabledClass,!this.hasPreviousPage()),n.setClassName(this._nextPageEl,this._options.disabledClass,!this.hasNextPage()),n.setClassName(this._firstEl,this._options.disabledClass,this.isFirst()),n.setClassName(this._lastEl,this._options.disabledClass,this.isLast())}this._prevEl&&!this._options.autoWrap&&n.setClassName(this._prevEl,this._options.disabledClass,!this.hasPrevious()),this._nextEl&&!this._options.autoWrap&&n.setClassName(this._nextEl,this._options.disabledClass,!this.hasNext())},_generateMarkup:function(t){n.addClassName(t,"ink-navigation");var e=Ink.s("."+this._options.paginationClass,t),i=!1;e?i=!0:(e=document.createElement(this._options.parentTag),n.addClassName(e,this._options.paginationClass));var o=n.hasClassName(e,"chevron"),r=n.hasClassName(e,"dotted"),a=Ink.bind(function(t,i){var o=document.createElement(this._options.childTag),r=s(this._options[t+"Label"],void 0,{wrapText:i&&i.wrapText});return n.addClassName(o,this._options[t+"Class"]),o.appendChild(r),e.appendChild(o),o},this);!r&&this._options.maxSize&&(this._firstEl=a("first"),this._prevPageEl=a("previousPage")),(r&&this._options.sideButtons===!0||!r&&this._options.sideButtons)&&(this._prevEl=a("previous",{wrapText:o}),this._nextEl=a("next",{wrapText:o})),!r&&this._options.maxSize&&(this._nextPageEl=a("nextPage"),this._lastEl=a("last")),i||t.appendChild(e),this._ulEl=e},_onClick:function(t){e.stop(t);var i=e.element(t);if(!n.hasClassName(i,this._options.activeClass)&&!n.hasClassName(i,this._options.disabledClass)){var r=n.hasClassName(i,this._options.previousClass),s=n.hasClassName(i,this._options.nextClass),a=n.hasClassName(i,this._options.previousPageClass),l=n.hasClassName(i,this._options.nextPageClass),h=n.hasClassName(i,this._options.firstClass),u=n.hasClassName(i,this._options.lastClass);if(h)this.setCurrent(0);else if(u)this.setCurrent(this._size-1);else if(a||l)this.setCurrent((a?-1:1)*this._options.maxSize,!0,!!this._options.autoWrap);else if(r||s)this.setCurrent(r?-1:1,!0,!!this._options.autoWrap);else{var c=o.select("[data-index]",i)[0],d=c&&parseInt(c.getAttribute("data-index"),10);this.setCurrent(d)}}},setOnChange:function(t){if(t&&"function"!=typeof t)throw new TypeError("onChange option must be a function!");this._options.onChange=t},setSize:function(e){if(!t.isInteger(e))throw new TypeError("1st argument must be an integer number!");this._size=e,this._updateItems(),this._current=0},setSizeInItems:function(t,e){var n=Math.ceil(t/e);this.setSize(n)},setCurrent:function(e,n,i){if(!t.isInteger(e))throw new TypeError("1st argument must be an integer number!");n&&(e+=this._current),i?(e%=this._size,0>e&&(e+=this._size)):(e>this._size-1&&(e=this._size-1),0>e&&(e=0)),this._current=e,this._updateItems(),this._options.onChange&&this._options.onChange(this,e)},next:function(t){this.setCurrent(1,!0,t)},previous:function(t){this.setCurrent(-1,!0,t)},getSize:function(){return this._size},getCurrent:function(){return this._current},isFirst:function(){return 0===this._current},isLast:function(){return this._current===this._size-1},hasPrevious:function(){return this._current>0},hasNext:function(){return this._current<this._size-1},hasPreviousPage:function(){return this._options.maxSize&&this._current>this._options.maxSize-1},hasNextPage:function(){return this._options.maxSize&&this._size-this._current>=this._options.maxSize+1},destroy:t.destroyComponent},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.ProgressBar","1",["Ink.UI.Common_1","Ink.Dom.Selector_1"],function(t,e){"use strict";function n(){t.BaseUIComponent.apply(this,arguments)}return n._name="ProgressBar_1",n._optionDefinition={startValue:["Number",0],onStart:["Function",function(){}],onEnd:["Function",function(){}]},n.prototype={_init:function(){if(this._value=this._options.startValue,this._elementBar=e.select(".bar",this._element),this._elementBar.length<1)throw new Error("[Ink.UI.ProgressBar] :: Bar element not found");this._elementBar=this._elementBar[0],this.setValue(this._options.startValue)},setValue:function(t){this._options.onStart.call(this,this._value),t=parseInt(t,10),isNaN(t)||0>t?t=0:t>100&&(t=100),this._value=t,this._elementBar.style.width=this._value+"%",this._options.onEnd.call(this,this._value)}},t.createUIComponent(n),n}),Ink.createModule("Ink.UI.SmoothScroller","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Dom.Css_1"],function(t,e,n,i,o){"use strict";var r=window.requestAnimationFrame||function(t){return setTimeout(t,10)},s=window.cancelAnimationFrame||function(t){clearTimeout(t)},a={speed:10,changeHash:!0,margin:0,scroll:function(t,e){var i=Math.round(n.scrollHeight()),o=Math.round(t-(e.margin||0));i+=o>i?Math.ceil((o-i)/e.speed):(o-i)/e.speed,s(a.interval),i!==o&&a.offsetTop!==i?a.interval=r(Ink.bindMethod(a,"scroll",t,e),document.body):a.onDone(e),window.scrollTo(0,i),a.offsetTop=i},init:function(t){e.on(document,"click",t||"a.scrollableLink, a.ink-smooth-scroll",a.onClick)},render:function(){},onClick:function(e){var i=e.currentTarget,r=(location+"").replace(/#.*?$/,""),s=(i.href+"").replace(/#.*?$/,"");if(s===r){var l=i.getAttribute("data-hash")||(i.getAttribute("href")||"").replace(/^.*?#/,"");if(l){e.preventDefault();var h="ul > li.active > "+u,u='a[name="'+l+'"],#'+l,c=Ink.s(u),d=Ink.s(h);if(d=d&&d.parentNode,c){o.hasClassName(i.parentNode,"active")||(d&&o.removeClassName(d,"active"),o.addClassName(i.parentNode,"active"));var p=t.options("SmoothScroller link options",{margin:["Number",a.margin],speed:["Number",a.speed],changeHash:["Boolean",a.changeHash]},{},i);a.hash=l,a.scroll(n.offsetTop(c),p)}}}},onDone:function(t){t.changeHash===!0&&(window.location.hash=a.hash),a.hash=a.offsetTop=null}};return a}),Ink.createModule("Ink.UI.SortableList","1",["Ink.UI.Common_1","Ink.Dom.Css_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}var s="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;return r._name="SortableList_1",r._optionDefinition={placeholderClass:["String","placeholder"],draggedClass:["String","hide-all"],draggingClass:["String","dragging"],dragSelector:["String","> li"],handleSelector:["String",":not(button, button *, a[href], a[href] *)"],moveSelector:["String",!1],swap:["Boolean",!1],cancelMouseOut:["Boolean",!1],onDrop:["Function",function(){}]},r.prototype={_init:function(){this._handlers={down:Ink.bind(this._onDown,this),move:Ink.bind(this._onMove,this),up:Ink.bind(this._onUp,this)},this._isMoving=!1,this._down=s?"touchstart mousedown":"mousedown",this._move=s?"touchmove mousemove":"mousemove",this._up=s?"touchend mouseup":"mouseup",this._observe()},_observe:function(){n.on(this._element,this._down,this._options.dragSelector,this._handlers.down),n.on(this._element,this._move,this._options.dragSelector,this._handlers.move),this._options.cancelMouseOut&&n.on(this._element,"mouseleave",Ink.bind(this.stopMoving,this)),n.on(document.documentElement,this._up,this._handlers.up)},_onDown:function(t){if(!this._isMoving&&!this._placeholder){var e=t.currentTarget;if(this._options.handleSelector){var n=i.findUpwardsBySelector(t.target,this._options.handleSelector);if(!n||!i.isAncestorOf(e,n))return}return this._isMoving=e,this._placeholder=e.cloneNode(!0),this._movePlaceholder(e),this._addMovingClasses(),!1}},_onMove:function(t){var e=t.currentTarget;if("touchmove"===t.type){var n=t.touches[0];e=document.elementFromPoint(n.clientX,n.clientY),e=i.findUpwardsBySelector(e,this._options.dragSelector)}this.validateMove(e),t.preventDefault()},_onUp:function(t){return this._isMoving&&this._placeholder&&t.currentTarget!==this._isMoving&&t.currentTarget!==this._placeholder?(i.insertBefore(this._isMoving,this._placeholder),this.stopMoving(),this._options.onDrop.call(this,{droppedElement:t.currentTarget}),!1):void 0},_addMovingClasses:function(){e.addClassName(this._placeholder,this._options.placeholderClass),e.addClassName(this._isMoving,this._options.draggedClass),e.addClassName(document.documentElement,this._options.draggingClass)},_removeMovingClasses:function(){this._isMoving&&e.removeClassName(this._isMoving,this._options.draggedClass),this._placeholder&&e.removeClassName(this._placeholder,this._options.placeholderClass),e.removeClassName(document.documentElement,this._options.draggingClass)},_movePlaceholder:function(t){var e,n,o,r,s=this._placeholder;s?this._options.swap?(i.insertAfter(s,t),i.insertBefore(t,this._isMoving),i.insertBefore(this._isMoving,s)):(e=i.offset(t),n=i.offset(this._placeholder),o=e[1]>n[1],r=e[0]>n[0],o&&r||!o&&!r?i.insertBefore(s,t):i.insertAfter(s,t),i.insertBefore(this._isMoving,s)):i.insertAfter(s,t)},destroy:t.destroyComponent,stopMoving:function(){this._removeMovingClasses(),i.remove(this._placeholder),this._placeholder=!1,this._isMoving=!1},validateMove:function(t){t&&this._isMoving&&this._placeholder&&t!==this._placeholder&&t!==this._isMoving&&(!this._options.moveSelector||o.matchesSelector(t,this._options.moveSelector)?this._movePlaceholder(t):this.stopMoving())}},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.Spy","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(t){for(var e=0,n=d.length;n>e;e++)if(d[e][0]===t)return e;return null}function s(t,e){var n=r(e);null===n?d.push([e,[t]]):d[n][1].push(t)}function a(){p||(p=!0,e.observe(document,"scroll",e.throttle(l,300)))}function l(){for(var t=0,e=d.length;e>t;t++)h(d[t][0],d[t][1])}function h(t,e){for(var r=u(e),s=o.select("li.active",t),a=0,l=s.length;l>a;a++)n.removeClassName(s[a],"active");if(null!==r){var h='a[href$="#'+(r.name||r.id)+'"]',c=o.select(h,t);for(a=0,l=c.length;l>a;a++)n.addClassName(i.findUpwardsByTag(c[a],"li"),"active")}}function u(t){for(var e,n,i=-1/0,o=0,r=t.length;r>o;o++)n=t[o].getBoundingClientRect(),n.top<=0&&n.top>i&&(i=n.top,e=o);return void 0===e?null:t[e]}function c(){t.BaseUIComponent.apply(this,arguments)}var d=[],p=!1;return c._name="Spy_1",c._optionDefinition={target:["Element",void 0]},c.prototype={_init:function(){s(this._element,this._options.target),a(),l()}},t.createUIComponent(c),c}),Ink.createModule("Ink.UI.Stacker",1,["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e,n){"use strict";function i(){t.BaseUIComponent.apply(this,arguments)}return i._name="Stacker_1",i._optionDefinition={column:["String",".stacker-column"],item:["String",".stacker-item"],customBreakPoints:["Object",null],largeMax:["Number",Number.MAX_VALUE],largeMin:["Number",961],mediumMax:["Number",960],mediumMin:["Number",651],smallMax:["Number",650],smallMin:["Number",0],largeCols:["Integer",3],mediumCols:["Integer",2],smallCols:["Integer",1],isOrdered:["Boolean",!0],onRunCallback:["Function",null],onResizeCallback:["Function",null],onAPIReloadCallback:["Function",null]},i.prototype={_init:function(){this._aList=[],this._curLayout="large",this._runFirstTime=!1,this._getPageItemsToList(),(this._canApplyLayoutChange()||!this._runFirstTime)&&(this._runFirstTime=!0,this._applyLayoutChange(),"function"==typeof this._options.onRunCallback&&this._options.onRunCallback(this._curLayout)),this._addEvents()},addItem:function(t){this._aList.push(t)},reloadItems:function(){this._applyLayoutChange(),"function"==typeof this._options.onAPIReloadCallback&&this._options.onAPIReloadCallback(this._curLayout)},_addEvents:function(){e.observe(window,"resize",Ink.bindEvent(this._onResize,this))},_onResize:function(){this._canApplyLayoutChange()&&(this._removeDomItems(),this._applyLayoutChange(),"function"==typeof this._options.onResizeCallback&&this._options.onResizeCallback(this._curLayout))},_setCurLayout:function(){var t=n.viewportWidth();if(this._options.customBreakpoints&&"object"==typeof this._options.customBreakPoints){for(var e in this._options.customBreakPoints)if(this._options.customBreakPoints.hasOwnProperty(e)&&t>=Number(this._options.customBreakPoints[e].min)&&t<=Number(this._options.customBreakPoints[e].max)&&this._curLayout!==e)return void(this._curLayout=e)}else t<=Number(this._options.largeMax)&&t>=Number(this._options.largeMin)&&"large"!==this._curLayout?this._curLayout="large":t>=Number(this._options.mediumMin)&&t<=Number(this._options.mediumMax)&&"medium"!==this._curLayout?this._curLayout="medium":t>=Number(this._options.smallMin)&&t<=Number(this._options.smallMax)&&"small"!==this._curLayout&&(this._curLayout="small")},_getColumnsToShow:function(){return Number(this._options.customBreakPoints&&"object"==typeof this._options.customBreakPoints?this._options.customBreakPoints[this._curLayout].cols:this._options[this._curLayout+"Cols"])},_canApplyLayoutChange:function(){var t=this._curLayout;return this._setCurLayout(),t!==this._curLayout?!0:!1},_getPageItemsToList:function(){this._aColumn=Ink.ss(this._options.column,this._element);var t=this._aColumn.length,e=0;if(t>0){for(var n=0;n<this._aColumn.length;n++)for(var i=Ink.ss(this._options.item,this._aColumn[n]),o=0;o<i.length;o++)this._options.isOrdered&&(e=n+o*t),this._aList[e]=i[o],this._options.isOrdered||e++,i[o].parentNode.removeChild(i[o]);if(this._aList.length>0&&this._options.isOrdered){for(var r=[],s=0;s<this._aList.length;s++)"undefined"!=typeof this._aList[s]&&r.push(this._aList[s]);this._aList=r}}},_removeDomItems:function(){var t=this._aColumn.length;if(t>0)for(var e=0;t>e;e++)for(var n=Ink.ss(this._options.item,this._aColumn[e]),i=n.length-1;i>=0;i--)n[i].parentNode.removeChild(n[i])},_applyLayoutChange:function(){var t=this._getColumnsToShow(),e=this._aList.length,n=0,i=0;if(t>0)for(;t>i;){if(this._aColumn[i].appendChild(this._aList[n]),n++,i++,n===e)return;i===t&&(i=0)}}},t.createUIComponent(i),i}),Ink.createModule("Ink.UI.Sticky","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Css_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="Sticky_1",o._optionDefinition={offsetBottom:["Integer",0],offsetTop:["Integer",0],topElement:["Element",null],wrapperClass:["String","ink-sticky-wrapper"],stickyClass:["String","ink-sticky-stuck"],inlineDimensions:["Boolean",!0],inlinePosition:["Boolean",!0],bottomElement:["Element",null],activateInLayouts:["String",null]},o.prototype={_init:function(){this._options.activateInLayouts&&(this._options.activateInLayouts=this._options.activateInLayouts.toString()),this._dims=null,this._options.offsetTop=parseInt(this._options.offsetTop,10)||0,this._options.offsetBottom=parseInt(this._options.offsetBottom,10)||0,this._options.topElement&&(this._options.topElement=t.elOrSelector(this._options.topElement,"Top Element")),this._options.bottomElement&&(this._options.bottomElement=t.elOrSelector(this._options.bottomElement,"Sticky bottom Element")),this._wrapper=n.create("div",{className:this._options.wrapperClass}),n.wrap(this._element,this._wrapper);var i=document.addEventListener?document:window;this._onScroll=Ink.bind(e.throttle(this._onScroll,33),this),e.observe(i,"scroll",this._onScroll),e.observe(window,"resize",Ink.bindEvent(e.throttle(this._onResize,100),this)),this._onScroll()},_isDisabledInLayout:function(){if(!this._options.activateInLayouts)return!1;var e=t.currentLayout();return e?-1===this._options.activateInLayouts.indexOf(e):!1},_onScroll:function(){var t=this._getDims(),e=n.scrollHeight(),i=this._isDisabledInLayout()||e<=t.top-this._options.offsetTop||this._options.topElement&&this._options.topElement.getBoundingClientRect().bottom+this._options.offsetTop>0;if(i)return void this._unstick();var o=this._options.offsetTop+t.height+n.scrollHeight(),r=document.body.scrollHeight;this._options.bottomElement&&(r=this._options.bottomElement.getBoundingClientRect().top+n.scrollHeight()),r-=this._options.offsetBottom,this._stickTo(r>o?"screen":"bottom")},_stickTo:function(t){var e=this._element.style,o=this._getDims();if(i.addClassName(this._element,this._options.stickyClass),this._wrapper.style.height=o.height+"px",this._inlineDimensions(o.height+"px",o.width+"px"),this._options.inlinePosition!==!1)if(e.left=o.left+"px","screen"===t)e.bottom=null,e.top=this._options.offsetTop+"px";else if("bottom"===t){var r=this._getBottomOffset(),s=n.scrollHeight()+n.viewportHeight(),a=n.pageHeight()-s;e.bottom=r-a+"px",e.top="auto"}},_unstick:function(){i.removeClassName(this._element,this._options.stickyClass),this._inlineDimensions(null,null),this._options.inlinePosition&&(this._element.style.left=null,this._element.style.top=null,this._element.style.bottom=null),this._wrapper.style.height=null,this._wrapper.style.width=null,this._dims=null},_onResize:function(){this._dims=null,this._onScroll()
},_getDims:function(){if(null!==this._dims)return this._dims;var t=this._element.style,e=t.position,i=t.width;t.position="static",t.width=null;var o=n.outerDimensions(this._element),r=this._wrapper.getBoundingClientRect();return this._dims={height:o[1],width:o[0],left:r.left+n.scrollWidth(),top:r.top+n.scrollHeight()},t.position=e,t.width=i,this._dims},_inlineDimensions:function(t,e){this._options.inlineDimensions&&(this._element.style.height=t,this._element.style.width=e)},_getBottomOffset:function(){var t=this._options.offsetBottom;return this._options.bottomElement&&(t+=n.pageHeight()-n.offsetTop(this._options.bottomElement)),t}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Swipe","1",["Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.UI.Common_1"],function(t,e,n){"use strict";function i(){"function"==typeof arguments[1]&&(arguments[1]={onEnd:arguments[1]}),n.BaseUIComponent.apply(this,arguments)}return i._name="Swipe_1",i._optionDefinition={onEnd:["Function",void 0],onStart:["Function",void 0],onMove:["Function",void 0],minDist:["Number",void 0],maxDist:["Number",void 0],minDuration:["Number",void 0],maxDuration:["Number",void 0],axis:["String",void 0],storeGesture:["Boolean",!1],stopEvents:["Boolean",!0]},i.prototype={_supported:"ontouchstart"in document.documentElement,_init:function(){this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)};var e=document.body;t.observe(e,"touchstart",this._handlers.down),(this._options.storeGesture||this._options.onMove)&&t.observe(e,"touchmove",this._handlers.move),t.observe(e,"touchend",this._handlers.up),this._isOn=!1},_isMeOrParent:function(t,e){if(t){do{if(t===e)return!0;t=t.parentNode}while(t);return!1}},_pushGesture:function(t,e){this._options.storeGesture&&(this._gesture.push(t),this._time.push(e))},_onDown:function(e){1===e.changedTouches.length&&this._isMeOrParent(e.target,this._element)&&(this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0],this._isOn=!0,this._target=e.target,this._t0=+new Date,this._p0=[e.pageX,e.pageY],this._options.storeGesture&&(this._gesture=[],this._time=[]),this._pushGesture(this._p0,0),this._options.onStart&&this._options.onStart({event:e,element:this._element,instance:this,position:this._p0,dt:0}))},_onMove:function(e){if(this._isOn&&1===e.changedTouches.length){this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0];var n=+new Date,i=n-this._t0,o=[e.pageX,e.pageY];this._pushGesture(o,i),this._options.onMove&&this._options.onMove({event:e,element:this._element,instance:this,position:o,dt:i})}},_onUp:function(e){if(this._isOn&&1===e.changedTouches.length){this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0],this._isOn=!1;var n=+new Date,i=[e.pageX,e.pageY],o=n-this._t0,r=[i[0]-this._p0[0],i[1]-this._p0[1]],s=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=Math.abs(r[0])>Math.abs(r[1])?"x":"y",l=this._options;l.minDist&&s<l.minDist||l.maxDist&&s>l.maxDist||l.minDuration&&o<l.minDuration||l.maxDuration&&o>l.maxDuration||l.axis&&a!==l.axis||this._options.onEnd&&this._options.onEnd({event:e,element:this._element,instance:this,gesture:this._gesture,time:this._time,axis:a,overallMovement:r,overallTime:o})}}},n.createUIComponent(i),i}),Ink.createModule("Ink.UI.Table","1",["Ink.Util.Url_1","Ink.UI.Pagination_1","Ink.Net.Ajax_1","Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.String_1","Ink.Util.Json_1"],function(t,e,n,i,o,r,s,a,l,h,u){"use strict";function c(t){return!isNaN(t)&&g.test(t)?parseInt(t,10):isNaN(t)?t:parseFloat(t)}function d(t,e){return t===e?0:t>e?1:-1}function p(t,e){var n=c(s.textContent(t)),i=c(s.textContent(e));return typeof n==typeof i?d(n,i):"number"==typeof n?1:-1}function f(t){if("undefined"!=typeof Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function m(){i.BaseUIComponent.apply(this,arguments)}function _(t){return t}var g=/\d/g;return m._name="Table_1",m._optionDefinition={pageSize:["Integer",null],caretUpClass:["String","fa fa-caret-up"],caretDownClass:["String","fa fa-caret-down"],endpoint:["String",null],createEndpointUrl:["Function",null],createEndpointURL:["Function",null],getDataFromEndPoint:["Function",null],getDataFromEndpoint:["Function",null],processJSONRows:["Function",function(t){return"number"==typeof t.length?t:t.rows||null}],processJSONRow:["Function",_],processJSONField:["Function",_],processJSONHeaders:["Function",function(t){return t.fields}],processJSONTotalRows:["Function",function(t){return t.totalRows||t.length}],getSortKey:["Function",null],pagination:["Element",null],allowResetSorting:["Boolean",!1],visibleFields:["String",null],tdClassNames:["Object",{}],paginationOptions:["Object",null]},m.prototype={_validate:function(){if("table"!==this._element.nodeName.toLowerCase())throw new Error("[Ink.UI.Table] :: The element is not a table")},_init:function(){this._options.createEndpointUrl&&(this._options.createEndpointURL=this._options.createEndpointUrl),this._options.getDataFromEndPoint&&(this._options.getDataFromEndpoint=this._options.getDataFromEndpoint),this._markupMode=!(this._options.endpoint||this._options.createEndpointURL),this._options.visibleFields&&(this._options.visibleFields=this._options.visibleFields.toString().split(/[, ]+/g)),this._thead=this._element.tHead||this._element.createTHead(),this._headers=a.select("th",this._thead),this._handlers={thClick:null},this._originalFields=[],this._sortableFields={},this._originalData=this._data=[],this._pagination=null,this._totalRows=0,this._handlers.thClick=o.on(this._element,"click",'thead th[data-sortable="true"]',Ink.bindMethod(this,"_onThClick")),this._markupMode?(this._resetSortOrder(),this._addHeadersClasses(),this._data=a.select("tbody tr",this._element),this._originalData=this._data.slice(0),this._totalRows=this._data.length,this._setPagination()):this._getData()},_addHeadersClasses:function(){for(var t,e,n=0,i=this._headers.length;i>n;n++)t=s.textContent(this._headers[n]),e=this._options.tdClassNames[t],e&&r.addClassName(this._headers[n],e)},_onThClick:function(t){var e=o.element(t),n=void 0!==this._options.pageSize;o.stop(t);var i=l.keyValue(e,this._headers,!0),r=i!==!1&&void 0!==this._sortableFields[i];if(r)if(!this._markupMode&&n)this._invertSortOrder(i,!1);else{"desc"===this._sortableFields[i]&&this._options.allowResetSorting?(this._setSortOrderOfColumn(i,null),this._data=this._originalData.slice(0)):this._invertSortOrder(i,!0);var s=a.select("tbody",this._element)[0];l.each(this._data,function(t){s.appendChild(t)}),this._pagination&&(this._pagination.setCurrent(0),this._paginate(1))}},_invertSortOrder:function(t,e){for(var n="asc"===this._sortableFields[t],i=0,o=this._headers.length;o>i;i++)this._setSortOrderOfColumn(i,null);this._setSortOrderOfColumn(t,!n),e?(this._sort(t),n&&this._data.reverse()):this._getData()},_setSortOrderOfColumn:function(t,e){var n=this._headers[t],i=[""],o="none";e===!0?(i=['<i class="',this._options.caretUpClass,'"></i>'],o="asc"):e===!1&&(i=['<i class="',this._options.caretDownClass,'"></i>'],o="desc"),this._sortableFields[t]=o,n.innerHTML=s.textContent(n)+i.join("")},_paginate:function(t){if(this._pagination){var e=this._options.pageSize,n=(t-1)*e,i=n+e;l.each(this._data,function(t,e){e>=n&&i>e?r.removeClassName(t,"hide-all"):r.addClassName(t,"hide-all")})}},_registerFieldNames:function(t){this._originalFields=[],l.forEach(t,Ink.bind(function(t){this._fieldIsVisible(t)&&this._originalFields.push(t)},this))},_fieldIsVisible:function(t){return!this._options.visibleFields||-1!==this._options.visibleFields.indexOf(t)},_sort:function(t){function e(e){return i.call(o,{columnIndex:t,columnName:n,data:s.textContent(e),element:e})}var n=s.textContent(this._headers[t]),i=this._options.getSortKey;i&&(i="function"==typeof i[n]?i[n]:"function"==typeof i?i:null);var o=this;this._data.sort(function(n,o){var r=Ink.ss("td",n)[t],s=Ink.ss("td",o)[t];return i?d(e(r),e(s)):p(r,s,t)})},_createHeadersFromJson:function(t){if(this._registerFieldNames(f(t)),!this._thead.children.length)for(var e,n=this._thead.insertRow(0),i=0,o=t.length;o>i;i++)this._fieldIsVisible(t[i])&&(e=s.create("th"),e=this._createSingleHeaderFromJson(t[i],e),n.appendChild(e),this._headers.push(e))},_createSingleHeaderFromJson:function(t,e){return t.sortable&&e.setAttribute("data-sortable","true"),t.label&&s.setTextContent(e,t.label),e},_resetSortOrder:function(){for(var t=0,e=this._headers.length;e>t;t++){var n=s.data(this._headers[t]);n.sortable&&"true"===n.sortable.toString()&&(this._sortableFields[t]="none")}},_createRowsFromJSON:function(t){var e=a.select("tbody",this._element)[0];e?s.setHTML(e,""):(e=document.createElement("tbody"),this._element.appendChild(e)),this._data=[];var n;for(var i in t)t.hasOwnProperty(i)&&(n=this._options.processJSONRow(t[i]),this._createSingleRowFromJson(e,n,i));this._originalData=this._data.slice(0)},_createSingleRowFromJson:function(t,e,n){var i=document.createElement("tr");t.appendChild(i);for(var o in e)e.hasOwnProperty(o)&&this._createFieldFromJson(i,e[o],o,n);this._data.push(i)},_createFieldFromJson:function(t,e,n,i){if(this._fieldIsVisible(n)){var o,s=this._options.processJSONField[n]||this._options.processJSONField;o="function"==typeof s?s(e,n,i):e;var a=this._elOrFieldData(o),l=this._options.tdClassNames[n];l&&r.addClassName(a,l),t.appendChild(a)}},_elOrFieldData:function(t){if(i.isDOMElement(t))return t;var e="string"==typeof t,n="number"==typeof t,o=s.create("td");if(e&&/^\s*?</.test(t))s.setHTML(o,t);else{if(!e&&!n)throw new Error("Ink.UI.Table Unknown result from processJSONField: "+t);s.setTextContent(o,t)}return o},setEndpoint:function(t,e){this._markupMode||(this._options.endpoint=t,this._pagination&&this._pagination.setCurrent(e?parseInt(e,10):0))},_setPagination:function(){if(null!=this._options.pageSize){var t=this._options.pagination;if(t instanceof e)return void(this._pagination=t);t||(t=s.create("nav",{className:"ink-navigation",insertAfter:this._element}),s.create("ul",{className:"pagination",insertBottom:t}));var n=Ink.extendObj({totalItemCount:this._totalRows,itemsPerPage:this._options.pageSize,onChange:Ink.bind(function(t,e){this._paginate(e+1)},this)},this._options.paginationOptions||{});this._pagination=new e(t,n),this._paginate(1)}},_getData:function(){var t=this._getSortOrder()||null,e=null;this._options.pageSize&&(e={size:this._options.pageSize,page:this._pagination?this._pagination.getCurrent()+1:1}),this._getDataViaAjax(this._getUrl(t,e))},_getSortOrder:function(){var t;for(t in this._sortableFields)if(this._sortableFields.hasOwnProperty(t)&&"none"!==this._sortableFields[t])break;return t?{field:this._originalFields[t]||s.textContent(this._headers[t]),order:this._sortableFields[t]}:null},_getUrl:function(e,n){var i=this._options.createEndpointURL||function(e,n,i){return e=t.parseUrl(e),e.query=e.query||{},n&&(e.query.sortOrder=n.order,e.query.sortField=n.field),i&&(e.query.rows_per_page=i.size,e.query.page=i.page),t.format(e)},o=i(this._options.endpoint,e,n);if("string"!=typeof o)throw new TypeError("Ink.UI.Table_1: createEndpointUrl did not return a string!");return o},_getDataViaAjax:function(t){var e=Ink.bind(function(t){this._onAjaxSuccess(t)},this);this._options.getDataFromEndpoint?this._options.getDataFromEndpoint(t,e):new n(t,{method:"GET",contentType:"application/json",sanitizeJSON:!0,onSuccess:Ink.bind(function(t){200===t.status&&e(u.parse(t.responseText))},this)})},_onAjaxSuccess:function(t){var e=null!=this._options.pageSize,n=this._options.processJSONRows(t);if(this._headers=a.select("th",this._thead),0===this._headers.length){var i=this._options.processJSONHeaders(t);if(!i||!i.length||!i[0])throw new Error("Ink.UI.Table: processJSONHeaders option must return an array of objects!");this._createHeadersFromJson(i),this._resetSortOrder(),this._addHeadersClasses()}else this._resetSortOrder();this._createRowsFromJSON(n),this._totalRows=this._rowLength=n.length,e&&(this._totalRows=this._options.processJSONTotalRows(t),this._setPagination())}},i.createUIComponent(m),m}),Ink.createModule("Ink.UI.Tabs","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}return r._name="Tabs_1",r._optionDefinition={preventUrlChange:["Boolean",!1],active:["String",void 0],onBeforeChange:["Function",void 0],onChange:["Function",void 0],menuSelector:["String",".tabs-nav"],contentSelector:["String",".tabs-content"],triggerEventsOnLoad:["Boolean",!0]},r.prototype={_init:function(){return this._menu=o.select(this._options.menuSelector,this._element)[0],this._menu?(this._initializeDom(),e.on(this._menu,"click","a",Ink.bindMethod(this,"_onTabClickedGeneric")),void this._setFirstActive()):void Ink.warn('Ink.UI.Tabs: An element selected by "'+this._options.menuSelector+'" needs to exist inside the element!')},_initializeDom:function(){for(var t=o.select(this._options.contentSelector,this._element),e=0;e<t.length;e++)n.addClassName(t[e],"hide-all")},_setFirstActive:function(){var t=window.location.hash,e=this._findLinkByHref(t)||this._options.active&&this._findLinkByHref(this._options.active)||o.select(".active a",this._menu)[0]||o.select("a",this._menu)[0];e&&(this._firstTime=!0,this._changeTab(e,this._options.triggerEventsOnLoad),this._firstTime=!1)},_changeTab:function(t,e){e&&"undefined"!=typeof this._options.onBeforeChange&&this._options.onBeforeChange(this);var i=t.getAttribute("href"),r=i.substr(i.indexOf("#"));window.location.hash===r||this._options.preventUrlChange||this._firstTime||(window.location.hash=r);for(var s=o.select("> li.active",this._menu),a=0,l=s.length;l>a;a++)s[a]!==t&&n.removeClassName(s[a],"active");return this._activeMenuTab&&(n.removeClassName(this._activeMenuTab,"active"),n.removeClassName(this._activeSection,"active"),n.addClassName(this._activeSection,"hide-all")),this._activeMenuLink=t,this._activeMenuTab=this._activeMenuLink.parentNode,this._activeSection=o.select(r,this._element)[0],this._activeSection?(n.addClassName(this._activeMenuTab,"active"),n.addClassName(this._activeSection,"active"),n.removeClassName(this._activeSection,"hide-all"),void(e&&"undefined"!=typeof this._options.onChange&&this._options.onChange(this))):void(this._activeMenuLink=this._activeMenuTab=this._activeSection=null)},_onTabClickedGeneric:function(t){t.preventDefault();var e=!n.hasClassName(t.currentTarget,"ink-disabled")&&t.currentTarget!==this._activeMenuLink;e&&this._onTabClicked(t.currentTarget)},_onTabClicked:function(t){var e=t.getAttribute("href")||"";e=e.substr(e.indexOf("#")),e&&null!==Ink.i(this._dehashify(e))&&t!==this._activeMenuLink&&this.changeTab(t)},_hashify:function(t){return t?0===t.indexOf("#")?t:"#"+t:""},_dehashify:function(t){return t?(""+t).replace(/^#/,""):""},_findLinkByHref:function(t){if(!t)return null;if(1===t.nodeType){if(i.isAncestorOf(t,this._element))return null;for(var e=o.select("a",this._menu),n=t.getAttribute("id"),r=0,s=e.length;s>r;r++){if(e[r]===t||i.isAncestorOf(t,e[r]))return e[r];if(n&&n===this._dehashify(e[r].hash))return e[r]}return null}return t=this._hashify(t),o.select('a[href$="'+t+'"]',this._menu)[0]||null},changeTab:function(t){t=this._findLinkByHref(t),t&&!n.hasClassName(t,"ink-disabled")&&this._changeTab(t,!0)},disable:function(t){n.addClassName(this._findLinkByHref(t),"ink-disabled")},enable:function(t){n.removeClassName(this._findLinkByHref(t),"ink-disabled")},activeTab:function(){return this._activeSection.getAttribute("id")},activeMenuLink:function(){return this._activeMenuLink},activeSection:function(){return this._activeSection},destroy:t.destroyComponent},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.TagField","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.UI.Droppable_1","Ink.Util.Array_1","Ink.Dom.Selector_1","Ink.UI.Common_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(){a.BaseUIComponent.apply(this,arguments)}var h=13,u=8,c=function(t){return!!t},d=1==="s,".split(/,/g).length,p=function(){var t,e=String.prototype.split,n=void 0===/()??/.exec("")[1];return t=function(t,i,o){if("[object RegExp]"!==Object.prototype.toString.call(i))return e.call(t,i,o);var r,s,a,l,h=[],u=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),c=0,i=new RegExp(i.source,u+"g");for(t+="",n||(r=new RegExp("^"+i.source+"$(?!\\s)",u)),o=void 0===o?-1>>>0:o>>>0;(s=i.exec(t))&&(a=s.index+s[0].length,!(a>c&&(h.push(t.slice(c,s.index)),!n&&s.length>1&&s[0].replace(r,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(s[t]=void 0)}),s.length>1&&s.index<t.length&&Array.prototype.push.apply(h,s.slice(1)),l=s[0].length,c=a,h.length>=o)));)i.lastIndex===s.index&&i.lastIndex++;return c===t.length?(l||!i.test(""))&&h.push(""):h.push(t.slice(c)),h.length>o?h.slice(0,o):h}}();return l._name="TagField_1",l._optionDefinition={tags:["String",[]],tagQuery:["Object",null],tagQueryAsync:["Object",null],allowRepeated:["Boolean",!1],maxTags:["Integer",-1],outSeparator:["String",","],separator:["String",/[,; ]+/g],autoSplit:["Boolean",!0]},l.prototype={_init:function(){var i=this._options;"string"==typeof i.separator&&(i.separator=new RegExp(i.separator,"g")),"string"==typeof i.tags&&(i.tags=this._readInput(i.tags)),n.addClassName(this._element,"hide-all"),this._viewElm=t.create("div",{className:"ink-tagfield",insertAfter:this._element}),this._input=t.create("input",{type:"text",className:"new-tag-input",insertBottom:this._viewElm});var o=[].concat(i.tags,this._tagsFromMarkup(this._element));this._tags=[],r.each(o,Ink.bindMethod(this,"_addTag")),e.observe(this._input,"keyup",Ink.bindEvent(this._onKeyUp,this)),e.observe(this._input,"change",Ink.bindEvent(this._onKeyUp,this)),e.observe(this._input,"keydown",Ink.bindEvent(this._onKeyDown,this)),e.observe(this._input,"blur",Ink.bindEvent(this._onBlur,this)),e.observe(this._viewElm,"click",Ink.bindEvent(this._refocus,this))},destroy:function(){t.remove(this._viewElm),n.removeClassName(this._element,"hide-all")},_tagsFromMarkup:function(e){var n=e.tagName.toLowerCase();if("input"===n)return this._readInput(e.value);if("select"===n)return r.map(e.getElementsByTagName("option"),function(e){return t.textContent(e)});throw new Error("Cannot read tags from a "+n+" tag. Unknown tag")},_tagsToMarkup:function(e,n){var i=n.tagName.toLowerCase();if("input"===i)this._options.separator&&(n.value=e.join(this._options.outSeparator));else{if("select"!==i)throw new Error("TagField: Cannot read tags from a "+i+" tag. Unknown tag");n.innerHTML="",r.each(e,function(e){var i=t.create("option",{selected:"selected"});t.setTextContent(i,e),n.appendChild(i)})}},_addTag:function(n){if(!(-1!==this._options.maxTags&&this._tags.length>=this._options.maxTags)){if(!this._options.allowRepeated&&r.inArray(n,this._tags,n)||!n)return!1;var i=t.create("span",{className:"ink-tag",setTextContent:n+" "}),o=t.create("span",{className:"remove fa fa-times",insertBottom:i});e.observe(o,"click",Ink.bindEvent(this._removeTag,this,null));var s=document.createTextNode(" ");this._tags.push(n),this._viewElm.insertBefore(i,this._input),this._viewElm.insertBefore(s,this._input),this._tagsToMarkup(this._tags,this._element)}},_readInput:function(t){return this._options.separator?r.filter(t.split(this._options.separator),c):[t]},_onKeyUp:function(){if(this._options.autoSplit){var t;if(t=d?p(this._input.value,this._options.separator):this._input.value.split(this._options.separator),!(t.length<=1)){var e=t[t.length-1];t=t.splice(0,t.length-1),t=r.filter(t,c),r.each(t,Ink.bind(this._addTag,this)),this._input.value=e}}},_onKeyDown:function(t){return t.which===h?this._onEnterKeyDown(t):t.which===u?this._onBackspaceKeyDown():void(this._removeConfirm&&this._unsetRemovingVisual(this._tags.length-1))},_onBackspaceKeyDown:function(){this._input.value||(this._removeConfirm?(this._unsetRemovingVisual(this._tags.length-1),this._removeTag(this._tags.length-1),this._removeConfirm=null):this._setRemovingVisual(this._tags.length-1))},_onEnterKeyDown:function(t){var n=this._input.value;n&&(this._addTag(n),this._input.value=""),e.stopDefault(t)},_onBlur:function(){this._addTag(this._input.value),this._input.value=""},_setRemovingVisual:function(t){var i=this._viewElm.children[t];i&&(n.addClassName(i,"tag-deleting"),this._removeRemovingVisualTimeout=setTimeout(Ink.bindMethod(this,"_unsetRemovingVisual",t),4e3),e.observe(this._input,"blur",Ink.bindMethod(this,"_unsetRemovingVisual",t)),this._removeConfirm=!0)},_unsetRemovingVisual:function(t){var e=this._viewElm.children[t];e&&(n.removeClassName(e,"tag-deleting"),clearTimeout(this._removeRemovingVisualTimeout)),this._removeConfirm=null},_removeTag:function(n){var i;if("object"==typeof n){var o=e.element(n).parentNode;i=t.parentIndexOf(this._viewElm,o)}else"number"==typeof n&&(i=n);this._tags=r.remove(this._tags,i,1),t.remove(this._viewElm.children[i]),this._tagsToMarkup(this._tags,this._element)},_refocus:function(t){return this._input.focus(),e.stop(t),!1}},a.createUIComponent(l),l}),Ink.createModule("Ink.UI.Toggle","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}return s._name="Toggle_1",s._optionDefinition={target:["Elements"],triggerEvent:["String","click"],closeOnClick:["Boolean",null],canToggleAnAncestor:["Boolean",!1],isAccordion:["Boolean",!1],initialState:["Boolean",null],classNameOn:["String","show-all"],classNameOff:["String","hide-all"],closeOnInsideClick:["String","a[href]"],onChangeState:["Function",null]},s.prototype={_init:function(){var e,o;if(this._targets=t.elsOrSelector(this._options.target),null===this._options.closeOnClick&&(this._options.closeOnClick=this._options.isAccordion||this._options.canToggleAnAncestor?!1:!0),null===this._options.initialState&&(this._options.initialState=n.hasClassName(this._targets[0],this._options.classNameOn)),"show-all"!==this._options.classNameOn||"hide-all"!==this._options.classNameOff)for(e=0,o=this._targets.length;o>e;e++)n.removeClassName(this._targets[e],"show-all"),n.removeClassName(this._targets[e],"hide-all");if(this._options.isAccordion&&(this._accordionContainer=i.findUpwardsByClass(this._element,"accordion"),this._accordionContainer||Ink.warn('Ink.UI.Toggle_1: This toggle has the isAccordion option set to `true`, but is not a descendant of an element with the class "accordion"! Because of this, it won\'t be able to find other toggles in the same accordion and cooperate with them.')),this._constructing=!0,this._bindEvents(),null!==this._options.initialState)this.setState(this._options.initialState,!0);else{var r="none"!==n.getStyle(this._targets[0],"display");this.setState(r,!0)}for(e=0,o=this._targets.length;o>e;e++)this._targets[e].style.display&&(this._targets[e].style.display="");this._element.setAttribute("data-is-toggle-trigger","true"),this._constructing=!1},_bindEvents:function(){if(this._options.triggerEvent&&e.on(this._element,this._options.triggerEvent,Ink.bind(this._onTriggerEvent,this)),this._options.closeOnClick&&e.observe(document,"click",Ink.bind(this._onOutsideClick,this)),this._options.closeOnInsideClick){var t=this._options.closeOnInsideClick;"true"===t.toString()&&(t="*"),e.observeMulti(this._targets,"click",Ink.bind(function(n){i.findUpwardsBySelector(e.element(n),t)&&this.setState(!1,!0)},this))}},_onTriggerEvent:function(t){var n=e.element(t),o=r.some(this._targets,function(t){return t===n||i.isAncestorOf(t,n)});if(this._options.canToggleAnAncestor||!o){var s=this.getState();this.setState(!s,!0),!s&&this._firstTime&&(this._firstTime=!1),e.stopDefault(t)}},_updateAccordion:function(){if(this._accordionContainer&&this.getState()!==!1)for(var t=o.select("[data-is-toggle-trigger]",this._accordionContainer),e=0;e<t.length;e++){var n=s.getInstance(t[e]);n&&n!==this&&n.getState()===!0&&n.setState(!1,!0)}},_onOutsideClick:function(t){var n,o=e.element(t);if(i.isAncestorOf(document.documentElement,o)){var s=r.some(this._targets,function(t){return i.isAncestorOf(t,o)||t===o});if(this._element!==o&&!i.isAncestorOf(this._element,o)&&!s){if((n=Ink.ss(".ink-shade")).length)for(var a=n.length,l=0;a>l;l++)if(i.isAncestorOf(n[l],o)&&i.isAncestorOf(n[l],this._element))return;this.setState(!1,!0)}}},setState:function(t,e){if(t!==this.getState()||this._constructing){var i,o;if(this._group&&t)for(i=0,o=this._group.length;o>i;i++)this._group[i].getState()===!0&&this._group[i].setState(!1,!0);if(e&&"function"==typeof this._options.onChangeState){var r=this._options.onChangeState.call(this,t,{element:this._element});if(r===!1)return!1}for(i=0,o=this._targets.length;o>i;i++)n.addRemoveClassName(this._targets[i],this._options.classNameOn,t),n.addRemoveClassName(this._targets[i],this._options.classNameOff,!t);n.addRemoveClassName(this._element,"active",t),this._accordionContainer&&this._updateAccordion()}},getState:function(){return n.hasClassName(this._element,"active")}},t.createUIComponent(s),s}),Ink.createModule("Ink.UI.Tooltip","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Dom.Css_1","Ink.Dom.Browser_1"],function(t,e,n,i,o,r){"use strict";function s(t,e){this._init(t,e||{})}function a(t,e){this._init(t,e)}var l,h,u;!function(){for(var t=document.createElement("DIV"),e=["transition","oTransition","msTransition","mozTransition","webkitTransition"],n=0;n<e.length;n++)if("undefined"!=typeof t.style[e[n]+"Duration"]){l=e[n]+"Duration",h=e[n]+"Property",u=e[n]+"TimingFunction";break}}();var c=document.getElementsByTagName("body"),d=c.length?c[0]:document.documentElement;return s.prototype={_init:function(t,e){var n;if(this.options=Ink.extendObj({where:"up",zIndex:1e4,left:10,top:10,spacing:8,forever:0,color:"",timeout:0,delay:0,template:null,templatefield:null,fade:.3,text:""},e||{}),"string"==typeof t)n=i.select(t);else{if("object"!=typeof t)throw"Element expected";n=[t]}this.tooltips=[];for(var o=0,r=n.length;r>o;o++)this.tooltips[o]=new a(this,n[o])},destroy:function(){o.each(this.tooltips,function(t){t._destroy()}),this.tooltips=null,this.options=null}},a.prototype={_oppositeDirections:{left:"right",right:"left",up:"down",down:"up"},_init:function(n,i){e.observe(i,"mouseover",Ink.bindEvent(this._onMouseOver,this)),e.observe(i,"focus",Ink.bindEvent(this._onMouseOver,this)),e.observe(i,"mouseout",Ink.bindEvent(this._onMouseOut,this)),e.observe(i,"blur",Ink.bindEvent(this._onMouseOut,this)),e.observe(i,"mousemove",Ink.bindEvent(this._onMouseMove,this)),this.root=n,this.element=i,this._delayTimeout=null,this.tooltip=null,t.registerInstance(this,this.element)},_makeTooltip:function(t){if(!this._getOpt("text")&&!this._getOpt("html")&&!n.hasAttribute(this.element,"title"))return!1;var i=this._createTooltipElement();this.tooltip&&this._removeTooltip(),this.tooltip=i,this._fadeInTooltipElement(i),this._placeTooltipElement(i,t),e.observe(i,"mouseover",Ink.bindEvent(this._onTooltipMouseOver,this));var o=this._getFloatOpt("timeout");o&&setTimeout(Ink.bind(function(){this.tooltip===i&&this._removeTooltip()},this),1e3*o)},_createTooltipElement:function(){var e,o,s=this._getOpt("template"),a=this._getOpt("templatefield");if(s){var l=document.createElement("DIV");if(l.innerHTML=t.elOrSelector(s,"options.template").outerHTML,e=l.firstChild,a){if(o=i.select(a,e),!o)throw"options.templatefield must be a valid selector within options.template";o=o[0]}else o=e}else e=document.createElement("DIV"),r.addClassName(e,"ink-tooltip"),r.addClassName(e,this._getOpt("color")),o=document.createElement("DIV"),r.addClassName(o,"content"),e.appendChild(o);return this._getOpt("html")?o.innerHTML=this._getOpt("html"):this._getOpt("text")?n.setTextContent(o,this._getOpt("text")):n.setTextContent(o,this.element.getAttribute("title")),e.style.display="block",e.style.position="absolute",e.style.zIndex=this._getIntOpt("zIndex"),e},_fadeInTooltipElement:function(t){var e=this._getFloatOpt("fade");l&&e&&(t.style.opacity="0",t.style[l]=e+"s",t.style[h]="opacity",t.style[u]="ease-in-out",setTimeout(function(){t.style.opacity="1"},0))},_placeTooltipElement:function(t,e){var i=this._getOpt("where");if(null!==e||"mousemove"!==i&&"mousefix"!==i||(i="up"),"mousemove"===i||"mousefix"===i){var o=e;this._setPos(o[0],o[1]),d.appendChild(t)}else if(i.match(/(up|down|left|right)/)){d.appendChild(t);var s=n.offset(this.element),a=s[0],l=s[1],h=n.elementWidth(this.element)/2-n.elementWidth(t)/2,u=n.elementHeight(this.element)/2-n.elementHeight(t)/2,c=this._getIntOpt("spacing"),p=n.elementDimensions(t),f=n.elementDimensions(this.element),m=n.scrollWidth()+n.viewportWidth(),_=n.scrollHeight()+n.viewportHeight();i=this._getWhereValueInsideViewport(i,{left:a-p[0],right:a+p[0],top:l+p[1],bottom:l+p[1]},{right:m,bottom:_}),"up"===i?(l-=p[1],l-=c,a+=h):"down"===i?(l+=f[1],l+=c,a+=h):"left"===i?(a-=p[0],a-=c,l+=u):"right"===i&&(a+=f[0],a+=c,l+=u);var g=null;i.match(/(up|down|left|right)/)&&(g=document.createElement("SPAN"),r.addClassName(g,"arrow"),r.addClassName(g,this._oppositeDirections[i]),t.appendChild(g));var v=a,y=l,b=y+p[1]-_,k=v+p[0]-m,C=0-v,I=0-y;b>0?(g&&(g.style.top=p[1]/2+b+"px"),y-=b):I>0?(g&&(g.style.top=p[1]/2-I+"px"),y+=I):k>0?(g&&(g.style.left=p[0]/2+k+"px"),v-=k):C>0&&(g&&(g.style.left=p[0]/2-C+"px"),v+=C),t.style.left=v+"px",t.style.top=y+"px"}},_getWhereValueInsideViewport:function(t,e,n){return"left"===t&&e.left<0?"right":"right"===t&&e.right>n.right?"left":"up"===t&&e.top<0?"down":"down"===t&&e.bottom>n.bottom?"up":t},_removeTooltip:function(){var t=this.tooltip;if(t){var e=Ink.bind(n.remove,{},t);"mousemove"!==this._getOpt("where")&&l?(t.style.opacity=0,setTimeout(e,1e3*this._getFloatOpt("fade"))):e(),this.tooltip=null}},_getOpt:function(t){var e=n.data(this.element)[n._camelCase("tip-"+t)];if(e)return e;var i=this.root.options[t];return"undefined"!=typeof i?i:void 0},_getIntOpt:function(t){return parseInt(this._getOpt(t),10)},_getFloatOpt:function(t){return parseFloat(this._getOpt(t),10)},_destroy:function(){this.tooltip&&n.remove(this.tooltip),this.root=null,this.element=null,this.tooltip=null},_onMouseOver:function(t){var e;e="mouseover"!==t.type?null:this._getMousePosition(t);var n=this._getFloatOpt("delay");n?this._delayTimeout=setTimeout(Ink.bind(function(){this.tooltip||this._makeTooltip(e),this._delayTimeout=null},this),1e3*n):this._makeTooltip(e)},_onMouseMove:function(t){if("mousemove"===this._getOpt("where")&&this.tooltip){var e=this._getMousePosition(t);this._setPos(e[0],e[1])}},_onMouseOut:function(){this._getIntOpt("forever")||this._removeTooltip(),this._delayTimeout&&(clearTimeout(this._delayTimeout),this._delayTimeout=null)},_onTooltipMouseOver:function(){this.tooltip&&this._removeTooltip()},_setPos:function(t,e){t+=this._getIntOpt("left"),e+=this._getIntOpt("top");var i=this._getPageXY();if(this.tooltip){var o=[n.elementWidth(this.tooltip),n.elementHeight(this.tooltip)],r=this._getScroll();o[0]+t-r[0]>=i[0]-20&&(t=t-o[0]-this._getIntOpt("left")-10),o[1]+e-r[1]>=i[1]-20&&(e=e-o[1]-this._getIntOpt("top")-10),this.tooltip.style.left=t+"px",this.tooltip.style.top=e+"px"}},_getPageXY:function(){var t=0,e=0;return"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(t=document.body.clientWidth,e=document.body.clientHeight),[parseInt(t,10),parseInt(e,10)]},_getScroll:function(){var t=document.documentElement,e=document.body;return t&&(t.scrollLeft||t.scrollTop)?[t.scrollLeft,t.scrollTop]:e?[e.scrollLeft,e.scrollTop]:[0,0]},_getMousePosition:function(t){return[parseInt(e.pointerX(t),10),parseInt(e.pointerY(t),10)]}},s}),Ink.createModule("Ink.UI.TreeView","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}return s._name="TreeView_1",s._optionDefinition={node:["String","li"],children:["String","ul"],parentClass:["String","parent"],openNodeClass:["String","open"],openClass:["String","fa fa-minus-circle"],closedClass:["String","fa fa-plus-circle"],hideClass:["String","hide-all"],iconTag:["String","i"],stopDefault:["Boolean",!0]},s.prototype={_init:function(){this._handlers={click:Ink.bindEvent(this._onClick,this)},e.on(this._element,"click",this._options.node,this._handlers.click),r.each(Ink.ss(this._options.node,this._element),Ink.bind(function(t){if(this.isParent(t)){n.addClassName(t,this._options.parentClass);
var e=this.isOpen(t);this._getIcon(t)||i.create(this._options.iconTag,{insertTop:t}),this._setNodeOpen(t,e)}},this))},_getIcon:function(t){return Ink.s("> "+this._options.iconTag,t)},isOpen:function(t){if(!this._getChild(t))throw new Error("not a node!");return"true"===t.getAttribute("data-open")||n.hasClassName(t,this._options.openNodeClass)},isParent:function(t){return n.hasClassName(t,this._options.parentClass)||null!=this._getChild(t)},_setNodeOpen:function(t,e){var i=this._getChild(t);if(i){n.setClassName(i,this._options.hideClass,!e);var o=this._getIcon(t);t.setAttribute("data-open",e);var r=e?this._options.openClass:this._options.closedClass,s=e?this._options.closedClass:this._options.openClass;n.removeClassName(o,s),n.addClassName(o,r),n.setClassName(t,this._options.openNodeClass,e)}else Ink.error("Ink.UI.TreeView: node",t,"is not a node!")},open:function(t){this._setNodeOpen(t,!0)},close:function(t){this._setNodeOpen(t,!1)},toggle:function(t){this.isOpen(t)?this.close(t):this.open(t)},_getChild:function(t){return o.select(this._options.children,t)[0]||null},_onClick:function(t){!this.isParent(t.currentTarget)||o.matchesSelector(t.target,this._options.node)||o.matchesSelector(t.target,this._options.children)||(this._options.stopDefault&&t.preventDefault(),this.toggle(t.currentTarget))}},t.createUIComponent(s),s}),Ink.createModule("Ink.UI.Upload","1",["Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Browser_1","Ink.UI.Common_1"],function(t,e,n,i){"use strict";var o=function(t){this.init(t)};o.prototype={init:function(t){this._options=Ink.extendObj({entry:void 0,maxDepth:10},t||{});try{this._read()}catch(e){Ink.error(e)}},_read:function(){if(!this._options.entry)return void Ink.error("You must specify the entry!");try{this._readDirectories()}catch(t){Ink.error(t)}},_readDirectories:function(){var t=[],e=!1,n=0,i=Ink.bind(function(o){var r=o.createReader();e=!0,r.readEntries(Ink.bind(function(o){if(o.length>0){for(var r=0,s=o.length;s>r;r++)t.push(o[r]),o[r].isDirectory&&(n=this.clearArray(o[r].fullPath.split("/")),n.shift(),n=n.length,n<=this._options.maxDepth&&i(o[r]));this._stopActivityTimeout&&clearTimeout(this._stopActivityTimeout),this._stopActivityTimeout=setTimeout(function(){e=!1},250)}o.length||(e=!1)},this),Ink.bind(function(t){this._options.readError(t,o)},this))},this);i(this._options.entry);var o,r=function(){return e?!1:(clearInterval(o),this._options.readComplete&&"function"==typeof this._options.readComplete&&this._options.readComplete(t),!0)};o=setInterval(Ink.bind(r,this),250)},clearArray:function(t){for(var e=t.length-1;e>=0;e--)("undefined"==typeof t[e]||null===t[e]||""===t[e])&&t.splice(e,1);return t}};var r={lists:[],items:[],create:function(t){var e;return t=String(t),this.lists.push({name:t}),e=this.lists.length-1},getItems:function(t){if(!t)return this.items;for(var e=[],n=0,i=this.items.length;i>n;n++)this.items[n].parentId===t&&e.push(this.items[n]);return e},purge:function(t,e){if("number"!=typeof t||isNaN(Number(t)))return!1;try{for(var n=this.items.length;n>=0;n--)this.items[n]&&t===this.items[n].parentId&&this.remove(this.items[n].parentId,this.items[n].pid);return e||this.lists.splice(t,1),!0}catch(i){return Ink.error("Purge: invalid id"),!1}},add:function(t,e,n){if(!this.lists[t])return!1;"object"!=typeof e&&(e=String(e));var i=parseInt(Math.round(1e5*Math.random())+""+Math.round(1e5*Math.random()),10);return n=n||0,this.items.push({parentId:t,item:e,priority:n||0,pid:i}),i},view:function(t,e){var n=this._searchByPid(t,e);return n===!1?!1:this.items[n]},remove:function(t,e){try{var n=this._searchByPid(t,e);return n===!1?!1:(this.items.splice(n,1),!0)}catch(i){return Ink.error("Remove: invalid id"),!1}},_searchByPid:function(t,e){if(!t&&"boolean"==typeof t||!e)return!1;if(t=parseInt(t,10),e=parseInt(e,10),isNaN(t)||isNaN(e))return!1;for(var n=0,i=this.items.length;i>n;n++)if(this.items[n].parentId===t&&this.items[n].pid===e)return n;return!1}},s=function(t){this.Upload=t,this.init()};s.prototype={init:function(){this._fileButton=this.Upload._options.fileButton,this._dropzone=this.Upload._options.dropzone,this._setDropEvent(),this._setFileButton()},_setDropEvent:function(){var t=this._dropzone;if(t)for(var e=0,n=t.length;n>e;e++)t[e].ondrop=Ink.bindEvent(this.Upload._dropEventHandler,this.Upload),t[e].ondragleave=Ink.bindEvent(this._onDragLeave,this),t[e].ondragend=Ink.bindEvent(this._onDragEndEventHandler,this),t[e].ondragdrop=Ink.bindEvent(this._onDragEndEventHandler,this),t[e].ondragenter=Ink.bindEvent(this._onDragEnterHandler,this),t[e].ondragover=Ink.bindEvent(this._onDragOverHandler,this)},_onDragEnterHandler:function(t){return t&&t.stopPropagation&&t.stopPropagation(),t&&t.preventDefault&&t.preventDefault(),t&&(t.returnValue=!1),this.Upload.publish("DragEnter",t),!1},_onDragOverHandler:function(t){return t?(t.preventDefault(),t.stopPropagation(),t.returnValue=!1,!0):!1},_onDragLeave:function(t){return this.Upload.publish("DragLeave",t)},_onDragEndEventHandler:function(t){return this.Upload.publish("DragEnd",t)},_setFileButton:function(){var e=this._fileButton;e&&t.observeMulti(e,"change",Ink.bindEvent(this._fileChangeHandler,this))},_fileChangeHandler:function(n){var i=t.element(n),o=i.files,r=e.findUpwardsByTag(i,"form");return o&&window.FormData&&"withCredentials"in new XMLHttpRequest?(this.Upload._addFilesToQueue(o),void(i.value="")):(r.parentNode.submit(),!1)}};var a=function(t){this.Queue=r,this.init(t),this._events={}};return a.prototype={init:function(t){if("string"==typeof t&&(t=e.data(i.elOrSelector(t,"1st argument"))),this._options=Ink.extendObj({dropzone:void 0,fileButton:void 0,fileFormName:"Ink_Filelist",endpoint:"",maxFilesize:300<<20,INVALID_FILE_NAME:void 0,extraData:{},useChunks:!1,chunkSize:4194304,minSizeToUseChunks:20971520,endpointChunk:"",endpointChunkCommit:"",foldersEnabled:!1,directoryMaxDepth:10},t||{}),this._queueId=r.create("Ink_UPLOAD"),this._queueRunning=!1,this._folders={},this._options.dropzone&&(this._options.dropzone=i.elsOrSelector(this._options.dropzone,"Ink.UI.Upload - dropzone")),this._options.fileButton&&(this._options.fileButton=i.elsOrSelector(this._options.fileButton,"Ink.UI.Upload - fileButton")),!this._options.dropzone&&!this._options.fileButton)throw new TypeError("Ink.UI.Upload: Specify a fileButton or a Dropzone!");new s(this)},_supportChunks:function(t){return this._options.useChunks&&"Blob"in window&&(new Blob).slice&&t>this._options.minSizeToUseChunks},_dropEventHandler:function(e){t.stop(e),this.publish("DropComplete",e.dataTransfer);var n=e.dataTransfer;if(!n||!n.files||!n.files.length)return!1;if(this._files=n.files,this._files=Array.prototype.slice.call(this._files||[],0),n.items&&n.items[0]&&n.items[0].webkitGetAsEntry){if(!this._options.foldersEnabled)return setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0);for(var i,o=[],r=e.dataTransfer.items.length-1;r>=0;r--)i=e.dataTransfer.items[r].webkitGetAsEntry(),i&&i.isDirectory&&(o.push(i),this._files[r].isDirectory=!0,this._files.splice(r,1));this._addFolderToQueue(o,Ink.bind(function(){setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0)},this))}else setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0);return!0},_addFolderToQueue:function(t,e){var n=[],i={};if(!t||!t.length)return e(),n;var r=function(t){for(var e=[],n=0,i=t.length;i>n;n++)t[n].isFile&&e.push(t[n]);return e},s=function(t,e){var i;return e=e||0,this._files[e]?"fileentry"!==this._files[e].constructor.name.toLowerCase()?s.apply(this,[t,++e]):void this._files[e].file(Ink.bind(function(n){i=this._files[e].fullPath,this._files[e]=n,this._files[e].hasParent=!0,this._files[e].fullPath||(this._files[e].fullPath=i),s.apply(this,[t,++e])},this),Ink.bind(function(){this._files.splice(e,1),s.apply(this,[t,e])},this)):(t(),n)},a=Ink.bind(function(l){return t[l]?void new o({entry:t[l],maxDepth:this._options.directoryMaxDepth,readComplete:Ink.bind(function(e){if(n=n.concat(r(e)),t[l]&&!(t[l].fullPath in this._folders)){this._folders[t[l].fullPath]={items:e,files:n,length:e.length,created:!1,root:!0};for(var o=0,s=e.length;s>o;o++)e[o].isFile||(e[o].fullPath in i?delete i[e[o].fullPath]:this._folders[e[o].fullPath]={created:!1,root:!1});a(++l)}},this),readError:Ink.bind(function(t,e){i[e.fullPath]={},i[e.fullPath].error=t},this)}):(this._files=this._files.concat(n),s.call(this,e),!1)},this);return a(0),n},_addFilesToQueue:function(t){for(var e,i,o,s=0,a=t.length;a>s;s++)e=t[s],e.isDirectory||null!==e&&(e.type||e.size%4096!==0||n.CHROME&&this._options.foldersEnabled)?e.size>this._options.maxFilesize?this.publish("MaxSizeFailure",e,this._options.maxFilesize):(i=parseInt(Math.round(1e5*Math.random())+""+Math.round(1e5*Math.random()),10),o={id:s,data:e,fileID:i,directory:e.isDirectory},r.add(this._queueId,o),this.publish("FileAddedToQueue",o)):this.publish("InvalidFile",e,"size");this._processQueue(!0),this._files=[]},_processQueue:function(t){if(this._queueRunning)return!1;this.running=0;var e,n=1,i=0,o=r.items.length;this._queueRunning=!0,this.interval=setInterval(Ink.bind(function(){if(r.items.length===i&&0===this.running&&(r.purge(this._queueId,!0),this._queueRunning=!1,clearInterval(this.interval),this.publish("QueueEnd",this._queueId,o)),e=r.getItems(this._queueId),this.running<n&&e[i]){if(e[i].canceled)for(var a=i;e[a]&&e[a].canceled;)i++,a++;else s.call(this,e[i].pid,e[i].item.data,e[i].item.fileID,e[i].item.directory,t),this.running++,i++;return!0}return!1},this),100);var s=function(t,e,n,i,o){var r={file:e,fileID:n,cb:Ink.bind(function(){this.running--},this)};o&&(i?r.cb():this._upload(r))};return!0},_upload:function(t){var e=t.file,n=new XMLHttpRequest,i=t.fileID;this.publish("BeforeUpload",e,this._options.extraData,i,n,this._supportChunks(e.size));var o=function(o){t.cb&&t.cb(),this.publish("OnProgress",{length:e.size,lengthComputable:!0,loaded:e.size,total:e.size},e,i),this.publish("EndUpload",e,i,o?{error:!0}:!0),this.publish("InvalidFile",e,"name"),n.abort()};if(this._options.INVALID_FILE_NAME&&this._options.INVALID_FILE_NAME instanceof RegExp&&this._options.INVALID_FILE_NAME.test(t.file.name))return void o.call(this);if(!e.lastModifiedDate&&!Ink.Dom.Browser.OPERA)return void o.call(this,!0);n.upload.onprogress=Ink.bind(this.publish,this,"OnProgress",e,i);var r,s;this._supportChunks(e.size)?e.size<=e.chunk_offset?(r=this._options.endpointChunkCommit,s="POST"):(r=this._options.endpointChunk,e.chunk_upload_id&&(r+="?upload_id="+e.chunk_upload_id),e.chunk_offset&&(r+="&offset="+e.chunk_offset),s="PUT"):(r=this._options.endpoint,s="POST"),n.open(s,r,!0),n.withCredentials=!0,n.setRequestHeader("x-requested-with","XMLHttpRequest"),this._supportChunks(e.size)&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var a,l=new FormData;if("Blob"in window&&"function"==typeof Blob?(a=new Blob([e],{type:e.type}),this._supportChunks(e.size)?(e.chunk_offset=e.chunk_offset||0,a=a.slice(e.chunk_offset,e.chunk_offset+this._options.chunkSize)):l.append(this._options.fileFormName,a,e.name)):l.append(this._options.fileFormName,e),this._supportChunks(e.size))l.append("upload_id",e.chunk_upload_id),l.append("path",e.upload_path);else for(var h in this._options.extraData)this._options.extraData.hasOwnProperty(h)&&l.append(h,this._options.extraData[h]);e.hasParent?this.publish("cbCreateFolder",e.parentID,e.fullPath,this._options.extraData,this._folders,e.rootPath,Ink.bind(function(){n.send(this._supportChunks(e.size)?e.size<=e.chunk_offset?"upload_id="+e.chunk_upload_id+"&path="+e.upload_path+"/"+e.name:a:l)},this)):n.send(this._supportChunks(e.size)?e.size<=e.chunk_offset?"upload_id="+e.chunk_upload_id+"&path="+e.upload_path+"/"+e.name:a:l),n.onload=Ink.bindEvent(function(){if(this._supportChunks(e.size)&&e.size>e.chunk_offset){if(n.response){var o=JSON.parse(n.response),r=e.chunk_offset&&o.offset!==e.chunk_offset+this._options.chunkSize&&e.size!==o.offset;r?(t.cb&&t.cb(),this.publish("ErrorUpload",e,i)):(e.chunk_upload_id=o.upload_id,e.chunk_offset=o.offset,e.chunk_expires=o.expires,this._upload(t))}else t.cb&&t.cb(),this.publish("ErrorUpload",e,i);return n=null}return t.cb&&t.cb(),n.responseText&&n.status<400?this.publish("EndUpload",e,i,n.responseText):this.publish("ErrorUpload",e,i),n=null},this),n.onerror=Ink.bindEvent(function(){t.cb&&t.cb(),this.publish("ErrorUpload",e,i)},this),n.onabort=Ink.bindEvent(function(){t.cb&&t.cb(),this.publish("AbortUpload",e,i,{abortAll:Ink.bind(this.abortAll,this),abortOne:Ink.bind(this.abortOne,this)})},this)},abortAll:function(){return this._queueRunning?(clearInterval(this.interval),this._queueRunning=!1,r.purge(this._queueId,!0),!0):!1},abortOne:function(t,e){for(var n,i=r.getItems(0),o=0,s=i.length;s>o;o++)if(i[o].item.fileID===t)return n={id:i[o].item.fileID,name:i[o].item.data.name,size:i[o].item.data.size,hasParent:i[o].item.data.hasParent},r.remove(0,i[o].pid),e&&e(n),!0;return!1},subscribe:function(t,e){return this._events[t]||(this._events[t]=[]),this._events[t].push(e),this._events[t]},publish:function(t){var e=this._events[t],n=Array.prototype.slice.call(arguments||[],0);if(e)for(var i=0,o=e.length;o>i;i++)try{e[i].apply(this,n.splice(1,n.length))}catch(r){Ink.error(t+": "+r)}}},a}),/*!
 * Modernizr v2.6.3
 * www.modernizr.com
 *
 * Copyright (c) Faruk Ates, Paul Irish, Alex Sexton
 * Available under the BSD and MIT licenses: www.modernizr.com/license/
 */
window.Modernizr=function(t,e,n){function i(t){y.cssText=t}function o(t,e){return i(I.join(t+";")+(e||""))}function r(t,e){return typeof t===e}function s(t,e){return!!~(""+t).indexOf(e)}function a(t,e){for(var i in t){var o=t[i];if(!s(o,"-")&&y[o]!==n)return"pfx"==e?o:!0}return!1}function l(t,e,i){for(var o in t){var s=e[t[o]];if(s!==n)return i===!1?t[o]:r(s,"function")?s.bind(i||e):s}return!1}function h(t,e,n){var i=t.charAt(0).toUpperCase()+t.slice(1),o=(t+" "+E.join(i+" ")+i).split(" ");return r(e,"string")||r(e,"undefined")?a(o,e):(o=(t+" "+S.join(i+" ")+i).split(" "),l(o,e,n))}function u(){f.input=function(n){for(var i=0,o=n.length;o>i;i++)N[n[i]]=!!(n[i]in b);return N.list&&(N.list=!(!e.createElement("datalist")||!t.HTMLDataListElement)),N}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),f.inputtypes=function(t){for(var i,o,r,s=0,a=t.length;a>s;s++)b.setAttribute("type",o=t[s]),i="text"!==b.type,i&&(b.value=k,b.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(o)&&b.style.WebkitAppearance!==n?(_.appendChild(b),r=e.defaultView,i=r.getComputedStyle&&"textfield"!==r.getComputedStyle(b,null).WebkitAppearance&&0!==b.offsetHeight,_.removeChild(b)):/^(search|tel)$/.test(o)||(i=/^(url|email)$/.test(o)?b.checkValidity&&b.checkValidity()===!1:b.value!=k)),T[t[s]]=!!i;return T}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var c,d,p="2.6.3",f={},m=!0,_=e.documentElement,g="modernizr",v=e.createElement(g),y=v.style,b=e.createElement("input"),k=":)",C={}.toString,I=" -webkit- -moz- -o- -ms- ".split(" "),w="Webkit Moz O ms",E=w.split(" "),S=w.toLowerCase().split(" "),x={svg:"http://www.w3.org/2000/svg"},D={},T={},N={},O=[],M=O.slice,A=function(t,n,i,o){var r,s,a,l,h=e.createElement("div"),u=e.body,c=u||e.createElement("body");if(parseInt(i,10))for(;i--;)a=e.createElement("div"),a.id=o?o[i]:g+(i+1),h.appendChild(a);return r=["&#173;",'<style id="s',g,'">',t,"</style>"].join(""),h.id=g,(u?h:c).innerHTML+=r,c.appendChild(h),u||(c.style.background="",c.style.overflow="hidden",l=_.style.overflow,_.style.overflow="hidden",_.appendChild(c)),s=n(h,t),u?h.parentNode.removeChild(h):(c.parentNode.removeChild(c),_.style.overflow=l),!!s},P=function(e){var n=t.matchMedia||t.msMatchMedia;if(n)return n(e).matches;var i;return A("@media "+e+" { #"+g+" { position: absolute; } }",function(e){i="absolute"==(t.getComputedStyle?getComputedStyle(e,null):e.currentStyle).position}),i},L=function(){function t(t,o){o=o||e.createElement(i[t]||"div"),t="on"+t;var s=t in o;return s||(o.setAttribute||(o=e.createElement("div")),o.setAttribute&&o.removeAttribute&&(o.setAttribute(t,""),s=r(o[t],"function"),r(o[t],"undefined")||(o[t]=n),o.removeAttribute(t))),o=null,s}var i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t}(),U={}.hasOwnProperty;d=r(U,"undefined")||r(U.call,"undefined")?function(t,e){return e in t&&r(t.constructor.prototype[e],"undefined")}:function(t,e){return U.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=M.call(arguments,1),i=function(){if(this instanceof i){var o=function(){};o.prototype=e.prototype;var r=new o,s=e.apply(r,n.concat(M.call(arguments)));return Object(s)===s?s:r}return e.apply(t,n.concat(M.call(arguments)))};return i}),D.flexbox=function(){return h("flexWrap")},D.flexboxlegacy=function(){return h("boxDirection")},D.canvas=function(){var t=e.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},D.canvastext=function(){return!(!f.canvas||!r(e.createElement("canvas").getContext("2d").fillText,"function"))},D.webgl=function(){return!!t.WebGLRenderingContext},D.touch=function(){var n;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?n=!0:A(["@media (",I.join("touch-enabled),("),g,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){n=9===t.offsetTop}),n},D.geolocation=function(){return"geolocation"in navigator},D.postmessage=function(){return!!t.postMessage},D.websqldatabase=function(){return!!t.openDatabase},D.indexedDB=function(){return!!h("indexedDB",t)},D.hashchange=function(){return L("hashchange",t)&&(e.documentMode===n||e.documentMode>7)},D.history=function(){return!(!t.history||!history.pushState)},D.draganddrop=function(){var t=e.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t},D.websockets=function(){return"WebSocket"in t||"MozWebSocket"in t},D.rgba=function(){return i("background-color:rgba(150,255,150,.5)"),s(y.backgroundColor,"rgba")},D.hsla=function(){return i("background-color:hsla(120,40%,100%,.5)"),s(y.backgroundColor,"rgba")||s(y.backgroundColor,"hsla")},D.multiplebgs=function(){return i("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(y.background)},D.backgroundsize=function(){return h("backgroundSize")},D.borderimage=function(){return h("borderImage")},D.borderradius=function(){return h("borderRadius")},D.boxshadow=function(){return h("boxShadow")},D.textshadow=function(){return""===e.createElement("div").style.textShadow},D.opacity=function(){return o("opacity:.55"),/^0.55$/.test(y.opacity)},D.cssanimations=function(){return h("animationName")},D.csscolumns=function(){return h("columnCount")},D.cssgradients=function(){var t="background-image:",e="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return i((t+"-webkit- ".split(" ").join(e+t)+I.join(n+t)).slice(0,-t.length)),s(y.backgroundImage,"gradient")},D.cssreflections=function(){return h("boxReflect")},D.csstransforms=function(){return!!h("transform")},D.csstransforms3d=function(){var t=!!h("perspective");return t&&"webkitPerspective"in _.style&&A("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e){t=9===e.offsetLeft&&3===e.offsetHeight}),t},D.csstransitions=function(){return h("transition")},D.fontface=function(){var t;return A('@font-face {font-family:"font";src:url("https://")}',function(n,i){var o=e.getElementById("smodernizr"),r=o.sheet||o.styleSheet,s=r?r.cssRules&&r.cssRules[0]?r.cssRules[0].cssText:r.cssText||"":"";t=/src/i.test(s)&&0===s.indexOf(i.split(" ")[0])}),t},D.generatedcontent=function(){var t;return A(["#",g,"{font:0/0 a}#",g,':after{content:"',k,'";visibility:hidden;font:3px/1 a}'].join(""),function(e){t=e.offsetHeight>=3}),t},D.video=function(){var t=e.createElement("video"),n=!1;try{(n=!!t.canPlayType)&&(n=new Boolean(n),n.ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(i){}return n},D.audio=function(){var t=e.createElement("audio"),n=!1;try{(n=!!t.canPlayType)&&(n=new Boolean(n),n.ogg=t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=t.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(i){}return n},D.localstorage=function(){try{return localStorage.setItem(g,g),localStorage.removeItem(g),!0}catch(t){return!1}},D.sessionstorage=function(){try{return sessionStorage.setItem(g,g),sessionStorage.removeItem(g),!0}catch(t){return!1}},D.webworkers=function(){return!!t.Worker},D.applicationcache=function(){return!!t.applicationCache},D.svg=function(){return!!e.createElementNS&&!!e.createElementNS(x.svg,"svg").createSVGRect},D.inlinesvg=function(){var t=e.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==x.svg},D.smil=function(){return!!e.createElementNS&&/SVGAnimate/.test(C.call(e.createElementNS(x.svg,"animate")))},D.svgclippaths=function(){return!!e.createElementNS&&/SVGClipPath/.test(C.call(e.createElementNS(x.svg,"clipPath")))};for(var F in D)d(D,F)&&(c=F.toLowerCase(),f[c]=D[F](),O.push((f[c]?"":"no-")+c));return f.input||u(),f.addTest=function(t,e){if("object"==typeof t)for(var i in t)d(t,i)&&f.addTest(i,t[i]);else{if(t=t.toLowerCase(),f[t]!==n)return f;e="function"==typeof e?e():e,"undefined"!=typeof m&&m&&(_.className+=" "+(e?"":"no-")+t),f[t]=e}return f},i(""),v=b=null,function(t,e){function n(t,e){var n=t.createElement("p"),i=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var t=g.elements;return"string"==typeof t?t.split(" "):t}function o(t){var e=_[t[f]];return e||(e={},m++,t[f]=m,_[m]=e),e}function r(t,n,i){if(n||(n=e),u)return n.createElement(t);i||(i=o(n));var r;return r=i.cache[t]?i.cache[t].cloneNode():p.test(t)?(i.cache[t]=i.createElem(t)).cloneNode():i.createElem(t),r.canHaveChildren&&!d.test(t)?i.frag.appendChild(r):r}function s(t,n){if(t||(t=e),u)return t.createDocumentFragment();n=n||o(t);for(var r=n.frag.cloneNode(),s=0,a=i(),l=a.length;l>s;s++)r.createElement(a[s]);return r}function a(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return g.shivMethods?r(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/\w+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(g,e.frag)}function l(t){t||(t=e);var i=o(t);return!g.shivCSS||h||i.hasCSS||(i.hasCSS=!!n(t,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),u||a(t,i),t}var h,u,c=t.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f="_html5shiv",m=0,_={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",h="hidden"in t,u=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(n){h=!0,u=!0}}();var g={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:u,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:l,createElement:r,createDocumentFragment:s};t.html5=g,l(e)}(this,e),f._version=p,f._prefixes=I,f._domPrefixes=S,f._cssomPrefixes=E,f.mq=P,f.hasEvent=L,f.testProp=function(t){return a([t])},f.testAllProps=h,f.testStyles=A,f.prefixed=function(t,e,n){return e?h(t,e,n):h(t,"pfx")},_.className=_.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(m?" js "+O.join(" "):""),f}(this,this.document),window.Modernizr=function(t,e,n){function i(t){v.cssText=t}function o(t,e){return typeof t===e}function r(t,e){return!!~(""+t).indexOf(e)}function s(t,e){for(var i in t){var o=t[i];if(!r(o,"-")&&v[o]!==n)return"pfx"==e?o:!0}return!1}function a(t,e,i){for(var r in t){var s=e[t[r]];if(s!==n)return i===!1?t[r]:o(s,"function")?s.bind(i||e):s}return!1}function l(t,e,n){var i=t.charAt(0).toUpperCase()+t.slice(1),r=(t+" "+b.join(i+" ")+i).split(" ");return o(e,"string")||o(e,"undefined")?s(r,e):(r=(t+" "+k.join(i+" ")+i).split(" "),a(r,e,n))}var h,u,c,d="2.7.1",p={},f=!0,m=e.documentElement,_="modernizr",g=e.createElement(_),v=g.style,y=({}.toString,"Webkit Moz O ms"),b=y.split(" "),k=y.toLowerCase().split(" "),C={},I=[],w=I.slice,E={}.hasOwnProperty;c=o(E,"undefined")||o(E.call,"undefined")?function(t,e){return e in t&&o(t.constructor.prototype[e],"undefined")}:function(t,e){return E.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=w.call(arguments,1),i=function(){if(this instanceof i){var o=function(){};o.prototype=e.prototype;var r=new o,s=e.apply(r,n.concat(w.call(arguments)));return Object(s)===s?s:r}return e.apply(t,n.concat(w.call(arguments)))};return i}),C.flexbox=function(){return l("flexWrap")},C.flexboxlegacy=function(){return l("boxDirection")};for(var S in C)c(C,S)&&(u=S.toLowerCase(),p[u]=C[S](),I.push((p[u]?"":"no-")+u));return p.addTest=function(t,e){if("object"==typeof t)for(var i in t)c(t,i)&&p.addTest(i,t[i]);else{if(t=t.toLowerCase(),p[t]!==n)return p;e="function"==typeof e?e():e,"undefined"!=typeof f&&f&&(m.className+=" "+(e?"":"no-")+t),p[t]=e}return p},i(""),g=h=null,p._version=d,p._domPrefixes=k,p._cssomPrefixes=b,p.testProp=function(t){return s([t])},p.testAllProps=l,m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+I.join(" "):""),p}(this,this.document),function(t,e){function n(t,e){var n=t.createElement("p"),i=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var t=I.elements;return"string"==typeof t?t.split(" "):t}function o(t){var e=C[t[b]];return e||(e={},k++,t[b]=k,C[k]=e),e}function r(t,n,i){if(n||(n=e),m)return n.createElement(t);i||(i=o(n));var r;return r=i.cache[t]?i.cache[t].cloneNode():y.test(t)?(i.cache[t]=i.createElem(t)).cloneNode():i.createElem(t),!r.canHaveChildren||v.test(t)||r.tagUrn?r:i.frag.appendChild(r)}function s(t,n){if(t||(t=e),m)return t.createDocumentFragment();n=n||o(t);for(var r=n.frag.cloneNode(),s=0,a=i(),l=a.length;l>s;s++)r.createElement(a[s]);return r}function a(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return I.shivMethods?r(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/\w+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(I,e.frag)}function l(t){t||(t=e);var i=o(t);return I.shivCSS&&!f&&!i.hasCSS&&(i.hasCSS=!!n(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),m||a(t,i),t}function h(t){for(var e,n=t.getElementsByTagName("*"),o=n.length,r=RegExp("^(?:"+i().join("|")+")$","i"),s=[];o--;)e=n[o],r.test(e.nodeName)&&s.push(e.applyElement(u(e)));return s}function u(t){for(var e,n=t.attributes,i=n.length,o=t.ownerDocument.createElement(E+":"+t.nodeName);i--;)e=n[i],e.specified&&o.setAttribute(e.nodeName,e.nodeValue);return o.style.cssText=t.style.cssText,o}function c(t){for(var e,n=t.split("{"),o=n.length,r=RegExp("(^|[\\s,>+~])("+i().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),s="$1"+E+"\\:$2";o--;)e=n[o]=n[o].split("}"),e[e.length-1]=e[e.length-1].replace(r,s),n[o]=e.join("}");return n.join("{")}function d(t){for(var e=t.length;e--;)t[e].removeNode()}function p(t){function e(){clearTimeout(s._removeSheetTimer),i&&i.removeNode(!0),i=null}var i,r,s=o(t),a=t.namespaces,l=t.parentWindow;return!S||t.printShived?t:("undefined"==typeof a[E]&&a.add(E),l.attachEvent("onbeforeprint",function(){e();for(var o,s,a,l=t.styleSheets,u=[],d=l.length,p=Array(d);d--;)p[d]=l[d];for(;a=p.pop();)if(!a.disabled&&w.test(a.media)){try{o=a.imports,s=o.length}catch(f){s=0}for(d=0;s>d;d++)p.push(o[d]);try{u.push(a.cssText)}catch(f){}}u=c(u.reverse().join("")),r=h(t),i=n(t,u)}),l.attachEvent("onafterprint",function(){d(r),clearTimeout(s._removeSheetTimer),s._removeSheetTimer=setTimeout(e,500)}),t.printShived=!0,t)}var f,m,_="3.7.0",g=t.html5||{},v=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,y=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,b="_html5shiv",k=0,C={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",f="hidden"in t,m=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(n){f=!0,m=!0}}();var I={elements:g.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:_,shivCSS:g.shivCSS!==!1,supportsUnknownElements:m,shivMethods:g.shivMethods!==!1,type:"default",shivDocument:l,createElement:r,createDocumentFragment:s};t.html5=I,l(e);var w=/^$|\b(?:all|print)\b/,E="html5shiv",S=!m&&function(){var n=e.documentElement;return"undefined"!=typeof e.namespaces&&"undefined"!=typeof e.parentWindow&&"undefined"!=typeof n.applyElement&&"undefined"!=typeof n.removeNode&&"undefined"!=typeof t.attachEvent}();I.type+=" print",I.shivPrint=p,p(e)}(this,document),function(t,e,n){function i(t){return"[object Function]"==_.call(t)}function o(t){return"string"==typeof t}function r(){}function s(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function a(){var t=g.shift();v=1,t?t.t?f(function(){("c"==t.t?d.injectCss:d.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),a()):v=0}function l(t,n,i,o,r,l,h){function u(e){if(!p&&s(c.readyState)&&(y.r=p=1,!v&&a(),c.onload=c.onreadystatechange=null,e)){"img"!=t&&f(function(){k.removeChild(c)},50);for(var i in S[n])S[n].hasOwnProperty(i)&&S[n][i].onload()}}var h=h||d.errorTimeout,c=e.createElement(t),p=0,_=0,y={t:i,s:n,e:r,a:l,x:h};1===S[n]&&(_=1,S[n]=[]),"object"==t?c.data=n:(c.src=n,c.type=t),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){u.call(this,_)},g.splice(o,0,y),"img"!=t&&(_||2===S[n]?(k.insertBefore(c,b?null:m),f(u,h)):S[n].push(c))}function h(t,e,n,i,r){return v=0,e=e||"j",o(t)?l("c"==e?I:C,t,e,this.i++,n,i,r):(g.splice(this.i++,0,t),1==g.length&&a()),this}function u(){var t=d;return t.loader={load:h,i:0},t}var c,d,p=e.documentElement,f=t.setTimeout,m=e.getElementsByTagName("script")[0],_={}.toString,g=[],v=0,y="MozAppearance"in p.style,b=y&&!!e.createRange().compareNode,k=b?p:m.parentNode,p=t.opera&&"[object Opera]"==_.call(t.opera),p=!!e.attachEvent&&!p,C=y?"object":p?"script":"img",I=p?"script":C,w=Array.isArray||function(t){return"[object Array]"==_.call(t)},E=[],S={},x={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};d=function(t){function e(t){var e,n,i,t=t.split("!"),o=E.length,r=t.pop(),s=t.length,r={url:r,origUrl:r,prefixes:t};for(n=0;s>n;n++)i=t[n].split("="),(e=x[i.shift()])&&(r=e(r,i));for(n=0;o>n;n++)r=E[n](r);return r}function s(t,o,r,s,a){var l=e(t),h=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(o&&(o=i(o)?o:o[t]||o[s]||o[t.split("/").pop().split("?")[0]]),l.instead?l.instead(t,o,r,s,a):(S[l.url]?l.noexec=!0:S[l.url]=1,r.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(i(o)||i(h))&&r.load(function(){u(),o&&o(l.origUrl,a,s),h&&h(l.origUrl,a,s),S[l.url]=2})))}function a(t,e){function n(t,n){if(t){if(o(t))n||(c=function(){var t=[].slice.call(arguments);d.apply(this,t),p()}),s(t,c,e,0,h);else if(Object(t)===t)for(l in a=function(){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n}(),t)t.hasOwnProperty(l)&&(!n&&!--a&&(i(c)?c=function(){var t=[].slice.call(arguments);d.apply(this,t),p()}:c[l]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),p()}}(d[l])),s(t[l],c,e,l,h))}else!n&&p()}var a,l,h=!!t.test,u=t.load||t.both,c=t.callback||r,d=c,p=t.complete||r;n(h?t.yep:t.nope,!!u),u&&n(u)}var l,h,c=this.yepnope.loader;if(o(t))s(t,0,c,0);else if(w(t))for(l=0;l<t.length;l++)h=t[l],o(h)?s(h,0,c,0):w(h)?d(h):Object(h)===h&&a(h,c);else Object(t)===t&&a(t,c)},d.addPrefix=function(t,e){x[t]=e},d.addFilter=function(t){E.push(t)},d.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",c=function(){e.removeEventListener("DOMContentLoaded",c,0),e.readyState="complete"},0)),t.yepnope=u(),t.yepnope.executeStack=a,t.yepnope.injectJs=function(t,n,i,o,l,h){var u,c,p=e.createElement("script"),o=o||d.errorTimeout;p.src=t;for(c in i)p.setAttribute(c,i[c]);n=h?a:n||r,p.onreadystatechange=p.onload=function(){!u&&s(p.readyState)&&(u=1,n(),p.onload=p.onreadystatechange=null)},f(function(){u||(u=1,n(1))},o),l?p.onload():m.parentNode.insertBefore(p,m)},t.yepnope.injectCss=function(t,n,i,o,s,l){var h,o=e.createElement("link"),n=l?a:n||r;o.href=t,o.rel="stylesheet",o.type="text/css";for(h in i)o.setAttribute(h,i[h]);s||(m.parentNode.insertBefore(o,m),f(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};var q=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function t(t){function e(t){var e=t.charCodeAt(0);if(92!==e)return e;var n=t.charAt(1);return(e=c[n])?e:n>="0"&&"7">=n?parseInt(t.substring(1),8):"u"===n||"x"===n?parseInt(t.substring(2),16):t.charCodeAt(1)}function n(t){return 32>t?(16>t?"\\x0":"\\x")+t.toString(16):(t=String.fromCharCode(t),("\\"===t||"-"===t||"["===t||"]"===t)&&(t="\\"+t),t)}function i(t){for(var i=t.substring(1,t.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),t=[],o=[],r="^"===i[0],s=r?1:0,a=i.length;a>s;++s){var l=i[s];if(/\\[bdsw]/i.test(l))t.push(l);else{var h,l=e(l);a>s+2&&"-"===i[s+1]?(h=e(i[s+2]),s+=2):h=l,o.push([l,h]),65>h||l>122||(65>h||l>90||o.push([32|Math.max(65,l),32|Math.min(h,90)]),97>h||l>122||o.push([-33&Math.max(97,l),-33&Math.min(h,122)]))}}for(o.sort(function(t,e){return t[0]-e[0]||e[1]-t[1]}),i=[],l=[0/0,0/0],s=0;s<o.length;++s)a=o[s],a[0]<=l[1]+1?l[1]=Math.max(l[1],a[1]):i.push(l=a);for(o=["["],r&&o.push("^"),o.push.apply(o,t),s=0;s<i.length;++s)a=i[s],o.push(n(a[0])),a[1]>a[0]&&(a[1]+1>a[0]&&o.push("-"),o.push(n(a[1])));return o.push("]"),o.join("")}function o(t){for(var e=t.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),n=e.length,o=[],a=0,l=0;n>a;++a){var h=e[a];"("===h?++l:"\\"===h.charAt(0)&&(h=+h.substring(1))&&l>=h&&(o[h]=-1)}for(a=1;a<o.length;++a)-1===o[a]&&(o[a]=++r);for(l=a=0;n>a;++a)h=e[a],"("===h?(++l,void 0===o[l]&&(e[a]="(?:")):"\\"===h.charAt(0)&&(h=+h.substring(1))&&l>=h&&(e[a]="\\"+o[l]);for(l=a=0;n>a;++a)"^"===e[a]&&"^"!==e[a+1]&&(e[a]="");if(t.ignoreCase&&s)for(a=0;n>a;++a)h=e[a],t=h.charAt(0),h.length>=2&&"["===t?e[a]=i(h):"\\"!==t&&(e[a]=h.replace(/[A-Za-z]/g,function(t){return t=t.charCodeAt(0),"["+String.fromCharCode(-33&t,32|t)+"]"}));return e.join("")}for(var r=0,s=!1,a=!1,l=0,h=t.length;h>l;++l){var u=t[l];if(u.ignoreCase)a=!0;else if(/[a-z]/i.test(u.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){s=!0,a=!1;break}}for(var c={b:8,t:9,n:10,v:11,f:12,r:13},d=[],l=0,h=t.length;h>l;++l){if(u=t[l],u.global||u.multiline)throw Error(""+u);d.push("(?:"+o(u)+")")}return RegExp(d.join("|"),a?"gi":"g")}function e(t){function e(t){switch(t.nodeType){case 1:if(i.test(t.className))break;for(var n=t.firstChild;n;n=n.nextSibling)e(n);n=t.nodeName,("BR"===n||"LI"===n)&&(o[a]="\n",s[a<<1]=r++,s[a++<<1|1]=t);break;case 3:case 4:n=t.nodeValue,n.length&&(n=l?n.replace(/\r\n?/g,"\n"):n.replace(/[\t\n\r ]+/g," "),o[a]=n,s[a<<1]=r,r+=n.length,s[a++<<1|1]=t)}}var n,i=/(?:^|\s)nocode(?:\s|$)/,o=[],r=0,s=[],a=0;t.currentStyle?n=t.currentStyle.whiteSpace:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(t,q).getPropertyValue("white-space"));var l=n&&"pre"===n.substring(0,3);return e(t),{a:o.join("").replace(/\n$/,""),c:s}}function n(t,e,n,i){e&&(t={a:e,d:t},n(t),i.push.apply(i,t.e))}function i(e,i){function o(t){for(var e=t.d,h=[e,"pln"],u=0,c=t.a.match(r)||[],d={},p=0,f=c.length;f>p;++p){var m,_=c[p],g=d[_],v=void 0;if("string"==typeof g)m=!1;else{var y=s[_.charAt(0)];if(y)v=_.match(y[1]),g=y[0];else{for(m=0;l>m;++m)if(y=i[m],v=_.match(y[1])){g=y[0];break}v||(g="pln")}!(m=g.length>=5&&"lang-"===g.substring(0,5))||v&&"string"==typeof v[1]||(m=!1,g="src"),m||(d[_]=g)}if(y=u,u+=_.length,m){m=v[1];var b=_.indexOf(m),k=b+m.length;v[2]&&(k=_.length-v[2].length,b=k-m.length),g=g.substring(5),n(e+y,_.substring(0,b),o,h),n(e+y+b,m,a(g,m),h),n(e+y+k,_.substring(k),o,h)}else h.push(e+y,g)}t.e=h}var r,s={};!function(){for(var n=e.concat(i),o=[],a={},l=0,h=n.length;h>l;++l){var u=n[l],c=u[3];if(c)for(var d=c.length;--d>=0;)s[c.charAt(d)]=u;u=u[1],c=""+u,a.hasOwnProperty(c)||(o.push(u),a[c]=q)}o.push(/[\S\s]/),r=t(o)}();var l=i.length;return o}function o(t){var e=[],n=[];e.push(t.tripleQuotedStrings?["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]:t.multiLineStrings?["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,q,"'\"`"]:["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]),t.verbatimStrings&&n.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var o=t.hashComments;return o&&(t.cStyleComments?(e.push(o>1?["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]:["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),n.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,q])):e.push(["com",/^#[^\n\r]*/,q,"#"])),t.cStyleComments&&(n.push(["com",/^\/\/[^\n\r]*/,q]),n.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q])),t.regexLiterals&&n.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]),(o=t.types)&&n.push(["typ",o]),t=(""+t.keywords).replace(/^ | $/g,""),t.length&&n.push(["kwd",RegExp("^(?:"+t.replace(/[\s,]+/g,"|")+")\\b"),q]),e.push(["pln",/^\s+/,q," \r\n	\xa0"]),n.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,q],["pun",/^.[^\s\w"-$'./@\\`]*/,q]),i(e,n)}function r(t,e){function n(t){switch(t.nodeType){case 1:if(r.test(t.className))break;if("BR"===t.nodeName)i(t),t.parentNode&&t.parentNode.removeChild(t);else for(t=t.firstChild;t;t=t.nextSibling)n(t);break;case 3:case 4:if(l){var e=t.nodeValue,o=e.match(s);if(o){var h=e.substring(0,o.index);t.nodeValue=h,(e=e.substring(o.index+o[0].length))&&t.parentNode.insertBefore(a.createTextNode(e),t.nextSibling),i(t),h||t.parentNode.removeChild(t)}}}}function i(t){function e(t,n){var i=n?t.cloneNode(!1):t,o=t.parentNode;if(o){var o=e(o,1),r=t.nextSibling;o.appendChild(i);for(var s=r;s;s=r)r=s.nextSibling,o.appendChild(s)}return i}for(;!t.nextSibling;)if(t=t.parentNode,!t)return;for(var n,t=e(t.nextSibling,0);(n=t.parentNode)&&1===n.nodeType;)t=n;h.push(t)}var o,r=/(?:^|\s)nocode(?:\s|$)/,s=/\r\n?|\n/,a=t.ownerDocument;t.currentStyle?o=t.currentStyle.whiteSpace:window.getComputedStyle&&(o=a.defaultView.getComputedStyle(t,q).getPropertyValue("white-space"));var l=o&&"pre"===o.substring(0,3);for(o=a.createElement("LI");t.firstChild;)o.appendChild(t.firstChild);for(var h=[o],u=0;u<h.length;++u)n(h[u]);e===(0|e)&&h[0].setAttribute("value",e);var c=a.createElement("OL");c.className="linenums";for(var d=Math.max(0,e-1|0)||0,u=0,p=h.length;p>u;++u)o=h[u],o.className="L"+(u+d)%10,o.firstChild||o.appendChild(a.createTextNode("\xa0")),c.appendChild(o);t.appendChild(c)}function s(t,e){for(var n=e.length;--n>=0;){var i=e[n];y.hasOwnProperty(i)?window.console&&console.warn("cannot override language handler %s",i):y[i]=t}}function a(t,e){return t&&y.hasOwnProperty(t)||(t=/^\s*</.test(e)?"default-markup":"default-code"),y[t]}function l(t){var n=t.g;try{var i=e(t.h),o=i.a;t.a=o,t.c=i.c,t.d=0,a(n,o)(t);var r=/\bMSIE\b/.test(navigator.userAgent),n=/\n/g,s=t.a,l=s.length,i=0,h=t.c,u=h.length,o=0,c=t.e,d=c.length,t=0;c[d]=l;var p,f;for(f=p=0;d>f;)c[f]!==c[f+2]?(c[p++]=c[f++],c[p++]=c[f++]):f+=2;for(d=p,f=p=0;d>f;){for(var m=c[f],_=c[f+1],g=f+2;d>=g+2&&c[g+1]===_;)g+=2;c[p++]=m,c[p++]=_,f=g}for(c.length=p;u>o;){var v,y=h[o+2]||l,b=c[t+2]||l,g=Math.min(y,b),k=h[o+1];if(1!==k.nodeType&&(v=s.substring(i,g))){r&&(v=v.replace(n,"\r")),k.nodeValue=v;var C=k.ownerDocument,I=C.createElement("SPAN");I.className=c[t+1];var w=k.parentNode;w.replaceChild(I,k),I.appendChild(k),y>i&&(h[o+1]=k=C.createTextNode(s.substring(g,y)),w.insertBefore(k,I.nextSibling))}i=g,i>=y&&(o+=2),i>=b&&(t+=2)}}catch(E){"console"in window&&console.log(E&&E.stack?E.stack:E)}}var h=["break,continue,do,else,for,if,return,while"],u=[[h,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],c=[u,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],d=[u,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],p=[d,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],u=[u,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],f=[h,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],m=[h,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],h=[h,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],_=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,g=/\S/,v=o({keywords:[c,p,u,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+f,m,h],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),y={};s(v,["default-code"]),s(i([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),s(i([["pln",/^\s+/,q," 	\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),s(i([],[["atv",/^[\S\s]+/]]),["uq.val"]),s(o({keywords:c,hashComments:!0,cStyleComments:!0,types:_}),["c","cc","cpp","cxx","cyc","m"]),s(o({keywords:"null,true,false"}),["json"]),s(o({keywords:p,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:_}),["cs"]),s(o({keywords:d,cStyleComments:!0}),["java"]),s(o({keywords:h,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),s(o({keywords:f,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),s(o({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),s(o({keywords:m,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),s(o({keywords:u,cStyleComments:!0,regexLiterals:!0}),["js"]),s(o({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),s(i([],[["str",/^[\S\s]+/]]),["regex"]),window.prettyPrintOne=function(t,e,n){var i=document.createElement("PRE");
return i.innerHTML=t,n&&r(i,n),l({g:e,i:n,h:i}),i.innerHTML},window.prettyPrint=function(t){function e(){for(var n=window.PR_SHOULD_USE_CONTINUATION?h.now()+250:1/0;c<i.length&&h.now()<n;c++){var o=i[c],s=o.className;if(s.indexOf("prettyprint")>=0){var a,p,s=s.match(d);if(p=!s){p=o;for(var f=void 0,m=p.firstChild;m;m=m.nextSibling)var _=m.nodeType,f=1===_?f?p:m:3===_&&g.test(m.nodeValue)?p:f;p=(a=f===p?void 0:f)&&"CODE"===a.tagName}for(p&&(s=a.className.match(d)),s&&(s=s[1]),p=!1,f=o.parentNode;f;f=f.parentNode)if(("pre"===f.tagName||"code"===f.tagName||"xmp"===f.tagName)&&f.className&&f.className.indexOf("prettyprint")>=0){p=!0;break}p||((p=(p=o.className.match(/\blinenums\b(?::(\d+))?/))?p[1]&&p[1].length?+p[1]:!0:!1)&&r(o,p),u={g:s,h:o,i:p},l(u))}}c<i.length?setTimeout(e,250):t&&t()}for(var n=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],i=[],o=0;o<n.length;++o)for(var s=0,a=n[o].length;a>s;++s)i.push(n[o][s]);var n=q,h=Date;h.now||(h={now:function(){return+new Date}});var u,c=0,d=/\blang(?:uage)?-([\w.]+)(?!\S)/;e()},window.PR={createSimpleLexer:i,registerLangHandler:s,sourceDecorator:o,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}}();